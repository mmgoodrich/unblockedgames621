/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function k(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function Yk(a){return a instanceof Array?function(){return S.iter(a)}:"function"==typeof a.iterator?m(a,a.iterator):a.iterator}function m(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=Ql++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,
arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}var g={},r=function(){return pa.__string_rec(this,"")},Nb=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};g.EReg=Nb;Nb.__name__=["EReg"];Nb.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched";},matchedPos:function(){if(null==this.r.m)throw"No string matched";
return{pos:this.r.m.index,len:this.r.m[0].length}},replace:function(a,b){return a.replace(this.r,b)},__class__:Nb};var S=function(){};g.HxOverrides=S;S.__name__=["HxOverrides"];S.dateStr=function(a){var b=a.getMonth()+1,c=a.getDate(),d=a.getHours(),e=a.getMinutes(),h=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>c?"0"+c:""+c)+" "+(10>d?"0"+d:""+d)+":"+(10>e?"0"+e:""+e)+":"+(10>h?"0"+h:""+h)};S.strDate=function(a){switch(a.length){case 8:var a=a.split(":"),b=new Date;b.setTime(0);
b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return b=a.split(" "),a=b[0].split("-"),b=b[1].split(":"),new Date(a[0],a[1]-1,a[2],b[0],b[1],b[2]);default:throw"Invalid date format : "+a;}};S.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};S.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";null==c&&(c=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b);return a.substr(b,
c)};S.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0};S.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Ce=function(){};g.Lambda=Ce;Ce.__name__=["Lambda"];Ce.array=function(a){for(var b=[],a=Yk(a)();a.hasNext();){var c=a.next();b.push(c)}return b};Ce.exists=function(a,b){for(var c=Yk(a)();c.hasNext();){var d=c.next();if(b(d))return!0}return!1};Ce.count=function(a,b){var c=0;
if(null==b)for(var d=Yk(a)();d.hasNext();)d.next(),c++;else for(d=Yk(a)();d.hasNext();){var e=d.next();b(e)&&c++}return c};var me=function(){this.length=0};g.List=me;me.__name__=["List"];me.prototype={add:function(a){a=[a];null==this.h?this.h=a:this.q[1]=a;this.q=a;this.length++},push:function(a){this.h=a=[a,this.h];null==this.q&&(this.q=a);this.length++},iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var a=this.h[0];this.h=
this.h[1];return a}}},__class__:me};var Ue=function(){};g.IMap=Ue;Ue.__name__=["IMap"];Ue.prototype={__class__:Ue};Math.__name__=["Math"];var B=function(){};g.Reflect=B;B.__name__=["Reflect"];B.field=function(a,b){try{return a[b]}catch(c){return null}};B.setField=function(a,b,c){a[b]=c};B.getProperty=function(a,b){var c;return null==a?null:a.__properties__&&(c=a.__properties__["get_"+b])?a[c]():a[b]};B.setProperty=function(a,b,c){var d;if(a.__properties__&&(d=a.__properties__["set_"+b]))a[d](c);else a[b]=
c};B.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b};B.isFunction=function(a){return"function"==typeof a&&!(a.__name__||a.__ename__)};B.compare=function(a,b){return a==b?0:a>b?1:-1};B.isEnumValue=function(a){return null!=a&&null!=a.__enum__};B.deleteField=function(a,b){if(!Object.prototype.hasOwnProperty.call(a,b))return!1;delete a[b];return!0};var G=function(){};g.Std=G;G.__name__=["Std"];
G.is=function(a,b){return pa.__instanceof(a,b)};G.instance=function(a,b){return a instanceof b?a:null};G.string=function(a){return pa.__string_rec(a,"")};G["int"]=function(a){return a|0};G.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==S.cca(a,1)||88==S.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};G.parseFloat=function(a){return parseFloat(a)};var De=function(){this.b=""};g.StringBuf=De;De.__name__=["StringBuf"];De.prototype={add:function(a){this.b+=G.string(a)},addSub:function(a,b,c){this.b=
null==c?this.b+S.substr(a,b,null):this.b+S.substr(a,b,c)},__class__:De};var fa=function(){};g.StringTools=fa;fa.__name__=["StringTools"];fa.startsWith=function(a,b){return a.length>=b.length&&S.substr(a,0,b.length)==b};fa.isSpace=function(a,b){var c=S.cca(a,b);return 8<c&&14>c||32==c};fa.ltrim=function(a){for(var b=a.length,c=0;c<b&&fa.isSpace(a,c);)c++;return 0<c?S.substr(a,c,b-c):a};fa.rtrim=function(a){for(var b=a.length,c=0;c<b&&fa.isSpace(a,b-c-1);)c++;return 0<c?S.substr(a,0,b-c):a};fa.trim=
function(a){return fa.ltrim(fa.rtrim(a))};fa.lpad=function(a,b,c){if(0>=b.length)return a;for(;a.length<c;)a=b+a;return a};fa.replace=function(a,b,c){return a.split(b).join(c)};fa.fastCodeAt=function(a,b){return a.charCodeAt(b)};var P=g.ValueType={__ename__:["ValueType"],__constructs__:"TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(",")};P.TNull=["TNull",0];P.TNull.toString=r;P.TNull.__enum__=P;P.TInt=["TInt",1];P.TInt.toString=r;P.TInt.__enum__=P;P.TFloat=["TFloat",2];P.TFloat.toString=
r;P.TFloat.__enum__=P;P.TBool=["TBool",3];P.TBool.toString=r;P.TBool.__enum__=P;P.TObject=["TObject",4];P.TObject.toString=r;P.TObject.__enum__=P;P.TFunction=["TFunction",5];P.TFunction.toString=r;P.TFunction.__enum__=P;P.TClass=function(a){a=["TClass",6,a];a.__enum__=P;a.toString=r;return a};P.TEnum=function(a){a=["TEnum",7,a];a.__enum__=P;a.toString=r;return a};P.TUnknown=["TUnknown",8];P.TUnknown.toString=r;P.TUnknown.__enum__=P;var ra=function(){};g.Type=ra;ra.__name__=["Type"];ra.getClass=function(a){return null==
a?null:a instanceof Array&&null==a.__enum__?Array:a.__class__};ra.getClassName=function(a){return a.__name__.join(".")};ra.getEnumName=function(a){return a.__ename__.join(".")};ra.resolveClass=function(a){a=g[a];return null==a||!a.__name__?null:a};ra.resolveEnum=function(a){a=g[a];return null==a||!a.__ename__?null:a};ra.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],
b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw"Too many arguments";}};ra.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};ra.createEnum=function(a,b,c){var d=B.field(a,b);if(null==d)throw"No such constructor "+b;if(B.isFunction(d)){if(null==c)throw"Constructor "+b+" need parameters";
return d.apply(a,c)}if(null!=c&&0!=c.length)throw"Constructor "+b+" does not need parameters";return d};ra.getEnumConstructs=function(a){return a.__constructs__.slice()};ra["typeof"]=function(a){switch(typeof a){case "boolean":return P.TBool;case "string":return P.TClass(String);case "number":return Math.ceil(a)==a%2147483648?P.TInt:P.TFloat;case "object":if(null==a)return P.TNull;var b=a.__enum__;if(null!=b)return P.TEnum(b);a=a instanceof Array&&null==a.__enum__?Array:a.__class__;return null!=a?
P.TClass(a):P.TObject;case "function":return a.__name__||a.__ename__?P.TObject:P.TFunction;case "undefined":return P.TNull;default:return P.TUnknown}};ra.enumEq=function(a,b){if(a==b)return!0;try{if(a[0]!=b[0])return!1;for(var c=2,d=a.length;c<d;){var e=c++;if(!ra.enumEq(a[e],b[e]))return!1}var h=a.__enum__;if(h!=b.__enum__||null==h)return!1}catch(n){return!1}return!0};ra.enumIndex=function(a){return a[1]};g.XmlType={__ename__:["XmlType"],__constructs__:[]};var T=function(){};g.Xml=T;T.__name__=["Xml"];
T.parse=function(a){return ne.parse(a)};T.createElement=function(a){var b=new T;b.nodeType=T.Element;b._children=[];b._attributes=new K;b.set_nodeName(a);return b};T.createPCData=function(a){var b=new T;b.nodeType=T.PCData;b.set_nodeValue(a);return b};T.createCData=function(a){var b=new T;b.nodeType=T.CData;b.set_nodeValue(a);return b};T.createComment=function(a){var b=new T;b.nodeType=T.Comment;b.set_nodeValue(a);return b};T.createDocType=function(a){var b=new T;b.nodeType=T.DocType;b.set_nodeValue(a);
return b};T.createProcessingInstruction=function(a){var b=new T;b.nodeType=T.ProcessingInstruction;b.set_nodeValue(a);return b};T.createDocument=function(){var a=new T;a.nodeType=T.Document;a._children=[];return a};T.prototype={get_nodeName:function(){if(this.nodeType!=T.Element)throw"bad nodeType";return this._nodeName},set_nodeName:function(a){if(this.nodeType!=T.Element)throw"bad nodeType";return this._nodeName=a},get_nodeValue:function(){if(this.nodeType==T.Element||this.nodeType==T.Document)throw"bad nodeType";
return this._nodeValue},set_nodeValue:function(a){if(this.nodeType==T.Element||this.nodeType==T.Document)throw"bad nodeType";return this._nodeValue=a},get:function(a){if(this.nodeType!=T.Element)throw"bad nodeType";return this._attributes.get(a)},set:function(a,b){if(this.nodeType!=T.Element)throw"bad nodeType";this._attributes.set(a,b)},exists:function(a){if(this.nodeType!=T.Element)throw"bad nodeType";return this._attributes.exists(a)},iterator:function(){if(null==this._children)throw"bad nodetype";
return{cur:0,x:this._children,hasNext:function(){return this.cur<this.x.length},next:function(){return this.x[this.cur++]}}},elements:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var a=this.cur,b=this.x.length;a<b&&!(this.x[a].nodeType==T.Element);)a+=1;this.cur=a;return a<b},next:function(){for(var a=this.cur,b=this.x.length;a<b;){var c=this.x[a],a=a+1;if(c.nodeType==T.Element)return this.cur=a,c}return null}}},elementsNamed:function(a){if(null==
this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var b=this.cur,c=this.x.length;b<c;){var d=this.x[b];if(d.nodeType==T.Element&&d._nodeName==a)break;b++}this.cur=b;return b<c},next:function(){for(var b=this.cur,c=this.x.length;b<c;){var d=this.x[b];b++;if(d.nodeType==T.Element&&d._nodeName==a)return this.cur=b,d}return null}}},firstElement:function(){if(null==this._children)throw"bad nodetype";for(var a=0,b=this._children.length;a<b;){var c=this._children[a];
if(c.nodeType==T.Element)return c;a++}return null},addChild:function(a){if(null==this._children)throw"bad nodetype";null!=a._parent&&S.remove(a._parent._children,a);a._parent=this;this._children.push(a)},__class__:T,__properties__:{set_nodeValue:"set_nodeValue",get_nodeValue:"get_nodeValue",set_nodeName:"set_nodeName",get_nodeName:"get_nodeName"}};var tc=function(){};g["flambe.util.Disposable"]=tc;tc.__name__=["flambe","util","Disposable"];tc.prototype={__class__:tc};var j=function(){this._flags=
0;this.owner=this.next=null};g["flambe.Component"]=j;j.__name__=["flambe","Component"];j.__interfaces__=[tc];j.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},onStop:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},__class__:j,__properties__:{get_name:"get_name"}};var uc=function(){j.call(this);this._disposables=[]};g["flambe.Disposer"]=uc;uc.__name__=["flambe","Disposer"];uc.__super__=j;uc.prototype=
k(j.prototype,{get_name:function(){return"Disposer_28"},add:function(a){this._disposables.push(a);return this},connect0:function(a,b){this.add(a.connect(b));return this},connect1:function(a,b){this.add(a.connect(b));return this},onRemoved:function(){this.freeDisposables()},dispose:function(){j.prototype.dispose.call(this);this.freeDisposables()},freeDisposables:function(){var a=this._disposables;this._disposables=[];for(var b=0;b<a.length;){var c=a[b];++b;c.dispose()}},__class__:uc});var z=function(){this.parent=
this.firstChild=this.next=this.firstComponent=null;this._compMap={}};g["flambe.Entity"]=z;z.__name__=["flambe","Entity"];z.__interfaces__=[tc];z.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),c=this._compMap[b];null!=c&&this.remove(c);this._compMap[b]=a;b=null;for(c=this.firstComponent;null!=c;)b=c,c=c.next;null!=b?b.next=a:this.firstComponent=a;a.owner=this;a.next=null;a.onAdded();return this},remove:function(a){for(var b=null,c=this.firstComponent;null!=c;){var d=
c.next;if(c==a)return null==b?this.firstComponent=d:(b.owner=this,b.next=d),delete this._compMap[c.get_name()],0!=(c._flags&1)&&(c.onStop(),c._flags&=-2),c.onRemoved(),c.owner=null,c.next=null,!0;b=c;c=d}return!1},getComponent:function(a){return this._compMap[a]},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var c=null,d=this.firstChild;null!=d;)c=d,d=d.next;null!=c?c.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},
removeChild:function(a){for(var b=null,c=this.firstChild;null!=c;){var d=c.next;if(c==a){null==b?this.firstChild=d:b.next=d;c.parent=null;c.next=null;break}b=c;c=d}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},_internal_getFromParents:function(a,b){var c=this;do{var d=c._compMap[a];null!=b&&!(d instanceof b)&&
(d=null);if(null!=d)return d;c=c.parent}while(null!=c);return null},_internal_getFromChildren:function(a,b){var c=this._compMap[a];null!=b&&!(c instanceof b)&&(c=null);if(null!=c)return c;for(c=this.firstChild;null!=c;){var d=c._internal_getFromChildren(a,b);if(null!=d)return d;c=c.next}return null},__class__:z};var Zk=function(){};g["flambe.util.PackageLog"]=Zk;Zk.__name__=["flambe","util","PackageLog"];var Ij=function(){};g["flambe.platform.Platform"]=Ij;Ij.__name__=["flambe","platform","Platform"];
Ij.prototype={__class__:Ij};var Zc=function(){};g["flambe.platform.html.HtmlPlatform"]=Zc;Zc.__name__=["flambe","platform","html","HtmlPlatform"];Zc.__interfaces__=[Ij];Zc.prototype={init:function(){var a=this;ka.fixAndroidMath();var b=null;try{b=window.flambe.canvas}catch(c){}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.style.webkitTapHighlightColor="transparent";b.setAttribute("moz-opaque","true");this._stage=new Af(b);this._pointer=new rb;this._mouse=new Rg(this._pointer,b);this._renderer=
this.createRenderer(b);this.mainLoop=new Ve;this.musicPlaying=!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var d=0,e=function(c){if(!(1E3>c.timeStamp-d)){var e=b.getBoundingClientRect(),h=a.getX(c,e),e=a.getY(c,e);switch(c.type){case "mousedown":c.target==b&&(c.preventDefault(),a._mouse.submitDown(h,e,c.button),b.focus());break;case "mousemove":a._mouse.submitMove(h,e);
break;case "mouseup":a._mouse.submitUp(h,e,c.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(h,e,"mousewheel"==c.type?c.wheelDelta/40:-c.detail)&&c.preventDefault()}}};window.addEventListener("mousedown",e,!1);window.addEventListener("mousemove",e,!1);window.addEventListener("mouseup",e,!1);b.addEventListener("mousewheel",e,!1);b.addEventListener("DOMMouseScroll",e,!1);b.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var h="undefined"!=typeof window.ontouchstart,
e="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(h||e){var n=new Sg(this._pointer,h?4:window.navigator.msMaxTouchPoints);this._touch=n;e=function(b){var c;c=h?b.changedTouches:[b];var e=b.target.getBoundingClientRect();d=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":case "pointerdown":b.preventDefault();ka.SHOULD_HIDE_MOBILE_BROWSER&&ka.hideMobileBrowser();for(b=0;b<c.length;){var f=c[b];++b;var Jj=a.getX(f,e),g=a.getY(f,e);n.submitDown((h?f.identifier:
f.pointerId)|0,Jj,g)}break;case "touchmove":case "MSPointerMove":case "pointermove":b.preventDefault();for(b=0;b<c.length;)f=c[b],++b,Jj=a.getX(f,e),g=a.getY(f,e),n.submitMove((h?f.identifier:f.pointerId)|0,Jj,g);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(b=0;b<c.length;)f=c[b],++b,Jj=a.getX(f,e),g=a.getY(f,e),n.submitUp((h?f.identifier:f.pointerId)|0,Jj,g)}};h?(b.addEventListener("touchstart",e,!1),b.addEventListener("touchmove",e,!1),b.addEventListener("touchend",
e,!1),b.addEventListener("touchcancel",e,!1)):(b.addEventListener("MSPointerDown",e,!1),b.addEventListener("MSPointerMove",e,!1),b.addEventListener("MSPointerUp",e,!1))}else this._touch=new Tg;var f=window.onerror;window.onerror=function(a,b,c){p.uncaughtError.emit(a);return null!=f?f(a,b,c):!1};var g=ka.loadExtension("hidden",window.document);null!=g.value?(e=function(){p.hidden.set__(B.field(window.document,g.field))},e(null),window.document.addEventListener(g.prefix+"visibilitychange",e,!1)):(e=
function(a){p.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",e,!1),window.addEventListener("pagehide",e,!1));p.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var i=ka.loadExtension("requestAnimationFrame").value;if(null!=i){var s=window.performance,j=null!=s&&ka.polyfill("now",s);j?this._lastUpdate=s.now():null;var k=null,k=function(c){a.update(j?s.now():c);i(k,b)};i(k,b)}else window.setInterval(function(){a.update(Date.now())},
16);Bf.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new ca(this,a)).promise},getStage:function(){return this._stage},getStorage:function(){if(null==this._storage){var a=Ug.getLocalStorage();this._storage=null!=a?new Vg(a):new Wg}return this._storage},getLocale:function(){var a=window.navigator.language;null==a&&(a=window.navigator.userLanguage);return a},getTime:function(){return Date.now()/1E3},update:function(a){var b=(a-this._lastUpdate)/
1E3;this._lastUpdate=a;p.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getMouse:function(){return this._mouse},getTouch:function(){return this._touch},getKeyboard:function(){var a=this;if(null==this._keyboard){this._keyboard=new $c;var b=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&b.preventDefault();break;case "keyup":a._keyboard.submitUp(b.keyCode)}};
this._canvas.addEventListener("keydown",b,!1);this._canvas.addEventListener("keyup",b,!1)}return this._keyboard},getWeb:function(){null==this._web&&(this._web=new Xg(this._container));return this._web},getExternal:function(){null==this._external&&(this._external=new Yg);return this._external},getRenderer:function(){return this._renderer},getX:function(a,b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getY:function(a,b){return(a.clientY-b.top)*this._stage.get_height()/b.height},createRenderer:function(a){try{var b=
$k.getContextWebGL(a,{alpha:!1,depth:!1,failIfMajorPerformanceCaveat:!0});if(null!=b)if(ka.detectSlowDriver(b))null;else return new Zg(this._stage,b)}catch(c){}return new We(a)},__class__:Zc};var $a=function(a,b){this._value=a;this._changed=null!=b?new ad(b):null};g["flambe.util.Value"]=$a;$a.__name__=["flambe","util","Value"];$a.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},get__:function(){return this._value},set__:function(a){var b=this._value;a!=
b&&(this._value=a,null!=this._changed&&this._changed.emit(a,b));return a},get_changed:function(){null==this._changed&&(this._changed=new ad);return this._changed},__class__:$a,__properties__:{get_changed:"get_changed",set__:"set__",get__:"get__"}};var Xe=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};g["flambe.util.SignalConnection"]=Xe;Xe.__name__=["flambe","util","SignalConnection"];Xe.__interfaces__=[tc];Xe.prototype={once:function(){this.stayInList=!1;return this},
dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:Xe};var sb=function(a){this._head=null!=a?new Xe(this,a):null;this._deferredTasks=null};g["flambe.util.SignalBase"]=sb;sb.__name__=["flambe","util","SignalBase"];sb.prototype={connectImpl:function(a,b){var c=this,d=new Xe(this,a);this._head==sb.DISPATCHING_SENTINEL?this.defer(function(){c.listAdd(d,b)}):this.listAdd(d,b);return d},disconnect:function(a){var b=this;this._head==sb.DISPATCHING_SENTINEL?
this.defer(function(){b.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var b=null,c=this._deferredTasks;null!=c;)b=c,c=c.next;a=new Kj(a);null!=b?b.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;this._head=sb.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),a=a.next},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var c=null,d=this._head;null!=d;)c=d,d=d._next;null!=
c?c._next=a:this._head=a}},listRemove:function(a){for(var b=null,c=this._head;null!=c;){if(c==a){a=c._next;null==b?this._head=a:b._next=a;break}b=c;c=c._next}},__class__:sb};var ad=function(a){sb.call(this,a)};g["flambe.util.Signal2"]=ad;ad.__name__=["flambe","util","Signal2"];ad.__super__=sb;ad.prototype=k(sb.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a,b){var c=this;this._head==sb.DISPATCHING_SENTINEL?this.defer(function(){c.emitImpl(a,b)}):this.emitImpl(a,
b)},emitImpl:function(a,b){for(var c=this.willEmit(),d=c;null!=d;)d._listener(a,b),d.stayInList||d.dispose(),d=d._next;this.didEmit(c)},__class__:ad});var Y=function(a){sb.call(this,a)};g["flambe.util.Signal1"]=Y;Y.__name__=["flambe","util","Signal1"];Y.__super__=sb;Y.prototype=k(sb.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a){var b=this;this._head==sb.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):this.emitImpl(a)},emitImpl:function(a){for(var b=
this.willEmit(),c=b;null!=c;)c._listener(a),c.stayInList||c.dispose(),c=c._next;this.didEmit(b)},__class__:Y});var O=function(a,b){this._behavior=null;$a.call(this,a,b)};g["flambe.animation.AnimatedFloat"]=O;O.__name__=["flambe","animation","AnimatedFloat"];O.__super__=$a;O.prototype=k($a.prototype,{set__:function(a){this._behavior=null;return $a.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&($a.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&
(this._behavior=null))},animateTo:function(a,b,c){this.set_behavior(new Cf(this._value,a,b,c))},set_behavior:function(a){this._behavior=a;this.update(0);return a},__class__:O,__properties__:k($a.prototype.__properties__,{set_behavior:"set_behavior"})});var p=function(){};g["flambe.System"]=p;p.__name__=["flambe","System"];p.init=function(){p._calledInit||(p._platform.init(),p._calledInit=!0)};var Bf=function(){};g["flambe.Log"]=Bf;Bf.__name__=["flambe","Log"];Bf.info=function(){null};Bf.__super__=
Zk;Bf.prototype=k(Zk.prototype,{__class__:Bf});var $g=function(a){null==a&&(a=1);this._realDt=0;j.call(this);this.scale=new O(a)};g["flambe.SpeedAdjuster"]=$g;$g.__name__=["flambe","SpeedAdjuster"];$g.__super__=j;$g.prototype=k(j.prototype,{get_name:function(){return"SpeedAdjuster_25"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:$g});var oe=function(){};g["flambe.animation.Behavior"]=oe;oe.__name__=["flambe","animation","Behavior"];oe.prototype=
{__class__:oe};var q=function(){};g["flambe.animation.Ease"]=q;q.__name__=["flambe","animation","Ease"];q.linear=function(a){return a};q.quadIn=function(a){return a*a};q.quadOut=function(a){return a*(2-a)};q.quadInOut=function(a){return 0.5>=a?2*a*a:1-2*--a*a};q.cubeOut=function(a){return 1+--a*a*a};q.quintIn=function(a){return a*a*a*a*a};q.quintOut=function(a){return(a-=1)*a*a*a*a+1};q.quintInOut=function(a){return 1>(a*=2)?a*a*a*a*a/2:((a-=2)*a*a*a*a+2)/2};q.sineIn=function(a){return 1-Math.cos(1.5707963267948966*
a)};q.sineOut=function(a){return Math.sin(1.5707963267948966*a)};q.sineInOut=function(a){return 0.5-Math.cos(3.141592653589793*a)/2};q.bounceIn=function(a){a=1-a;return 0.36363636363636365>a?1-7.5625*a*a:0.7272727272727273>a?1-(7.5625*(a-0.5454545454545454)*(a-0.5454545454545454)+0.75):0.9090909090909091>a?1-(7.5625*(a-0.8181818181818182)*(a-0.8181818181818182)+0.9375):1-(7.5625*(a-0.9545454545454546)*(a-0.9545454545454546)+0.984375)};q.bounceOut=function(a){return 0.36363636363636365>a?7.5625*a*
a:0.7272727272727273>a?7.5625*(a-0.5454545454545454)*(a-0.5454545454545454)+0.75:0.9090909090909091>a?7.5625*(a-0.8181818181818182)*(a-0.8181818181818182)+0.9375:7.5625*(a-0.9545454545454546)*(a-0.9545454545454546)+0.984375};q.backIn=function(a){return a*a*(2.70158*a-1.70158)};q.backOut=function(a){return 1- --a*a*(-2.70158*a-1.70158)};q.backInOut=function(a){a*=2;if(1>a)return a*a*(2.70158*a-1.70158)/2;a-=2;return(1-a*a*(-2.70158*a-1.70158))/2+0.5};q.elasticOut=function(a){return 1*Math.pow(2,-10*
a)*Math.sin(6.283185307179586*(a-0.06366197723675814*Math.asin(1))/0.4)+1};var Ye=function(a,b){this.base=a;this.strength=b};g["flambe.animation.Jitter"]=Ye;Ye.__name__=["flambe","animation","Jitter"];Ye.__interfaces__=[oe];Ye.prototype={update:function(){return this.base+2*Math.random()*this.strength-this.strength},isComplete:function(){return!1},__class__:Ye};var Ob=function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=0);null==c&&(c=1);this.start=a;this.end=b;this.cycles=d;this.speed=new O(c);this._count=
1.5707963267948966+e*(3.141592653589793/c);this._distance=0.5*(a-b);this._center=b+this._distance};g["flambe.animation.Sine"]=Ob;Ob.__name__=["flambe","animation","Sine"];Ob.__interfaces__=[oe];Ob.prototype={update:function(a){this.speed.update(a);this._count+=a*(3.141592653589793/this.speed._value);return this._center+Math.sin(this._count)*this._distance},isComplete:function(){return 0<this.cycles&&0.5*((this._count-1.5707963267948966)/3.141592653589793)>=this.cycles},__class__:Ob};var Cf=function(a,
b,c,d){this._from=a;this._to=b;this._duration=c;this.elapsed=0;this._easing=null!=d?d:q.linear};g["flambe.animation.Tween"]=Cf;Cf.__name__=["flambe","animation","Tween"];Cf.__interfaces__=[oe];Cf.prototype={update:function(a){this.elapsed+=a;return this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/this._duration)},isComplete:function(){return this.elapsed>=this._duration},__class__:Cf};var Ee=function(){};g["flambe.asset.Asset"]=Ee;Ee.__name__=["flambe",
"asset","Asset"];Ee.__interfaces__=[tc];Ee.prototype={__class__:Ee};var L=g["flambe.asset.AssetFormat"]={__ename__:["flambe","asset","AssetFormat"],__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(",")};L.WEBP=["WEBP",0];L.WEBP.toString=r;L.WEBP.__enum__=L;L.JXR=["JXR",1];L.JXR.toString=r;L.JXR.__enum__=L;L.PNG=["PNG",2];L.PNG.toString=r;L.PNG.__enum__=L;L.JPG=["JPG",3];L.JPG.toString=r;L.JPG.__enum__=L;L.GIF=["GIF",4];L.GIF.toString=r;L.GIF.__enum__=L;L.DDS=["DDS",
5];L.DDS.toString=r;L.DDS.__enum__=L;L.PVR=["PVR",6];L.PVR.toString=r;L.PVR.__enum__=L;L.PKM=["PKM",7];L.PKM.toString=r;L.PKM.__enum__=L;L.MP3=["MP3",8];L.MP3.toString=r;L.MP3.__enum__=L;L.M4A=["M4A",9];L.M4A.toString=r;L.M4A.__enum__=L;L.OPUS=["OPUS",10];L.OPUS.toString=r;L.OPUS.__enum__=L;L.OGG=["OGG",11];L.OGG.toString=r;L.OGG.__enum__=L;L.WAV=["WAV",12];L.WAV.toString=r;L.WAV.__enum__=L;L.Data=["Data",13];L.Data.toString=r;L.Data.__enum__=L;var Lj=function(a,b,c,d){this.name=a;this.url=b;this.format=
c;this.bytes=d};g["flambe.asset.AssetEntry"]=Lj;Lj.__name__=["flambe","asset","AssetEntry"];Lj.prototype={__class__:Lj};var ah=function(){};g["flambe.asset.AssetPack"]=ah;ah.__name__=["flambe","asset","AssetPack"];ah.__interfaces__=[tc];ah.prototype={__class__:ah};var bh=function(){};g["flambe.asset.File"]=bh;bh.__name__=["flambe","asset","File"];bh.__interfaces__=[Ee];bh.prototype={__class__:bh};var Aa=function(){this._localBase=this._remoteBase=null;this._entries=[]};g["flambe.asset.Manifest"]=
Aa;Aa.__name__=["flambe","asset","Manifest"];Aa.fromAssets=function(a,b){null==b&&(b=!0);var c=B.field(Mj.getType(Aa).assets[0],a);if(null==c){if(b)throw Ra.withFields("Missing asset pack",["name",a]);return null}var d=new Aa;d.set_localBase("assets");for(var e=0;e<c.length;){var h=c[e];++e;var n=h.name,f=a+"/"+n+"?v="+G.string(h.md5),g=Aa.inferFormat(n);g!=L.Data&&(n=Ra.removeFileExtension(n));d.add(n,f,h.bytes,g)}return d};Aa.fromAssetsLocalized=function(a,b,c){null==c&&(c=!0);null==b&&(b=p._platform.getLocale());
if(null!=b)for(b=b.split("-");0<b.length;){var d=Aa.fromAssets(a+"_"+b.join("-"),!1);if(null!=d)return d;b.pop()}return Aa.fromAssets(a,c)};Aa.exists=function(a){return Object.prototype.hasOwnProperty.call(Mj.getType(Aa).assets[0],a)};Aa.inferFormat=function(a){a=Ra.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return L.GIF;case "jpg":case "jpeg":return L.JPG;case "jxr":case "wdp":return L.JXR;case "png":return L.PNG;case "webp":return L.WEBP;case "dds":return L.DDS;case "pvr":return L.PVR;
case "pkm":return L.PKM;case "m4a":return L.M4A;case "mp3":return L.MP3;case "ogg":return L.OGG;case "opus":return L.OPUS;case "wav":return L.WAV}else null;return L.Data};Aa.prototype={add:function(a,b,c,d){null==c&&(c=0);null==d&&(d=Aa.inferFormat(b));a=new Lj(a,b,d,c);this._entries.push(a);return a},iterator:function(){return S.iter(this._entries)},getFullURL:function(a){var b;b=null!=this.get_remoteBase()&&Aa._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=b?Ra.joinPath(b,
a.url):a.url},get_localBase:function(){return this._localBase},set_localBase:function(a){null!=a&&Nj.that(!fa.startsWith(a,"http://")&&!fa.startsWith(a,"https://"),"localBase must be a path on the same domain, NOT starting with http(s)://",null);return this._localBase=a},get_remoteBase:function(){return this._remoteBase},set_remoteBase:function(a){null!=a&&Nj.that(fa.startsWith(a,"http://")||fa.startsWith(a,"https://"),"remoteBase must be on a remote domain, starting with http(s)://",null);return this._remoteBase=
a},__class__:Aa,__properties__:{set_remoteBase:"set_remoteBase",get_remoteBase:"get_remoteBase",set_localBase:"set_localBase",get_localBase:"get_localBase"}};var Sa=g["flambe.display.BlendMode"]={__ename__:["flambe","display","BlendMode"],__constructs__:"Normal,Add,Multiply,Screen,Mask,Copy".split(",")};Sa.Normal=["Normal",0];Sa.Normal.toString=r;Sa.Normal.__enum__=Sa;Sa.Add=["Add",1];Sa.Add.toString=r;Sa.Add.__enum__=Sa;Sa.Multiply=["Multiply",2];Sa.Multiply.toString=r;Sa.Multiply.__enum__=Sa;Sa.Screen=
["Screen",3];Sa.Screen.toString=r;Sa.Screen.__enum__=Sa;Sa.Mask=["Mask",4];Sa.Mask.toString=r;Sa.Mask.__enum__=Sa;Sa.Copy=["Copy",5];Sa.Copy.toString=r;Sa.Copy.__enum__=Sa;var cb=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};g["flambe.math.Point"]=cb;cb.__name__=["flambe","math","Point"];cb.prototype={set:function(a,b){this.x=a;this.y=b},__class__:cb};var D=function(){this._viewMatrixUpdateCount=this._parentViewMatrixUpdateCount=0;this.blendMode=this.scissor=this._viewMatrix=null;
var a=this;j.call(this);this._flags|=54;this._localMatrix=new bd;var b=function(){a._flags|=24};this.x=new O(0,b);this.y=new O(0,b);this.rotation=new O(0,b);this.scaleX=new O(1,b);this.scaleY=new O(1,b);this.anchorX=new O(0,b);this.anchorY=new O(0,b);this.alpha=new O(1)};g["flambe.display.Sprite"]=D;D.__name__=["flambe","display","Sprite"];D.hitTest=function(a,b,c){var d=a._compMap.Sprite_4;if(null!=d){if(6!=(d._flags&6))return null;d.getLocalMatrix().inverseTransform(b,c,D._scratchPoint)&&(b=D._scratchPoint.x,
c=D._scratchPoint.y);var e=d.scissor;if(null!=e&&!e.contains(b,c))return null}a=D.hitTestBackwards(a.firstChild,b,c);return null!=a?a:null!=d&&d.containsLocal(b,c)?d:null};D.getBounds=function(a,b){null==b&&(b=new Nc);b.set(1.79769313486231E308,1.79769313486231E308,-1.79769313486231E308,-1.79769313486231E308);D.getBoundsImpl(a,null,b);b.width-=b.x;b.height-=b.y;return b};D.render=function(a,b){var c=a._compMap.Sprite_4;if(null!=c){var d=c.alpha._value;if(0==(c._flags&2)||0>=d)return;b.save();1>d&&
b.multiplyAlpha(d);null!=c.blendMode&&b.setBlendMode(c.blendMode);var d=c.getLocalMatrix(),e=d.m02,h=d.m12;0!=(c._flags&32)&&(e=Math.round(e),h=Math.round(h));b.transform(d.m00,d.m10,d.m01,d.m11,e,h);d=c.scissor;null!=d&&b.applyScissor(d.x,d.y,d.width,d.height);c.draw(b)}d=a._compMap.Director_29;if(null!=d){d=d.occludedScenes;for(e=0;e<d.length;)h=d[e],++e,D.render(h,b)}for(d=a.firstChild;null!=d;)e=d.next,D.render(d,b),d=e;null!=c&&b.restore()};D.hitTestBackwards=function(a,b,c){if(null!=a){var d=
D.hitTestBackwards(a.next,b,c);return null!=d?d:D.hitTest(a,b,c)}return null};D.getBoundsImpl=function(a,b,c){var d=a._compMap.Sprite_4;if(null!=d){var b=null!=b?bd.multiply(b,d.getLocalMatrix()):d.getLocalMatrix(),e=d.getNaturalWidth(),d=d.getNaturalHeight();0<e&&0<d&&(D.extendRect(b,0,0,c),D.extendRect(b,e,0,c),D.extendRect(b,e,d,c),D.extendRect(b,0,d,c))}e=a._compMap.Director_29;if(null!=e)for(var e=e.occludedScenes,d=0,h=e.length;d<h;)D.getBoundsImpl(e[d],b,c),++d;for(a=a.firstChild;null!=a;)e=
a.next,D.getBoundsImpl(a,b,c),a=e};D.extendRect=function(a,b,c,d){a=a.transform(b,c,D._scratchPoint);b=a.x;c=a.y;b<d.x&&(d.x=b);c<d.y&&(d.y=c);b>d.width&&(d.width=b);c>d.height&&(d.height=c)};D.__super__=j;D.prototype=k(j.prototype,{get_name:function(){return"Sprite_4"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getLocalMatrix:function(){0!=(this._flags&8)&&(this._flags&=
-9,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},getViewMatrix:function(){if(this.isViewMatrixDirty()){var a=this.getParentSprite();this._viewMatrix=null!=a?bd.multiply(a.getViewMatrix(),this.getLocalMatrix(),this._viewMatrix):this.getLocalMatrix().clone(this._viewMatrix);this._flags&=-17;null!=a&&(this._parentViewMatrixUpdateCount=
a._viewMatrixUpdateCount);++this._viewMatrixUpdateCount}return this._viewMatrix},setAnchor:function(a,b){this.anchorX.set__(a);this.anchorY.set__(b);return this},centerAnchor:function(){this.anchorX.set__(this.getNaturalWidth()/2);this.anchorY.set__(this.getNaturalHeight()/2);return this},setXY:function(a,b){this.x.set__(a);this.y.set__(b);return this},setAlpha:function(a){this.alpha.set__(a);return this},setRotation:function(a){this.rotation.set__(a);return this},setScale:function(a){this.scaleX.set__(a);
this.scaleY.set__(a);return this},setScaleXY:function(a,b){this.scaleX.set__(a);this.scaleY.set__(b);return this},disablePointer:function(){this.set_pointerEnabled(!1);return this},onAdded:function(){0!=(this._flags&64)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);
this.anchorY.update(a)},draw:function(){},isViewMatrixDirty:function(){if(0!=(this._flags&16))return!0;var a=this.getParentSprite();return null==a?!1:this._parentViewMatrixUpdateCount!=a._viewMatrixUpdateCount||a.isViewMatrixDirty()},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var b=a._compMap.Sprite_4;if(null!=b)return b;a=a.parent}return null},get_pointerDown:function(){null==this._pointerDown&&(this._pointerDown=new Y);return this._pointerDown},
get_pointerUp:function(){null==this._pointerUp&&(this._pointerUp=new Y);return this._pointerUp},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=p._platform.getPointer().move.connect(function(b){for(var c=b.hit;null!=c;){if(c==a)return;c=c.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&64)&&a._pointerOut.emit(b);a._flags&=-65;a._hoverConnection.dispose();a._hoverConnection=null}))},set_visible:function(a){this._flags=ch.set(this._flags,2,a);return a},set_pointerEnabled:function(a){this._flags=
ch.set(this._flags,4,a);return a},set_pixelSnapping:function(a){this._flags=ch.set(this._flags,32,a);return a},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&this._pointerMove.emit(a)},onHover:function(a){if(0==(this._flags&64)&&(this._flags|=64,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=
this._pointerOut&&0!=(this._flags&64)&&this._pointerOut.emit(a),this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=this._pointerUp&&this._pointerUp.emit(a)},__class__:D,__properties__:k(j.prototype.__properties__,{set_pixelSnapping:"set_pixelSnapping",set_pointerEnabled:"set_pointerEnabled",set_visible:"set_visible",get_pointerUp:"get_pointerUp",get_pointerDown:"get_pointerDown"})});var xb=function(a,b,c){D.call(this);this.color=a;this.width=
new O(b);this.height=new O(c)};g["flambe.display.FillSprite"]=xb;xb.__name__=["flambe","display","FillSprite"];xb.__super__=D;xb.prototype=k(D.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},setSize:function(a,b){this.width.set__(a);this.height.set__(b);return this},onUpdate:function(a){D.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},
__class__:xb});var dh=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=this.width=this.height=0;this.charCode=a};g["flambe.display.Glyph"]=dh;dh.__name__=["flambe","display","Glyph"];dh.prototype={draw:function(a,b,c){0<this.width&&a.drawSubTexture(this.page,b+this.xOffset,c+this.yOffset,this.x,this.y,this.width,this.height)},getKerning:function(a){return null!=this._kernings?G["int"](this._kernings.get(a)):0},setKerning:function(a,b){null==this._kernings&&
(this._kernings=new Ya);this._kernings.set(a,b)},__class__:dh};var Ze=function(a,b){this.name=b;this._pack=a;this._file=a.getFile(b+".fnt");this.reload()};g["flambe.display.Font"]=Ze;Ze.__name__=["flambe","display","Font"];Ze.prototype={layoutText:function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=0);null==c&&(c=0);null==b&&(b=Ta.Left);return new Fe(this,a,b,c,d,e)},reload:function(){this._glyphs=new Ya;this._glyphs.set(Ze.NEWLINE.charCode,Ze.NEWLINE);for(var a=new $e(this._file.toString()),b=new Ya,
c=this.name.lastIndexOf("/"),c=0<=c?S.substr(this.name,0,c+1):"",d=a.keywords();d.hasNext();)switch(d.next()){case "info":for(var e=a.pairs();e.hasNext();){var h=e.next();switch(h.key){case "size":this.size=h.getInt()}}break;case "common":for(e=a.pairs();e.hasNext();)switch(h=e.next(),h.key){case "lineHeight":this.lineHeight=h.getInt()}break;case "page":for(var e=0,h=null,n=a.pairs();n.hasNext();){var f=n.next();switch(f.key){case "id":e=f.getInt();break;case "file":h=f.getString()}}h=this._pack.getTexture(c+
Ra.removeFileExtension(h));b.set(e,h);break;case "char":e=null;for(h=a.pairs();h.hasNext();)switch(n=h.next(),n.key){case "id":e=new dh(n.getInt());break;case "x":e.x=n.getInt();break;case "y":e.y=n.getInt();break;case "width":e.width=n.getInt();break;case "height":e.height=n.getInt();break;case "page":n=n.getInt();e.page=b.get(n);break;case "xoffset":e.xOffset=n.getInt();break;case "yoffset":e.yOffset=n.getInt();break;case "xadvance":e.xAdvance=n.getInt()}this._glyphs.set(e.charCode,e);break;case "kerning":e=
null;n=h=0;for(f=a.pairs();f.hasNext();){var g=f.next();switch(g.key){case "first":e=this._glyphs.get(g.getInt());break;case "second":h=g.getInt();break;case "amount":n=g.getInt()}}null!=e&&0!=n&&e.setKerning(h,n)}},__class__:Ze};var Ta=g["flambe.display.TextAlign"]={__ename__:["flambe","display","TextAlign"],__constructs__:["Left","Center","Right"]};Ta.Left=["Left",0];Ta.Left.toString=r;Ta.Left.__enum__=Ta;Ta.Center=["Center",1];Ta.Center.toString=r;Ta.Center.__enum__=Ta;Ta.Right=["Right",2];Ta.Right.toString=
r;Ta.Right.__enum__=Ta;var Fe=function(a,b,c,d,e,h){this.lines=0;var n=this;this._font=a;this._glyphs=[];this._offsets=[];this._lineOffset=Math.round(a.lineHeight+h);this.bounds=new Nc;for(var f=[],h=b.length,g=0;g<h;){var i=g++,i=b.charCodeAt(i),i=a._glyphs.get(i);null!=i?this._glyphs.push(i):null}for(var b=-1,s=0,j=0,a=a._glyphs.get(10),h=function(){n.bounds.width=aa.max(n.bounds.width,s);n.bounds.height+=j;f[n.lines]=s;j=s=0;++n.lines},g=0;g<this._glyphs.length;){i=this._glyphs[g];this._offsets[g]=
Math.round(s);var k=0<d&&s+i.width>d;k||i==a?(k&&(0<=b?(this._glyphs[b]=a,s=this._offsets[b],g=b):this._glyphs.splice(g,0,a)),b=-1,j=this._lineOffset,h()):(32==i.charCode&&(b=g),s+=i.xAdvance+e,j=aa.max(j,i.height+i.yOffset),g+1<this._glyphs.length&&(s+=i.getKerning(this._glyphs[g+1].charCode)));++g}h();e=0;a=Fe.getAlignOffset(c,f[0],d);b=1.79769313486231E308;h=-1.79769313486231E308;i=g=0;for(k=this._glyphs.length;i<k;){var l=this._glyphs[i];10==l.charCode&&(e+=this._lineOffset,++g,a=Fe.getAlignOffset(c,
f[g],d));this._offsets[i]+=a;var m=e+l.yOffset;b<m||(b=m);h=aa.max(h,m+l.height);++i}this.bounds.x=Fe.getAlignOffset(c,this.bounds.width,d);this.bounds.y=b;this.bounds.height=h-b};g["flambe.display.TextLayout"]=Fe;Fe.__name__=["flambe","display","TextLayout"];Fe.getAlignOffset=function(a,b,c){switch(a[1]){case 0:return 0;case 2:return c-b;case 1:return Math.round((c-b)/2)}};Fe.prototype={draw:function(a){for(var b=0,c=0,d=this._glyphs.length;c<d;){var e=this._glyphs[c];10==e.charCode?b+=this._lineOffset:
e.draw(a,this._offsets[c],b);++c}},__class__:Fe};var $e=function(a){this._configText=a;this._keywordPattern=new Nb("([A-Za-z]+)(.*)","");this._pairPattern=new Nb('([A-Za-z]+)=("[^"]*"|[^\\s]+)',"")};g["flambe.display._Font.ConfigParser"]=$e;$e.__name__=["flambe","display","_Font","ConfigParser"];$e.advance=function(a,b){var c=b.matchedPos();return S.substr(a,c.pos+c.len,a.length)};$e.prototype={keywords:function(){var a=this,b=this._configText;return{next:function(){b=$e.advance(b,a._keywordPattern);
a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},pairs:function(){var a=this,b=this._pairText;return{next:function(){b=$e.advance(b,a._pairPattern);return new Oj(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},__class__:$e};var Oj=function(a,b){this.key=a;this._value=b};g["flambe.display._Font.ConfigPair"]=Oj;Oj.__name__=["flambe","display","_Font","ConfigPair"];
Oj.prototype={getInt:function(){return G.parseInt(this._value)},getString:function(){return 34!=this._value.charCodeAt(0)?null:S.substr(this._value,1,this._value.length-2)},__class__:Oj};var Pj=function(){};g["flambe.display.Graphics"]=Pj;Pj.__name__=["flambe","display","Graphics"];Pj.prototype={__class__:Pj};var ia=function(a){D.call(this);this.texture=a};g["flambe.display.ImageSprite"]=ia;ia.__name__=["flambe","display","ImageSprite"];ia.__super__=D;ia.prototype=k(D.prototype,{draw:function(a){null!=
this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:ia});var pe=g["flambe.display.Orientation"]={__ename__:["flambe","display","Orientation"],__constructs__:["Portrait","Landscape"]};pe.Portrait=["Portrait",0];pe.Portrait.toString=r;pe.Portrait.__enum__=pe;pe.Landscape=["Landscape",1];pe.Landscape.toString=r;pe.Landscape.__enum__=
pe;var eh=function(){};g["flambe.display.Texture"]=eh;eh.__name__=["flambe","display","Texture"];eh.__interfaces__=[Ee];eh.prototype={__class__:eh};var al=function(){};g["flambe.display.SubTexture"]=al;al.__name__=["flambe","display","SubTexture"];al.__interfaces__=[eh];var cd=function(a,b){null==b&&(b="");this._layout=null;var c=this;D.call(this);this._font=a;this._text=b;this._align=Ta.Left;this._flags|=128;var d=function(){c._flags|=128};this.wrapWidth=new O(0,d);this.letterSpacing=new O(0,d);
this.lineSpacing=new O(0,d)};g["flambe.display.TextSprite"]=cd;cd.__name__=["flambe","display","TextSprite"];cd.__super__=D;cd.prototype=k(D.prototype,{draw:function(a){this.updateLayout();this._layout.draw(a)},getNaturalWidth:function(){this.updateLayout();return 0<this.wrapWidth._value?this.wrapWidth._value:this._layout.bounds.width},getNaturalHeight:function(){this.updateLayout();var a=this._layout.lines*(this._font.lineHeight+this.lineSpacing._value),b=this._layout.bounds.height;return a>b?a:
b},containsLocal:function(a,b){this.updateLayout();return this._layout.bounds.contains(a,b)},setWrapWidth:function(a){this.wrapWidth.set__(a);return this},setAlign:function(a){this.set_align(a);return this},set_text:function(a){a!=this._text&&(this._text=a,this._flags|=128);return a},set_font:function(a){a!=this._font&&(this._font=a,this._flags|=128);return a},set_align:function(a){a!=this._align&&(this._align=a,this._flags|=128);return a},updateLayout:function(){0!=(this._flags&128)&&(this._flags&=
-129,this._layout=this._font.layoutText(this._text,this._align,this.wrapWidth._value,this.letterSpacing._value,this.lineSpacing._value))},onUpdate:function(a){D.prototype.onUpdate.call(this,a);this.wrapWidth.update(a);this.letterSpacing.update(a);this.lineSpacing.update(a)},__class__:cd,__properties__:k(D.prototype.__properties__,{set_align:"set_align",set_font:"set_font",set_text:"set_text"})});var i=g["flambe.input.Key"]={__ename__:["flambe","input","Key"],__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",")};
i.A=["A",0];i.A.toString=r;i.A.__enum__=i;i.B=["B",1];i.B.toString=r;i.B.__enum__=i;i.C=["C",2];i.C.toString=r;i.C.__enum__=i;i.D=["D",3];i.D.toString=r;i.D.__enum__=i;i.E=["E",4];i.E.toString=r;i.E.__enum__=i;i.F=["F",5];i.F.toString=r;i.F.__enum__=i;i.G=["G",6];i.G.toString=r;i.G.__enum__=i;i.H=["H",7];i.H.toString=r;i.H.__enum__=i;i.I=["I",8];i.I.toString=r;i.I.__enum__=i;i.J=["J",9];i.J.toString=r;i.J.__enum__=i;i.K=["K",10];i.K.toString=r;i.K.__enum__=i;i.L=["L",11];i.L.toString=r;i.L.__enum__=
i;i.M=["M",12];i.M.toString=r;i.M.__enum__=i;i.N=["N",13];i.N.toString=r;i.N.__enum__=i;i.O=["O",14];i.O.toString=r;i.O.__enum__=i;i.P=["P",15];i.P.toString=r;i.P.__enum__=i;i.Q=["Q",16];i.Q.toString=r;i.Q.__enum__=i;i.R=["R",17];i.R.toString=r;i.R.__enum__=i;i.S=["S",18];i.S.toString=r;i.S.__enum__=i;i.T=["T",19];i.T.toString=r;i.T.__enum__=i;i.U=["U",20];i.U.toString=r;i.U.__enum__=i;i.V=["V",21];i.V.toString=r;i.V.__enum__=i;i.W=["W",22];i.W.toString=r;i.W.__enum__=i;i.X=["X",23];i.X.toString=
r;i.X.__enum__=i;i.Y=["Y",24];i.Y.toString=r;i.Y.__enum__=i;i.Z=["Z",25];i.Z.toString=r;i.Z.__enum__=i;i.Number0=["Number0",26];i.Number0.toString=r;i.Number0.__enum__=i;i.Number1=["Number1",27];i.Number1.toString=r;i.Number1.__enum__=i;i.Number2=["Number2",28];i.Number2.toString=r;i.Number2.__enum__=i;i.Number3=["Number3",29];i.Number3.toString=r;i.Number3.__enum__=i;i.Number4=["Number4",30];i.Number4.toString=r;i.Number4.__enum__=i;i.Number5=["Number5",31];i.Number5.toString=r;i.Number5.__enum__=
i;i.Number6=["Number6",32];i.Number6.toString=r;i.Number6.__enum__=i;i.Number7=["Number7",33];i.Number7.toString=r;i.Number7.__enum__=i;i.Number8=["Number8",34];i.Number8.toString=r;i.Number8.__enum__=i;i.Number9=["Number9",35];i.Number9.toString=r;i.Number9.__enum__=i;i.Numpad0=["Numpad0",36];i.Numpad0.toString=r;i.Numpad0.__enum__=i;i.Numpad1=["Numpad1",37];i.Numpad1.toString=r;i.Numpad1.__enum__=i;i.Numpad2=["Numpad2",38];i.Numpad2.toString=r;i.Numpad2.__enum__=i;i.Numpad3=["Numpad3",39];i.Numpad3.toString=
r;i.Numpad3.__enum__=i;i.Numpad4=["Numpad4",40];i.Numpad4.toString=r;i.Numpad4.__enum__=i;i.Numpad5=["Numpad5",41];i.Numpad5.toString=r;i.Numpad5.__enum__=i;i.Numpad6=["Numpad6",42];i.Numpad6.toString=r;i.Numpad6.__enum__=i;i.Numpad7=["Numpad7",43];i.Numpad7.toString=r;i.Numpad7.__enum__=i;i.Numpad8=["Numpad8",44];i.Numpad8.toString=r;i.Numpad8.__enum__=i;i.Numpad9=["Numpad9",45];i.Numpad9.toString=r;i.Numpad9.__enum__=i;i.NumpadAdd=["NumpadAdd",46];i.NumpadAdd.toString=r;i.NumpadAdd.__enum__=i;i.NumpadDecimal=
["NumpadDecimal",47];i.NumpadDecimal.toString=r;i.NumpadDecimal.__enum__=i;i.NumpadDivide=["NumpadDivide",48];i.NumpadDivide.toString=r;i.NumpadDivide.__enum__=i;i.NumpadEnter=["NumpadEnter",49];i.NumpadEnter.toString=r;i.NumpadEnter.__enum__=i;i.NumpadMultiply=["NumpadMultiply",50];i.NumpadMultiply.toString=r;i.NumpadMultiply.__enum__=i;i.NumpadSubtract=["NumpadSubtract",51];i.NumpadSubtract.toString=r;i.NumpadSubtract.__enum__=i;i.F1=["F1",52];i.F1.toString=r;i.F1.__enum__=i;i.F2=["F2",53];i.F2.toString=
r;i.F2.__enum__=i;i.F3=["F3",54];i.F3.toString=r;i.F3.__enum__=i;i.F4=["F4",55];i.F4.toString=r;i.F4.__enum__=i;i.F5=["F5",56];i.F5.toString=r;i.F5.__enum__=i;i.F6=["F6",57];i.F6.toString=r;i.F6.__enum__=i;i.F7=["F7",58];i.F7.toString=r;i.F7.__enum__=i;i.F8=["F8",59];i.F8.toString=r;i.F8.__enum__=i;i.F9=["F9",60];i.F9.toString=r;i.F9.__enum__=i;i.F10=["F10",61];i.F10.toString=r;i.F10.__enum__=i;i.F11=["F11",62];i.F11.toString=r;i.F11.__enum__=i;i.F12=["F12",63];i.F12.toString=r;i.F12.__enum__=i;i.F13=
["F13",64];i.F13.toString=r;i.F13.__enum__=i;i.F14=["F14",65];i.F14.toString=r;i.F14.__enum__=i;i.F15=["F15",66];i.F15.toString=r;i.F15.__enum__=i;i.Left=["Left",67];i.Left.toString=r;i.Left.__enum__=i;i.Up=["Up",68];i.Up.toString=r;i.Up.__enum__=i;i.Right=["Right",69];i.Right.toString=r;i.Right.__enum__=i;i.Down=["Down",70];i.Down.toString=r;i.Down.__enum__=i;i.Alt=["Alt",71];i.Alt.toString=r;i.Alt.__enum__=i;i.Backquote=["Backquote",72];i.Backquote.toString=r;i.Backquote.__enum__=i;i.Backslash=
["Backslash",73];i.Backslash.toString=r;i.Backslash.__enum__=i;i.Backspace=["Backspace",74];i.Backspace.toString=r;i.Backspace.__enum__=i;i.CapsLock=["CapsLock",75];i.CapsLock.toString=r;i.CapsLock.__enum__=i;i.Comma=["Comma",76];i.Comma.toString=r;i.Comma.__enum__=i;i.Command=["Command",77];i.Command.toString=r;i.Command.__enum__=i;i.Control=["Control",78];i.Control.toString=r;i.Control.__enum__=i;i.Delete=["Delete",79];i.Delete.toString=r;i.Delete.__enum__=i;i.End=["End",80];i.End.toString=r;i.End.__enum__=
i;i.Enter=["Enter",81];i.Enter.toString=r;i.Enter.__enum__=i;i.Equals=["Equals",82];i.Equals.toString=r;i.Equals.__enum__=i;i.Escape=["Escape",83];i.Escape.toString=r;i.Escape.__enum__=i;i.Home=["Home",84];i.Home.toString=r;i.Home.__enum__=i;i.Insert=["Insert",85];i.Insert.toString=r;i.Insert.__enum__=i;i.LeftBracket=["LeftBracket",86];i.LeftBracket.toString=r;i.LeftBracket.__enum__=i;i.Minus=["Minus",87];i.Minus.toString=r;i.Minus.__enum__=i;i.PageDown=["PageDown",88];i.PageDown.toString=r;i.PageDown.__enum__=
i;i.PageUp=["PageUp",89];i.PageUp.toString=r;i.PageUp.__enum__=i;i.Period=["Period",90];i.Period.toString=r;i.Period.__enum__=i;i.Quote=["Quote",91];i.Quote.toString=r;i.Quote.__enum__=i;i.RightBracket=["RightBracket",92];i.RightBracket.toString=r;i.RightBracket.__enum__=i;i.Semicolon=["Semicolon",93];i.Semicolon.toString=r;i.Semicolon.__enum__=i;i.Shift=["Shift",94];i.Shift.toString=r;i.Shift.__enum__=i;i.Slash=["Slash",95];i.Slash.toString=r;i.Slash.__enum__=i;i.Space=["Space",96];i.Space.toString=
r;i.Space.__enum__=i;i.Tab=["Tab",97];i.Tab.toString=r;i.Tab.__enum__=i;i.Menu=["Menu",98];i.Menu.toString=r;i.Menu.__enum__=i;i.Search=["Search",99];i.Search.toString=r;i.Search.__enum__=i;i.Unknown=function(a){a=["Unknown",100,a];a.__enum__=i;a.toString=r;return a};var Qj=function(){this.init(0,null)};g["flambe.input.KeyboardEvent"]=Qj;Qj.__name__=["flambe","input","KeyboardEvent"];Qj.prototype={init:function(a,b){this.id=a;this.key=b},__class__:Qj};var Pb=g["flambe.input.MouseButton"]={__ename__:["flambe",
"input","MouseButton"],__constructs__:["Left","Middle","Right","Unknown"]};Pb.Left=["Left",0];Pb.Left.toString=r;Pb.Left.__enum__=Pb;Pb.Middle=["Middle",1];Pb.Middle.toString=r;Pb.Middle.__enum__=Pb;Pb.Right=["Right",2];Pb.Right.toString=r;Pb.Right.__enum__=Pb;Pb.Unknown=function(a){a=["Unknown",3,a];a.__enum__=Pb;a.toString=r;return a};var ec=g["flambe.input.MouseCursor"]={__ename__:["flambe","input","MouseCursor"],__constructs__:["Default","Button","None"]};ec.Default=["Default",0];ec.Default.toString=
r;ec.Default.__enum__=ec;ec.Button=["Button",1];ec.Button.toString=r;ec.Button.__enum__=ec;ec.None=["None",2];ec.None.toString=r;ec.None.__enum__=ec;var Rj=function(){this.init(0,0,0,null)};g["flambe.input.MouseEvent"]=Rj;Rj.__name__=["flambe","input","MouseEvent"];Rj.prototype={init:function(a,b,c,d){this.id=a;this.viewX=b;this.viewY=c;this.button=d},__class__:Rj};var fh=g["flambe.input.EventSource"]={__ename__:["flambe","input","EventSource"],__constructs__:["Mouse","Touch"]};fh.Mouse=function(a){a=
["Mouse",0,a];a.__enum__=fh;a.toString=r;return a};fh.Touch=function(a){a=["Touch",1,a];a.__enum__=fh;a.toString=r;return a};var Sj=function(){this.init(0,0,0,null,null)};g["flambe.input.PointerEvent"]=Sj;Sj.__name__=["flambe","input","PointerEvent"];Sj.prototype={init:function(a,b,c,d,e){this.id=a;this.viewX=b;this.viewY=c;this.hit=d;this.source=e;this._stopped=!1},__class__:Sj};var Tj=function(a){this.id=a;this._source=fh.Touch(this)};g["flambe.input.TouchPoint"]=Tj;Tj.__name__=["flambe","input",
"TouchPoint"];Tj.prototype={init:function(a,b){this.viewX=a;this.viewY=b},__class__:Tj};var aa=function(){};g["flambe.math.FMath"]=aa;aa.__name__=["flambe","math","FMath"];aa.toRadians=function(a){return 3.141592653589793*a/180};aa.toDegrees=function(a){return 180*a/3.141592653589793};aa.max=function(a,b){return a>b?a:b};aa.min=function(a,b){return a<b?a:b};aa.clamp=function(a,b,c){return a<b?b:a>c?c:a};var bd=function(){this.identity()};g["flambe.math.Matrix"]=bd;bd.__name__=["flambe","math","Matrix"];
bd.multiply=function(a,b,c){null==c&&(c=new bd);var d=a.m00*b.m00+a.m01*b.m10,e=a.m00*b.m01+a.m01*b.m11,h=a.m00*b.m02+a.m01*b.m12+a.m02;c.m00=d;c.m01=e;c.m02=h;d=a.m10*b.m00+a.m11*b.m10;e=a.m10*b.m01+a.m11*b.m11;h=a.m10*b.m02+a.m11*b.m12+a.m12;c.m10=d;c.m11=e;c.m12=h;return c};bd.prototype={set:function(a,b,c,d,e,h){this.m00=a;this.m01=c;this.m02=e;this.m10=b;this.m11=d;this.m12=h},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,b,c,d,e){var h=Math.sin(e),e=Math.cos(e);this.set(e*c,
h*c,-h*d,e*d,a,b)},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},invert:function(){var a=this.determinant();if(0==a)return!1;this.set(this.m11/a,-this.m01/a,-this.m10/a,this.m00/a,(this.m01*this.m12-this.m11*this.m02)/a,(this.m10*this.m02-this.m00*this.m12)/a);return!0},transform:function(a,b,c){null==c&&(c=new cb);c.x=a*this.m00+b*this.m01+this.m02;c.y=a*this.m10+b*this.m11+this.m12;return c},transformArray:function(a,b,c){for(var d=0;d<b;){var e=a[d],h=
a[d+1];c[d++]=e*this.m00+h*this.m01+this.m02;c[d++]=e*this.m10+h*this.m11+this.m12}},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,b,c){var d=this.determinant();if(0==d)return!1;a-=this.m02;b-=this.m12;c.x=(a*this.m11-b*this.m01)/d;c.y=(b*this.m00-a*this.m10)/d;return!0},clone:function(a){null==a&&(a=new bd);a.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12);return a},__class__:bd};var Nc=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==
b&&(b=0);null==a&&(a=0);this.set(a,b,c,d)};g["flambe.math.Rectangle"]=Nc;Nc.__name__=["flambe","math","Rectangle"];Nc.prototype={set:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},clone:function(a){null==a&&(a=new Nc);a.set(this.x,this.y,this.width,this.height);
return a},equals:function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height},__class__:Nc};var gb=function(){this._disposed=!1};g["flambe.platform.BasicAsset"]=gb;gb.__name__=["flambe","platform","BasicAsset"];gb.__interfaces__=[Ee];gb.prototype={dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},onDisposed:function(){null},__class__:gb};var He=function(a,b){var c=this;this.manifest=b;this._platform=a;this.promise=new Ge;this._bytesLoaded=new K;
this._pack=new gh(b,this);var d=Ce.array(b);if(0==d.length)this.handleSuccess();else{for(var e=new K,h=0;h<d.length;){var n=d[h];++h;var f=e.get(n.name);null==f&&(f=[],e.set(n.name,f));f.push(n)}this._assetsRemaining=Ce.count(e);for(d=e.iterator();d.hasNext();)e=[d.next()],this.pickBestEntry(e[0],function(a){return function(d){if(null!=d){var e=b.getFullURL(d);try{c.loadEntry(e,d)}catch(h){c.handleError(d,"Unexpected error: "+G.string(h))}e=c.promise;e.set_total(e._total+d.bytes)}else d=a[0][0],He.isAudio(d.format)?
c.handleLoad(d,Oc.getInstance()):c.handleError(d,"Could not find a supported format to load")}}(e))}};g["flambe.platform.BasicAssetPackLoader"]=He;He.__name__=["flambe","platform","BasicAssetPackLoader"];He.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};He.prototype={onDisposed:function(){},pickBestEntry:function(a,b){this.getAssetFormats(function(c){for(var d=0;d<c.length;){var e=c[d];++d;for(var h=0;h<a.length;){var n=a[h];++h;if(n.format==e){b(n);
return}}}b(null)})},loadEntry:function(){null},getAssetFormats:function(){null},handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var c;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:c=this._pack.sounds;break;case 13:c=this._pack.files}c.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},handleProgress:function(a,b){this._bytesLoaded.set(a.name,
b);for(var c=0,d=this._bytesLoaded.iterator();d.hasNext();)var e=d.next(),c=c+e;this.promise.set_progress(c)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,b){this.promise.error.emit(Ra.withFields(b,["url",a.url]))},handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},__class__:He};var gh=function(a,b){this.disposed=!1;this._manifest=a;this.loader=b;this.textures=new K;this.sounds=new K;this.files=new K};
g["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=gh;gh.__name__=["flambe","platform","_BasicAssetPackLoader","BasicAssetPack"];gh.__interfaces__=[ah];gh.prototype={getTexture:function(a,b){null==b&&(b=!0);var c=this.textures.get(a);if(null==c&&b)throw Ra.withFields("Missing texture",["name",a]);return c},getSound:function(a,b){null==b&&(b=!0);var c=this.sounds.get(a);if(null==c&&b)throw Ra.withFields("Missing sound",["name",a]);return c},getFile:function(a,b){null==b&&(b=!0);var c=this.files.get(a);
if(null==c&&b)throw Ra.withFields("Missing file",["name",a]);return c},dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=this.textures.iterator();a.hasNext();)a.next().dispose();this.textures=null;for(a=this.sounds.iterator();a.hasNext();)a.next().dispose();this.sounds=null;for(a=this.files.iterator();a.hasNext();)a.next().dispose();this.files=null;this.loader.onDisposed()}},get_manifest:function(){return this._manifest},__class__:gh,__properties__:{get_manifest:"get_manifest"}};var Df=
function(a){this._disposed=!1;this._content=a};g["flambe.platform.BasicFile"]=Df;Df.__name__=["flambe","platform","BasicFile"];Df.__interfaces__=[bh];Df.__super__=gb;Df.prototype=k(gb.prototype,{toString:function(){return this._content},onDisposed:function(){this._content=null},__class__:Df});var Uj=function(){};g["flambe.subsystem.KeyboardSystem"]=Uj;Uj.__name__=["flambe","subsystem","KeyboardSystem"];Uj.prototype={__class__:Uj};var $c=function(){this.down=new Y;this.up=new Y;this.backButton=new ua;
this._keyStates=new Ya};g["flambe.platform.BasicKeyboard"]=$c;$c.__name__=["flambe","platform","BasicKeyboard"];$c.__interfaces__=[Uj];$c.prototype={isDown:function(a){return this.isCodeDown(Ef.toKeyCode(a))},isCodeDown:function(a){return this._keyStates.exists(a)},submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit(),!0):!1;this._keyStates.exists(a)||(this._keyStates.set(a,!0),$c._sharedEvent.init($c._sharedEvent.id+1,Ef.toKey(a)),this.down.emit($c._sharedEvent));
return!0},submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),$c._sharedEvent.init($c._sharedEvent.id+1,Ef.toKey(a)),this.up.emit($c._sharedEvent))},__class__:$c};var Vj=function(){};g["flambe.subsystem.MouseSystem"]=Vj;Vj.__name__=["flambe","subsystem","MouseSystem"];Vj.prototype={__class__:Vj};var Db=function(a){this._pointer=a;this._source=fh.Mouse(Db._sharedEvent);this.down=new Y;this.move=new Y;this.up=new Y;this.scroll=new Y;this._y=this._x=0;this._cursor=ec.Default;this._buttonStates=
new Ya};g["flambe.platform.BasicMouse"]=Db;Db.__name__=["flambe","platform","BasicMouse"];Db.__interfaces__=[Vj];Db.prototype={get_x:function(){return this._x},get_y:function(){return this._y},set_cursor:function(a){return this._cursor=a},submitDown:function(a,b,c){this._buttonStates.exists(c)||(this._buttonStates.set(c,!0),this.prepare(a,b,Wj.toButton(c)),this._pointer.submitDown(a,b,this._source),this.down.emit(Db._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,
b,this._source);this.move.emit(Db._sharedEvent)},submitUp:function(a,b,c){this._buttonStates.exists(c)&&(this._buttonStates.remove(c),this.prepare(a,b,Wj.toButton(c)),this._pointer.submitUp(a,b,this._source),this.up.emit(Db._sharedEvent))},submitScroll:function(a,b,c){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit(c);return!0},prepare:function(a,b,c){this._x=a;this._y=b;Db._sharedEvent.init(Db._sharedEvent.id+1,a,b,c)},__class__:Db,__properties__:{set_cursor:"set_cursor",
get_y:"get_y",get_x:"get_x"}};var Xj=function(){};g["flambe.subsystem.PointerSystem"]=Xj;Xj.__name__=["flambe","subsystem","PointerSystem"];Xj.prototype={__class__:Xj};var rb=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.down=new Y;this.move=new Y;this.up=new Y;this._x=a;this._y=b;this._isDown=c};g["flambe.platform.BasicPointer"]=rb;rb.__name__=["flambe","platform","BasicPointer"];rb.__interfaces__=[Xj];rb.prototype={get_x:function(){return this._x},get_y:function(){return this._y},
submitDown:function(a,b,c){if(!this._isDown){this.submitMove(a,b,c);this._isDown=!0;var d=[],e=D.hitTest(p.root,a,b);if(null!=e){var h=e.owner;do{var n=h._compMap.Sprite_4;null!=n&&d.push(n);h=h.parent}while(null!=h)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerDown(rb._sharedEvent),rb._sharedEvent._stopped)return;this.down.emit(rb._sharedEvent)}},submitMove:function(a,b,c){if(!(a==this._x&&b==this._y)){var d=[],e=D.hitTest(p.root,a,b);if(null!=e){var h=e.owner;do{var n=h._compMap.Sprite_4;
null!=n&&d.push(n);h=h.parent}while(null!=h)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerMove(rb._sharedEvent),rb._sharedEvent._stopped)return;this.move.emit(rb._sharedEvent)}},submitUp:function(a,b,c){if(this._isDown){this.submitMove(a,b,c);this._isDown=!1;var d=[],e=D.hitTest(p.root,a,b);if(null!=e){var h=e.owner;do{var n=h._compMap.Sprite_4;null!=n&&d.push(n);h=h.parent}while(null!=h)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerUp(rb._sharedEvent),
rb._sharedEvent._stopped)return;this.up.emit(rb._sharedEvent)}},prepare:function(a,b,c,d){this._x=a;this._y=b;rb._sharedEvent.init(rb._sharedEvent.id+1,a,b,c,d)},__class__:rb,__properties__:{get_y:"get_y",get_x:"get_x"}};var Pc=function(a,b,c){this._x=this._y=0;this._parent=null;this.rootX=this.rootY=0;this._disposed=!1;this.root=a;this._width=b;this._height=c};g["flambe.platform.BasicTexture"]=Pc;Pc.__name__=["flambe","platform","BasicTexture"];Pc.__interfaces__=[al];Pc.__super__=gb;Pc.prototype=
k(gb.prototype,{subTexture:function(a,b,c,d){c=this.root.createTexture(c,d);c._parent=this;c._x=a;c._y=b;c.rootX=this.rootX+a;c.rootY=this.rootY+b;return c},get_graphics:function(){return this.root.getGraphics()},onDisposed:function(){null==this._parent&&this.root.dispose()},get_width:function(){return this._width},get_height:function(){return this._height},__class__:Pc,__properties__:{get_height:"get_height",get_width:"get_width",get_graphics:"get_graphics"}});var hh=function(){};g["flambe.subsystem.TouchSystem"]=
hh;hh.__name__=["flambe","subsystem","TouchSystem"];hh.prototype={__class__:hh};var Sg=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new Ya;this._points=[];this.down=new Y;this.move=new Y;this.up=new Y};g["flambe.platform.BasicTouch"]=Sg;Sg.__name__=["flambe","platform","BasicTouch"];Sg.__interfaces__=[hh];Sg.prototype={get_supported:function(){return!0},submitDown:function(a,b,c){if(!this._pointMap.exists(a)){var d=new Tj(a);d.init(b,c);this._pointMap.set(a,d);this._points.push(d);
null==this._pointerTouch&&(this._pointerTouch=d,this._pointer.submitDown(b,c,d._source));this.down.emit(d)}},submitMove:function(a,b,c){a=this._pointMap.get(a);null!=a&&(a.init(b,c),this._pointerTouch==a&&this._pointer.submitMove(b,c,a._source),this.move.emit(a))},submitUp:function(a,b,c){var d=this._pointMap.get(a);null!=d&&(d.init(b,c),this._pointMap.remove(a),S.remove(this._points,d),this._pointerTouch==d&&(this._pointerTouch=null,this._pointer.submitUp(b,c,d._source)),this.up.emit(d))},__class__:Sg,
__properties__:{get_supported:"get_supported"}};var af=function(){};g["flambe.sound.Sound"]=af;af.__name__=["flambe","sound","Sound"];af.__interfaces__=[Ee];af.prototype={__class__:af};var Oc=function(){this._disposed=!1;this._playback=new ih(this)};g["flambe.platform.DummySound"]=Oc;Oc.__name__=["flambe","platform","DummySound"];Oc.__interfaces__=[af];Oc.getInstance=function(){null==Oc._instance&&(Oc._instance=new Oc);return Oc._instance};Oc.__super__=gb;Oc.prototype=k(gb.prototype,{play:function(){return this._playback},
loop:function(){return this._playback},get_duration:function(){return 0},onDisposed:function(){},__class__:Oc,__properties__:{get_duration:"get_duration"}});var bf=function(){};g["flambe.sound.Playback"]=bf;bf.__name__=["flambe","sound","Playback"];bf.__interfaces__=[tc];bf.prototype={__class__:bf};var ih=function(a){this._sound=a;this.volume=new O(0);this._complete=new $a(!0)};g["flambe.platform.DummyPlayback"]=ih;ih.__name__=["flambe","platform","DummyPlayback"];ih.__interfaces__=[bf];ih.prototype=
{set_paused:function(){return!0},get_complete:function(){return this._complete},dispose:function(){},__class__:ih,__properties__:{get_complete:"get_complete",set_paused:"set_paused"}};var jh=function(){};g["flambe.subsystem.StorageSystem"]=jh;jh.__name__=["flambe","subsystem","StorageSystem"];jh.prototype={__class__:jh};var Wg=function(){this.clear()};g["flambe.platform.DummyStorage"]=Wg;Wg.__name__=["flambe","platform","DummyStorage"];Wg.__interfaces__=[jh];Wg.prototype={set:function(a,b){this._hash.set(a,
b);return!0},get:function(a,b){return this._hash.exists(a)?this._hash.get(a):b},clear:function(){this._hash=new K},__class__:Wg};var Tg=function(){this.down=new Y;this.move=new Y;this.up=new Y};g["flambe.platform.DummyTouch"]=Tg;Tg.__name__=["flambe","platform","DummyTouch"];Tg.__interfaces__=[hh];Tg.prototype={get_supported:function(){return!1},__class__:Tg,__properties__:{get_supported:"get_supported"}};var Ff=function(){this._entries=[]};g["flambe.platform.EventGroup"]=Ff;Ff.__name__=["flambe",
"platform","EventGroup"];Ff.__interfaces__=[tc];Ff.prototype={addListener:function(a,b,c){a.addEventListener(b,c,!1);this._entries.push(new Yj(a,b,c))},addDisposingListener:function(a,b,c){var d=this;this.addListener(a,b,function(a){d.dispose();c(a)})},dispose:function(){for(var a=0,b=this._entries;a<b.length;){var c=b[a];++a;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},__class__:Ff};var Yj=function(a,b,c){this.dispatcher=a;this.type=b;this.listener=c};g["flambe.platform._EventGroup.Entry"]=
Yj;Yj.__name__=["flambe","platform","_EventGroup","Entry"];Yj.prototype={__class__:Yj};var Gf=function(){};g["flambe.platform.InternalGraphics"]=Gf;Gf.__name__=["flambe","platform","InternalGraphics"];Gf.__interfaces__=[Pj];Gf.prototype={__class__:Gf};var Zj=function(){};g["flambe.subsystem.RendererSystem"]=Zj;Zj.__name__=["flambe","subsystem","RendererSystem"];Zj.prototype={__class__:Zj};var Hf=function(){};g["flambe.platform.InternalRenderer"]=Hf;Hf.__name__=["flambe","platform","InternalRenderer"];
Hf.__interfaces__=[Zj];Hf.prototype={__class__:Hf};var Ef=function(){};g["flambe.platform.KeyCodes"]=Ef;Ef.__name__=["flambe","platform","KeyCodes"];Ef.toKey=function(a){switch(a){case 65:return i.A;case 66:return i.B;case 67:return i.C;case 68:return i.D;case 69:return i.E;case 70:return i.F;case 71:return i.G;case 72:return i.H;case 73:return i.I;case 74:return i.J;case 75:return i.K;case 76:return i.L;case 77:return i.M;case 78:return i.N;case 79:return i.O;case 80:return i.P;case 81:return i.Q;
case 82:return i.R;case 83:return i.S;case 84:return i.T;case 85:return i.U;case 86:return i.V;case 87:return i.W;case 88:return i.X;case 89:return i.Y;case 90:return i.Z;case 48:return i.Number0;case 49:return i.Number1;case 50:return i.Number2;case 51:return i.Number3;case 52:return i.Number4;case 53:return i.Number5;case 54:return i.Number6;case 55:return i.Number7;case 56:return i.Number8;case 57:return i.Number9;case 96:return i.Numpad0;case 97:return i.Numpad1;case 98:return i.Numpad2;case 99:return i.Numpad3;
case 100:return i.Numpad4;case 101:return i.Numpad5;case 102:return i.Numpad6;case 103:return i.Numpad7;case 104:return i.Numpad8;case 105:return i.Numpad9;case 107:return i.NumpadAdd;case 110:return i.NumpadDecimal;case 111:return i.NumpadDivide;case 108:return i.NumpadEnter;case 106:return i.NumpadMultiply;case 109:return i.NumpadSubtract;case 112:return i.F1;case 113:return i.F2;case 114:return i.F3;case 115:return i.F4;case 116:return i.F5;case 117:return i.F6;case 118:return i.F7;case 119:return i.F8;
case 120:return i.F9;case 121:return i.F10;case 122:return i.F11;case 123:return i.F12;case 37:return i.Left;case 38:return i.Up;case 39:return i.Right;case 40:return i.Down;case 18:return i.Alt;case 192:return i.Backquote;case 220:return i.Backslash;case 8:return i.Backspace;case 20:return i.CapsLock;case 188:return i.Comma;case 15:return i.Command;case 17:return i.Control;case 46:return i.Delete;case 35:return i.End;case 13:return i.Enter;case 187:return i.Equals;case 27:return i.Escape;case 36:return i.Home;
case 45:return i.Insert;case 219:return i.LeftBracket;case 189:return i.Minus;case 34:return i.PageDown;case 33:return i.PageUp;case 190:return i.Period;case 222:return i.Quote;case 221:return i.RightBracket;case 186:return i.Semicolon;case 16:return i.Shift;case 191:return i.Slash;case 32:return i.Space;case 9:return i.Tab;case 16777234:return i.Menu;case 16777247:return i.Search}return i.Unknown(a)};Ef.toKeyCode=function(a){switch(a[1]){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;
case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;
case 33:return 55;case 34:return 56;case 35:return 57;case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;
case 60:return 120;case 61:return 121;case 62:return 122;case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;
case 88:return 34;case 89:return 33;case 90:return 190;case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;case 99:return 16777247;case 100:return a[2]}};var Ve=function(){this._tickables=[]};g["flambe.platform.MainLoop"]=Ve;Ve.__name__=["flambe","platform","MainLoop"];Ve.updateEntity=function(a,b){var c=a._compMap.SpeedAdjuster_25;if(null!=c&&(c._realDt=b,b*=c.scale._value,0>=b)){c.onUpdate(b);return}for(c=
a.firstComponent;null!=c;){var d=c.next;0==(c._flags&1)&&(c._flags|=1,c.onStart());c.onUpdate(b);c=d}for(c=a.firstChild;null!=c;)d=c.next,Ve.updateEntity(c,b),c=d};Ve.prototype={update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var c=this._tickables[b];null==c||c.update(a)?this._tickables.splice(b,1):++b}p.volume.update(a);Ve.updateEntity(p.root,a)}},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),D.render(p.root,b),a.didRender())},addTickable:function(a){this._tickables.push(a)},
__class__:Ve};var $j=function(){};g["flambe.platform.MathUtil"]=$j;$j.__name__=["flambe","platform","MathUtil"];$j.nextPowerOfTwo=function(a){for(var b=1;b<a;)b<<=1;return b};var Wj=function(){};g["flambe.platform.MouseCodes"]=Wj;Wj.__name__=["flambe","platform","MouseCodes"];Wj.toButton=function(a){switch(a){case 0:return Pb.Left;case 1:return Pb.Middle;case 2:return Pb.Right}return Pb.Unknown(a)};var kh=function(){};g["flambe.platform.TextureRoot"]=kh;kh.__name__=["flambe","platform","TextureRoot"];
kh.prototype={__class__:kh};var lh=function(){};g["flambe.platform.Tickable"]=lh;lh.__name__=["flambe","platform","Tickable"];lh.prototype={__class__:lh};var dd=function(a,b){this._firstDraw=!1;this._canvasCtx=a.getContext("2d",{alpha:b})};g["flambe.platform.html.CanvasGraphics"]=dd;dd.__name__=["flambe","platform","html","CanvasGraphics"];dd.__interfaces__=[Gf];dd.prototype={save:function(){this._canvasCtx.save()},translate:function(a,b){this._canvasCtx.translate(a|0,b|0)},scale:function(a,b){this._canvasCtx.scale(a,
b)},rotate:function(a){this._canvasCtx.rotate(3.141592653589793*a/180)},transform:function(a,b,c,d,e,h){this._canvasCtx.transform(a,b,c,d,e,h)},restore:function(){this._canvasCtx.restore()},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,d,e,h,n){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(a,b,c,d,e,h,n),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,
a.rootX+d|0,a.rootY+e|0,h|0,n|0,b|0,c|0,h|0,n|0)},drawPattern:function(a,b,c,d,e){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawPattern(a,b,c,d,e),this._canvasCtx.globalCompositeOperation="source-over"):(this._canvasCtx.fillStyle=a.getPattern(),this._canvasCtx.fillRect(b|0,c|0,d|0,e|0))},fillRect:function(a,b,c,d,e){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,c,d,e),this._canvasCtx.globalCompositeOperation=
"source-over";else{for(a=(16777215&a).toString(16);6>a.length;)a="0"+G.string(a);this._canvasCtx.fillStyle="#"+G.string(a);this._canvasCtx.fillRect(b|0,c|0,d|0,e|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="multiply";break;case 3:b="screen";break;case 4:b="destination-in";break;case 5:b="copy"}this._canvasCtx.globalCompositeOperation=b},applyScissor:function(a,b,c,d){this._canvasCtx.beginPath();
this._canvasCtx.rect(a|0,b|0,c|0,d|0);this._canvasCtx.clip()},willRender:function(){this._firstDraw=!0},didRender:function(){},onResize:function(){},__class__:dd};var We=function(a){this.graphics=new dd(a,!1);this._hasGPU=new $a(!0)};g["flambe.platform.html.CanvasRenderer"]=We;We.__name__=["flambe","platform","html","CanvasRenderer"];We.__interfaces__=[Hf];We.prototype={get_type:function(){return Qc.Canvas},createTextureFromImage:function(a){a=new cf(We.CANVAS_TEXTURES?ka.createCanvas(a):a);return a.createTexture(a.width,
a.height)},createTexture:function(a,b){return(new cf(ka.createEmptyCanvas(a,b))).createTexture(a,b)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:We,__properties__:{get_type:"get_type"}};var mh=function(a,b,c){this._rootUpdateCount=0;this._pattern=null;Pc.call(this,a,b,c)};g["flambe.platform.html.CanvasTexture"]=mh;mh.__name__=["flambe","platform",
"html","CanvasTexture"];mh.__super__=Pc;mh.prototype=k(Pc.prototype,{getPattern:function(){if(this._rootUpdateCount!=this.root.updateCount||null==this._pattern)this._rootUpdateCount=this.root.updateCount,this._pattern=this.root.createPattern(this.rootX,this.rootY,this._width,this._height);return this._pattern},__class__:mh});var cf=function(a){this._graphics=null;this.updateCount=0;this._disposed=!1;this.image=a;this.width=a.width;this.height=a.height};g["flambe.platform.html.CanvasTextureRoot"]=
cf;cf.__name__=["flambe","platform","html","CanvasTextureRoot"];cf.__interfaces__=[kh];cf.__super__=gb;cf.prototype=k(gb.prototype,{createTexture:function(a,b){return new mh(this,a,b)},getGraphics:function(){null==this._graphics&&(this.getContext2d(),this._graphics=new nh(this));return this._graphics},createPattern:function(a,b,c,d){var e=this.getContext2d(),h=this.image;if(0!=a||0!=b||c!=this.width||d!=this.height)h=ka.createEmptyCanvas(c,d),c=h.getContext("2d"),c.globalCompositeOperation="copy",
c.drawImage(this.image,-a,-b);return e.createPattern(h,"repeat")},getContext2d:function(){pa.__instanceof(this.image,HTMLCanvasElement)||(this.image=ka.createCanvas(this.image));return this.image.getContext("2d")},onDisposed:function(){this._graphics=this.image=null},__class__:cf});var nh=function(a){dd.call(this,a.image,!0);this._renderTarget=a};g["flambe.platform.html._CanvasTextureRoot.InternalGraphics"]=nh;nh.__name__=["flambe","platform","html","_CanvasTextureRoot","InternalGraphics"];nh.__super__=
dd;nh.prototype=k(dd.prototype,{drawTexture:function(a,b,c){dd.prototype.drawTexture.call(this,a,b,c);++this._renderTarget.updateCount},drawSubTexture:function(a,b,c,d,e,h,n){dd.prototype.drawSubTexture.call(this,a,b,c,d,e,h,n);++this._renderTarget.updateCount},drawPattern:function(a,b,c,d,e){dd.prototype.drawPattern.call(this,a,b,c,d,e);++this._renderTarget.updateCount},fillRect:function(a,b,c,d,e){dd.prototype.fillRect.call(this,a,b,c,d,e);++this._renderTarget.updateCount},__class__:nh});var ca=
function(a,b){He.call(this,a,b)};g["flambe.platform.html.HtmlAssetPackLoader"]=ca;ca.__name__=["flambe","platform","html","HtmlAssetPackLoader"];ca.detectImageFormats=function(a){var b=[L.PNG,L.JPG,L.GIF],c=2,d;d=window.document.createElement("img");d.onload=d.onerror=function(){1==d.width&&b.unshift(L.WEBP);--c;0==c&&a(b)};d.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var e;e=window.document.createElement("img");e.onload=e.onerror=function(){1==e.width&&b.unshift(L.JXR);
--c;0==c&&a(b)};e.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};ca.detectAudioFormats=function(){var a;a=window.document.createElement("audio");if(null==a||null==m(a,a.canPlayType))return[];var b=new Nb("\\b(iPhone|iPod|iPad|Windows Phone)\\b",""),c=window.navigator.userAgent;if(!qa.get_supported()&&b.match(c))return[];for(var b=[{format:L.M4A,
mimeType:"audio/mp4; codecs=mp4a"},{format:L.MP3,mimeType:"audio/mpeg"},{format:L.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:L.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:L.WAV,mimeType:"audio/wav"}],c=[],d=0;d<b.length;){var e=b[d];++d;var h="";try{h=a.canPlayType(e.mimeType)}catch(n){}""!=h&&c.push(e.format)}return c};ca.supportsBlob=function(){if(ca._detectBlobSupport){ca._detectBlobSupport=!1;if((new Nb("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;
var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;ca._URL=ka.loadExtension("URL").value}return null!=ca._URL&&null!=ca._URL.createObjectURL};ca.__super__=He;ca.prototype=k(He.prototype,{loadEntry:function(a,b){var c=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var d;d=window.document.createElement("img");var e=new Ff;e.addDisposingListener(d,"load",function(){ca.supportsBlob()&&ca._URL.revokeObjectURL(d.src);
var a=c._platform.getRenderer().createTextureFromImage(d);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});e.addDisposingListener(d,"error",function(){c.handleError(b,"Failed to load image")});ca.supportsBlob()?this.download(a,b,"blob",function(a){d.src=ca._URL.createObjectURL(a)}):d.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=c._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(qa.get_supported())this.download(a,
b,"arraybuffer",function(a){qa.ctx.decodeAudioData(a,function(a){c.handleLoad(b,new qa(a))},function(){c.handleLoad(b,Oc.getInstance())})});else{var h;h=window.document.createElement("audio");h.preload="auto";var n=++ca._mediaRefCount;null==ca._mediaElements&&(ca._mediaElements=new Ya);ca._mediaElements.set(n,h);e=new Ff;e.addDisposingListener(h,"canplaythrough",function(){ca._mediaElements.remove(n);c.handleLoad(b,new If(h))});e.addDisposingListener(h,"error",function(){ca._mediaElements.remove(n);
var a=h.error.code;3==a||4==a?c.handleLoad(b,Oc.getInstance()):c.handleError(b,"Failed to load audio: "+h.error.code)});e.addListener(h,"progress",function(){if(0<h.buffered.length&&0<h.duration){var a=h.buffered.end(0)/h.duration;c.handleProgress(b,a*b.bytes|0)}});h.src=a;h.load()}break;case 13:this.download(a,b,"text",function(a){c.handleLoad(b,new Df(a))})}},getAssetFormats:function(a){var b=this;null==ca._supportedFormats&&(ca._supportedFormats=new Ge,ca.detectImageFormats(function(a){ca._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(ca.detectAudioFormats()).concat([L.Data]))}));
ca._supportedFormats.get(a)},download:function(a,b,c,d){var e=this,h=null,n=null,f=0,g=!1,i=function(){g&&(g=!1,window.clearInterval(f))},s=3,j=function(){--s;return 0<=s?(n(),!0):!1},n=function(){i();null!=h&&h.abort();h=new XMLHttpRequest;h.open("GET",a,!0);h.responseType=c;var n=0;h.onprogress=function(a){g||(g=!0,f=window.setInterval(function(){4!=h.readyState&&5E3<Date.now()-n&&!j()&&(i(),e.handleError(b,"Download stalled"))},1E3));n=Date.now();e.handleProgress(b,a.loaded)};h.onerror=function(){if(0!=
h.status||!j())i(),e.handleError(b,"HTTP error "+h.status)};h.onload=function(){var a=h.response;null==a&&(a=h.responseText);i();d(a)};h.send()};n()},__class__:ca});var ak=function(){};g["flambe.subsystem.ExternalSystem"]=ak;ak.__name__=["flambe","subsystem","ExternalSystem"];ak.prototype={__class__:ak};var Yg=function(){};g["flambe.platform.html.HtmlExternal"]=Yg;Yg.__name__=["flambe","platform","html","HtmlExternal"];Yg.__interfaces__=[ak];Yg.prototype={call:function(a,b){null==b&&(b=[]);for(var c=
window,d=c,e=0,h=a.split(".");e<h.length;){var n=h[e];++e;c=d;d=B.field(c,n)}return d.apply(c,b)},__class__:Yg};var Rg=function(a,b){Db.call(this,a);this._canvas=b};g["flambe.platform.html.HtmlMouse"]=Rg;Rg.__name__=["flambe","platform","html","HtmlMouse"];Rg.__super__=Db;Rg.prototype=k(Db.prototype,{set_cursor:function(a){var b;switch(a[1]){case 0:b="";break;case 1:b="pointer";break;case 2:b="none"}this._canvas.style.cursor=b;return Db.prototype.set_cursor.call(this,a)},__class__:Rg});var If=function(a){this._disposed=
!1;this.audioElement=a};g["flambe.platform.html.HtmlSound"]=If;If.__name__=["flambe","platform","html","HtmlSound"];If.__interfaces__=[af];If.__super__=gb;If.prototype=k(gb.prototype,{play:function(a){null==a&&(a=1);return new Jf(this,a,!1)},loop:function(a){null==a&&(a=1);return new Jf(this,a,!0)},get_duration:function(){return this.audioElement.duration},onDisposed:function(){this.audioElement=null},__class__:If,__properties__:{get_duration:"get_duration"}});var Jf=function(a,b,c){var d=this;this._sound=
a;this._tickableAdded=!1;this._clonedElement=window.document.createElement("audio");this._clonedElement.loop=c;this._clonedElement.src=a.audioElement.src;this.volume=new O(b,function(){d.updateVolume()});this.updateVolume();this._complete=new $a(!1);this.playAudio();p.hidden._value&&this.set_paused(!0)};g["flambe.platform.html._HtmlSound.HtmlPlayback"]=Jf;Jf.__name__=["flambe","platform","html","_HtmlSound","HtmlPlayback"];Jf.__interfaces__=[lh,bf];Jf.prototype={set_paused:function(a){this._clonedElement.paused!=
a&&(a?this._clonedElement.pause():this.playAudio());return a},get_complete:function(){return this._complete},update:function(a){this.volume.update(a);this._complete.set__(this._clonedElement.ended);return this._complete._value||this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},playAudio:function(){var a=this;this._clonedElement.loop&&!Zc.instance.musicPlaying&&(Zc.instance.musicPlaying=
!0,this._clonedElement.play(),this._tickableAdded||(Zc.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=p.volume.get_changed().connect(function(){a.updateVolume()}),this._hideBinding=p.hidden.get_changed().connect(function(b){b?(a._wasPaused=a._clonedElement.paused,a.set_paused(!0)):a.set_paused(a._wasPaused)})))},updateVolume:function(){this._clonedElement.volume=p.volume._value*this.volume._value},__class__:Jf,__properties__:{get_complete:"get_complete",set_paused:"set_paused"}};
var bk=function(){};g["flambe.subsystem.StageSystem"]=bk;bk.__name__=["flambe","subsystem","StageSystem"];bk.prototype={__class__:bk};var Af=function(a){var b=this;this._canvas=a;this.resize=new ua;this.scaleFactor=1;ka.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){ka.callLater(m(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",m(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new $a(null);null!=
window.orientation&&(window.addEventListener("orientationchange",m(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new $a(!1);ka.addVendorListener(window.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};g["flambe.platform.html.HtmlStage"]=Af;Af.__name__=["flambe","platform","html","HtmlStage"];Af.__interfaces__=[bk];Af.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},
onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,b){var c=this.scaleFactor*a,d=this.scaleFactor*b;if(this._canvas.width==c&&this._canvas.height==d)return!1;this._canvas.width=c|0;this._canvas.height=d|0;this.resize.emit();return!0},hideMobileBrowser:function(){var a=this,b=window.document.documentElement.style;b.height=window.innerHeight+100+"px";b.width=window.innerWidth+"px";b.overflow="visible";ka.callLater(function(){ka.hideMobileBrowser();
ka.callLater(function(){b.height=window.innerHeight+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(ka.orientation(window.orientation))},updateFullscreen:function(){this.fullscreen.set__(!0==ka.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value)},__class__:Af,__properties__:{get_height:"get_height",get_width:"get_width"}};var Vg=function(a){this._storage=a};g["flambe.platform.html.HtmlStorage"]=Vg;Vg.__name__=["flambe","platform",
"html","HtmlStorage"];Vg.__interfaces__=[jh];Vg.prototype={set:function(a,b){var c;try{var d=new rd;d.useCache=!0;d.useEnumIndex=!1;d.serialize(b);c=d.toString()}catch(e){return!1}try{this._storage.setItem("flambe:"+a,c)}catch(h){return!1}return!0},get:function(a,b){var c=null;try{c=this._storage.getItem("flambe:"+a)}catch(d){null}if(null!=c)try{return fc.run(c)}catch(e){null}return b},__class__:Vg};var ka=function(){};g["flambe.platform.html.HtmlUtil"]=ka;ka.__name__=["flambe","platform","html",
"HtmlUtil"];ka.callLater=function(a,b){null==b&&(b=0);window.setTimeout(a,b)};ka.hideMobileBrowser=function(){window.scrollTo(1,0)};ka.loadExtension=function(a,b){null==b&&(b=window);var c=B.field(b,a);if(null!=c)return{prefix:"",field:a,value:c};for(var c=a.charAt(0).toUpperCase()+S.substr(a,1,null),d=0,e=ka.VENDOR_PREFIXES;d<e.length;){var h=e[d];++d;var n=h+c,f=B.field(b,n);if(null!=f)return{prefix:h,field:n,value:f}}return{prefix:null,field:null,value:null}};ka.loadFirstExtension=function(a,b){for(var c=
0;c<a.length;){var d=a[c];++c;d=ka.loadExtension(d,b);if(null!=d.field)return d}return{prefix:null,field:null,value:null}};ka.polyfill=function(a,b){null==b&&(b=window);var c=ka.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};ka.addVendorListener=function(a,b,c,d){for(var e=0,h=ka.VENDOR_PREFIXES;e<h.length;){var n=h[e];++e;a.addEventListener(n+b,c,d)}a.addEventListener(b,c,d)};ka.orientation=function(a){switch(a){case -90:case 90:return pe.Landscape;default:return pe.Portrait}};ka.createEmptyCanvas=
function(a,b){var c;c=window.document.createElement("canvas");c.width=a;c.height=b;return c};ka.createCanvas=function(a){var b=ka.createEmptyCanvas(a.width,a.height),c=b.getContext("2d");c.save();c.globalCompositeOperation="copy";c.drawImage(a,0,0);c.restore();return b};ka.detectSlowDriver=function(a){if(0<=window.navigator.platform.indexOf("Win")&&null!=window.chrome){for(var b=0,a=a.getSupportedExtensions();b<a.length;){var c=a[b];++b;if(0<=c.indexOf("WEBGL_compressed_texture"))return!1}return!0}return!1};
ka.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var ck=function(){};g["flambe.subsystem.WebSystem"]=ck;ck.__name__=["flambe","subsystem","WebSystem"];ck.prototype={__class__:ck};var Xg=function(a){this._container=a};g["flambe.platform.html.HtmlWeb"]=Xg;Xg.__name__=["flambe","platform","html","HtmlWeb"];Xg.__interfaces__=[ck];Xg.prototype={openBrowser:function(a){window.open(a,
"_blank")},__class__:Xg};var qa=function(a){this._disposed=!1;this.buffer=a};g["flambe.platform.html.WebAudioSound"]=qa;qa.__name__=["flambe","platform","html","WebAudioSound"];qa.__interfaces__=[af];qa.__properties__={get_supported:"get_supported"};qa.get_supported=function(){if(qa._detectSupport){qa._detectSupport=!1;var a=ka.loadExtension("AudioContext").value;null!=a&&(qa.ctx=new a,qa.gain=qa.createGain(),qa.gain.connect(qa.ctx.destination),p.volume.watch(function(a){qa.gain.gain.value=a}))}return null!=
qa.ctx};qa.createGain=function(){return null!=qa.ctx.createGain?qa.ctx.createGain():qa.ctx.createGainNode()};qa.start=function(a,b){null!=a.start?a.start(b):a.noteOn(b)};qa.__super__=gb;qa.prototype=k(gb.prototype,{play:function(a){null==a&&(a=1);return new Kf(this,a,!1)},loop:function(a){null==a&&(a=1);return new Kf(this,a,!0)},get_duration:function(){return this.buffer.duration},onDisposed:function(){this.buffer=null},__class__:qa,__properties__:{get_duration:"get_duration"}});var Kf=function(a,
b,c){var d=this;this._sound=a;this._head=qa.gain;this._complete=new $a(!1);this._sourceNode=qa.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=c;this._sourceNode.onended=function(){d._complete.set__(!0)};qa.start(this._sourceNode,0);this.playAudio();this.volume=new O(b,function(a){d.setVolume(a)});1!=b&&this.setVolume(b);p.hidden._value&&this.set_paused(!0)};g["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=Kf;Kf.__name__=["flambe","platform","html","_WebAudioSound",
"WebAudioPlayback"];Kf.__interfaces__=[lh,bf];Kf.prototype={set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},get_complete:function(){return this._complete},get_position:function(){return this._complete._value?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(qa.ctx.currentTime-this._startedAt)%this._sound.get_duration()},update:function(a){this.volume.update(a);3==this._sourceNode.playbackState&&
this._complete.set__(!0);return this._complete._value||0<=this._pausedAt?(this._tickableAdded=!1,this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},setVolume:function(a){null==this._gainNode&&(this._gainNode=qa.createGain(),this.insertNode(this._gainNode));this._gainNode.gain.value=a},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},playAudio:function(){var a=
this;this._sourceNode.connect(this._head);this._startedAt=qa.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(Zc.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=p.hidden.get_changed().connect(function(b){b?(a._wasPaused=0<=a._pausedAt,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},__class__:Kf,__properties__:{get_position:"get_position",get_complete:"get_complete",set_paused:"set_paused"}};var dk=function(a){this._quads=this._maxQuads=this._dataOffset=this._backbufferWidth=
this._backbufferHeight=0;this._pendingSetScissor=!1;this._lastBlendMode=this._lastRenderTarget=this._lastShader=this._lastTexture=this._lastScissor=this._currentBlendMode=this._currentShader=this._currentTexture=this._currentRenderTarget=null;this._gl=a;a.clearColor(0,0,0,0);a.enable(3042);a.pixelStorei(37441,1);this._vertexBuffer=a.createBuffer();a.bindBuffer(34962,this._vertexBuffer);this._quadIndexBuffer=a.createBuffer();a.bindBuffer(34963,this._quadIndexBuffer);this._drawTextureShader=new oh(a);
this._drawPatternShader=new ph(a);this._fillRectShader=new qh(a);this.resize(16)};g["flambe.platform.html.WebGLBatcher"]=dk;dk.__name__=["flambe","platform","html","WebGLBatcher"];dk.prototype={resizeBackbuffer:function(a,b){this._gl.viewport(0,0,a,b);this._backbufferWidth=a;this._backbufferHeight=b},willRender:function(){},didRender:function(){this.flush()},bindTexture:function(a){this.flush();this._currentTexture=this._lastTexture=null;this._gl.bindTexture(3553,a)},deleteTexture:function(a){null!=
this._lastTexture&&this._lastTexture.root==a&&(this.flush(),this._currentTexture=this._lastTexture=null);this._gl.deleteTexture(a.nativeTexture)},bindFramebuffer:function(a){a!=this._lastRenderTarget&&(this.flush(),this.bindRenderTarget(a))},deleteFramebuffer:function(a){a==this._lastRenderTarget&&(this.flush(),this._currentRenderTarget=this._lastRenderTarget=null);this._gl.deleteFramebuffer(a.framebuffer)},prepareDrawTexture:function(a,b,c,d){d!=this._lastTexture&&(this.flush(),this._lastTexture=
d);return this.prepareQuad(5,a,b,c,this._drawTextureShader)},prepareDrawPattern:function(a,b,c,d){d!=this._lastTexture&&(this.flush(),this._lastTexture=d);return this.prepareQuad(5,a,b,c,this._drawPatternShader)},prepareFillRect:function(a,b,c){return this.prepareQuad(6,a,b,c,this._fillRectShader)},prepareQuad:function(a,b,c,d,e){b!=this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=b);c!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=c);e!=this._lastShader&&(this.flush(),this._lastShader=
e);if(null!=d||null!=this._lastScissor)if(null==d||null==this._lastScissor||!this._lastScissor.equals(d))this.flush(),this._lastScissor=null!=d?d.clone(this._lastScissor):null,this._pendingSetScissor=!0;this._quads>=this._maxQuads&&this.resize(2*this._maxQuads);++this._quads;b=this._dataOffset;this._dataOffset+=4*a;return b},flush:function(){if(!(1>this._quads)){this._lastRenderTarget!=this._currentRenderTarget&&this.bindRenderTarget(this._lastRenderTarget);if(this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode[1]){case 0:this._gl.blendFunc(1,
771);break;case 1:this._gl.blendFunc(1,1);break;case 2:this._gl.blendFunc(774,771);break;case 3:this._gl.blendFunc(1,769);break;case 4:this._gl.blendFunc(0,770);break;case 5:this._gl.blendFunc(1,0)}this._currentBlendMode=this._lastBlendMode}this._pendingSetScissor&&(null!=this._lastScissor?(this._gl.enable(3089),this._gl.scissor(this._lastScissor.x|0,this._lastScissor.y|0,this._lastScissor.width|0,this._lastScissor.height|0)):this._gl.disable(3089),this._pendingSetScissor=!1);this._lastTexture!=this._currentTexture&&
(this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture),this._currentTexture=this._lastTexture);this._lastShader!=this._currentShader&&(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader);if(this._lastShader==this._drawPatternShader){var a=this._lastTexture,b=a.root;this._drawPatternShader.setRegion(a.rootX/b.width,a.rootY/b.height,a._width/b.width,a._height/b.height)}this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040);this._gl.drawElements(4,
6*this._quads,5123,0);this._dataOffset=this._quads=0}},resize:function(a){this.flush();if(!(1024<a)){this._maxQuads=a;this.data=new Float32Array(24*a);this._gl.bufferData(34962,4*this.data.length,35040);for(var b=new Uint16Array(6*a),c=0;c<a;){var d=c++;b[6*d]=4*d;b[6*d+1]=4*d+1;b[6*d+2]=4*d+2;b[6*d+3]=4*d+2;b[6*d+4]=4*d+3;b[6*d+5]=4*d}this._gl.bufferData(34963,b,35044)}},bindRenderTarget:function(a){null!=a?(this._gl.bindFramebuffer(36160,a.framebuffer),this._gl.viewport(0,0,a.width,a.height)):(this._gl.bindFramebuffer(36160,
null),this._gl.viewport(0,0,this._backbufferWidth,this._backbufferHeight));this._lastRenderTarget=this._currentRenderTarget=a},__class__:dk};var ed=function(a,b){this._inverseProjection=this._stateList=null;null==ed._scratchQuadArray&&(ed._scratchQuadArray=new Float32Array(8));this._batcher=a;this._renderTarget=b};g["flambe.platform.html.WebGLGraphics"]=ed;ed.__name__=["flambe","platform","html","WebGLGraphics"];ed.__interfaces__=[Gf];ed.prototype={save:function(){var a=this._stateList,b=this._stateList.next;
null==b&&(b=new rh,b.prev=a,a.next=b);a.matrix.clone(b.matrix);b.alpha=a.alpha;b.blendMode=a.blendMode;b.scissor=null!=a.scissor?a.scissor.clone(b.scissor):null;this._stateList=b},translate:function(a,b){var c=this._stateList.matrix;c.m02+=c.m00*a+c.m01*b;c.m12+=c.m10*a+c.m11*b},scale:function(a,b){var c=this._stateList.matrix;c.m00*=a;c.m10*=a;c.m01*=b;c.m11*=b},rotate:function(a){var b=this._stateList.matrix,a=3.141592653589793*a/180,c=Math.sin(a),a=Math.cos(a),d=b.m00,e=b.m10,h=b.m01,n=b.m11;b.m00=
d*a+h*c;b.m10=e*a+n*c;b.m01=h*a-d*c;b.m11=n*a-e*c},transform:function(a,b,c,d,e,h){var n=this._stateList;ed._scratchMatrix.set(a,b,c,d,e,h);bd.multiply(n.matrix,ed._scratchMatrix,n.matrix)},restore:function(){this._stateList=this._stateList.prev},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,d,e,h,n){var f=this._stateList,g=a.root,b=this.transformQuad(b,c,h,n),c=g.width,g=g.height,d=(a.rootX+d)/c,e=(a.rootY+e)/g,h=d+h/c,n=e+
n/g,c=f.alpha,a=this._batcher.prepareDrawTexture(this._renderTarget,f.blendMode,f.scissor,a),f=this._batcher.data;f[a]=b[0];f[++a]=b[1];f[++a]=d;f[++a]=e;f[++a]=c;f[++a]=b[2];f[++a]=b[3];f[++a]=h;f[++a]=e;f[++a]=c;f[++a]=b[4];f[++a]=b[5];f[++a]=h;f[++a]=n;f[++a]=c;f[++a]=b[6];f[++a]=b[7];f[++a]=d;f[++a]=n;f[++a]=c},drawPattern:function(a,b,c,d,e){var h=this._stateList,n=a.root,b=this.transformQuad(b,c,d,e),d=d/n.width,e=e/n.height,n=h.alpha,a=this._batcher.prepareDrawPattern(this._renderTarget,h.blendMode,
h.scissor,a),h=this._batcher.data;h[a]=b[0];h[++a]=b[1];h[++a]=0;h[++a]=0;h[++a]=n;h[++a]=b[2];h[++a]=b[3];h[++a]=d;h[++a]=0;h[++a]=n;h[++a]=b[4];h[++a]=b[5];h[++a]=d;h[++a]=e;h[++a]=n;h[++a]=b[6];h[++a]=b[7];h[++a]=0;h[++a]=e;h[++a]=n},fillRect:function(a,b,c,d,e){var h=this._stateList,b=this.transformQuad(b,c,d,e),c=(a&16711680)/16711680,d=(a&65280)/65280,a=(a&255)/255,e=h.alpha,h=this._batcher.prepareFillRect(this._renderTarget,h.blendMode,h.scissor),n=this._batcher.data;n[h]=b[0];n[++h]=b[1];
n[++h]=c;n[++h]=d;n[++h]=a;n[++h]=e;n[++h]=b[2];n[++h]=b[3];n[++h]=c;n[++h]=d;n[++h]=a;n[++h]=e;n[++h]=b[4];n[++h]=b[5];n[++h]=c;n[++h]=d;n[++h]=a;n[++h]=e;n[++h]=b[6];n[++h]=b[7];n[++h]=c;n[++h]=d;n[++h]=a;n[++h]=e},multiplyAlpha:function(a){this._stateList.alpha*=a},setBlendMode:function(a){this._stateList.blendMode=a},applyScissor:function(a,b,c,d){var e=this._stateList,h=ed._scratchQuadArray;h[0]=a;h[1]=b;h[2]=a+c;h[3]=b+d;e.matrix.transformArray(h,4,h);this._inverseProjection.transformArray(h,
4,h);a=h[0];b=h[1];c=h[2]-a;d=h[3]-b;0>c&&(a+=c,c=-c);0>d&&(b+=d,d=-d);e.applyScissor(a,b,c,d)},willRender:function(){this._batcher.willRender()},didRender:function(){this._batcher.didRender()},onResize:function(a,b){this._stateList=new rh;var c;c=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/a,0,0,-2*c/b,-1,c);this._inverseProjection=new bd;this._inverseProjection.set(2/a,0,0,2/b,-1,-1);this._inverseProjection.invert()},transformQuad:function(a,b,c,d){var c=a+c,d=b+d,e=ed._scratchQuadArray;
e[0]=a;e[1]=b;e[2]=c;e[3]=b;e[4]=c;e[5]=d;e[6]=a;e[7]=d;this._stateList.matrix.transformArray(e,8,e);return e},__class__:ed};var rh=function(){this.scissor=this.prev=this.next=null;this.matrix=new bd;this.alpha=1;this.blendMode=Sa.Normal};g["flambe.platform.html._WebGLGraphics.DrawingState"]=rh;rh.__name__=["flambe","platform","html","_WebGLGraphics","DrawingState"];rh.prototype={applyScissor:function(a,b,c,d){if(null!=this.scissor)var e=aa.max(this.scissor.x,a),h=aa.max(this.scissor.y,b),c=aa.min(this.scissor.x+
this.scissor.width,a+c),d=aa.min(this.scissor.y+this.scissor.height,b+d),a=e,b=h,c=c-e,d=d-h;else this.scissor=new Nc;this.scissor.set(Math.round(a),Math.round(b),Math.round(c),Math.round(d))},__class__:rh};var Zg=function(a,b){var c=this;this._hasGPU=new $a(!0);this.gl=b;b.canvas.addEventListener("webglcontextlost",function(a){a.preventDefault();c._hasGPU.set__(!1)},!1);b.canvas.addEventListener("webglcontextrestore",function(){c.init();c._hasGPU.set__(!0)},!1);a.resize.connect(m(this,this.onResize));
this.init()};g["flambe.platform.html.WebGLRenderer"]=Zg;Zg.__name__=["flambe","platform","html","WebGLRenderer"];Zg.__interfaces__=[Hf];Zg.prototype={get_type:function(){return Qc.WebGL},createTextureFromImage:function(a){if(this.gl.isContextLost())return null;var b=new Gd(this,a.width,a.height);b.uploadImageData(a);return b.createTexture(a.width,a.height)},createTexture:function(a,b){if(this.gl.isContextLost())return null;var c=new Gd(this,a,b);c.clear();return c.createTexture(a,b)},getCompressedTextureFormats:function(){return[]},
createCompressedTexture:function(){this.gl.isContextLost();return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},onResize:function(){var a=this.gl.canvas.width,b=this.gl.canvas.height;this.batcher.resizeBackbuffer(a,b);this.graphics.onResize(a,b)},init:function(){this.batcher=new dk(this.gl);this.graphics=new ed(this.batcher,null);this.onResize()},__class__:Zg,__properties__:{get_type:"get_type"}};var sh=function(a,b,c){Pc.call(this,a,b,c)};
g["flambe.platform.html.WebGLTexture"]=sh;sh.__name__=["flambe","platform","html","WebGLTexture"];sh.__super__=Pc;sh.prototype=k(Pc.prototype,{__class__:sh});var Gd=function(a,b,c){this.framebuffer=this._graphics=null;this._disposed=!1;this._renderer=a;this.width=aa.max(2,$j.nextPowerOfTwo(b));this.height=aa.max(2,$j.nextPowerOfTwo(c));b=a.gl;this.nativeTexture=b.createTexture();a.batcher.bindTexture(this.nativeTexture);b.texParameteri(3553,10242,33071);b.texParameteri(3553,10243,33071);b.texParameteri(3553,
10240,9729);b.texParameteri(3553,10241,9729)};g["flambe.platform.html.WebGLTextureRoot"]=Gd;Gd.__name__=["flambe","platform","html","WebGLTextureRoot"];Gd.__interfaces__=[kh];Gd.drawBorder=function(a,b,c){var d=a.getContext("2d");d.drawImage(a,b-1,0,1,c,b,0,1,c);d.drawImage(a,0,c-1,b,1,0,c,b,1)};Gd.__super__=gb;Gd.prototype=k(gb.prototype,{createTexture:function(a,b){return new sh(this,a,b)},uploadImageData:function(a){if(this.width!=a.width||this.height!=a.height){var b=ka.createEmptyCanvas(this.width,
this.height);b.getContext("2d").drawImage(a,0,0);Gd.drawBorder(b,a.width,a.height);a=b}this._renderer.batcher.bindTexture(this.nativeTexture);this._renderer.gl.texImage2D(3553,0,6408,6408,5121,a)},clear:function(){this._renderer.batcher.bindTexture(this.nativeTexture);this._renderer.gl.texImage2D(3553,0,6408,this.width,this.height,0,6408,5121,null)},getGraphics:function(){if(null==this._graphics){this._graphics=new ed(this._renderer.batcher,this);this._graphics.onResize(this.width,this.height);var a=
this._renderer.gl;this.framebuffer=a.createFramebuffer();this._renderer.batcher.bindFramebuffer(this);a.framebufferTexture2D(36160,36064,3553,this.nativeTexture,0)}return this._graphics},onDisposed:function(){var a=this._renderer.batcher;a.deleteTexture(this);null!=this.framebuffer&&a.deleteFramebuffer(this);this._graphics=this.framebuffer=this.nativeTexture=null},__class__:Gd});var vc=function(a,b,c){c="#ifdef GL_ES\nprecision mediump float;\n#endif\n"+c;this._gl=a;this._program=a.createProgram();
a.attachShader(this._program,vc.createShader(a,35633,b));a.attachShader(this._program,vc.createShader(a,35632,c));a.linkProgram(this._program);a.useProgram(this._program)};g["flambe.platform.shader.ShaderGL"]=vc;vc.__name__=["flambe","platform","shader","ShaderGL"];vc.createShader=function(a,b,c){b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);return b};vc.prototype={useProgram:function(){this._gl.useProgram(this._program)},prepare:function(){null},getAttribLocation:function(a){return this._gl.getAttribLocation(this._program,
a)},getUniformLocation:function(a){return this._gl.getUniformLocation(this._program,a)},__class__:vc};var ph=function(a){vc.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}","varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec4 u_region;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;\n}");
this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.u_region=this.getUniformLocation("u_region");this.setTexture(0)};g["flambe.platform.shader.DrawPatternGL"]=ph;ph.__name__=["flambe","platform","shader","DrawPatternGL"];ph.__super__=vc;ph.prototype=k(vc.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},setRegion:function(a,b,c,d){this._gl.uniform4f(this.u_region,
a,b,c,d)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:ph});var oh=function(a){vc.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.setTexture(0)};g["flambe.platform.shader.DrawTextureGL"]=oh;oh.__name__=["flambe","platform","shader","DrawTextureGL"];oh.__super__=vc;oh.prototype=
k(vc.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:oh});var qh=function(a){vc.call(this,a,"attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_rgb=this.getAttribLocation("a_rgb");this.a_alpha=this.getAttribLocation("a_alpha")};g["flambe.platform.shader.FillRectGL"]=qh;qh.__name__=["flambe","platform","shader","FillRectGL"];qh.__super__=vc;qh.prototype=k(vc.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_rgb);this._gl.enableVertexAttribArray(this.a_alpha);
this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,24,0);this._gl.vertexAttribPointer(this.a_rgb,3,5126,!1,24,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,24,20)},__class__:qh});var th=function(){this._transitor=null;j.call(this);this.scenes=[];this.occludedScenes=[];this._root=new z};g["flambe.scene.Director"]=th;th.__name__=["flambe","scene","Director"];th.__super__=j;th.prototype=k(j.prototype,{get_name:function(){return"Director_29"},pushScene:function(a,b){var c=this;this.completeTransition();
var d=this.get_topScene();null!=d?this.playTransition(d,a,b,function(){c.hide(d)}):(this.add(a),this.invalidateVisibility())},popScene:function(a){var b=this;this.completeTransition();var c=this.get_topScene();if(null!=c){this.scenes.pop();var d=this.get_topScene();null!=d?this.playTransition(c,d,a,function(){b.hideAndDispose(c)}):(this.hideAndDispose(c),this.invalidateVisibility())}},unwindToScene:function(a,b){var c=this;this.completeTransition();var d=this.get_topScene();if(null!=d){if(d!=a){for(this.scenes.pop();0<
this.scenes.length&&this.scenes[this.scenes.length-1]!=a;)this.scenes.pop().dispose();this.playTransition(d,a,b,function(){c.hideAndDispose(d)})}}else this.pushScene(a,b)},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var c=b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},get_topScene:function(){var a=
this.scenes.length;return 0<a?this.scenes[a-1]:null},add:function(a){var b=this.get_topScene();null!=b&&this._root.removeChild(b);S.remove(this.scenes,a);this.scenes.push(a);this._root.addChild(a)},hide:function(a){a=a._compMap.Scene_1;null!=a&&a.hidden.emit()},hideAndDispose:function(a){this.hide(a);a.dispose()},show:function(a){a=a._compMap.Scene_1;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_1;if(null==b||b.opaque)break}this.occludedScenes=
0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},playTransition:function(a,b,c,d){this.completeTransition();this.add(b);null!=c?(this.occludedScenes.push(a),this._transitor=new ek(a,b,c,d),this._transitor.init(this)):(d(),this.invalidateVisibility())},__class__:th,__properties__:k(j.prototype.__properties__,
{get_topScene:"get_topScene"})});var ek=function(a,b,c,d){this._from=a;this._to=b;this._transition=c;this._onComplete=d};g["flambe.scene._Director.Transitor"]=ek;ek.__name__=["flambe","scene","_Director","Transitor"];ek.prototype={init:function(a){this._transition.init(a,this._from,this._to)},update:function(a){return this._transition.update(a)},complete:function(){this._transition.complete();this._onComplete()},__class__:ek};var Lf=function(){};g["flambe.scene.Transition"]=Lf;Lf.__name__=["flambe",
"scene","Transition"];Lf.prototype={init:function(a,b,c){this._director=a;this._from=b;this._to=c},update:function(){return!0},complete:function(){},__class__:Lf};var Hd=function(a,b){this._duration=a;this._ease=null!=b?b:q.linear};g["flambe.scene.TweenTransition"]=Hd;Hd.__name__=["flambe","scene","TweenTransition"];Hd.__super__=Lf;Hd.prototype=k(Lf.prototype,{init:function(a,b,c){Lf.prototype.init.call(this,a,b,c);this._elapsed=0},update:function(a){this._elapsed+=a;return this._elapsed>=this._duration},
interp:function(a,b){return a+(b-a)*this._ease(this._elapsed/this._duration)},__class__:Hd});var uh=function(a,b){Hd.call(this,a,b)};g["flambe.scene.FadeTransition"]=uh;uh.__name__=["flambe","scene","FadeTransition"];uh.__super__=Hd;uh.prototype=k(Hd.prototype,{init:function(a,b,c){Hd.prototype.init.call(this,a,b,c);a=this._to._compMap.Sprite_4;null==a&&this._to.add(a=new D);a.alpha.set__(0)},update:function(a){a=Hd.prototype.update.call(this,a);this._to._compMap.Sprite_4.alpha.set__(this.interp(0,
1));return a},complete:function(){this._to._compMap.Sprite_4.alpha.set__(1)},__class__:uh});var qe=function(a){null==a&&(a=!0);j.call(this);this.opaque=a;this.shown=new ua;this.hidden=new ua};g["flambe.scene.Scene"]=qe;qe.__name__=["flambe","scene","Scene"];qe.__super__=j;qe.prototype=k(j.prototype,{get_name:function(){return"Scene_1"},__class__:qe});var de=function(){};g["flambe.script.Action"]=de;de.__name__=["flambe","script","Action"];de.prototype={__class__:de};var fd=function(a,b,c,d){this._value=
a;this._to=b;this._seconds=c;this._easing=d};g["flambe.script.AnimateTo"]=fd;fd.__name__=["flambe","script","AnimateTo"];fd.__interfaces__=[de];fd.prototype={update:function(a){null==this._tween&&(this._tween=new Cf(this._value._value,this._to,this._seconds,this._easing),this._value.set_behavior(this._tween),this._value.update(a));if(this._value._behavior!=this._tween){var b=this._tween.elapsed-this._seconds;this._tween=null;return 0<b?Math.max(0,a-b):0}return-1},__class__:fd};var ga=function(a){this._fn=
a};g["flambe.script.CallFunction"]=ga;ga.__name__=["flambe","script","CallFunction"];ga.__interfaces__=[de];ga.prototype={update:function(){this._fn();return 0},__class__:ga};var Z=function(a){this._duration=a;this._elapsed=0};g["flambe.script.Delay"]=Z;Z.__name__=["flambe","script","Delay"];Z.__interfaces__=[de];Z.prototype={update:function(a){this._elapsed+=a;if(this._elapsed>=this._duration){var b=this._elapsed-this._duration;this._elapsed=0;return a-b}return-1},__class__:Z};var gd=function(a){this._completedActions=
[];this._runningActions=null!=a?a.slice():[]};g["flambe.script.Parallel"]=gd;gd.__name__=["flambe","script","Parallel"];gd.__interfaces__=[de];gd.prototype={add:function(a){this._runningActions.push(a)},update:function(a,b){for(var c=!0,d=0,e=0,h=this._runningActions.length;e<h;){var n=e++,f=this._runningActions[n];if(null!=f){var g=f.update(a,b);0<=g?(this._runningActions[n]=null,this._completedActions.push(f),g>d&&(d=g)):c=!1}}return c?(this._runningActions=this._completedActions,this._completedActions=
[],d):-1},__class__:gd};var Eb=function(){j.call(this);this.stopAll()};g["flambe.script.Script"]=Eb;Eb.__name__=["flambe","script","Script"];Eb.__super__=j;Eb.prototype=k(j.prototype,{get_name:function(){return"Script_24"},run:function(a){a=new vh(a);this._handles.push(a);return a},stopAll:function(){this._handles=[]},onUpdate:function(a){for(var b=0;b<this._handles.length;){var c=this._handles[b];c.removed||0<=c.action.update(a,this.owner)?this._handles.splice(b,1):++b}},__class__:Eb});var vh=function(a){this.removed=
!1;this.action=a};g["flambe.script._Script.Handle"]=vh;vh.__name__=["flambe","script","_Script","Handle"];vh.__interfaces__=[tc];vh.prototype={dispose:function(){this.removed=!0;this.action=null},__class__:vh};var fb=function(a){this._idx=0;this._runningActions=null!=a?a.slice():[]};g["flambe.script.Sequence"]=fb;fb.__name__=["flambe","script","Sequence"];fb.__interfaces__=[de];fb.prototype={add:function(a){this._runningActions.push(a)},removeAll:function(){this._idx=0;this._runningActions=[]},update:function(a,
b){for(var c=0;;){var d=this._runningActions[this._idx];if(null!=d)if(d=d.update(a-c,b),0<=d)c+=d;else return-1;++this._idx;if(this._idx>=this._runningActions.length){this._idx=0;break}else if(c>a)return-1}return c},__class__:fb};var wh=function(a,b,c){this._strengthX=a;this._strengthY=b;this._duration=c;this._elapsed=0};g["flambe.script.Shake"]=wh;wh.__name__=["flambe","script","Shake"];wh.__interfaces__=[de];wh.prototype={update:function(a,b){var c=b._compMap.Sprite_4;null==this._jitterX&&(this._jitterX=
new Ye(c.x._value,this._strengthX),this._jitterY=new Ye(c.y._value,this._strengthY),c.x.set_behavior(this._jitterX),c.y.set_behavior(this._jitterY));this._elapsed+=a;if(this._elapsed>=this._duration){var d=this._elapsed-this._duration;c.x._behavior==this._jitterX&&c.x.set__(this._jitterX.base);c.y._behavior==this._jitterY&&c.y.set__(this._jitterY.base);this._jitterY=this._jitterX=null;this._elapsed=0;return a-d}return-1},__class__:wh};var Qc=g["flambe.subsystem.RendererType"]={__ename__:["flambe",
"subsystem","RendererType"],__constructs__:["Stage3D","WebGL","Canvas"]};Qc.Stage3D=["Stage3D",0];Qc.Stage3D.toString=r;Qc.Stage3D.__enum__=Qc;Qc.WebGL=["WebGL",1];Qc.WebGL.toString=r;Qc.WebGL.__enum__=Qc;Qc.Canvas=["Canvas",2];Qc.Canvas.toString=r;Qc.Canvas.__enum__=Qc;var xh=function(){};g["flambe.swf.Symbol"]=xh;xh.__name__=["flambe","swf","Symbol"];xh.prototype={__class__:xh};var yh=function(a,b){this._name=a.symbol;var c=a.rect;this.texture=b.subTexture(c[0],c[1],c[2],c[3]);c=a.origin;null!=
c?(this.anchorX=c[0],this.anchorY=c[1]):this.anchorY=this.anchorX=0};g["flambe.swf.BitmapSymbol"]=yh;yh.__name__=["flambe","swf","BitmapSymbol"];yh.__interfaces__=[xh];yh.prototype={createSprite:function(){var a=new ia(this.texture);a.setAnchor(this.anchorX,this.anchorY);return a},__class__:yh};var fk=function(a,b){this._file=a.getFile(b+"/library.json");var c=JSON.parse(this._file.toString());this._symbols=new K;this.frameRate=c.frameRate;for(var d=[],e=0,h=c.movies;e<h.length;){var n=h[e];++e;n=
new zh(this,n);d.push(n);this._symbols.set(n._name,n)}c=c.textureGroups;(1!=c[0].scaleFactor||1<c.length)&&null;c=c[0].atlases;for(e=0;e<c.length;){var f=c[e];++e;h=a.getTexture(b+"/"+Ra.removeFileExtension(f.file));n=0;for(f=f.textures;n<f.length;){var g=f[n];++n;g=new yh(g,h);this._symbols.set(g._name,g)}}for(c=0;c<d.length;){h=d[c];++c;e=0;for(h=h.layers;e<h.length;){n=h[e];++e;n=n.keyframes;f=n.length;for(g=0;g<f;){var i=g++,s=n[i];if(null!=s.symbolName){var j=this._symbols.get(s.symbolName);
s.symbol=j}if(s.tweened&&1==s.duration&&i+1<f&&(i=n[i+1],!i.visible||null==i.symbolName))s.visible=!1}}}};g["flambe.swf.Library"]=fk;fk.__name__=["flambe","swf","Library"];fk.prototype={createSprite:function(a,b){null==b&&(b=!0);var c=this._symbols.get(a);if(null==c){if(b)throw Ra.withFields("Missing symbol",["name",a]);return null}return c.createSprite()},__class__:fk};var Mf=function(a){this._looped=null;D.call(this);this.symbol=a;this.speed=new O(1);this._animators=Array(a.layers.length);for(var b=
0,c=this._animators.length;b<c;){var d=b++;this._animators[d]=new gk(a.layers[d])}this._position=this._frame=0;this["goto"](1)};g["flambe.swf.MovieSprite"]=Mf;Mf.__name__=["flambe","swf","MovieSprite"];Mf.__super__=D;Mf.prototype=k(D.prototype,{getLayer:function(a,b){null==b&&(b=!0);for(var c=0,d=this._animators;c<d.length;){var e=d[c];++c;if(e.layer.name==a)return e.content}if(b)throw Ra.withFields("Missing layer",["name",a]);return null},onAdded:function(){D.prototype.onAdded.call(this);for(var a=
0,b=this._animators;a<b.length;){var c=b[a];++a;this.owner.addChild(c.content)}},onRemoved:function(){D.prototype.onRemoved.call(this);for(var a=0,b=this._animators;a<b.length;){var c=b[a];++a;this.owner.removeChild(c.content)}},onUpdate:function(a){D.prototype.onUpdate.call(this,a);this.speed.update(a);switch(this._flags&384){case 0:this._position+=this.speed._value*a;this._position>this.symbol.duration&&(this._position%=this.symbol.duration,null!=this._looped&&this._looped.emit());break;case 256:this._flags&=
-257}this["goto"](this._position*this.symbol.frameRate)},"goto":function(a){if(this._frame!=a){if(a<this._frame)for(var b=0,c=this._animators;b<c.length;){var d=c[b];++b;d.needsKeyframeUpdate=!0;d.keyframeIdx=0}b=0;for(c=this._animators;b<c.length;)d=c[b],++b,d.composeFrame(a);this._frame=a}},set_position:function(a){return this._position=aa.clamp(a,0,this.symbol.duration)},get_looped:function(){null==this._looped&&(this._looped=new ua);return this._looped},set_pixelSnapping:function(a){for(var b=
0,c=this._animators;b<c.length;){var d=c[b];++b;d.setPixelSnapping(a)}return D.prototype.set_pixelSnapping.call(this,a)},rewind:function(){this._position=0;this._flags|=256},__class__:Mf,__properties__:k(D.prototype.__properties__,{get_looped:"get_looped",set_position:"set_position"})});var gk=function(a){this.keyframeIdx=0;this.needsKeyframeUpdate=!1;this.layer=a;this.content=new z;if(a.empty)this._sprites=null;else{this._sprites=Array(a.keyframes.length);for(var b=0,c=this._sprites.length;b<c;){var d=
b++,e=a.keyframes[d];this._sprites[d]=0<d&&a.keyframes[d-1].symbol==e.symbol?this._sprites[d-1]:null==e.symbol?new D:e.symbol.createSprite()}this.content.add(this._sprites[0])}};g["flambe.swf._MovieSprite.LayerAnimator"]=gk;gk.__name__=["flambe","swf","_MovieSprite","LayerAnimator"];gk.prototype={composeFrame:function(a){if(null!=this._sprites){var b=this.layer.keyframes,c=b.length-1;if(a>this.layer.frames)this.content._compMap.Sprite_4.set_visible(!1),this.keyframeIdx=c,this.needsKeyframeUpdate=
!0;else{for(;this.keyframeIdx<c&&b[this.keyframeIdx+1].index<=a;)++this.keyframeIdx,this.needsKeyframeUpdate=!0;var d;this.needsKeyframeUpdate?(this.needsKeyframeUpdate=!1,d=this._sprites[this.keyframeIdx],d!=this.content._compMap.Sprite_4&&(ra.getClass(d)==Mf&&d.rewind(),this.content.add(d))):d=this.content._compMap.Sprite_4;var e=b[this.keyframeIdx],h=e.visible&&null!=e.symbol;d.set_visible(h);if(h){var h=e.x,n=e.y,f=e.scaleX,g=e.scaleY,i=e.skewX,s=e.skewY,j=e.alpha;if(e.tweened&&this.keyframeIdx<
c){a=(a-e.index)/e.duration;c=e.ease;if(0!=c){var k;0>c?(k=1-a,k=1-k*k,c=-c):k=a*a;a=c*k+(1-c)*a}b=b[this.keyframeIdx+1];h+=(b.x-h)*a;n+=(b.y-n)*a;f+=(b.scaleX-f)*a;g+=(b.scaleY-g)*a;i+=(b.skewX-i)*a;s+=(b.skewY-s)*a;j+=(b.alpha-j)*a}b=d.getLocalMatrix();a=Math.sin(i);i=Math.cos(i);c=Math.sin(s);s=Math.cos(s);b.set(s*f,c*f,-a*g,i*g,h,n);b.translate(-e.pivotX,-e.pivotY);d.alpha.set__(j)}}}},setPixelSnapping:function(a){for(var b=0,c=this._sprites;b<c.length;){var d=c[b];++b;d.set_pixelSnapping(a)}},
__class__:gk};var zh=function(a,b){this._name=b.id;this.frameRate=a.frameRate;this.frames=0;this.layers=Array(b.layers.length);for(var c=0,d=this.layers.length;c<d;){var e=c++,h=new hk(b.layers[e]);this.frames=Math.max(h.frames,this.frames);this.layers[e]=h}this.duration=this.frames/this.frameRate};g["flambe.swf.MovieSymbol"]=zh;zh.__name__=["flambe","swf","MovieSymbol"];zh.__interfaces__=[xh];zh.prototype={createSprite:function(){return new Mf(this)},__class__:zh};var hk=function(a){this.empty=!0;
this.name=a.name;var b=null;this.keyframes=Array(a.keyframes.length);for(var c=0,d=this.keyframes.length;c<d;){var e=c++,b=new ik(a.keyframes[e],b);this.keyframes[e]=b;this.empty=this.empty&&null==b.symbolName}this.frames=null!=b?b.index+b.duration:0};g["flambe.swf.MovieLayer"]=hk;hk.__name__=["flambe","swf","MovieLayer"];hk.prototype={__class__:hk};var ik=function(a,b){this.ease=0;this.visible=this.tweened=!0;this.alpha=1;this.skewX=this.skewY=this.pivotX=this.pivotY=0;this.scaleX=this.scaleY=1;
this.x=this.y=0;this.symbol=null;this.index=null!=b?b.index+b.duration:0;this.duration=a.duration;this.label=a.label;this.symbolName=a.ref;var c=a.loc;null!=c&&(this.x=c[0],this.y=c[1]);c=a.scale;null!=c&&(this.scaleX=c[0],this.scaleY=c[1]);c=a.skew;null!=c&&(this.skewX=c[0],this.skewY=c[1]);c=a.pivot;null!=c&&(this.pivotX=c[0],this.pivotY=c[1]);null!=a.alpha&&(this.alpha=a.alpha);null!=a.visible&&(this.visible=a.visible);null!=a.tweened&&(this.tweened=a.tweened);null!=a.ease&&(this.ease=a.ease)};
g["flambe.swf.MovieKeyframe"]=ik;ik.__name__=["flambe","swf","MovieKeyframe"];ik.prototype={__class__:ik};var Nj=function(){};g["flambe.util.Assert"]=Nj;Nj.__name__=["flambe","util","Assert"];Nj.that=function(){};var ch=function(){};g["flambe.util.BitSets"]=ch;ch.__name__=["flambe","util","BitSets"];ch.set=function(a,b,c){return c?a|b:a&~b};var Ge=function(){this.success=new Y;this.error=new Y;this.progressChanged=new ua;this.hasResult=!1;this._total=this._progress=0};g["flambe.util.Promise"]=Ge;
Ge.__name__=["flambe","util","Promise"];Ge.prototype={get_result:function(){if(!this.hasResult)throw"Promise result not yet available";return this._result},set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=
a&&(this._total=a,this.progressChanged.emit());return a},__class__:Ge,__properties__:{set_total:"set_total",set_progress:"set_progress",set_result:"set_result",get_result:"get_result"}};var Ah=function(a){Ge.call(this);this._promises=a.slice();this._successCount=0;this._disposer=new uc;this.onProgressChanged();for(var a=this._promises,b=0;b<a.length;){var c=a[b];++b;this._disposer.connect1(c.error,m(this,this.onError));this._disposer.connect0(c.progressChanged,m(this,this.onProgressChanged));c=c.get(m(this,
this.onSuccess));null!=c&&this._disposer.add(c)}};g["flambe.util.MultiPromise"]=Ah;Ah.__name__=["flambe","util","MultiPromise"];Ah.__super__=Ge;Ah.prototype=k(Ge.prototype,{onSuccess:function(){if(null!=this._promises&&(++this._successCount,this._successCount>=this._promises.length)){for(var a=[],b=0,c=this._promises;b<c.length;){var d=c[b];++b;a.push(d.get_result())}this.finalize();this.set_result(a)}},onError:function(a){null!=this._promises&&(this.finalize(),this.error.emit(a))},onProgressChanged:function(){if(null!=
this._promises){for(var a=this._total=this._progress=0,b=this._promises;a<b.length;){var c=b[a];++a;this._progress+=c._progress;this._total+=c._total}this.progressChanged.emit()}},finalize:function(){this._disposer.dispose();this._promises=null},__class__:Ah});var ua=function(a){sb.call(this,a)};g["flambe.util.Signal0"]=ua;ua.__name__=["flambe","util","Signal0"];ua.__super__=sb;ua.prototype=k(sb.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;
this._head==sb.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},__class__:ua});var Kj=function(a){this.next=null;this.fn=a};g["flambe.util._SignalBase.Task"]=Kj;Kj.__name__=["flambe","util","_SignalBase","Task"];Kj.prototype={__class__:Kj};var Ra=function(){};g["flambe.util.Strings"]=Ra;Ra.__name__=["flambe","util","Strings"];Ra.getFileExtension=function(a){var b=
a.lastIndexOf(".");return 0<b?S.substr(a,b+1,null):null};Ra.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?S.substr(a,0,b):a};Ra.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=S.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=S.substr(a,b+1,null));return Ra.getFileExtension(a)};Ra.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};Ra.withFields=function(a,b){var c=b.length;if(0<c){for(var a=0<a.length?a+" [":a+"[",d=0;d<c;){0<d&&
(a+=", ");var e=b[d],h=b[d+1];if(G.is(h,Error)){var n=h.stack;null!=n&&(h=n)}a+=e+"="+G.string(h);d+=2}a+="]"}return a};var M=function(){};g["game.Analytics"]=M;M.__name__=["game","Analytics"];M.init=function(){null!=l.config.canada_tracking&&(M.canadaTrackingEnabled=l.config.canada_tracking.enabled);y.staging=tb.staging;M.deltaConfig=l.config.delta_dna;y.onReady.connect(M.onDeltaDNAReady).once();y.clientVersion=l.config.version;null!=M.deltaConfig.platforms&&y.setPlatforms(M.deltaConfig.platforms);
y.init(l.config.nick.url,M.deltaConfig.key_dev,M.deltaConfig.key_live,M.deltaConfig.collect,M.deltaConfig.engage)};M.onDeltaDNAReady=function(){M.isReady=!0;y.isNewPlayer&&M.track("newPlayer",{userCountry:M.deltaConfig.country,referrer:y.getCurrentURL()});M.track("gameStarted");y.trackClientDevice()};M.track=function(a,b){y.track(a,b)};M.trackMatch=function(a,b){M.track(a,ba.merge(b,{userLevel:l.userLevel(),matchID:l.matchId(),gamemodeName:l.gameMode(),characterName:l.currentCharacter.name.toUpperCase()}))};
M.trackMatchEnd=function(a){M.trackMatch(a,{userScore:l.homeScore,opponentName:l.currentOpponent.name.toUpperCase(),dunksScored:l.dunks,stealsScored:l.steals,megaDunksScored:l.megaDunks,superAbilityActivated:l.superAbility,matchName:" ",matchType:" "})};M.trackUI=function(a,b){M.track("uiInteraction",{UIName:a,UIAction:"Click",UIType:"Button",UILocation:b})};M.trackPlayButton=function(){M.canadaTrackingEnabled&&p._platform.getExternal().call("trackFlashEvent",["Show Title: Game Title","play","true"])};
var bl=function(){};g["game.Debug"]=bl;bl.__name__=["game","Debug"];var wc=function(){};g["game.Main"]=wc;wc.__name__=["game","Main"];wc.main=function(){va.init();p.init();o.init(C.width,C.height);var a=new tb(!0);p.root.add(a);I.setScenes(Bh.scenes);I.onChange.connect(wc.onSceneChange);w.loadPacks(["config","ui_loading"],wc.onInitPacksReady)};wc.onSceneChange=function(){x.killAll()};wc.onInitPacksReady=function(){l.init();l.loadConfig("config.json");M.init();tb.configure(l.config);I.change("Loading",
I.createInstantTransition());Ua.instance.load("text,fonts,ui,posters_preview,ui_posters,ui_htp,ui_title,ui_hall,ui_stats,ui_level,ui_character,ui_mode,ui_hud,ui_pause,particles_fx,sprites_platforms,levels,actors,ai,sprites_pack".split(","),function(){Ua.instance.fill(wc.onBasePacksLoaded)})};wc.onBasePacksLoaded=function(){u.loadSounds(wc.getSoundPack(),wc.onSoundsLoaded);W.setSharedAssets("ui");U.defaultTransform="uppercase";U.addFontPack(w.getPack("fonts"));Ka.loadXML();ee.init("actors",cl.components,
!0);I.change(Bh.DefaultScene)};wc.onSoundsLoaded=function(){u.playMusic("menu")};wc.getSoundPack=function(){return o.mobile?!o.slow||o.android?"sound_mobile":"sound_mobile_slow":o.ie?"sound_mobile":"sound"};var A=function(a){null==a&&(a=!0);this._disposer=new uc;qe.call(this,a)};g["stolo.ui.BaseScene"]=A;A.__name__=["stolo","ui","BaseScene"];A.__super__=qe;A.prototype=k(qe.prototype,{dispose:function(){qe.prototype.dispose.call(this);this.set_pack(null)},loadAssets:function(a,b){null==b&&(b=!0);this._loadedPackName=
a;this._autoDisposePack=b;w.loadPack(a,m(this,this.onAssetsLoaded))},onAssetsLoaded:function(a){this.set_pack(a)},onAssetsReady:function(){},onStart:function(){this.owner.add(this._disposer);this.makeReady()},makeReady:function(){if(!this.isReady&&!(null==this._pack||null==this.owner))this.onAssetsReady(),this.isReady=!0},createButton:function(a,b,c,d,e,h){null==d&&(d="buttons");a=W.createButton(a,b,c,d,this.getPack(h));this.addSprite(a,e);return a},createImage:function(a,b,c){a=W.createImage(a,this.getPack(c));
this.addSprite(a,b);return a},createText:function(a,b,c,d){a=U.getLocalizedTextSprite(a,b,0,0,d);this.addSprite(a,c);return a},addSprite:function(a,b){null==b&&(b=this.owner);return W.addSprite(a,b)},addSoundBtn:function(a,b){var c=W.createSoundButton(b);c.setXY(877,15);this.addSprite(c,a);return c},getTexture:function(a,b){return W.getTexture(a,this.getPack(b))},getPack:function(a){null==a&&(a=this._pack);null==a&&(a=W.get_sharedAssets());return a},set_pack:function(a){null!=this._pack&&null!=this._loadedPackName&&
this._autoDisposePack&&this._pack!=a&&(w.disposePack(this._loadedPackName),this._loadedPackName=null);this._pack=a;null!=a&&this.makeReady();return this._pack},__class__:A,__properties__:k(qe.prototype.__properties__,{set_pack:"set_pack"})});var fe=function(a){this._time=0;A.call(this);this._packName=a};g["stolo.ui.PreloadingScene"]=fe;fe.__name__=["stolo","ui","PreloadingScene"];fe.__super__=A;fe.prototype=k(A.prototype,{dispose:function(){A.prototype.dispose.call(this);this._loader=null},onStart:function(){A.prototype.onStart.call(this);
null==this._packName&&(this._packName=fe.defaultPack);this.loadAssets(this._packName,!1)},onUpdate:function(a){A.prototype.onUpdate.call(this,a);this._time+=a},load:function(a,b){this.set_loader(w.loadPacks(a,b));return this._loader},setProgress:function(){},set_loader:function(a){this._loader=a;null!=this._loader&&this._disposer.add(this._loader.progressChanged.connect(m(this,this.onLoaderProgress)));return this._loader},onLoaderProgress:function(){this.setProgress(this._loader._progress/this._loader._total)},
__class__:fe,__properties__:k(A.prototype.__properties__,{set_loader:"set_loader"})});var Ua=function(){fe.call(this);Ua.instance=this};g["game.ui.Loading"]=Ua;Ua.__name__=["game","ui","Loading"];Ua.__super__=fe;Ua.prototype=k(fe.prototype,{dispose:function(){this._barLoading=null;fe.prototype.dispose.call(this);Ua.instance==this&&(Ua.instance=null)},fill:function(a){var b=new xb(Ie.COLOR_FILL,C.width,C.height);b.setAlpha(0);this.addSprite(b);x.to(b,{alpha:1},{time:0.3,delay:0.1,ease:q.quintOut,onComplete:a})},
onAssetsReady:function(){this.createImage("bg");var a=new ya("loading","ui_loading");a.speed.set__(0.3);this.owner.addChild((new z).add(a));a.centerAnchor().setXY(C.width/2,160);this._barLoading=new ia(this._pack.getTexture("bar_loading"));this.owner.addChild((new z).add(this._barLoading));this._barLoading.centerAnchor().setXY(C.width/2+2,C.height/2+21);this._barLoading.scissor=new Nc(0,0,0,this._barLoading.getNaturalHeight())},setProgress:function(a){null!=this._barLoading&&(this._barLoading.scissor.width=
this._barLoading.getNaturalWidth()*a)},__class__:Ua});var Ch=function(){A.call(this)};g["game.ui.Gameplay"]=Ch;Ch.__name__=["game","ui","Gameplay"];Ch.__super__=A;Ch.prototype=k(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);l.inTournament&&l.game.levelNotNew(l.currentLevel);C.slimeBall&&(l.slimeBall=null==l.gameBall&&0.25<=Math.random());this._gameEntity=new z;this._gameEntity.add(new D);this._gameSystem=new Nf;this._gameEntity.add(this._gameSystem);this.owner.addChild(this._gameEntity);
this.owner.addChild(this._gameSystem.hud.container);u.playMusic("gameplay");M.trackMatch("matchStarted")},onRemoved:function(){this._gameSystem=this._gameEntity=null;for(var a=Da.getPacks(l.currentLevel),b=0;b<a.length;){var c=a[b];++b;w.disposePack(c)}La.clearCache();A.prototype.onRemoved.call(this)},__class__:Ch});var Dh=function(){Ua.call(this)};g["game.ui.GameplayLoading"]=Dh;Dh.__name__=["game","ui","GameplayLoading"];Dh.__super__=Ua;Dh.prototype=k(Ua.prototype,{dispose:function(){Ua.prototype.dispose.call(this)},
onAssetsReady:function(){Ua.prototype.onAssetsReady.call(this);l.setRandomOpponent();var a=Da.getPacks(l.currentLevel);this._progress=this.createText("LOADING_PC","default",null,{p:0});this._progress.setXY(480,250);var b;0.14>Math.random()?(b=la.get_availableCodes().filter(function(a){return"HARD_MODE"!=a}),b="CODE_"+b[Math.floor(Math.random()*b.length+1)-1],this.createImage("lock").setXY(446,326)):b="TIP_"+Math.floor(9*Math.random()+1);this.createText(b,"buttons_white").setXY(480,379);this._btnNext=
this.createButton(m(this,this.gotoGameplay),"btn_loading","PLAY_BUTTON",null,null,w.getPack("ui")).setXY(404,457).setAlpha(0);this.load(a,m(this,this.onPacksLoaded))},onPacksLoaded:function(){var a=this;x.to(this._btnNext,{y:417,alpha:1},{time:0.5,onComplete:function(){a._btnNext.setXY(404,417)}},q.quadOut);this.setProgress(1)},setProgress:function(a){Ua.prototype.setProgress.call(this,a);this._progress.setText("LOADING_PC",{p:Math.round(100*a)})},gotoGameplay:function(a){null!=a&&a.disablePointer();
I.change("gameplay")},__class__:Dh});var Eh=function(){A.call(this)};g["game.ui.Editor"]=Eh;Eh.__name__=["game","ui","Editor"];Eh.__super__=A;Eh.prototype=k(A.prototype,{onAdded:function(){this._entity=new z;this._entity.add(new D);this._system=new Je(Da.get(l.currentLevel));this._entity.add(this._system);this.owner.addChild(this._entity)},__class__:Eh});var Fh=function(){Ua.call(this)};g["game.ui.EditorLoading"]=Fh;Fh.__name__=["game","ui","EditorLoading"];Fh.__super__=Ua;Fh.prototype=k(Ua.prototype,
{dispose:function(){Ua.prototype.dispose.call(this)},onAssetsReady:function(){Ua.prototype.onAssetsReady.call(this);this.load(Da.getPacks(l.currentLevel,!0),m(this,this.onPacksLoaded))},onPacksLoaded:function(){I.change("editor")},__class__:Fh});var df=function(){A.call(this,!1)};g["game.ui.GameplayWin"]=df;df.__name__=["game","ui","GameplayWin"];df.onClick=function(){l.inTournament&&l.hasWon&&(l.currentLevel=Da.get(l.currentLevel).unlock);M.trackUI("EXIT","Win screen");l.newPosterUnlock?I.push("NewPoster"):
l.newCharacterUnlock?I.push("NewCharacter"):l.inTournament?I.change("GameplayLoading"):I.change("SelectCharacter")};df.__super__=A;df.prototype=k(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);this.loadAssets("ui_win")},dispose:function(){w.disposePack("ui_win");A.prototype.dispose.call(this)},onAssetsReady:function(){x.delayCallTo(function(){u.playMusic("menu")},0.5);this.createImage("bg");var a=this.createText(l.hasWon?"WIN_TITLE":"FAIL_TITLE");a.setXY(C.width/2,88);a.anchorY.set__(a.getNaturalHeight()/
2);var b=this.createImage("star"),c=this.buildConfettiBG(),d=this.createImage("winner_bar"),e=this.createImage("loser_bar"),h=this.createText("SCORE",l.hasWon?"win_score":"fail_score",null,{p:l.homeScore});h.setXY(370,200);h.anchorY.set__(0.5*h.getNaturalHeight()+(l.hasWon?10:-9));var n=this.createText("SCORE",l.hasWon?"fail_score":"win_score",null,{p:l.awayScore});n.setXY(590,200);n.anchorY.set__(0.5*n.getNaturalHeight()+(l.hasWon?-9:10));a=this.createImage(l.currentCharacter.asset+(l.hasWon?"_winner":
"_loser"));a.setXY(0,C.height-a.getNaturalHeight());var f=this.createImage(l.currentOpponent.asset+(l.hasWon?"_loser":"_winner"));f.setXY(C.width,C.height-f.getNaturalHeight());f.setScaleXY(-1,1);l.hasWon?(u.play("win","END"),u.play("win_"+l.currentCharacter.name,"char"),b.setXY(0,88),d.setXY(0,160),e.setXY(C.width-e.getNaturalWidth(),162)):(u.play("fail","END"),u.play("lose_"+l.currentCharacter.name,"char"),b.setScaleXY(-1,1),b.setXY(C.width,88),d.setScaleXY(-1,1),d.setXY(C.width,160),e.setScaleXY(-1,
1),e.setXY(e.getNaturalWidth(),162));var g={p:0};g.p=l.dunks;b=this.createText("STATS_STATS",null,null,g).setXY(C.width/2,270);d=this.createText("STATS_DUNKS").setXY(C.width/2,297);g.p=l.steals;var e=this.createText("STATS_STATS",null,null,g).setXY(C.width/2,335),i=this.createText("STATS_STEALS").setXY(C.width/2,363);g.p=l.megaDunks;var g=this.createText("STATS_STATS",null,null,g).setXY(C.width/2,400),s=this.createText("STATS_MEGA_DUNKS").setXY(C.width/2,428),j=this.buildConfettiFG();this.addSoundBtn();
this.owner.addChild(this.createButton(df.onClick,"btn_next",null,null,null,w.getPack("ui")).setXY(897,C.getModifiedHeight(20)-65).centerAnchor().owner);x.from(a,{x:"-=200"},{time:0.5},q.quintOut);x.from(f,{x:"+=200"},{time:0.5,onComplete:function(){c.start();j.start()}},q.quintOut);x.from(h,{x:"-=200"},{time:0.4,onComplete:function(){x.to(h,{scaleX:1.5,scaleY:1.5},{time:0.2,onComplete:function(){x.to(h,{scaleX:1,scaleY:1},{time:0.2},q.quintIn)}},q.quintOut)}},q.bounceOut);x.from(n,{x:"+=200"},{time:0.4,
onComplete:function(){x.to(n,{scaleX:1.5,scaleY:1.5},{time:0.2,onComplete:function(){x.to(n,{scaleX:1,scaleY:1},{time:0.2},q.quintIn)}},q.quintOut)}},q.bounceOut);x.from(b,{y:"-=40",alpha:0},{time:0.4,delay:0.8},q.quadOut);x.from(d,{y:"-=40",alpha:0},{time:0.4,delay:0.8},q.quadOut);x.from(e,{y:"-=40",alpha:0},{time:0.4,delay:1},q.quadOut);x.from(i,{y:"-=40",alpha:0},{time:0.4,delay:1},q.quadOut);x.from(g,{y:"-=40",alpha:0},{time:0.4,delay:1.2},q.quadOut);x.from(s,{y:"-=40",alpha:0},{time:0.4,delay:1.2},
q.quadOut);A.prototype.onAssetsReady.call(this);l.config.showNickSportPopup&&x.delayCallTo(m(this,this.showNickSportsPopup),2)},showNickSportsPopup:function(){I.push("NickSportPopup")},buildConfettiBG:function(){var a=new Ke;a.autoStart=!1;this.owner.add(a);a.maxCount=80;a.startSpreadY=0.3;a.speed.set__(2);a.speed.animateTo(1,2);a.width=0.333*C.width;a.centerX=l.hasWon?C.width/6:5*C.width/6;return a},buildConfettiFG:function(){var a=new Ke;a.autoStart=!1;this.owner.addChild((new z).add(a));a.maxCount=
20;a.startSpreadY=0.3;a.speed.set__(2);a.speed.animateTo(1,2);a.width=0.333*C.width;a.centerX=l.hasWon?C.width/6:5*C.width/6;return a},__class__:df});var ef=function(){this._spinBeams=!1;A.call(this,!1)};g["game.ui.GameplayEnd"]=ef;ef.__name__=["game","ui","GameplayEnd"];ef.onClick=function(){M.trackUI("EXIT","End game");l.currentLevel=null;l.newPosterUnlock?I.push("NewPoster"):l.newCharacterUnlock?I.push("NewCharacter"):I.change("SelectCharacter")};ef.__super__=A;ef.prototype=k(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);
this.loadAssets("ui_end");u.playMusic("menu",!0)},dispose:function(){w.disposePack("ui_end");A.prototype.dispose.call(this);this._beams=null},onUpdate:function(a){A.prototype.onUpdate.call(this,a);if(null!=this._beams&&this._spinBeams){var b=this._beams.rotation;b.set__(b._value+10*a)}},onAssetsReady:function(){var a=this;this.createImage("bg");this._beams=this.createImage("beams").centerAnchor().setXY(478,307);var b=this.buildConfettiBG(),c=this.createText("END_"+l.currentCharacter.team.toUpperCase(),
"hud_callout");c.setAlign(Ta.Center);c.setScale(0.5);c.setXY(C.width/2,40);var d=this.createImage("black_bar");d.setXY(0,C.height-d.getNaturalHeight());this.createText("END_WATCH_NICK").setXY(510,532);this.createImage("only_nick").setXY(520,515);d=this.createImage("end_"+l.currentCharacter.team+"_l");d.setXY(27,107);var e=this.createImage("end_"+l.currentCharacter.team+"_r");"team_korra"==l.currentCharacter.team?e.setXY(480,107):e.setXY(543,107);var h=this.createImage("ball").setXY(394,136);this.createImage("award").setXY(369,
220);var n=this.buildConfettiFG();this.createButton(ef.onClick,"btn_play",null,null,null,w.getPack("ui")).setXY(853,C.getModifiedHeight(20)-102);this.createImage("lock").setXY(446,411);this.createText("CODE_HARD_MODE","buttons_white").setXY(480,464);this.addSoundBtn();x.from(h,{y:"-=200"},{time:0.4,delay:0},q.bounceOut);x.from(d,{x:"+=300",alpha:0},{time:0.6,delay:0.3},q.quadOut);x.from(e,{x:"-=300",alpha:0},{time:0.6,delay:0.3},q.quadOut);x.from(c,{y:"+=30",alpha:0},{time:0.6,delay:0.3},q.quadOut);
x.from(this._beams,{scaleX:0,scaleY:0,alpha:0},{time:0.4,delay:0.5},q.quadOut);x.delayCallTo(function(){a._spinBeams=!0;b.start();n.start()},0.5);A.prototype.onAssetsReady.call(this)},buildConfettiBG:function(){var a=new Ke;a.autoStart=!1;this.owner.addChild((new z).add(a));a.maxCount=100;a.startSpreadY=0.3;a.speed.set__(2);a.speed.animateTo(1,2);a.width=C.width;a.centerX=C.width/2;return a},buildConfettiFG:function(){var a=new Ke;a.autoStart=!1;this.owner.addChild((new z).add(a));a.maxCount=20;a.startSpreadY=
0.3;a.speed.set__(2);a.speed.animateTo(1,2);a.width=C.width;a.centerX=C.width/2;return a},__class__:ef});var Ie=function(){this._codePointerDown=!1;A.call(this,!1)};g["game.ui.Title"]=Ie;Ie.__name__=["game","ui","Title"];Ie.__super__=A;Ie.prototype=k(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);this.loadAssets("ui_title");u.playMusic("menu")},dispose:function(){w.disposePack("ui_title");w.disposePack("ui_level");w.disposePack("ui_stats");w.disposePack("ui_posters");w.disposePack("ui_hall");
A.prototype.dispose.call(this)},onStart:function(){A.prototype.onStart.call(this);this.bindClick()},onClick:function(){this._codePointerDown||(u.playMusic("menu"),M.trackUI("PLAY","Title"),I.change("Mode"));this._codePointerDown=!1},bindClick:function(){var a=this;x.delayCallTo(function(){p._platform.getPointer().up.connect(m(a,a.onClick)).once()},0.7)},onGameCode:function(){var a=this;M.trackUI("PROMO","Title");I.push("PromoScreen");I.onPop.connect(function(){a.bindClick()}).once()},onAssetsReady:function(){var a=
this;A.prototype.onAssetsReady.call(this);this.createImage("bg");var b=this.createImage("character");b.setXY(137,103);var c=this.createImage("character2");c.setXY(501,163);var d=new xb(Ie.COLOR_FILL,C.width,C.height);this.addSprite(d);var e=this.createText(p._platform.getTouch().get_supported()?"PLAY_TOUCH":"PLAY");e.setXY(485,500);var h=this.createImage("stars");h.setAnchor(h.getNaturalWidth(),h.getNaturalHeight());h.setXY(550,110);var n=this.createImage("ball");n.centerAnchor();n.setXY(360,110);
var f=this.createImage("nick-basketball-stars-logo");f.centerAnchor();f.setXY(480,110);var g=this.createButton(m(this,this.onGameCode),"btn_code");g.setXY(815,C.getModifiedHeight(20)-110);this._disposer.add(g.get_pointerDown().connect(function(){a._codePointerDown=!0}));x.to(d,{alpha:0},{time:2,ease:q.quintInOut,delay:0});x.from(n,{scaleX:0,scaleY:0},{time:3,ease:q.elasticOut,onStart:function(){n.rotation.animateTo(360,2,q.quintOut)},onComplete:function(){}});x.from(e,{alpha:0},{time:1.5,delay:0.9,
ease:q.quintInOut,onComplete:function(){e.alpha.set_behavior(new Ob(1,0.5,0.5))}});x.from(b,{x:"-=110",y:"+=170",alpha:0},{time:0.8,ease:q.backOut,delay:0.8});x.from(c,{x:"+=110",y:"+=170",alpha:0},{time:0.8,ease:q.backOut,delay:0.9});x.from(f,{scaleX:0,scaleY:0},{time:0.8,ease:q.backOut,delay:0.5});x.from(h,{x:"-=70",y:"+=70",alpha:0},{time:0.8,ease:q.backOut,delay:0.8});x.from(g,{alpha:0},{time:0.8,ease:q.backOut,delay:1.5});x.delayCallTo(function(){n.rotation.set_behavior(new Ob(360,0,15))},2)},
__class__:Ie});var Gh=function(){this._buttons=[];A.call(this,!1)};g["game.ui.SelectMode"]=Gh;Gh.__name__=["game","ui","SelectMode"];Gh.__super__=A;Gh.prototype=k(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);this.loadAssets("ui_mode");u.playMusic("menu")},dispose:function(){w.disposePack("ui_mode");A.prototype.dispose.call(this)},onAssetsReady:function(){this._backgroundSprite=this.createImage("bg");this._btnPrev=this.createButton(m(this,this.prevPage),"btn_prev",null,null,null,
w.getPack("ui")).setXY(24,18);this.owner.addChild(this._btnPrev.owner);this._btnTournament=this.createButton(m(this,this.nextPageTournament),"btn_tournament","MODE_TOURNAMENT").setXY(87,138);this.owner.addChild(this._btnTournament.owner);this._btnTournament.label.setAnchor(0,this._btnTournament.label.anchorY._value).setXY(130,220);this._buttons.push(this._btnTournament);this._btnRandom=this.createButton(m(this,this.nextPageRandom),"btn_random","MODE_RANDOM").setXY(357,194);this.owner.addChild(this._btnRandom.owner);
this._btnRandom.label.setAnchor(0,this._btnRandom.label.anchorY._value).setXY(120,220);this._buttons.push(this._btnRandom);this._btnHall=this.createButton(m(this,this.nextPageHall),"btn_hall","MODE_HALL").setXY(589,138);this.owner.addChild(this._btnHall.owner);this._btnHall.label.setAnchor(0,this._btnHall.label.anchorY._value).setXY(120,220);this._buttons.push(this._btnHall);this._modeText=this.createText("MODE_TITLE","title").setXY(516,70);this.createButton(m(this,this.openCode),"btn_code").setXY(853,
C.getModifiedHeight(20)-102);x.from(this._modeText,{y:"-=60",alpha:0},{time:0.7,ease:q.quintOut,delay:0});this.addSoundBtn();for(var a=0,b=0,c=this._buttons;b<c.length;){var d=c[b];++b;x.from(d,{y:"-=100",alpha:0},{time:0.5,ease:q.backOut,delay:0.06*a});a++}A.prototype.onAssetsReady.call(this)},onStop:function(){A.prototype.onStop.call(this);this._btnHall=this._btnRandom=this._btnTournament=this._btnPrev=this._backgroundSprite=this._modeText=null},prevPage:function(){M.trackUI("EXIT","Select mode");
I.change("Title")},nextPageTournament:function(){l.inTournament=!0;M.trackUI("TOURNAMENT","Select mode");I.change("SelectCharacter")},nextPageRandom:function(){l.inTournament=!1;M.trackUI("RANDOM GAME","Select mode");I.change("SelectCharacter")},nextPageHall:function(){M.trackUI("HALL OF FAME","Select mode");I.change("HallOfFame")},openCode:function(){M.trackUI("PROMO","Select mode");I.push("PromoScreen")},__class__:Gh});var Hh=function(){A.call(this,!1)};g["game.ui.HallOfFame"]=Hh;Hh.__name__=["game",
"ui","HallOfFame"];Hh.__super__=A;Hh.prototype=k(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);this.loadAssets("ui_hall");u.playMusic("menu")},dispose:function(){w.disposePack("ui_hall");A.prototype.dispose.call(this)},onAssetsReady:function(){this._backgroundSprite=this.createImage("bg");var a=this.createText("HALL_TITLE");a.setXY(C.width/2,68);a.anchorY.set__(a.getNaturalHeight()/2);this._btnPrev=this.createButton(m(this,this.prevPage),"btn_prev",null,null,null,w.getPack("ui")).setXY(24,
18);this._btnStats=this.createButton(m(this,this.statsPage),"btn_stats","HALL_BTN_STATS").setXY(131,148);this._btnStats.label.setAlign(Ta.Left);a=this._btnStats.label.x;a.set__(a._value-110);this._btnStats.label.y.set__(273);this._btnPosters=this.createButton(m(this,this.postersPage),"btn_posters","HALL_BTN_POSTERS").setXY(455,148);this._btnPosters.label.setAlign(Ta.Left);a=this._btnPosters.label.x;a.set__(a._value-110);this._btnPosters.label.y.set__(273);l.game.isAnyNewPoster()&&(this._newImage=
this.createImage("btn_new",this._btnPosters.owner,w.getPack("ui")).setXY(-20,-20),this._newLabel=this.createText("HALL_NEW",null,this._newImage.owner).setXY(this._newImage.getNaturalWidth()/2,this._newImage.getNaturalHeight()/2),this._newLabel.anchorY.set__(this._newLabel.getNaturalHeight()/2));this.addSoundBtn();A.prototype.onAssetsReady.call(this)},onStop:function(){A.prototype.onStop.call(this);this._btnPosters=this._btnStats=this._btnPrev=this._backgroundSprite=null},prevPage:function(){M.trackUI("EXIT",
"Hall of fame");I.change("Mode")},statsPage:function(){M.trackUI("STATS","Hall of fame");I.change("Stats")},postersPage:function(){M.trackUI("POSTERS","Hall of fame");I.change("Posters")},__class__:Hh});var xc=function(){this._selectedIndex=-1;this._list=H.list;A.call(this,!1)};g["game.ui.Stats"]=xc;xc.__name__=["game","ui","Stats"];xc.__super__=A;xc.prototype=k(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);this.loadAssets("ui_stats")},dispose:function(){w.disposePack("ui_stats");
A.prototype.dispose.call(this)},onAssetsReady:function(){A.prototype.onAssetsReady.call(this);this.createImage("bg");var a=this.createText("STATS_TITLE");a.setXY(C.width/2,50);this._btnPrev=this.createButton(m(this,this.prevPage),"btn_prev",null,null,null,w.getPack("ui")).setXY(24,18);this.createText("STATS_GAMES_WON").setXY(65,484);this.createText("STATS_DUNKS").setXY(163,484);this.createText("STATS_MEGA_DUNKS").setXY(261,484);this.createText("STATS_STEALS").setXY(356,484);this.createText("STATS_GAMES_PLAYED").setXY(453,
484);this._params={p:0};null!=l.currentCharacter?this.select(this.getIndexByName(l.currentCharacter.name)):this.select(0);this.addSoundBtn();x.from(a,{y:"-=60",alpha:0},{time:0.7,ease:q.quintOut,delay:0})},prevPage:function(){M.trackUI("EXIT","Stats");I.change("HallOfFame")},select:function(a){var b=this._list[a];if(null==b)throw"No data for button"+a;this._selectedIndex!=a&&(null==this._avatar?(this._avatar=this.createImage("avatar_"+b.name),this._avatar.setScaleXY(-1,1)):this._avatar.texture=this.getTexture("avatar_"+
b.name),this._avatar.setXY(C.width,C.height-this._avatar.getNaturalHeight()),null==this._nameTab&&(this._nameTab=this.createImage("name").setXY(517,390)),null==this._playerName?this._playerName=this.createText(b.name,"info_black"):this._playerName.setText(b.name),this._playerName.setXY(565,420),null==this._teamLogo?this._teamLogo=this.createImage(b.team):this._teamLogo.texture=this.getTexture(b.team),this._teamLogo.setXY(695,358),this._params.p=l.game.getStats(b.name,Ga.GAMES_WON),null==this._gamesWon?
this._gamesWon=this.createText("STATS_STATS",null,null,this._params):this._gamesWon.setText("STATS_STATS",this._params),this._gamesWon.setXY(65,457),this._params.p=l.game.getStats(b.name,Ga.DUNKS),null==this._dunks?this._dunks=this.createText("STATS_STATS",null,null,this._params):this._dunks.setText("STATS_STATS",this._params),this._dunks.setXY(163,457),this._params.p=l.game.getStats(b.name,Ga.MEGA_DUNKS),null==this._megaDunks?this._megaDunks=this.createText("STATS_STATS",null,null,this._params):
this._megaDunks.setText("STATS_STATS",this._params),this._megaDunks.setXY(261,457),this._params.p=l.game.getStats(b.name,Ga.STEALS),null==this._steals?this._steals=this.createText("STATS_STATS",null,null,this._params):this._steals.setText("STATS_STATS",this._params),this._steals.setXY(356,457),this._params.p=l.game.getStats(b.name,Ga.GAMES_PLAYED),null==this._gamesPlayed?this._gamesPlayed=this.createText("STATS_STATS",null,null,this._params):this._gamesPlayed.setText("STATS_STATS",this._params),this._gamesPlayed.setXY(453,
457),null==this._buttons&&this.buildGrid(),-1!=this._selectedIndex&&this._buttons[this._selectedIndex].deselect(),l.currentCharacter=b,this._selectedIndex=a,this._buttons[this._selectedIndex].select())},buildGrid:function(){this._buttons=[];this._container=(new D).setXY(xc.Grid.x,xc.Grid.y);this.owner.addChild((new z).add(this._container));for(var a=0,b=0,c=this._list;b<c.length;){var d=c[b];++b;this.addButton(d,a);a++}},addButton:function(a,b){var c;l.isCharacterUnlock(a)?c=this.createButton(m(this,
this.onButtonClick),a.name):(c=this.createButton(m(this,this.onButtonClick),G.string(a.name)+"_locked"),c.set_pointerEnabled(!1));c.index=b;var d=Math.round(b%xc.Grid.perRow),e=Math.floor(b/xc.Grid.perRow);c.setXY(d*xc.Grid.spacing.x+(1==(e&1)?0.5*-xc.Grid.spacing.x:0),e*xc.Grid.spacing.y);this._container.owner.addChild(c.owner);this._buttons.push(c)},onButtonClick:function(a){this.select(a.index)},getIndexByName:function(a){for(var b=0,c=this._list;b<c.length;){var d=c[b];++b;if(d.name==a)return this._list.indexOf(d)}return-1},
onStop:function(){A.prototype.onStop.call(this);this._params=this._gamesPlayed=this._megaDunks=this._steals=this._dunks=this._gamesWon=this._avatar=this._nameTab=this._teamLogo=this._playerName=this._btnPrev=this._container=this._buttons=this._list=null},__class__:xc});var Ih=function(){this.team_logos=new K;this.TEAM_LOGO_X=[135,255,375,495,615,735];this.LENGTH_BETWEEN_POSTER=280;this._selectedIndex=-1;this._list=H.list;A.call(this,!1)};g["game.ui.Posters"]=Ih;Ih.__name__=["game","ui","Posters"];
Ih.__super__=A;Ih.prototype=k(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);this.loadAssets("ui_posters")},dispose:function(){w.disposePack("ui_posters");A.prototype.dispose.call(this)},onAssetsReady:function(){A.prototype.onAssetsReady.call(this);this.createImage("bg");var a=this.createText("POSTERS_TITLE");a.setXY(C.width/2,500);this._btnPrev=this.createButton(m(this,this.prevPage),"btn_prev",null,null,null,w.getPack("ui")).setXY(24,18);this._btnLeft=this.createButton(m(this,this.previousPoster),
"arrow_left").setXY(50,170);this._btnRight=this.createButton(m(this,this.nextPoster),"arrow_right").setXY(873,170);this._teamTMNTLogo=this.createImage("team_tmnt").setXY(191,400);this.team_logos.set("team_tmnt",this._teamTMNTLogo);this._teamSCLogo=this.createImage("team_sc").setXY(315,400);this.team_logos.set("team_sc",this._teamSCLogo);this._teamKorraLogo=this.createImage("team_korra").setXY(435,400);this.team_logos.set("team_korra",this._teamKorraLogo);this._teamHBLogo=this.createImage("team_hb").setXY(545,
400);this.team_logos.set("team_hb",this._teamHBLogo);this._teamSBLogo=this.createImage("team_sb").setXY(673,400);this.team_logos.set("team_sb",this._teamSBLogo);this._teamPGBCLogo=this.createImage("team_pgbc").setXY(673,400);this.team_logos.set("team_pgbc",this._teamPGBCLogo);this._teamLoudLogo=this.createImage("team_loud").setXY(673,400);this.team_logos.set("team_loud",this._teamLoudLogo);this.buildSlides();l.game.clearNewPoster();null!=l.currentCharacter?this.select(this.getIndexByName(l.currentCharacter.name)):
this.select(0);this.animateTo(this._posters[this.absolutePosition(this._selectedIndex+2)],2*this.LENGTH_BETWEEN_POSTER,0.9,0);this.animateTo(this._posters[this.absolutePosition(this._selectedIndex-2)],-2*this.LENGTH_BETWEEN_POSTER,0.9,0);this.addSoundBtn();x.from(a,{y:"-=60",alpha:0},{time:0.7,ease:q.quintOut,delay:0})},prevPage:function(){M.trackUI("EXIT","Posters");I.change("HallOfFame")},nextPoster:function(){this.select(this.absolutePosition(this._selectedIndex-1),0.5);this.animateTo(this._posters[this.absolutePosition(this._selectedIndex+
2)],2*this.LENGTH_BETWEEN_POSTER,0.9,0.7);this.animateTo(this._posters[this.absolutePosition(this._selectedIndex-2)],-2*this.LENGTH_BETWEEN_POSTER,0.9,0)},previousPoster:function(){this.select(this.absolutePosition(this._selectedIndex+1),0.5);this.animateTo(this._posters[this.absolutePosition(this._selectedIndex+2)],2*this.LENGTH_BETWEEN_POSTER,0.9,0);this.animateTo(this._posters[this.absolutePosition(this._selectedIndex-2)],-2*this.LENGTH_BETWEEN_POSTER,0.9,0.7)},absolutePosition:function(a){return(a+
this._list.length)%this._list.length},animateTo:function(a,b,c,d){x.to(a,{x:b,scaleX:c,scaleY:c},{time:d,ease:q.quadOut,delay:0})},select:function(a,b){null==b&&(b=0);var c=this._list[a];l.currentCharacter=c;this._selectedIndex=a;this.animateTo(this._posters[this._selectedIndex],0,1,b);this._posters[this._selectedIndex].set_pointerEnabled(!l.game.isPostersLocked(c.name));this.animateTo(this._posters[this.absolutePosition(this._selectedIndex+1)],this.LENGTH_BETWEEN_POSTER,0.9,b);this._posters[this.absolutePosition(this._selectedIndex+
1)].set_pointerEnabled(!1);this.animateTo(this._posters[this.absolutePosition(this._selectedIndex-1)],-this.LENGTH_BETWEEN_POSTER,0.9,b);this._posters[this.absolutePosition(this._selectedIndex-1)].set_pointerEnabled(!1);this._teamTMNTLogo.texture=this._pack.getTexture("team_tmnt"+(l.game.isPosterTeamLocked(c.name,H.TEAM_TMNT)?"_disabled":""));this._teamSCLogo.texture=this._pack.getTexture("team_sc"+(l.game.isPosterTeamLocked(c.name,H.TEAM_SANJAY_CRAIG)?"_disabled":""));this._teamKorraLogo.texture=
this._pack.getTexture("team_korra"+(l.game.isPosterTeamLocked(c.name,H.TEAM_KORRA)?"_disabled":""));this._teamHBLogo.texture=this._pack.getTexture("team_hb"+(l.game.isPosterTeamLocked(c.name,H.TEAM_HARVEY_BEAKS)?"_disabled":""));this._teamSBLogo.texture=this._pack.getTexture("team_sb"+(l.game.isPosterTeamLocked(c.name,H.TEAM_SPONGE_BOB)?"_disabled":""));this._teamPGBCLogo.texture=this._pack.getTexture("team_pgbc"+(l.game.isPosterTeamLocked(c.name,H.TEAM_PGBC)?"_disabled":""));this._teamLoudLogo.texture=
this._pack.getTexture("team_loud"+(l.game.isPosterTeamLocked(c.name,H.TEAM_LOUD)?"_disabled":""));for(var d=0,e=this.team_logos.keys();e.hasNext();){var h=e.next();h==c.team?this.team_logos.get(h).set_visible(!1):(h=this.team_logos.get(h),h.set_visible(!0),h.x.set__(this.TEAM_LOGO_X[d++]))}},buildSlides:function(){this._posters=[];this._container=(new D).setXY(C.width/2,175);this.owner.addChild((new z).add(this._container));this._container.scissor=new Nc(-358,-175,700,400);for(var a=0,b=this._list;a<
b.length;){var c=b[a];++a;this.addPoster(c)}},addPoster:function(a){var b=l.game.isPostersLocked(a.name),c,d=w.getPack("posters_preview");b?c=this.createButton(null,"poster_locked",null,null,this._container.owner):(c=this.createButton(m(this,this.onClick),"poster_back",null,null,this._container.owner),this.createImage(G.string(a.name)+"_poster",c.owner,d).centerAnchor(),this.createImage("magnifier",c.owner).centerAnchor());c.centerAnchor();c.setXY(2*this.LENGTH_BETWEEN_POSTER,27);this.createImage(G.string(a.name)+
(b?"_disabled":""),c.owner).centerAnchor().setXY(-120,-140);l.game.isNewPoster(a.name)&&(a=this.createImage("btn_new",c.owner,w.getPack("ui")).centerAnchor().setXY(0,0.5*-c.getNaturalHeight()),a=this.createText("HALL_NEW",null,a.owner).setXY(0.5*a.getNaturalWidth(),0.5*a.getNaturalHeight()),a.anchorY.set__(0.5*a.getNaturalHeight()));this._posters.push(c)},onClick:function(){M.trackUI("CLICK POSTERS "+l.currentCharacter.name.toUpperCase(),"Posters");Qb.getURL(ub.BASE_URL+"posters/"+l.currentCharacter.name+
"_poster.jpg")},getIndexByName:function(a){for(var b=0,c=this._list;b<c.length;){var d=c[b];++b;if(d.name==a)return this._list.indexOf(d)}return-1},onStop:function(){A.prototype.onStop.call(this);this._teamSBLogo=this._teamHBLogo=this._teamKorraLogo=this._teamSCLogo=this._teamTMNTLogo=this._btnRight=this._btnLeft=this._btnPrev=this._container=this._posters=this._list=null},__class__:Ih});var Id=function(){this._list=Da.list;A.call(this,!1)};g["game.ui.SelectLevel"]=Id;Id.__name__=["game","ui","SelectLevel"];
Id.__super__=A;Id.prototype=k(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);this.loadAssets("ui_level")},dispose:function(){w.disposePack("ui_level");A.prototype.dispose.call(this)},onAssetsReady:function(){A.prototype.onAssetsReady.call(this);this.createImage("bg");var a=this.createText("LEVEL_TITLE");a.setXY(516,70);this.buildGrid();this._btnSelected=this.createImage("level_selected");this.createText("BEST_TIME",null,this._btnSelected.owner).setXY(this._btnSelected.getNaturalWidth()/
2,175).setScale(0.6);this._bestRating=this.createText("BEST_TIME_NUMBER",null,this._btnSelected.owner,{m:0,s:"00"});this._bestRating.setXY(this._btnSelected.getNaturalWidth()/2,192);for(var b=0,c=0,d=Da.list;c<d.length;){var e=d[c];++c;if(l.game.isLevelLocked(e))break;++b}this.select(b-1,!0);this._btnPrev=this.createButton(m(this,this.prevPage),"btn_prev",null,null,null,w.getPack("ui")).setXY(24,18);this._btnNext=this.createButton(m(this,this.onNextClick),"btn_normal","PLAY_BUTTON",null,null,w.getPack("ui")).setXY(787,
C.getModifiedHeight(32)-77);x.from(a,{y:"-=60",alpha:0},{time:0.7,ease:q.quintOut,delay:0});a=0;for(b=this._buttons;a<b.length;)c=b[a],++a,x.from(c,{y:"-=100",alpha:0},{time:0.5,ease:q.backOut,delay:0.06*c.index});x.from(this._btnNext,{x:"+=100",alpha:0},{time:0.7,ease:q.quintOut,delay:0.5});this.addSoundBtn()},prevPage:function(){M.trackUI("EXIT","Select level");I.change("SelectCharacter")},onNextClick:function(a){null!=l.currentLevel&&(a.disablePointer(),M.trackUI("PLAY","Select level"),M.trackPlayButton(),
I.change("GameplayLoading"))},select:function(a,b){null==b&&(b=!1);var c=this._list[a];if(null==c)throw"No data for button"+a;if(b||l.currentLevel!=c){l.currentLevel=c;this._selectedAnchors[a].addChild(this._btnSelected.owner);var d=Math.floor(l.game.getBestTime(c)/60),c=l.game.getBestTime(c)%60;this._bestRating.setText("BEST_TIME_NUMBER",{m:d,s:(10>c?"0":"")+c})}},buildGrid:function(){this._buttons=[];this._selectedAnchors=[];this._container=(new D).setXY(Id.Grid.x,Id.Grid.y);this.owner.addChild((new z).add(this._container));
for(var a=0,b=0,c=this._list;b<c.length;){var d=c[b];++b;this.addButton(d,a);a++}},addButton:function(a,b){var c=l.game.isLevelLocked(a),d=this.createButton(m(this,this.onButtonClick),c?"level2_locked":"level"+(b%3+1));d.index=b;d.id=a;var e=new z;d.owner.addChild(e);if(c)d.disable(),d.set_pointerEnabled(!1);else{var c=new z,h=this.createText("LEVEL",null,c);d.owner.addChild(c);h.setXY(d.getNaturalWidth()/2,63);c=new z;h=this.createText("LEVEL_NUMBER",null,c,{p:"0"+(b+1)});d.owner.addChild(c);h.setXY(d.getNaturalWidth()/
2,83)}c=Math.round(b%Id.Grid.perRow);d.setXY(c*Id.Grid.spacing.x,(b&1)*Id.Grid.spacing.y);this._container.owner.addChild(d.owner);this._buttons.push(d);this._selectedAnchors.push(e);l.game.isNewLevel(a)&&(d=this.createImage("btn_new",d.owner,w.getPack("ui")).setXY(-20,-20),d=this.createText("HALL_NEW",null,d.owner).setXY(d.getNaturalWidth()/2,d.getNaturalHeight()/2),d.anchorY.set__(d.getNaturalHeight()/2))},onButtonClick:function(a){this.select(a.index)},onStop:function(){A.prototype.onStop.call(this);
this._bestRating=this._btnSelected=this._btnPrev=this._btnNext=this._container=this._selectedAnchors=this._buttons=this._list=null},__class__:Id});var Jh=function(){A.call(this,!1)};g["game.ui.Test"]=Jh;Jh.__name__=["game","ui","Test"];Jh.__super__=A;Jh.prototype=k(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);this.loadAssets("debug")},onAssetsReady:function(){this._bg=this.createImage("bg");this._bg.setAlpha(0.3);this.createText("test").setXY(480,511);var a=this.getTexture("sprite"),
b=new Za("particles","debug");b.setXY(p._platform.getStage().get_width(),0);this.addSprite(b);this.createImage("sprite").setXY(0,0).setAlpha(0.3);this.createImage("sprite").setXY(p._platform.getStage().get_width()-a.get_width(),0).setAlpha(0.3);this.createImage("sprite").setXY(p._platform.getStage().get_width()-a.get_width(),p._platform.getStage().get_height()-a.get_height()).setAlpha(0.3);this.createImage("sprite").setXY(0,p._platform.getStage().get_height()-a.get_height()).setAlpha(0.3);A.prototype.onAssetsReady.call(this);
this.animate()},animate:function(){},__class__:Jh});var sd=function(){this._selectedIndex=-1;this._list=H.list;A.call(this,!1)};g["game.ui.SelectCharacter"]=sd;sd.__name__=["game","ui","SelectCharacter"];sd.onNextClick=function(a){a.disablePointer();M.trackUI("PLAY","Select character");l.game.characterNotNew(l.currentCharacter.name);if(l.inTournament)I.change("SelectLevel");else{for(var b=a=0,c=Da.list;b<c.length;){var d=c[b];++b;if(l.game.isLevelLocked(d))break;++a}l.currentLevel=Da.list[Math.floor(Math.random()*
a)];I.change("GameplayLoading")}};sd.__super__=A;sd.prototype=k(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);this.loadAssets("ui_character")},dispose:function(){w.disposePack("ui_character");A.prototype.dispose.call(this)},onAssetsReady:function(){A.prototype.onAssetsReady.call(this);this.createImage("bg");var a=this.createText("CHARACTER_TITLE","title");a.setXY(516,70);this.buildGrid();this._btnPrev=this.createButton(m(this,this.prevPage),"btn_prev",null,null,null,w.getPack("ui")).setXY(24,
18);this._btnNext=this.createButton(sd.onNextClick,"btn_normal","PLAY_BUTTON",null,null,w.getPack("ui")).setXY(787,C.getModifiedHeight(32)-77);if(null!=l.currentCharacter){var b=this.getIndexByName(l.currentCharacter.name);this.select(-1<b?b:0)}else this.select(0);this.addSoundBtn();x.from(a,{y:"-=60",alpha:0},{time:0.7,ease:q.quintOut,delay:0})},prevPage:function(){M.trackUI("EXIT","Select character");I.change("Mode")},select:function(a){var b=this._list[a];if(null==b)throw"No data for button"+a;
if(this._selectedIndex!=a){-1!=this._selectedIndex&&(this._buttons[this._selectedIndex].deselect(),u.play("select_"+b.name,"char"));l.currentCharacter=b;this._selectedIndex=a;this._buttons[this._selectedIndex].select();null==this._avatar?this._avatar=this.createImage("avatar_"+b.template):this._avatar.texture=this.getTexture("avatar_"+b.template);this._avatar.setAnchor(0,this._avatar.getNaturalHeight()).setXY(0,C.height);null==this._teamName?(this._teamName=this.createText(b.team,"info_black"),this._teamName.setScale(0.65)):
this._teamName.setText(b.team);this._teamName.anchorY.set__(this._teamName.getNaturalHeight()/2);this._teamName.setXY(280,470);null==this._playerName?(this._playerName=this.createText(b.name,"info_black"),this._playerName.setXY(250,127)):this._playerName.setText(b.name);var a=b.name+"_SM",c=b.name+"_SM_DESC",d=null;if(!l.isCharacterUnlock(b)){var e=H.getDataByName(b.partner);e.locked?(a="COMING_SOON",c="COMING_SOON_DESC"):(a="CHARACTER_UNLOCK",c="CHARACTER_UNLOCK_NUM",d={name:Ka.localize(e.name).text,
num:l.game.getStats(e.name,Ga.GAMES_WON),total:H.NUM_WIN_TO_UNLOCK})}null==this._superMove?(this._superMove=this.createText(a,"info_blue",null,d),this._superMove.setXY(250,195),this._superMove.setScale(0.65)):this._superMove.setText(a,d);null==this._superMoveDesc?(this._superMoveDesc=this.createText(c,"info_white",null,d),this._superMoveDesc.setXY(250,245),this._superMoveDesc.setScale(0.65)):this._superMoveDesc.setText(c,d);null==this._teamLogo?this._teamLogo=this.createImage(b.team):this._teamLogo.texture=
this.getTexture(b.team);this._teamLogo.centerAnchor().setXY(200,450);l.isCharacterUnlock(b)?(this._btnNext.set_pointerEnabled(!0),this._btnNext.alpha.set__(1)):(this._btnNext.disablePointer(),this._btnNext.alpha.set__(0.5))}},buildGrid:function(){this._buttons=[];this._container=(new D).setXY(sd.Grid.x,sd.Grid.y);this.owner.addChild((new z).add(this._container));for(var a=0,b=0,c=this._list;b<c.length;){var d=c[b];++b;this.addButton(d,a);a++}},addButton:function(a,b){var c;c=l.isCharacterUnlock(a)?
this.createButton(m(this,this.onButtonClick),a.template):this.createButton(m(this,this.onButtonClick),G.string(a.template)+"_locked");c.index=b;c.setXY(sd.Grid.positions[b].x,sd.Grid.positions[b].y);this._container.owner.addChild(c.owner);this._buttons.push(c);l.game.isNewCharacter(a.name)&&(c=this.createImage("btn_new",c.owner,w.getPack("ui")).centerAnchor().setXY(c.getNaturalWidth()/2+10,c.getNaturalHeight()-20),c=this.createText("HALL_NEW",null,c.owner).setXY(c.getNaturalWidth()/2,c.getNaturalHeight()/
2),c.anchorY.set__(c.getNaturalHeight()/2))},onButtonClick:function(a){this.select(a.index)},getIndexByName:function(a){for(var b=0,c=this._list;b<c.length;){var d=c[b];++b;if(d.name==a)return this._list.indexOf(d)}return-1},onStop:function(){A.prototype.onStop.call(this);this._avatar=this._teamLogo=this._superMoveDesc=this._superMove=this._playerName=this._teamName=this._btnPrev=this._btnNext=this._container=this._buttons=this._list=null},__class__:sd});var Kh=function(){A.call(this,!1)};g["game.ui.Pause"]=
Kh;Kh.__name__=["game","ui","Pause"];Kh.__super__=A;Kh.prototype=k(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);this.loadAssets("ui_pause")},onAssetsReady:function(){this.owner.add(new ia(this.getTexture("bg")));this.owner.addChild(this.createButton(m(this,this.onResume),"btn_resume").setXY(300,230).owner);this._disposer.add(this.addSoundBtn().setXY(400,230).onUpdateSound.connect(m(this,this.onUpdateSound)));this.owner.addChild(this.createButton(m(this,this.onHelp),"btn_help").setXY(500,
230).owner);this.owner.addChild(this.createButton(m(this,this.onCode),"btn_code").centerAnchor().setXY(0.5*C.width,335).owner);this.owner.addChild(this.createButton(m(this,this.onQuit),"btn_quit").setXY(600,230).owner)},onResume:function(){M.trackUI("PLAY","Pause");I.pop()},onHelp:function(){M.trackUI("TUTORIAL","Pause");I.push("Help")},onCode:function(){M.trackUI("PROMO","Pause");I.push("PromoScreen")},onQuit:function(){M.trackUI("EXIT","Pause");M.trackMatchEnd("matchAbandoned");I.change("SelectCharacter");
u.playMusic("menu")},onUpdateSound:function(a){a?M.trackUI("MUTE","Pause"):M.trackUI("UNMUTE","Pause")},__class__:Kh});var la=function(){this.cursorTimer=0;this.keyboardMobile=[];this.codeString="";A.call(this,!1);this._bg=new xb(0,C.width,C.height);this._bg.alpha.set__(0.7);this._disposer.add(p._platform.getKeyboard().up.connect(m(this,this.handleKeyUp),!0));la.getCodes()};g["game.ui.PromoScreen"]=la;la.__name__=["game","ui","PromoScreen"];la.__properties__={get_availableCodes:"get_availableCodes"};
la.get_availableCodes=function(){null==la._availableCodes&&(la._availableCodes="UNLOCK_CHAR,UNLOCK_LVL,SOCCER_BALL,NO_MEGADUNK,SPEEDY,POISON,FLOATY,INFINITE,SUPERBALL,THEROCK,HARD_MODE,BASEBALL,FOOTBALL,HIGHSCORE".split(","),o.mobile||(la._availableCodes.push("FOURHANDS"),la._availableCodes.push("TWOKEYBOARDS")),H.LOCK_KORRA||la._availableCodes.push("AVATAR"));return la._availableCodes};la.getCodes=function(){if(null==la.codes){la.codes=new K;for(var a=0,b=la.get_availableCodes();a<b.length;){var c=
b[a];++a;la.codes.set(c,Ka.localize("CODE_"+c).text)}}return la.codes};la.codeUnlocked=function(a){return-1!=la.codesUnlocked.indexOf(a)};la.__super__=A;la.prototype=k(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);this.owner.addChild((new z).add(this._bg));var a=this.createImage("popup_bg"),b=C.width/2,c=C.height/2,d=a.getNaturalWidth()/2,e=a.getNaturalHeight()/2;a.setXY(b,c).centerAnchor();var h=this.createImage("enter_code");h.setXY(b,c-30).centerAnchor();p._platform.getTouch().get_supported()&&
(this.keyboardSprite=(new ia(this.getTexture("popup_keyboard"))).setXY(b,0),this._disposer.add(this.keyboardSprite.get_pointerDown().connect(m(this,this.onPointerDown))),this.keyboardSprite.setAnchor(0.5*this.keyboardSprite.getNaturalWidth(),this.keyboardSprite.getNaturalHeight()),this.keyboardSprite.y.set__(C.height),this.addSprite(this.keyboardSprite),this.keyboardMobile="Q,W,E,R,T,Y,U,I,O,P,A,S,D,F,G,H,J,K,L,Z,X,C,V,B,N,M".split(","));this.createButton(m(this,this.onBack),"btn_quit").setXY(b+d-
45,c-e+55).centerAnchor();this.createButton(m(this,this.onNext),"btn_normal","CODE_SUBMIT").setXY(b+10,c+15);var n=this.createButton(m(this,this.onReset),"btn_light","CODE_RESET");n.setXY(b-n.getNaturalWidth()-10,c+15);this.codeSprite=[];for(n=0;12>n;){var f=n++,g=new cd(U.getFont("small_black"),"X");h.owner.addChild((new z).add(g));g.setXY(24+24*f,30);g.set_visible(!1);this.codeSprite.push(g)}this.createText("PROMO_POPUP_TITLE").setXY(b,c-100);this.textError=this.createText("TEXT_ERROR_CODE",null,
a.owner);this.textError.setXY(d,e+70);this.imageError=this.createImage("wrong_code",a.owner);this.imageError.setXY(this.textError.x._value-this.textError.getNaturalWidth()/2-30,this.textError.y._value);this.imageError.set_visible(this.textError.set_visible(!1));this.textOKCode=this.createText("TEXT_UNLOCKALL",null,a.owner);this.textOKCode.setXY(d,e+70);this.textOKUnlocked=this.createText("TEXT_UNLOCKED",null,a.owner);this.textOKUnlocked.setXY(d,e+95);this.imageOK=this.createImage("true_code",a.owner);
this.imageOK.setXY(this.textOKUnlocked.x._value-this.textOKUnlocked.getNaturalWidth()/2-30,this.textOKUnlocked.y._value-10);this.imageOK.set_visible(this.textOKCode.set_visible(this.textOKUnlocked.set_visible(!1)));this.codeEmpty=this.createText("TYPE_HERE",null,h.owner);this.codeEmpty.setXY(h.getNaturalWidth()/2,30);this.cursor=new xb(7697781,3,30);this.cursor.x.set__(this.codeSprite[0].x._value);this.cursor.y.set__(this.codeSprite[0].y._value);h.owner.addChild((new z).add(this.cursor))},onNext:function(){this.validateCode()},
onReset:function(){M.trackUI("RESET","Promo");this.resetCode()},onBack:function(){M.trackUI("EXIT","Promo");I.pop()},handleKeyUp:function(a){a=G.string(a.key);"Unknow"!=a&&1==a.length&&12>this.codeString.length&&(this.codeString+=a,this.update("key"));"Backspace"==a&&0<this.codeString.length&&this.update("delete");"Enter"==a&&0<this.codeString.length&&this.validateCode()},update:function(a){if("key"==a){this.resetResult();this.codeEmpty.set_visible(!1);var b=this.codeSprite[this.codeString.length-
1];b.set_text(this.codeString.charAt(this.codeString.length-1));b.set_visible(!0);this.cursor.x.set__(b.x._value+10)}"delete"==a&&0<this.codeString.length&&(this.imageError.set_visible(this.textError.set_visible(!1)),this.codeSprite[this.codeString.length-1].set_visible(!1),this.codeString=S.substr(this.codeString,0,this.codeString.length-1),0==this.codeString.length?(this.codeEmpty.set_visible(!0),this.cursor.x.set__(this.codeSprite[0].x._value)):this.cursor.x.set__(this.codeSprite[this.codeString.length-
1].x._value+10));"reset"==a&&(this.resetKey(),this.resetResult(),this.codeEmpty.set_visible(!0))},validateCode:function(){for(var a=!1,b="",c=la.codes.keys();c.hasNext();){var d=c.next();this.codeString==la.codes.get(d)&&(b="TEXT_"+d,a=!0,this.applyCode(d))}a&&(this.textOKCode.setText(b),this.imageOK.set_visible(this.textOKCode.set_visible(this.textOKUnlocked.set_visible(!0))),M.trackUI("VALIDATE "+this.codeString,"Promo"));this.textError.set_visible(this.imageError.set_visible(!a));this.resetKey()},
resetCode:function(){for(;0<la.codesUnlocked.length;)la.codesUnlocked.pop();l.gameBall=null;this.resetKey()},applyCode:function(a){-1==la.codesUnlocked.indexOf(a)&&la.codesUnlocked.push(a);switch(a){case "UNLOCK_CHAR":for(var a=0,b=H.list;a<b.length;){var c=b[a];++a;l.isCharacterUnlock(c)&&null!=c.unlocks&&!l.isCharacterUnlock(H.getDataByName(c.unlocks))&&l.game.unlockCharacter(c.unlocks)}break;case "UNLOCK_LVL":a=0;for(b=Da.list;a<b.length;)c=b[a],++a,l.game.unlockLevel(c);break;case "SOCCER_BALL":l.gameBall=
"soccer_ball";break;case "BASEBALL":l.gameBall="baseball";break;case "FOOTBALL":l.gameBall="football";break;case "AVATAR":l.game.unlockCharacter(H.asami.name)}},onPointerDown:function(){var a="",b=!1,c=p._platform.getPointer().get_x(),d=p._platform.getPointer().get_y();1!=o.scale&&(c/=o.scale,d/=o.scale);var e=this.keyboardSprite.x._value-this.keyboardSprite.getNaturalWidth()/2,h=560-this.keyboardSprite.getNaturalHeight();c>e+2&&d>h+4&&(d<h+44?a=this.keyboardMobile[Math.floor((c-e+2)/50)]:d<h+86?
c>e+26&&c<e+479&&(a=this.keyboardMobile[10+Math.floor((c-(e+26))/50)]):c>e+76&&c<e+428?a=this.keyboardMobile[19+Math.floor((c-(e+76))/50)]:c>e+428&&(b=!0));!b&&""!=a&&12>this.codeString.length&&(this.codeString+=a,this.update("key"));b&&this.update("delete")},resetKey:function(){for(var a=0,b=this.codeSprite;a<b.length;){var c=b[a];++a;c.set_visible(!1)}this.codeString="";this.codeEmpty.set_visible(!0);this.cursor.x.set__(this.codeSprite[0].x._value)},resetResult:function(){this.textError.set_visible(this.imageError.set_visible(!1));
this.imageOK.set_visible(this.textOKCode.set_visible(this.textOKUnlocked.set_visible(!1)))},onUpdate:function(a){0>=this.cursorTimer&&(this.cursorTimer+=0.5,this.cursor.alpha.animateTo(1==this.cursor.alpha._value?0:1,0.2));this.cursorTimer-=a},__class__:la});var td=function(){this._screenName="New unlock";A.call(this,!1)};g["game.ui.NewUnlock"]=td;td.__name__=["game","ui","NewUnlock"];td.__super__=A;td.prototype=k(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);this._back=this.createImage("popup_bg");
this._back.setXY(C.width/2,C.height/2).centerAnchor();this.createText("UNLOCK_UNLOCK",null,this._back.owner).setXY(this._back.getNaturalWidth()/2,107);var a=this.createButton(m(this,this.onQuit),"btn_quit",null,null,this._back.owner);a.setXY(this._back.getNaturalWidth()-35,35);a.centerAnchor();a=this.createButton(m(this,this.onNext),"btn_normal","UNLOCK_GO",null,this._back.owner);a.setXY((this._back.getNaturalWidth()-a.getNaturalWidth())/2,this._back.getNaturalHeight()/2+40)},onNext:function(){M.trackUI("PLAY",
this._screenName);I.change("SelectCharacter")},onQuit:function(){M.trackUI("EXIT",this._screenName);l.inTournament&&null!=l.currentLevel?I.change("GameplayLoading"):I.change("SelectCharacter")},__class__:td});var Lh=function(){td.call(this)};g["game.ui.NewCharacter"]=Lh;Lh.__name__=["game","ui","NewCharacter"];Lh.__super__=td;Lh.prototype=k(td.prototype,{onAdded:function(){td.prototype.onAdded.call(this);this._screenName="New character";this.createText("UNLOCK_CHARACTER",null,this._back.owner).setXY(this._back.getNaturalWidth()/
2,76)},__class__:Lh});var Mh=function(){td.call(this)};g["game.ui.NewPoster"]=Mh;Mh.__name__=["game","ui","NewPoster"];Mh.__super__=td;Mh.prototype=k(td.prototype,{onAdded:function(){td.prototype.onAdded.call(this);this._screenName="New poster";this.createText("UNLOCK_POSTER",null,this._back.owner).setXY(this._back.getNaturalWidth()/2,76)},onNext:function(){I.change("Posters")},__class__:Mh});var Nh=function(){this._texts=[];this._totalPages=7;this._currentPage=0;this._alphaTweenDuration=0.25;A.call(this,
!1)};g["game.ui.Help"]=Nh;Nh.__name__=["game","ui","Help"];Nh.__super__=A;Nh.prototype=k(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);this._isMobile=o.touch;this._tutorial=jk.tutorials;this.loadAssets("ui_htp",!1)},onAssetsReady:function(){this.owner.add(new ia(this.getTexture("bg")));this._title=new ud("","htp_title");this._title.setXY(485,175);this.owner.addChild((new z).add(this._title));this._btnPrev=this.createButton(m(this,this.onPrev),"btn_prev","","",null,this._pack).setXY(24,
458);this.owner.addChild(this._btnPrev.owner);this._btnPrev.setAlpha(0);this._btnPrev.set_pointerEnabled(!1);this._btnNext=this.createButton(m(this,this.onNext),"btn_next","","",null,this._pack).setXY(853,458);this.owner.addChild(this._btnNext.owner);this.owner.addChild(this.createButton(m(this,this.onQuit),"btn_quit").setXY(874,21).owner);this.updatePage()},onPrev:function(){this._currentPage==this._totalPages-1&&(this._btnNext.alpha.animateTo(1,0.25),this._btnNext.set_pointerEnabled(!0));this._currentPage--;
0==this._currentPage&&(this._btnPrev.alpha.animateTo(0,0.25),this._btnPrev.set_pointerEnabled(!1));this.changePage()},onNext:function(){0==this._currentPage&&(this._btnPrev.alpha.animateTo(1,0.25),this._btnPrev.set_pointerEnabled(!0));this._currentPage++;this._currentPage==this._totalPages-1&&(this._btnNext.alpha.animateTo(0,0.25),this._btnNext.set_pointerEnabled(!1));this.changePage()},onQuit:function(){I.pop()},changePage:function(){this._title.alpha.animateTo(0,this._alphaTweenDuration);this._image.alpha.animateTo(0,
this._alphaTweenDuration);for(var a=0,b=this._texts;a<b.length;){var c=b[a];++a;c.alpha.animateTo(0,this._alphaTweenDuration)}x.delayCallTo(m(this,this.updatePage),this._alphaTweenDuration)},updatePage:function(){0>this._currentPage||this._currentPage>=this._totalPages||(this._currentTutorial=this._tutorial[this._currentPage],this._title.setText(this._currentTutorial.titleID),this._title.setAlpha(0),this._title.alpha.animateTo(1,this._alphaTweenDuration),this.setImage("htp_"+(this._currentPage+1)),
this.setTexts())},setImage:function(a){null!=this._image&&this._image.owner.dispose();this._image=new ia(w.getPack(this._isMobile?"htp_mobile":"htp").getTexture(a));a=this._currentTutorial.imagePosition;this._image.setXY(a.x+190,a.y+165);this._image.setAlpha(0);this._image.alpha.animateTo(1,this._alphaTweenDuration);this.owner.addChild((new z).add(this._image))},setTexts:function(){if(0<this._texts.length)for(var a=0,b=this._texts;a<b.length;){var c=b[a];++a;c.owner.dispose()}this._texts=[];for(var d,
a=this._currentTutorial.texts,b=0;b<a.length;)c=a[b],++b,d=G.string(c.textID)+(this._isMobile&&c.mobileVariant?"_MOBILE":""),d=new ud(d,c.font),null!=c.width&&0<c.width&&d.setWrapWidth(c.width),d.setXY(c.x+190,c.y+165),d.setAlpha(0),d.alpha.animateTo(1,this._alphaTweenDuration),this.owner.addChild((new z).add(d)),this._texts.push(d)},__class__:Nh});var Oh=function(){A.call(this,!1)};g["game.ui.NickSportPopup"]=Oh;Oh.__name__=["game","ui","NickSportPopup"];Oh.__super__=A;Oh.prototype=k(A.prototype,
{onAdded:function(){A.prototype.onAdded.call(this);this.loadAssets("ui_nickpopup")},onAssetsReady:function(){A.prototype.onAssetsReady.call(this);this._darken=new xb(0,C.width,C.height);this._darken.setAlpha(0.5);this.owner.addChild((new z).add(this._darken));this._bg=new ia(this._pack.getTexture("bg"));var a=C.width/2-this._bg.getNaturalWidth()/2,b=C.height/2-this._bg.getNaturalHeight()/2;this._bg.setXY(a,b);this.owner.addChild((new z).add(this._bg));this._closeBtn=new Rb(this._pack,"btn_close",
m(this,this.onClose));this._closeBtn.centerAnchor();this._bg.owner.addChild((new z).add(this._closeBtn));this._appleBtn=new Rb(this._pack,"btn_apple",m(this,this.onAppStore));this._appleBtn.centerAnchor().setXY(249,400);this._bg.owner.addChild((new z).add(this._appleBtn));this._googleBtn=new Rb(this._pack,"btn_google",m(this,this.onGooglePlay));this._googleBtn.centerAnchor().setXY(358,400);this._bg.owner.addChild((new z).add(this._googleBtn));this._kindleBtn=new Rb(this._pack,"btn_kindle",m(this,
this.onKindleFire));this._kindleBtn.centerAnchor().setXY(462,400);this._bg.owner.addChild((new z).add(this._kindleBtn))},onStart:function(){A.prototype.onStart.call(this)},onStop:function(){A.prototype.onStop.call(this)},onClose:function(){I.pop()},onAppStore:function(){p._platform.getWeb().openBrowser(l.config.nickSportApple);I.pop()},onGooglePlay:function(){p._platform.getWeb().openBrowser(l.config.nickSportGoogle);I.pop()},onKindleFire:function(){p._platform.getWeb().openBrowser(l.config.nickSportAmazon);
I.pop()},__class__:Oh});var Bh=function(){};g["game.SceneList"]=Bh;Bh.__name__=["game","SceneList"];var Rc=function(){this.isReady=!1;this.onFirstUpdate=new ua;this.velocityFromLastPosition=new cb;this.lastPosition=new cb;this._coolDown=0;this._intangible=!1;this.carrier=null;j.call(this)};g["game.components.Ball"]=Rc;Rc.__name__=["game","components","Ball"];Rc.__super__=j;Rc.prototype=k(j.prototype,{get_name:function(){return"Ball_66"},get_carrier:function(){return this._carrier},get_intangible:function(){return this._intangible||
0<this._coolDown},set_intangible:function(a){this._intangible=a;this._coolDown=0;return this.get_intangible()},onStart:function(){j.prototype.onStart.call(this);this._physicsSystem=V.getSystemEntity(this.owner)._compMap.PhysicSystem_22;this._physics=this.owner._compMap.PhysicsComponent_12;this._transform=this.owner._compMap.TransformComponent_26;this._display=this.owner._compMap.Sprite_4;this._layer=this.owner.parent;if(this._display.initialized)this.initSprite();else this._display.onInitComplete.connect(m(this,
this.initSprite)).once();this._transform.fixedRotation=!0;this._physics.addContactType(Rc.BALL_CONTACT_TYPE);this._physicsSystem.addContactListener(da.PRELISTENER,ja.ANY,Rc.BALL_CONTACT_TYPE,Sc.CHARACTER_CONTACT_TYPE,this.owner,m(this,this.onPreContact),!0);this._physicsSystem.addContactListener(da.BEGIN,ja.COLLISION,Rc.BALL_CONTACT_TYPE,N.ANY_BODY,this.owner,m(this,this.onGroundContact))},initSprite:function(){this._whiteBall=new ia(w.getPack(this._display.pack).getTexture(this._display.asset+"_white"));
this._whiteBall.disablePointer();this._display.owner.addChild((new z).add(this._whiteBall));this._whiteBall.alpha.set__(0);this._display.centerSprite()},onStop:function(){this._physicsSystem.removeContactListener(da.PRELISTENER,ja.ANY,Rc.BALL_CONTACT_TYPE,Sc.CHARACTER_CONTACT_TYPE,this.owner);this._physicsSystem.removeContactListener(da.BEGIN,ja.COLLISION,Rc.BALL_CONTACT_TYPE,N.ANY_BODY,this.owner);this.carrier=this._layer=this._display=this._transform=this._physics=this._physicsSystem=null;null==
this._whiteBall.owner.parent&&this._whiteBall.owner.dispose();this._whiteBall=null;j.prototype.onStop.call(this)},onUpdate:function(a){if(!this.isReady)if(null!=this._physics&&this._physics.initialized&&null!=this._display&&this._display.initialized)this.isReady=!0,this.onFirstUpdate.emit();else return;j.prototype.onUpdate.call(this,a);this.floorDistance=Math.abs(Rc.floorY-this._transform.position.y);this.velocityFromLastPosition.set(this.lastPosition.x-this._transform.position.x,this.lastPosition.y-
this._transform.position.y);var b=0.1*(30-this.floorDistance),c=Math.abs(0.1*this.velocityFromLastPosition.y);50>this.floorDistance&&(c-=b);1>b&&(b=1);1.3<b&&(b=1.3);1>c&&(c=1);1.4<c&&(c=1.4);this._display.setScaleXY(b,c);null==this._carrier&&(b=this._display.rotation,b.set__(b._value-0.5*this.velocityFromLastPosition.x));this.lastPosition.set(this._transform.position.x,this._transform.position.y);0<this._coolDown&&(this._coolDown-=a);0>=this._coolDown&&0!=this._whiteBall.alpha._value&&this._whiteBall.alpha.set__(0)},
reset:function(a,b){this.removeOwner();this.setPosition(a,b);this.set_intangible(!1)},setKinetic:function(){this._physics.setKinematic()},setDynamic:function(){this._physics.setDynamic()},onPreContact:function(a){if(!this._physics.enabled||this.get_intangible())return!1;a=a._compMap.Character_52;a.isStun()||a.set_ball(this);return!1},onGroundContact:function(){l.slimeBall?u.play("bounce_slime"):u.play("bounce_{random(2)}");return!0},setOwner:function(a){null!=this.owner.parent&&(this.owner.parent.removeChild(this.owner),
this._physics.enable(!1));null!=a&&a!=this._carrier&&a.parent.addChild(a);this._carrier=a},setPosition:function(a,b){this._physics.setPosition(a,b);this._physics.resetVelocity();this._physics.resetImpulse()},applyForce:function(a,b,c){null==c&&(c=0);this._physics.applyImpulse(a,b);this._coolDown=c;0<this._coolDown&&this.flashBall(this._coolDown)},flashBall:function(a){this._whiteBall.alpha.set_behavior(new Ob(0,1,0.2,a/0.4))},removeOwner:function(){this._carrier=null;this._physics.enable(!0);this._layer.addChild(this.owner)},
__class__:Rc,__properties__:k(j.prototype.__properties__,{set_intangible:"set_intangible",get_intangible:"get_intangible",get_carrier:"get_carrier"})});var Of=function(){this.isHome=!0;j.call(this)};g["game.components.Basket"]=Of;Of.__name__=["game","components","Basket"];Of.__super__=j;Of.prototype=k(j.prototype,{get_name:function(){return"Basket_67"},onStart:function(){j.prototype.onStart.call(this);this._transform=this.owner._compMap.TransformComponent_26;this._physicComponent=this.owner._compMap.PhysicsComponent_12;
this._rocket=new ya(this.rocketAsset,this.pack);this._rocket.gotoAndPlay(this.rocketAnim);this._rocket.centerAnchor();this._rocket.setXY(this.rocketPosition.x,this.rocketPosition.y);this.owner.addChild((new z).add(this._rocket),!1);this._display=this.owner._compMap.Sprite_4;this._exploder=G.instance(this.owner._compMap.LauncherComponent_45,ff);if(this._display.initialized)this.onInit();else this._display.onInitComplete.connect(m(this,this.onInit)).once()},onInit:function(){this._rim=new ya(this._display.spritesheet,
this._display.pack);this._rim.setXY(this.rimPosition.x,this.rimPosition.y);if(this._rim.isReady)this.onRimInit();else this._rim.onInit.connect(m(this,this.onRimInit)).once()},onRimInit:function(){this.owner.addChild((new z).add(this._rim));this._rim.gotoAndStop(this.rimAsset).loop=!1},onStop:function(){this._rim=this._rocket=this._physicComponent=this._exploder=this._display=this._transform=null;null!=this._zone&&this._zone.owner.dispose();this._zone=null;j.prototype.onStop.call(this)},showZone:function(){null==
this._zone&&(this._zone=new Na(this._display.spritesheet,"zone",this._display.pack),this._zone.setXY(-this._display.offset.x+11,-this._display.offset.y+this._physicComponent.offset.y+11),this.owner.addChild((new z).add(this._zone)),this._zone.alpha.set__(0),x.to(this._zone,{alpha:1},{time:1,ease:q.quadIn,delay:1}))},hideZone:function(){null!=this._zone&&this._zone.alpha.animateTo(0,1,q.quadOut)},handleDunkStart:function(){var a=this.owner._compMap.BasketMovement_72;null!=a&&(a.enabled=!1)},handleDunkContact:function(a,
b){this._rim.gotoAndPlay(this.rimAsset);b&&(u.play("glass_break"),this.isHome?this._display.setSymbol("basket_broken_r"):this._display.setSymbol("basket_broken_l"),this._exploder.explode());this.owner.addChild(this._rim.owner);this.owner.addChild(this._rim.owner)},handleDunkEnd:function(){if(null!=this.owner){var a=this.owner._compMap.BasketMovement_72;null!=a&&(a.enabled=!0)}},score:function(){},getTransform:function(){return this._transform},getSize:function(){return this._physicComponent.shape.radius},
__class__:Of});var Pf=function(){this.enabled=!0;this.minY=this.maxY=0;this.speedY=1;this.minX=this.maxX=0;this.speedX=1;j.call(this)};g["game.components.BasketMovement"]=Pf;Pf.__name__=["game","components","BasketMovement"];Pf.__super__=j;Pf.prototype=k(j.prototype,{get_name:function(){return"BasketMovement_72"},onStart:function(){j.prototype.onStart.call(this);this._transform=this.owner._compMap.TransformComponent_26;this._physicComponent=this.owner._compMap.PhysicsComponent_12;this._transform.fixed=
!1;this.offsetX=new O(this._transform.position.x);this.offsetY=new O(this._transform.position.y);if(this._physicComponent.initialized)this.onInit();else this._physicComponent.onInitialize.connect(m(this,this.onInit)).once()},onStop:function(){this.offsetY=this.offsetX=this._physicComponent=this._transform=null;j.prototype.onStop.call(this)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.enabled&&this._physicComponent.initialized&&(this.offsetX.update(a),this.offsetY.update(a),this._physicComponent.setPosition(this.offsetX._value,
this.offsetY._value))},onInit:function(){this._physicComponent.setKinematic();this.offsetX.set_behavior(new Ob(this._transform.position.x+this.minX,this._transform.position.x+this.maxX,this.speedX));this.offsetY.set_behavior(new Ob(this._transform.position.y+this.minY,this._transform.position.y+this.maxY,this.speedY))},__class__:Pf});var Sc=function(){this._isDunking=!1;this._lastDirection=0;this._nearBasket=this._teammate=this._opponent1=this._opponent2=null;this._stunTime=0;this._groundContacts=
new Sb;this._isPlayer=this.onPlayerTeam=!1;this.targetBasket=null;this.inDoubleJump=this.canDoubleJump=!1;this.runDirection=0;this.shouldJump=this.shouldAttack=this.shouldFly=!1;this.airTime=0;this.inJump=!1;this.isEnabled=this._onGround=!0;this.aiSpeedFactor=this.superMoveFactor=this.speedFactor=this.floatyFactor=1;this.onScore=new Y;this.onDunkCancelled=new Y;this.onDunkContact=new Y;this.onDunkAnim=new Y;this.onDunkIntro=new Y;this.onDunkStart=new Y;this.onFirstUpdate=new ua;this.isReady=!1;this.minDunkPct=
this.dunks=0.5;this.maxDunkPct=1;this.dunkTreshold=40;this.dunkVariation=3;this.weapon="punch";this.contactType=N.DEFAULT;this.character="leo";j.call(this)};g["game.components.Character"]=Sc;Sc.__name__=["game","components","Character"];Sc.__super__=j;Sc.prototype=k(j.prototype,{get_name:function(){return"Character_52"},onStart:function(){j.prototype.onStart.call(this);var a=V.getSystemEntity(this.owner);this._physicsSystem=a._compMap.PhysicSystem_22;this._soundSystem=a._compMap.SoundSystem_23;this._actors=
a._compMap.ActorSystem_3;this._anim=this.owner._compMap.Sprite_4;this._disposer=this.owner._compMap.Disposer_28;this._physics=this.owner._compMap.PhysicsComponent_12;this._transform=this.owner._compMap.TransformComponent_26;this._health=this.owner._compMap.HealthComponent_42;this._cameraTarget=this.owner._compMap.CameraTargetComponent_19;this._effect=this.owner._compMap.Effect_68;this._superDunk=G.instance(this.owner._compMap.CharacterDunk_53,v);this._script=new Eb;this.owner.add(this._script);this._disposer.add(this._health.onDamage.connect(m(this,
this.onHurt)));this._disposer.add(this._physicsSystem.onPhysicUpdate.connect(m(this,this.onPhysicUpdate)));this._disposer.add(this._effect.onAddEffect.connect(m(this,this.effectOnAttributes)));this._disposer.add(this._effect.onClearEffect.connect(m(this,this.resetAttributes)));this.initWeapon();this.initPhysics();this.spawnPosition={x:this._transform.position.x,y:this._transform.position.y};this._data=H.getDataByName(this.character);this._gender=this._data.gender;if(this._physics.initialized)this.resetAttributes();
else this._physics.onInitialize.connect(m(this,this.resetAttributes)).once()},onStop:function(){this._physicsSystem.removeContactListener(da.PRELISTENER,ja.ANY,Sc.CHARACTER_CONTACT_TYPE,Sc.CHARACTER_CONTACT_TYPE,this.owner);this._physicsSystem.removeContactListener(da.BEGIN,ja.COLLISION,this.contactType,N.ANY_BODY,this.owner);this._physicsSystem.removeContactListener(da.END,ja.COLLISION,this.contactType,N.ANY_BODY,this.owner);this._physicsSystem.removeContactListener(da.BEGIN,ja.SENSOR,this.contactType,
this.contactType,this.owner);this._physicsSystem.removeContactListener(da.END,ja.SENSOR,this.contactType,this.contactType,this.owner);j.prototype.onStop.call(this);null!=this._superDunk&&this._superDunk.dispose();null!=this._dunk&&this._dunk.dispose();this._data=this._ellipse=this._currentDunk=this._dunk=this._superDunk=this._opponent2=this._opponent1=this._teammate=this._nearBasket=this._ball=this._script=this._effect=this._cameraTarget=this._health=this._transform=this._physics=this._state=this._disposer=
this._anim=this._actors=this._soundSystem=this._physicsSystem=null},effectOnAttributes:function(a){this.get_isPlayer()&&(u.play("pickup","PLAYER"),l.superAbility+=1);this._jumpForce=this._data.jumpForce*a.jumpForce;this._runForce=this._data.runForce*a.runForce;this._airForce=this._data.airForce*a.airForce;this._maxVelocityX=this._data.maxVelocityX*a.maxVelocityX*this.aiSpeedFactor*this.speedFactor;this._maxVelocityXWithBall=this._data.maxVelocityXWithBall*a.maxVelocityXWithBall*this.aiSpeedFactor*
this.speedFactor;this._maxVelocityY=this._data.maxVelocityY*a.maxVelocityY;this._physics.setMassScale(this._data.gravFactor*a.gravFactor*this.floatyFactor)},resetAttributes:function(){this._jumpForce=this._data.jumpForce;this._runForce=this._data.runForce;this._airForce=this._data.airForce;this._maxVelocityX=this._data.maxVelocityX*this.aiSpeedFactor*this.speedFactor;this._maxVelocityXWithBall=this._data.maxVelocityXWithBall*this.aiSpeedFactor*this.speedFactor;this._maxVelocityY=this._data.maxVelocityY;
this._physics.setMassScale(this._data.gravFactor*this.floatyFactor)},setState:function(a,b,c,d){null==d&&(d=!0);null==c&&(c=!1);if("dunk"==this._state){if(!c)return this._state;null}if(!c&&a==this._state)return this._state;this._state=a;a=null;null!=b&&(a={onComplete:b});d&&this.setAnim(a);return this._state},setAnim:function(a){this.setAnimSuffix();this._anim.set(this._state,a)},setAnimSuffix:function(){this._anim.suffix=this.hasBall()?"_ball":""},resetState:function(){this._isDunking=this.inDoubleJump=
this.canDoubleJump=this.inJump=this.shouldFly=this.shouldAttack=this.shouldJump=!1;this._stunTime=0;this.setKinematic(!1);this._physics.resetType();this._physics.resetImpulse();this._physics.resetVelocity();this.setState(this.get_onGround()?"idle":"fall",null,!0)},enable:function(a){null==a&&(a=!0);if(!a)return this.disable();this.isEnabled||(this.isEnabled=!0,this._physics.enable())},disable:function(a,b){null==b&&(b=!1);null==a&&(a=!1);this.isEnabled&&(this.isEnabled=!1,a&&this._physics.disable(),
b&&this.resetState())},initPhysics:function(){null!=this._physics&&(this._physics.addContactType(this.contactType),this._physics.addContactType(Sc.CHARACTER_CONTACT_TYPE));this._physicsSystem.addContactListener(da.PRELISTENER,ja.ANY,Sc.CHARACTER_CONTACT_TYPE,Sc.CHARACTER_CONTACT_TYPE,this.owner,m(this,this.onPreContact));this._physicsSystem.addContactListener(da.BEGIN,ja.COLLISION,this.contactType,N.ANY_BODY,this.owner,m(this,this.onContactBegin));this._physicsSystem.addContactListener(da.END,ja.COLLISION,
this.contactType,N.ANY_BODY,this.owner,m(this,this.onContactEnd));this._physicsSystem.addContactListener(da.BEGIN,ja.SENSOR,this.contactType,this.contactType,this.owner,m(this,this.onBasketBegin));this._physicsSystem.addContactListener(da.END,ja.SENSOR,this.contactType,this.contactType,this.owner,m(this,this.onBasketEnd))},onPreContact:function(){return!1},onContactBegin:function(a,b){90==180*b.angle/3.141592653589793&&this.land(a)},onContactEnd:function(a){!0==this._groundContacts.remove(a)&&this.set_onGround(this._groundContacts.iterator().hasNext())},
onBasketBegin:function(a){this._nearBasket=a._compMap.Basket_67;this.canDunk()&&!this.isDunking()&&this._anim.set("dunk1_pre",null,!1,!1)},onBasketEnd:function(){this.canDunk()&&!this.isDunking()&&this.setState("fall");this._nearBasket=null},setKinematic:function(a){null==a&&(a=!0);if(!this._physics.initialized)return null;a?(this.kinematicPosition=new Jd(this._transform.position.x,this._transform.position.y),this._physics.setTransform=!1,this._physics.setKinematic()):(this._physics.setTransform=
!0,this._physics.setDynamic(),null!=this.kinematicPosition&&(this._physics.setPosition(this.kinematicPosition.x._value,this.kinematicPosition.y._value),this._transform.setXY(this.kinematicPosition.x._value,this.kinematicPosition.y._value),this.kinematicPosition.dispose()),this.kinematicPosition=null);return this.kinematicPosition},onUpdate:function(a){if(!this.isReady){if(!this._physics.initialized)return;this.isReady=!0;this.onFirstUpdate.emit()}null!=this.kinematicPosition&&(this.kinematicPosition.update(a),
this._physics.setTransform=!1,this._physics.setPosition(this.kinematicPosition.x._value,this.kinematicPosition.y._value),this._transform.setXY(this.kinematicPosition.x._value,this.kinematicPosition.y._value));this.isEnabled&&(0<this._stunTime&&(this._stunTime-=a),this.get_onGround()&&this.isStun()&&!this.isDunking()&&"hurt"!=this._state&&this.setState("hurt"),null!=this._superDunk&&this._superDunk.addSuperMoveValue(C.superMovePerSecond*a))},onPhysicUpdate:function(a){this.isEnabled&&!this.isStun()&&
!this.isDunking()&&(5>Math.abs(this._physics.getVelocity().get_x())&&this.get_onGround()&&!this.isAttacking()&&this.setState("idle"),this.shouldJump&&this.canJump()&&this.jump(),this.shouldAttack&&(this._superDunk.canSuperMove()&&this.hasBall()?this.special():this.canDunk()?this.dunk():this.attack()),!this.get_onGround()&&!this.isDunking()&&(this.airTime+=a,this.inJump&&!this.inDoubleJump&&0.3<this.airTime&&(this.canDoubleJump=!0),0<this._physics.getVelocity().get_y()&&!this.isAttacking()&&!this.isDunking()&&
this.fall()),0!=this.runDirection&&this.run(this.runDirection));this.shouldFly=this.shouldAttack=this.shouldJump=!1;this.runDirection=0},run:function(a){!this.isStun()&&!this.isDunking()&&(this.get_isPlayer()&&this.get_onGround()&&this._lastDirection!=a&&(u.play("sneaker_{random(3)}","FEET"),this._lastDirection=a),this._transform.direction=0>a?-1:1,this.get_onGround()?(this.isAttacking()||this.setState("run"),this._physics.applyImpulse(this._runForce*a,0)):this._physics.applyImpulse(this._airForce*
a,0),a=this.hasBall()?this._maxVelocityXWithBall:this._maxVelocityX,this._physics.getVelocity().set_x(aa.clamp(this._physics.getVelocity().get_x(),-a,a)))},canJump:function(){return this.shouldFly?!0:this.get_onGround()||this.canDoubleJump},jump:function(){if(!this.canJump())return!1;this.get_isPlayer()&&u.play("jump","PLAYER");this._physics.applyImpulse(0,-this._jumpForce);this._physics.getVelocity().set_y(aa.clamp(this._physics.getVelocity().get_y(),-this._maxVelocityY,this._maxVelocityY));this.startJumpState();
return!0},jumpTowards:function(a,b){null==b&&(b=1);if(!this.canJump())return!1;var c=Qf.getDirection(this.owner,a);this._physics.applyImpulse(this._airForce*b*c,-this._jumpForce);this._physics.getVelocity().set_y(aa.clamp(this._physics.getVelocity().get_y(),-this._maxVelocityY,this._maxVelocityY));this.startJumpState();return!0},startJumpState:function(){this.set_onGround(!1);this.inJump=!0;this.airTime=0;this.isAttacking()||this.setState("jump");this._soundSystem.play("jump",this.owner,"ACTION");
this.canDoubleJump&&(this.inDoubleJump=!0);this.canDoubleJump=!1},fall:function(){this.setState("jump")},land:function(a){this._groundContacts.set(a,!0);this.set_onGround(!0);this.inDoubleJump=this.inJump=!1;null!=this._currentDunk?(this._currentDunk.land(),this._currentDunk=null):this.setState("idle")},respawn:function(a,b){null==b&&(b=1);this.enable(!0);null==a&&(a=this.respawnPosition);null==a&&(a=this.spawnPosition);this._health.invincible=!1;this.resetState();this._physics.setPosition(a.x,a.y);
this._transform.direction=b;this._effect.clearParticles()},isAttacking:function(){return null==this._weapon?!1:this._weapon.isAttacking},attack:function(){if(null!=this._weapon){var a=this._weapon.attack();a&&this.setState(null!=this._weapon.data.anim?this._weapon.data.anim:"atk",null,!0);return a}return!1},special:function(a){return this.hasBall()&&this._superDunk.canSuperMove()?(this._opponent1.disable(!1),null!=this._teammate&&this._teammate.disable(!1),null!=this._opponent2&&this._opponent2.disable(!1),
this._isDunking=!0,this._health.invincible=!0,this._ball.set_intangible(!0),this.owner.add(this._superDunk),this._currentDunk=this._superDunk,a=this._superDunk.start(this.targetBasket._compMap.Basket_67,a),this._superDunk.onComplete.connect(m(this,this.onDunkComplete)).once(),this.onDunkStart.emit(this._superDunk),this._teammate.setState("hurt"),this._opponent1.setState("hurt"),this._opponent2.setState("hurt"),u.play("mega_start","SUPER"),a):!1},dunk:function(a){return this.canDunk()?(this._isDunking=
!0,null==this._dunk&&(this._dunk=new vb),this.owner.add(this._dunk),this._currentDunk=this._dunk,a=this._currentDunk.start(this._nearBasket,a),this._currentDunk.onComplete.connect(m(this,this.onDunkComplete)).once(),this.onDunkStart.emit(this._currentDunk),a):!1},onDunkComplete:function(a){a.success&&this.onScore.emit({fromPlayer:this.get_isPlayer(),isHome:a.get_basket().isHome,character:this,basket:a.get_basket(),dunk:a});a.isSuperDunk||this.addSuperMoveValue(C.superMovePerDunk);null!=a.owner&&a.owner.remove(a);
this._isDunking=!1},initWeapon:function(){null==this._weapon&&null!=this.weapon&&this.spawnWeapon(this.weapon)},spawnWeapon:function(a,b){null==b&&(b={});null==b.template&&(b.template={key:a});var c=this._actors.spawn(b)._compMap.Weapon_69;if(null==c)throw"PlatformerWeapon not found in template '"+a+"'";this.changeWeapon(c)},changeWeapon:function(a){null!=this._weapon&&this._weapon.removeParent();this._weapon=a;this._weapon.setParent(this.owner);var b=this._weapon.owner._compMap.DamageComponent_41;
null!=this._teammate&&b.ignoreActor(this._teammate.owner,!0);this._disposer.add(b.onDamage.connect(m(this,this.onHit)));return a},onHit:function(){this.addSuperMoveValue(C.superMovePerAttack)},onHurt:function(a){a=a._compMap.Weapon_69;this._stunTime=a.stunTime;this.hasBall()&&(this._isDunking&&null!=this._currentDunk&&(this._isDunking=!1,this._currentDunk.cancelable&&(this._currentDunk.cancel(),this.onDunkCancelled.emit(this._currentDunk))),this._ball.setPosition(this._transform.position.x,this._transform.position.y),
this._ball.applyForce(this._transform.direction*(100*Math.random()+150),-500,0.5),this.removeBall(),null!=a.wielder&&a.wielder.get_isPlayer()&&(l.steals+=1),u.play("ball_lost","FX"));null!=a.wielder&&a.wielder.get_isPlayer()&&(u.play("hit_{random(2)}","HIT"),0.333>=Math.random()&&u.play("ooh_1","CROWD"));this.get_isPlayer()&&u.play("hit_{random(2)}","HIT");this._actors.spawn({template:{key:"hit"},transform:{position:{x:this._transform.position.x,y:this._transform.position.y}}});this.setState("hurt")},
isStun:function(){return 0<this._stunTime},canDunk:function(){return!this._isDunking&&null!=this._nearBasket&&this.hasBall()},isDunking:function(){return this._isDunking},isSuperDunking:function(){return this._isDunking&&null!=this._currentDunk&&this._currentDunk.isSuperDunk},get_ball:function(){return this._ball},set_ball:function(a){this._ball=a;this._ball.setOwner(this.owner);this.setAnimSuffix();this._anim.relaunchAnim();return this._ball},removeBall:function(a){null!=this._ball&&(this._ball.removeOwner(),
null!=a&&this._ball.setPosition(this._transform.position.x+50*this._transform.direction,this._transform.position.y));this._ball=null},hasBall:function(){return null!=this._ball},getTeammate:function(){return this._teammate},setPlayers:function(a,b,c){this._teammate=a;this._teammate.get_isPlayer()&&(this.onPlayerTeam=!0);this.get_isPlayer()&&(this.onPlayerTeam=!0);this._opponent1=b;this._opponent2=c;null!=this._weapon&&null!=a&&this._weapon.owner._compMap.DamageComponent_41.ignoreActor(a.owner,!0)},
canSuperMove:function(){return this._superDunk.canSuperMove()},resetSuperMove:function(){this._superDunk.resetSuperMove()},addSuperMoveValue:function(a){this._superDunk.addSuperMoveValue(a)},get_superDunk:function(){return this._superDunk},get_onGround:function(){return this._onGround},set_onGround:function(a){this._onGround=a;null!=this._ellipse&&this._ellipse.set_visible(this._onGround);return this._onGround},get_isPlayer:function(){return this._isPlayer},get_charData:function(){return this._data},
set_isPlayer:function(a){if(this._isPlayer=a)this._ellipse=new ia(w.getPack("sprites_pack").getTexture("ellipse")),this._ellipse.centerAnchor(),this._ellipse.setXY(0,0.5*this._physics.shape.height+10),this.owner.addChild((new z).add(this._ellipse),!1);return this._isPlayer},__class__:Sc,__properties__:k(j.prototype.__properties__,{set_isPlayer:"set_isPlayer",get_charData:"get_charData",get_isPlayer:"get_isPlayer",set_onGround:"set_onGround",get_onGround:"get_onGround",get_superDunk:"get_superDunk",
set_ball:"set_ball",get_ball:"get_ball"})});var vb=function(){this.completeOnLanding=this.physicsAnimation=!1;this.cancelable=!0;this.onComplete=new Y;this.showBasket=!1;this.anticipationTime=this.introTime=this.animTime=this.outroTime=this.endDelay=-1;this.cameraZoomEase=q.quintInOut;this.cameraZoomTime=1.5;this.cameraZoom=1.25;j.call(this)};g["game.components.CharacterDunk"]=vb;vb.__name__=["game","components","CharacterDunk"];vb.__super__=j;vb.prototype=k(j.prototype,{get_name:function(){return"CharacterDunk_53"},
onAdded:function(){},onStart:function(){null==this._character&&null!=this.owner&&this.getContext()},onStop:function(){j.prototype.onStop.call(this)},getContext:function(){null==this._character&&(this._character=this.owner._compMap.Character_52,this._anim=this.owner._compMap.Sprite_4,null!=this._anim&&(this.anim=this._anim.getAnimation()),this._disposer=this.owner._compMap.Disposer_28,this._physics=this.owner._compMap.PhysicsComponent_12,this._transform=this.owner._compMap.TransformComponent_26,this._system=
this.owner._internal_getFromParents("BaseGameSystem_7",Nf),this._camera=this.owner._internal_getFromParents("CameraSystem_18",Rf),this._sound=this.owner._internal_getFromParents("SoundSystem_23"))},dispose:function(){j.prototype.dispose.call(this);this._camera=this._system=this._character=this._basket=this._transform=this._physics=null},start:function(a){null==this._character&&null!=this.owner&&this.getContext();if(this.isStarted)return!1;this._basket=a;this._ball=this._character.get_ball();this.setDunkSuccess();
this.setVariation();this.isStarted=!0;this.cancelled=this.isAnimStarted=this.isComplete=!1;this.charData=this._character.get_charData();this.fromPlayer=this._character.get_isPlayer();this.fromPlayerTeam=this._character.onPlayerTeam;null==this.dunkData&&null!=this._character.dunks&&Object.prototype.hasOwnProperty.call(this._character.dunks,"dunk"+this.variation)&&(this.dunkData=B.field(this._character.dunks,"dunk"+this.variation));null==this.dunkData&&(this.dunkData=vb.defaultDunkData);this._transform.direction=
-1*a.getTransform().direction;this._basket.handleDunkStart(this);this._character.setState("dunk",null,!0,!1);this.animate();return this.success},end:function(){this.isComplete||(this.isStarted=!1,this.isComplete=!0,this._position=null,this.success||this._character.resetState(),null!=this._basket&&this._basket.handleDunkEnd(this),this.onComplete.emit(this))},cancel:function(){this.cancelled=!0;this.success=!1;this.owner._compMap.Script_24.stopAll();this._camera.startFollow();this.end()},animate:function(){var a=
this._transform.position,b=100;-20<this._transform.position.x-this._basket.getTransform().position.x&&(this.wasUnderBasket=!0,b=20);this.setEndPosition();this._middlePosition=new cb(this._endPosition.x-0.5*(this._endPosition.x-a.x),this._endPosition.y-0.5*(this._endPosition.y-a.y)-b);this.introTime=this.getDuration("in");this.animTime=this.getDuration(null);this.outroTime=this.getDuration("out");this.outroTime<vb.minHangTime&&(this.outroTime=vb.minHangTime);this.endDelay=this.success?vb.defaultSuccessEndDelay:
0;this.startSequence()},setEndPosition:function(){var a=this.get_basket().getTransform().position;this._endPosition=new cb(a.x+this._character.dunkOffset.x*this.get_basket().getTransform().direction,a.y+this._character.dunkOffset.y)},getDuration:function(a){a=this.getAnimName(a);return this._anim.getDuration(a,!1)},setAnim:function(a,b,c){null==c&&(c=0);var a=this.getAnimName(a),d=this._character.character+"_"+a;0<c?x.delayCallTo(function(){u.play(d,a)},c,this.owner):u.play(d,a);this._anim.suffix=
null;this._anim.set(a,b)},getAnimName:function(a){null==a&&(a="");var b;b=this.isSuperDunk?"special":"dunk"+this.variation;""!=a&&(b+="_"+a);return b},startSequence:function(){this._position=this._character.setKinematic(!0);this._system.runDunkSequence(this.getSequence());0>=this.anticipationTime&&this.startIntro()},getSequence:function(){var a=this,b=[new ga(function(){0<a.anticipationTime&&a.startIntro();a._character.onDunkIntro.emit(a)}),new Z(this.introTime),new ga(function(){a.startAnim();a._character.onDunkAnim.emit(a)}),
new Z(this.animTime),new ga(function(){a.releaseBall();a.startOutro()}),new Z(this.outroTime),new ga(function(){a.startFall();a.endAnim()}),new Z(this.endDelay),new ga(function(){a.completeOnLanding||a.end()})];0<this.anticipationTime&&(b.unshift(new Z(this.anticipationTime)),b.unshift(new ga(function(){a.startAnticipation()})));return b},startAnticipation:function(a){null==a&&(a="pre");this.setAnim(a,{loop:this.dunkData.loopPre?!0:!1})},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?
!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._middlePosition.x,this.introTime/2,q.quintIn),this._position.y.animateTo(this._middlePosition.y,this.introTime/2,q.quadOut),x.delayCallTo(m(this,this.onHalfway),this.introTime/2))},startCameraZoom:function(){this._camera.zoomTo(this.cameraZoom,this.cameraZoomTime,this.cameraZoomEase)},onHalfway:function(){this.isStarted&&null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,
this.animTime,q.quintOut),this._position.y.animateTo(this._endPosition.y,this.animTime,q.sineIn))},onIntroAnimComplete:function(){},startAnim:function(a){this.isAnimStarted=!0;null==a&&(a=null);this.setAnim(a,{loop:this.dunkData.loop?!0:!1,onComplete:m(this,this.onAnimComplete)});this.success&&(!this.completeOnLanding&&this.showBasket&&this._camera.showBasket(this.get_basket()),this.isSuperDunk&&this.startCameraZoom())},onAnimComplete:function(){},releaseBall:function(){this._character.hasBall()&&
(this._character.removeBall(),this._character.owner._compMap.HealthComponent_42.invincible=!0,this.success?(this._ball.setPosition(this.get_basket().getTransform().position.x+50*this._transform.direction,this.get_basket().getTransform().position.y),this._ball.applyForce(100*-this.get_basket().getTransform().direction,200*Math.random()-100,0.5),this._ball.set_intangible(!0)):(this._ball.setPosition(this.get_basket().getTransform().position.x+50*this._transform.direction,this.get_basket().getTransform().position.y-
50),this._ball.set_intangible(!1),this._ball.applyForce(400*this.get_basket().getTransform().direction,-600,0.5),this._character.owner._compMap.HealthComponent_42.invincible=!1,u.play("ball_lost","FX")));this._character.onDunkContact.emit(this)},startOutro:function(a){null==a&&(a="out");this.setAnim(a,{onComplete:m(this,this.onOutroAnimComplete),loop:this.dunkData.loopOut?!0:!1})},onOutroAnimComplete:function(){},startFall:function(){this._character.setKinematic(!1);this._physics.resetVelocity();
this._camera.startFollow();this.success&&this._system.setSpeed(0.6,this.endDelay+0.2,q.sineInOut);this._physics.moveBy(this._character.dunkOffset.x*-this.get_basket().getTransform().direction,this._character.dunkOffset.y);this.usedDunkFallAnim=!1;this._character.setState("jump",null,!0)},endAnim:function(){},land:function(){this.completeOnLanding&&this.end();var a=this._transform.direction;this._character.resetState();this._transform.direction=a;this.usedDunkFallAnim&&this._anim.setAnimXY(0,0)},setPosition:function(a,
b){null!=this._position&&this._position.setXY(a,b,!0);this._transform.setXY(a,b)},setVariation:function(){this.variation=""+Math.min(Math.floor(Math.random()*this._character.dunkVariation)+1,this._character.dunkVariation)},setDunkSuccess:function(){this.success=!0;var a=this.get_basket().getTransform().distanceTo(this._transform),b=this._character.maxDunkPct,c=this._character.dunkTreshold;a>c&&(b=this._character.minDunkPct+(this._character.maxDunkPct-this._character.minDunkPct)*(1-(a-c)/(this.get_basket().getSize()-
c)));this.success=b>Math.random()},get_basket:function(){return this._basket},__class__:vb,__properties__:k(j.prototype.__properties__,{get_basket:"get_basket"})});var ge=function(){this._cooldown=this._attackDelay=this._attackTime=0;this.attackDirectionX=this.attackDirectionY=1;this.autoDisablePhysics=!0;this.isAttacking=!1;this.ignoreDamageOnParent=!0;this.followParent=!1;j.call(this)};g["game.components.Weapon"]=ge;ge.__name__=["game","components","Weapon"];ge.__super__=j;ge.prototype=k(j.prototype,
{get_name:function(){return"Weapon_69"},onStart:function(){j.prototype.onStart.call(this);this._defaultAttack=this.data;this._transform=this.owner._compMap.TransformComponent_26;this._damage=this.owner._compMap.DamageComponent_41;this._physics=this.owner._compMap.PhysicsComponent_12;this._damage.disable();null!=this._parent&&this.setParent(this._parent)},onStop:function(){j.prototype.onStop.call(this);this._damage=this._transform=this._physics=this._parent=null},onUpdate:function(a){this.updatePosition(a);
0<this._attackDelay?(this._attackDelay-=a,0>=this._attackDelay&&this.startAttack()):0<this._attackTime?(this._attackTime-=a,0>=this._attackTime&&this.endAttack()):0<this._cooldown&&(this._cooldown-=a,0>=this._cooldown&&this.endCooldown())},canAttack:function(){return this.isAttacking||0<this._cooldown?!1:!0},attack:function(){if(!this.canAttack())return!1;if(null==this.data)throw"No attack data!";this.isAttacking=!0;0<this.data.delay?this._attackDelay=this.data.delay:this.startAttack();return!0},
setParent:function(a,b){null==b&&(b=!0);this.removeParent();this._parent=a;null!=this._damage&&(null!=this._parent?(this.ignoreDamageOnParent&&this._damage.ignoreActor(this._parent),this.followParent=b):this.removeParent())},removeParent:function(){null!=this._parent&&this._damage.ignoreActor(this._parent,!1);this._parent=null;this.followParent=!1},startAttack:function(){this.isAttacking=!0;this._damage.enable();this.autoDisablePhysics&&this.enablePhysics();this.setShape(this.data);this._attackTime=
this.data.time;this.animateAttack()},animateAttack:function(){null==this.attackPosition&&(this.attackPosition=new Jd);0>=this._attackTime&&this.endAttack();this.attackPosition.x.animateTo(this.data.x,this._attackTime,q.quintOut);this.attackPosition.y.animateTo(this.data.y,this._attackTime,q.quintOut);this.updatePosition(0)},endAttack:function(){this.isAttacking=!1;this.startCooldown(this.data.cooldown);this.data=this.getNextAttack();this._damage.disable();this.autoDisablePhysics&&this.disablePhysics();
null!=this.attackPosition&&(this.attackPosition.dispose(),this.attackPosition=null)},startCooldown:function(a){null==a&&(a=0);this._cooldown=a;if(0>=this._cooldown)return!1;this._damage.disable();return!0},endCooldown:function(){this._damage.enable()},getNextAttack:function(){return this._defaultAttack},updatePosition:function(a){if(this._physics.enabled){var b;this.followParent?(b=this._parent._compMap.TransformComponent_26,this._transform.direction=b.direction):b=this.owner._compMap.TransformComponent_26;
null!=this.attackPosition?(this.attackPosition.update(a),this._physics.setPosition(b.position.x+(this.attackPosition.x._value+this.offset.x)*this.attackDirectionX*b.direction,b.position.y+(this.attackPosition.y._value+this.offset.y)*this.attackDirectionY)):this._physics.setPosition(b.position.x+this.offset.x*this.attackDirectionX*b.direction,b.position.y+this.offset.y*this.attackDirectionX)}},enablePhysics:function(){this._physics.enable()},disablePhysics:function(){this._physics.setPosition(-1E3,
-1E3);this._physics.disable()},setShape:function(a){if(null==this._physics.shape)throw"No shape on physics!";null==a.shape&&(a.shape={width:0,height:0});0>=a.shape.width&&(a.shape.width=this._physics.shape.width);0>=a.shape.height&&(a.shape.height=this._physics.shape.height)},__class__:ge});var Sf=function(){this.stunTime=1;ge.call(this)};g["game.components.CharacterWeapon"]=Sf;Sf.__name__=["game","components","CharacterWeapon"];Sf.__super__=ge;Sf.prototype=k(ge.prototype,{setParent:function(a,b){null==
b&&(b=!0);ge.prototype.setParent.call(this,a,b);this.wielder=a._compMap.Character_52},onStop:function(){ge.prototype.onStop.call(this);this.wielder=null},animateAttack:function(){},__class__:Sf});var Tf=function(){this.disposer=new uc;this.onlyHighEnd=this.onlyLowEnd=!1;this.uuid="";this.spawner=0;this.tags=[];this.comment="";this.key="templateName";j.call(this)};g["stolo.ensys.components.TemplateComponent"]=Tf;Tf.__name__=["stolo","ensys","components","TemplateComponent"];Tf.__super__=j;Tf.prototype=
k(j.prototype,{get_name:function(){return"TemplateComponent_2"},onAdded:function(){j.prototype.onAdded.call(this);this.owner.add(this.disposer)},dispose:function(){j.prototype.dispose.call(this);this.tags=this.disposer=null},__class__:Tf});var Ph=function(){};g["stolo.ensys.components.ICullingComponent"]=Ph;Ph.__name__=["stolo","ensys","components","ICullingComponent"];Ph.prototype={__class__:Ph};var X=function(){this.onInitComplete=new ua;this.initialized=!1;this.forceUpdate=!0;this.scale=1;D.call(this);
this.set_pointerEnabled(X.ENABLE_POINTER);this.set_visible(!1)};g["stolo.ensys.components.DisplayComponent"]=X;X.__name__=["stolo","ensys","components","DisplayComponent"];X.__interfaces__=[Ph];X.__super__=D;X.prototype=k(D.prototype,{dispose:function(){this.layer=this.offset=this._transform=null;D.prototype.dispose.call(this)},onAdded:function(){D.prototype.onAdded.call(this);this.mobilePack&&o.mobile&&(this.pack+=X.mobilePackSuffix);o.slow&&(this.lowEndPack&&(this.pack+=X.lowEndPackSuffix),null!=
this.lowEndAsset&&(this.asset=this.lowEndAsset));this.initialized||this.initStart()},initStart:function(){this.initEnd()},initEnd:function(){this.set_pointerEnabled(0!=(this._flags&4))},initComplete:function(){this.initialized||(this.applyOffset(),this.updateDisplay(),this.initialized=!0,this.onInitComplete.emit())},onStart:function(){D.prototype.onStart.call(this);this._transform=this.owner._compMap.TransformComponent_26;V.getSystemEntity(this.owner);this._cullingSystem=V.getSystemEntity(this.owner).getComponent("CullingSystem_5");
null!=this._cullingSystem?this._cullingSystem.addComponent(this,this.owner):this.enableCulling(!1);this.initComplete()},onStop:function(){null!=this._cullingSystem&&this._cullingSystem.removeComponent(this,this.owner);D.prototype.onStop.call(this)},applyOffset:function(){this.centerAnchor();null!=this.align&&("none"==this.align?this.setAnchor(0,0):"left"==this.align?this.anchorX.set__(0):"right"==this.align&&this.anchorX.set__(this.getNaturalWidth()));if(null!=this.offset){if(0!=this.offset.x){var a=
this.anchorX;a.set__(a._value-this.offset.x)}0!=this.offset.y&&(a=this.anchorY,a.set__(a._value-this.offset.y))}},enableCulling:function(a){this.set_visible(!a)},updateDisplay:function(){if(!this._transform.fixed||this.forceUpdate)this.setXY(this._transform.position.x,this._transform.position.y),this.setScaleXY(this._transform.direction*this.scale,this.scale),this.set_visible(!0);(!this._transform.fixedRotation||this.forceUpdate)&&this.setRotation(this._transform.rotation);this.forceUpdate=!1},onUpdate:function(a){this.updateDisplay();
D.prototype.onUpdate.call(this,a)},getTexture:function(a,b){var c=w.getPack(a,!1);if(null==c)throw"Cannot load asset '"+b+"', pack '"+a+"' was not found or loaded...";return W.getTexture(b,c)},__class__:X});var yb=function(){this.onAnimStart=new ua;this.onCreate=new ua;this.locked=!1;this.fps=-1;this.loop=!0;this.delay=0;this.autoRemove=!1;X.call(this)};g["stolo.ensys.components.AnimationComponent"]=yb;yb.__name__=["stolo","ensys","components","AnimationComponent"];yb.__super__=X;yb.prototype=k(X.prototype,
{onAdded:function(){this.createAnim();X.prototype.onAdded.call(this)},onUpdate:function(a){X.prototype.onUpdate.call(this,a);0<this._timeout&&(this._timeout-=a,0>this._timeout&&this._timeoutCallback())},createAnim:function(){this.animation=new ya(this.asset,this.pack,null,!1,this.overrides);this.owner.addChild((new z).add(this.animation));this.onCreate.emit()},initStart:function(){this.animation.setAnchor(0,0);0<this.fps&&(this.animation.get_spritesheet().fps=this.fps);if(this.autoRemove)this.animation.animComplete.connect(m(this,
this.onAutoRemove)).once();0<this.delay?(this.setTimeout(m(this,this.startAnim),this.delay),this.animation.set_visible(!1)):this.startAnim();this.initEnd()},startAnim:function(){null==this.start&&(this.start=this.animation.get_spritesheet().defaultAnim);var a=this.start;-1!=this.start.indexOf(",")&&(a=this.start.split(","));this.animation.set_visible(!0);a=this.animation.gotoAndPlay(a);!this.loop&&null!=a&&(a.loop=!1);this.onAnimStart.emit()},onAutoRemove:function(){this.autoRemove&&(V.getSystemEntity(this.owner),
V.getSystemEntity(this.owner).getComponent("ActorSystem_3").removeActor(this.owner))},enableCulling:function(a){X.prototype.enableCulling.call(this,a);this.animation.set_isPlaying(!a)},set:function(a,b,c,d){null==d&&(d=!0);null==c&&(c=!1);if(this.locked)return this._unlockTo=a,this.animation.animName;d&&null!=this.suffix&&(a+=this.suffix);this.animation.gotoAndPlay(a,b);c&&(this.locked=!0,this.animation.animComplete.connect(m(this,this.onLockedAnimComplete)).once());return this.animation.animName},
onLockedAnimComplete:function(){this.unlock()},getDuration:function(a,b){null==b&&(b=!0);b&&null!=this.suffix&&(a+=this.suffix);return null==this.animation||null==this.animation.get_spritesheet()?0:this.animation.getDuration(a)},unlock:function(a){this.locked=!1;null==a&&(a=this._unlockTo);null!=a&&this.set(a);this._unlockTo=null},getAnimation:function(){return this.animation},getNaturalWidth:function(){return null!=this.animation?this.animation.getNaturalWidth():100},getNaturalHeight:function(){return null!=
this.animation?this.animation.getNaturalHeight():100},set_pointerEnabled:function(a){null!=this.animation&&this.animation.set_pointerEnabled(a);return X.prototype.set_pointerEnabled.call(this,a)},setTimeout:function(a,b){this._timeout=b;this._timeoutCallback=a},__class__:yb});var vd=function(){this.labelLayer="Time";yb.call(this)};g["stolo.ensys.components.FlumpAnimationComponent"]=vd;vd.__name__=["stolo","ensys","components","FlumpAnimationComponent"];vd.__super__=yb;vd.prototype=k(yb.prototype,
{onStart:function(){yb.prototype.onStart.call(this)},onStop:function(){this.flump=null;yb.prototype.onStop.call(this)},createAnim:function(){this.animation=this.flump=new Uf(this.prefix,this.asset,this.pack,null,!1);this.owner.addChild((new z).add(this.animation));this.setReplacementAnim()},setReplacementAnim:function(){null!=this.textureReplace&&(this.flump.setDecorator(m(this,this.replaceAnims)),null!=this.flump.movie&&this.replaceAnims(this.flump.movie))},replaceAnims:function(a){if(this.textureReplace instanceof
Array&&null==this.textureReplace.__enum__)for(var b=this.textureReplace,c=0;c<b.length;){var d=b[c];++c;this.replaceAnim(a,d)}else this.replaceAnim(a,this.textureReplace)},replaceAnim:function(a,b){var c=null;null!=b.asset&&null!=b.sprite&&(c=w.getPack(b.sprite).getTexture(b.asset));var d=a.getLayer(b.layer,!1);null!=d&&(d=d._internal_getFromChildren("Sprite_4",ia),null!=d&&(d.texture=c))},__class__:vd});var gf=function(){this._lastAnimName=this._lastAnimParams=null;vd.call(this)};g["game.components.MixedAnimation"]=
gf;gf.__name__=["game","components","MixedAnimation"];gf.__super__=vd;gf.prototype=k(vd.prototype,{onStop:function(){this._flumpConnection.dispose();this._lastAnimParams=this._lastAnimName=this._flumpConnection=null;this.flump.owner.dispose();vd.prototype.onStop.call(this)},onUpdateFlump:function(){null!=this.flump.owner.parent&&null!=this.animation&&this.animation.isReady&&null!=this.flump&&this.flump.isReady&&this.flump.gotoAndStop(this.animation.animName,this.animation.get_currentFrame())},createAnim:function(){this.animation=
new ya(this.asset,this.pack,null,!1,this.overrides);this.owner.addChild((new z).add(this.animation));this.flump=new Uf(this.prefix,null!=this.flumpAsset?this.flumpAsset:this.asset+"_flump",this.pack,m(this,this.onFlumpReady),!1);this.owner.addChild((new z).add(this.flump));this.setAnimXY(0,0);this._flumpConnection=this.flump.onUpdateSignal.connect(m(this,this.onUpdateFlump));this.setReplacementAnim();this.setFlump();this.onCreate.emit()},setAnimXY:function(a,b){this.animation.setXY(a+this.animOffset.x,
b+this.animOffset.y);this.flump.setXY(a+this.flumpOffset.x,b+this.flumpOffset.y)},onFlumpReady:function(){this.setFlump()},applyOffset:function(){if(null!=this.offset){if(0!=this.offset.x){var a=this.anchorX;a.set__(a._value-this.offset.x)}0!=this.offset.y&&(a=this.anchorY,a.set__(a._value-this.offset.y))}},startAnim:function(){vd.prototype.startAnim.call(this);this.setFlump()},set:function(a,b,c,d){null==d&&(d=!0);null==c&&(c=!1);d=vd.prototype.set.call(this,a,b,c,d);this._lastAnimName=a;this._lastAnimParams=
b;this._lastAnimLock=c;this.setFlump();return d},relaunchAnim:function(){null!=this._lastAnimName&&this.set(this._lastAnimName,this._lastAnimParams,this._lastAnimLock)},setFlump:function(){if(null!=this.flump&&this.flump.isReady){var a=this.flump.hasAnim(this.animation.animName);a&&null==this.flump.owner.parent?this.owner.addChild(this.flump.owner):!a&&null!=this.flump.owner.parent&&this.owner.removeChild(this.flump.owner)}},__class__:gf});var wd=function(){this.offsetDirectionX=this.offsetDirectionY=
1;this.offsetX=this.offsetY=0;j.call(this)};g["stolo.ensys.components.CameraTargetComponent"]=wd;wd.__name__=["stolo","ensys","components","CameraTargetComponent"];wd.__super__=j;wd.prototype=k(j.prototype,{get_name:function(){return"CameraTargetComponent_19"},onStart:function(){V.getSystemEntity(this.owner);this._cameraSystem=V.getSystemEntity(this.owner).getComponent("CameraSystem_18");null!=this._cameraSystem&&(this._cameraSystem.addTarget(this),this.active&&this._cameraSystem.setTarget(this))},
onStop:function(){null!=this._cameraSystem&&(this._cameraSystem.removeTarget(this),this._cameraSystem=null)},__class__:wd});var xd=function(){this.cameraLimit={minX:0,maxX:0,minY:0,maxY:0};wd.call(this)};g["game.components.LevelTarget"]=xd;xd.__name__=["game","components","LevelTarget"];xd.__super__=wd;xd.prototype=k(wd.prototype,{onStart:function(){wd.prototype.onStart.call(this)},onStop:function(){wd.prototype.onStop.call(this)},__class__:xd});var Vf=function(){this.minX=-200;this.maxX=200;this.maxVelocity=
3;j.call(this)};g["game.components.Scoreboard"]=Vf;Vf.__name__=["game","components","Scoreboard"];Vf.__super__=j;Vf.prototype=k(j.prototype,{get_name:function(){return"Scoreboard_63"},onStart:function(){j.prototype.onStart.call(this);this._leftRocket=new ya(this.asset,this.pack);this._leftRocket.gotoAndPlay(this.anim);this._leftRocket.centerAnchor();this._leftRocket.setXY(this.leftPosition.x,this.leftPosition.y);this._leftRocket.setRotation(this.angle);this.owner.addChild((new z).add(this._leftRocket),
!1);this._rightRocket=new ya(this.asset,this.pack);this._rightRocket.gotoAndPlay(this.anim);this._rightRocket.centerAnchor();this._rightRocket.setXY(this.rightPosition.x,this.rightPosition.y);this._rightRocket.setScaleXY(-1,1);this._rightRocket.setRotation(-this.angle);this.owner.addChild((new z).add(this._rightRocket),!1);this._display=this.owner._compMap.Sprite_4;this._transform=this.owner._compMap.TransformComponent_26;if(this._display.initialized)this.init();else this._display.onInitComplete.connect(m(this,
this.init)).once()},init:function(){this._springX=new Fb(0.3,20,200);this._springX.maxVelocity=this.maxVelocity;this._springRotation=new Fb(0.3,8,200);this._floatSine=new Ob(this._transform.position.y-10,this._transform.position.y+10,2.2);this._homeScoreTens=new Na("scoreboard","score0","sprites_pack");this._homeScoreTens.setXY(102,95);this.owner.addChild((new z).add(this._homeScoreTens));this._homeScoreOnes=new Na("scoreboard","score0","sprites_pack");this._homeScoreOnes.setXY(127,95);this.owner.addChild((new z).add(this._homeScoreOnes));
this._awayScoreTens=new Na("scoreboard","score0","sprites_pack");this._awayScoreTens.setXY(193,95);this.owner.addChild((new z).add(this._awayScoreTens));this._awayScoreOnes=new Na("scoreboard","score0","sprites_pack");this._awayScoreOnes.setXY(217,95);this.owner.addChild((new z).add(this._awayScoreOnes));this._timeMinutes=new Na("scoreboard","timer8","sprites_pack");this._timeMinutes.setXY(141,8);this.owner.addChild((new z).add(this._timeMinutes));this._timeTens=new Na("scoreboard","timer8","sprites_pack");
this._timeTens.setXY(165,8);this.owner.addChild((new z).add(this._timeTens));this._timeOnes=new Na("scoreboard","timer8","sprites_pack");this._timeOnes.setXY(181,8);this.owner.addChild((new z).add(this._timeOnes));this._homeTeam=new Na("scoreboard","team_tmnt","sprites_pack");this._homeTeam.centerAnchor().setXY(128,77);this.owner.addChild((new z).add(this._homeTeam));this._awayTeam=new Na("scoreboard","team_tmnt","sprites_pack");this._awayTeam.centerAnchor().setXY(219,77);this.owner.addChild((new z).add(this._awayTeam))},
onUpdate:function(a){j.prototype.onUpdate.call(this,a);null!=this._springX&&null!=this._target&&(this._springX.setTargetValue(Math.min(this.maxX,Math.max(this.minX,this._target.position.x))),this._springX.update(a),this._springRotation.setTargetValue(this._springX.velocity),this._springRotation.update(a),this._transform.position.x=this._springX.value,this._transform.position.y=this._floatSine.update(a),this._transform.rotation=this._springRotation.value,this._transform.fixedRotation=!1)},onStop:function(){j.prototype.onStop.call(this);
this._awayTeam=this._homeTeam=this._timeOnes=this._timeTens=this._timeMinutes=this._awayScoreOnes=this._awayScoreTens=this._homeScoreOnes=this._homeScoreTens=this._rightRocket=this._leftRocket=this._target=this._display=null},setTarget:function(a){this._target=a},setTeams:function(a,b){this._homeTeam.setSymbol(a);this._awayTeam.setSymbol(b)},setHomeScore:function(a){null!=this._homeScoreTens&&(this._homeScoreTens.setSymbol("score"+Math.floor(a/10)),this._homeScoreOnes.setSymbol("score"+a%10))},setAwayScore:function(a){null!=
this._awayScoreTens&&(this._awayScoreTens.setSymbol("score"+Math.floor(a/10)),this._awayScoreOnes.setSymbol("score"+a%10))},setTime:function(a){if(null!=this._timeMinutes){var b=a%60;this._timeMinutes.setSymbol("timer"+Math.floor(a/60));this._timeTens.setSymbol("timer"+Math.floor(b/10));this._timeOnes.setSymbol("timer"+b%10)}},__class__:Vf});var Wf=function(){this._texts=[];this._panelOffsetY=this._firstPageNumber=this._pageNumber=this._currentPage=0;this._alphaTweenDuration=0.25;this._nextPanelIn=
0;this._duration=5;this.onHtpDone=new ua;this.minX=-200;this.maxX=200;this.maxVelocity=3;j.call(this)};g["game.components.Htpboard"]=Wf;Wf.__name__=["game","components","Htpboard"];Wf.__super__=j;Wf.prototype=k(j.prototype,{get_name:function(){return"Htpboard_56"},onStart:function(){j.prototype.onStart.call(this);this._tutorial=jk.tutorials;this._pack=w.getPack("ui_htp");this._isMobile=o.touch;this._firstPageNumber=l.game.isFirstGame()||!l.inTournament?1:6;this._leftRocket=new ya(this.asset,this.pack);
this._leftRocket.gotoAndPlay(this.anim);this._leftRocket.centerAnchor();this._leftRocket.setXY(this.leftPosition.x,this.leftPosition.y);this._leftRocket.setRotation(this.angle);this.owner.addChild((new z).add(this._leftRocket),!1);this._rightRocket=new ya(this.asset,this.pack);this._rightRocket.gotoAndPlay(this.anim);this._rightRocket.centerAnchor();this._rightRocket.setXY(this.rightPosition.x,this.rightPosition.y);this._rightRocket.setScaleXY(-1,1);this._rightRocket.setRotation(-this.angle);this.owner.addChild((new z).add(this._rightRocket),
!1);this._display=this.owner._compMap.Sprite_4;this._transform=this.owner._compMap.TransformComponent_26;this._title=new ud("","htp_title");this._title.setXY(300,10);this.owner.addChild((new z).add(this._title));if(this._display.initialized)this.init();else this._display.onInitComplete.connect(m(this,this.init)).once()},init:function(){this._transform.fixed=!0;this._display.y.set__(-600);x.to(this._display,{y:this._transform.position.y-10},{time:1.5,ease:q.quadIn,onComplete:m(this,this.onShown)});
this.updatePage();this._floatSine=new Ob(this._transform.position.y-10,this._transform.position.y+10,2.2)},onShown:function(){this._nextPanelIn=this._duration;this._transform.fixed=!1;this._springX=new Fb(0.3,20,200);this._springX.maxVelocity=this.maxVelocity;this._springRotation=new Fb(0.3,8,200)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);null!=this._springX&&(this._transform.position.y=this._floatSine.update(a),this._transform.fixedRotation=!1,this._nextPanelIn-=a,0>=this._nextPanelIn&&
this.changePage())},onStop:function(){j.prototype.onStop.call(this);this._rightRocket=this._leftRocket=this._display=null},changePage:function(){this._currentPage++;if(l.inTournament){if(l.game.isFirstGame()&&5<=this._currentPage){this.hide();l.game.setSecondGame();return}if(l.game.isSecondGame()&&2<=this._currentPage){this.hide();l.game.endHtp();return}}else if(7<=this._currentPage){this.hide();l.game.endHtp();return}bl.skipTutorial&&(this.hide(),l.game.endHtp());this._title.alpha.animateTo(0,this._alphaTweenDuration);
this._image.alpha.animateTo(0,this._alphaTweenDuration);for(var a=0,b=this._texts;a<b.length;){var c=b[a];++a;c.alpha.animateTo(0,this._alphaTweenDuration)}x.delayCallTo(m(this,this.updatePage),this._alphaTweenDuration);this._nextPanelIn=this._duration},updatePage:function(){this._pageNumber=this._currentPage+this._firstPageNumber;this._currentTutorial=this._tutorial[this._pageNumber-1];this._title.setText(this._currentTutorial.titleID);this._title.setAlpha(0);this._title.alpha.animateTo(1,this._alphaTweenDuration);
this.setImage("htp_"+this._pageNumber);this.setTexts()},setImage:function(a){null!=this._image&&this._image.owner.dispose();this._image=new ia(w.getPack(this._isMobile?"htp_mobile":"htp").getTexture(a));a=this._currentTutorial.imagePosition;this._image.setXY(a.x,a.y+this._panelOffsetY);this._image.setAlpha(0);this._image.alpha.animateTo(1,this._alphaTweenDuration);this.owner.addChild((new z).add(this._image))},setTexts:function(){if(0<this._texts.length)for(var a=0,b=this._texts;a<b.length;){var c=
b[a];++a;c.owner.dispose()}this._texts=[];for(var d,a=this._currentTutorial.texts,b=0;b<a.length;)c=a[b],++b,d=G.string(c.textID)+(this._isMobile&&c.mobileVariant?"_MOBILE":""),d=new ud(d,c.font),null!=c.width&&0<c.width&&d.setWrapWidth(c.width),d.setXY(c.x,c.y+this._panelOffsetY),d.setAlpha(0),d.alpha.animateTo(1,this._alphaTweenDuration),this.owner.addChild((new z).add(d)),this._texts.push(d)},hide:function(){this._springX=this._floatSine=null;this._transform.fixed=!0;x.to(this._display,{y:-800},
{time:1.5,ease:q.backOut,onComplete:m(this,this.onHidden)})},onHidden:function(){this.onHtpDone.emit()},__class__:Wf});var Xf=function(){this._coolDown=0;j.call(this)};g["game.components.PickupSpawner"]=Xf;Xf.__name__=["game","components","PickupSpawner"];Xf.__super__=j;Xf.prototype=k(j.prototype,{get_name:function(){return"PickupSpawner_70"},onStart:function(){j.prototype.onStart.call(this);V.getSystemEntity(this.owner);this._actorSystem=V.getSystemEntity(this.owner).getComponent("ActorSystem_3");
this._transform=this.owner._compMap.TransformComponent_26;this._coolDown=this.time},onStop:function(){this._actorSystem=this._transform=null;j.prototype.onStop.call(this)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this._coolDown-=a;0>=this._coolDown&&(a=Math.random()*this.rangeX-0.5*this.rangeX,this._actorSystem.spawn(ba.merge(J.getTemplate(this.getPickup()),{transform:{position:{x:this._transform.position.x+a,y:this._transform.position.y}}},!0)),this._coolDown=this.time)},getPickup:function(){if(this.pickup instanceof
Array&&null==this.pickup.__enum__){var a=this.pickup;if(0==a.length)throw"No pickup provided";var b=Math.floor(Math.random()*a.length);return a[b]}if("string"==typeof this.pickup)return this.pickup;throw"Wrong pickup value: "+G.string(this.pickup);},__class__:Xf});var Yf=function(){this._hooked=!0;this._toDestroy=!1;j.call(this)};g["game.components.Pickup"]=Yf;Yf.__name__=["game","components","Pickup"];Yf.__super__=j;Yf.prototype=k(j.prototype,{get_name:function(){return"Pickup_71"},onStart:function(){j.prototype.onStart.call(this);
this._physicsSystem=V.getSystemEntity(this.owner)._compMap.PhysicSystem_22;this._physics=this.owner._compMap.PhysicsComponent_12;this._display=this.owner._compMap.Sprite_4;if(this._display.initialized)this.showHook();else this._display.onInitComplete.connect(m(this,this.showHook)).once();this._physicsSystem.addContactListener(da.PRELISTENER,ja.ANY,N.ANY_BODY,N.ANY_BODY,this.owner,m(this,this.onContact))},onStop:function(){this._physicsSystem.removeContactListener(da.PRELISTENER,ja.ANY,N.ANY_BODY,
N.ANY_BODY,this.owner);this._physics=this._physicsSystem=null;null!=this._hook&&(x.kill(this._hook),this._hook.owner.dispose(),this._hook=null);j.prototype.onStop.call(this)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);null!=this._physics&&this._hooked&&this._physics.moveBy(0,this.fallSpeed*a);null!=this._hook&&0==this._hook.alpha._value&&this._toDestroy&&(V.getSystemEntity(this.owner),V.getSystemEntity(this.owner).getComponent("ActorSystem_3").removeActor(this.owner))},showHook:function(){this._hook=
new Na(this._display.asset,"hook",this._display.pack);this.owner.addChild((new z).add(this._hook),!1);this._hook.setXY(0.5*(this._display.getNaturalWidth()-this._hook.getNaturalWidth()),0.5*this._display.getNaturalHeight()-this._hook.getNaturalHeight())},hideHook:function(){null!=this._hook&&this._hook.alpha.set__(0)},onContact:function(a){var b=!0;if(null!=this.owner.parent){var c=a._compMap.Effect_68;if(null!=c)c.addEffect(this.effect),this._toDestroy=!0,this._display.animation.alpha.set__(0),b=
!1;else if(null!=a._compMap.Ball_66)return!1}null!=this._hook&&null==x.tweens.h.__keys__[this._hook.__id__]&&(x.to(this._hook,{y:-1E3},{time:1,onComplete:m(this,this.hideHook)},q.quadIn),null!=this._physics&&!this._toDestroy&&(this._physics.setMassScale(0.25),this._hooked=!1));return b},__class__:Yf});var Qh=function(){this._currentEffect=null;this.onClearEffect=new ua;this.onAddEffect=new Y;this.scale=1;j.call(this)};g["game.components.Effect"]=Qh;Qh.__name__=["game","components","Effect"];Qh.__super__=
j;Qh.prototype=k(j.prototype,{get_name:function(){return"Effect_68"},onStart:function(){j.prototype.onStart.call(this);this._display=this.owner._compMap.Sprite_4;this._transform=this.owner._compMap.TransformComponent_26;this._physic=this.owner._compMap.PhysicsComponent_12;this._frontFx=new ya(this.asset,this.pack);this._frontFx.setScale(this.scale);(new z).add(this._frontFx);this._backFx=new ya(this.asset,this.pack);this._backFx.setScale(this.scale);(new z).add(this._backFx)},onStop:function(){this._physic=
this._transform=this._display=this._currentEffect=null;null!=this._frontFx&&this._frontFx.owner.dispose();null!=this._backFx&&this._backFx.owner.dispose();this._fxEmitter=this._backFx=this._frontFx=null;j.prototype.onStop.call(this)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);if(null!=this._currentEffect)if(this._currentEffect.duration-=a,0>=this._currentEffect.duration)this.clearEffect();else if(null!=this._display&&null!=this._display.flump&&null!=this._display.flump.movie){a=this._display.flump.movie.getLayer("footF",
!1);null!=a&&a!=this._frontFx.owner.parent&&(a.addChild(this._frontFx.owner),this._frontFx.gotoAndPlay(this._currentEffect.fx));if(null!=this._fxEmitter&&this._fxEmitter.enabled){var a=this._frontFx.getViewMatrix(),b=this._fxEmitter.getViewMatrix();this._fxEmitter.emitX.set__(a.m02-b.m02-this._offset.x*this._transform.direction);this._fxEmitter.emitY.set__(a.m12-b.m12+this._frontFx.anchorY._value-this._offset.y);this._fxEmitter.direction=this._transform.direction}a=this._display.flump.movie.getLayer("footB",
!1);null!=a&&a!=this._backFx.owner.parent&&(a.addChild(this._backFx.owner),this._backFx.gotoAndPlay(this._currentEffect.fx))}},addEffect:function(a){this.clearEffect();this._currentEffect=ba.clone(a);this._fxEmitter=ma.setEmitter(this._fxEmitter,this._currentEffect.fx,"particles_fx");null==this._fxEmitter.owner&&this.owner.parent.addChild((new z).add(this._fxEmitter),!1);this._fxEmitter.restart();this._offset=this._currentEffect.offset;null==this._offset&&(this._offset={x:0,y:0});null!=this._frontFx&&
this._frontFx.setXY(this._offset.x,this._offset.y);null!=this._backFx&&this._backFx.setXY(this._offset.x,this._offset.y);this.onAddEffect.emit(this._currentEffect)},clearParticles:function(){null!=this._currentEffect&&null!=this._fxEmitter&&this._fxEmitter.clearParticles()},clearEffect:function(){this._currentEffect=null;null!=this._frontFx.owner.parent&&this._frontFx.owner.parent.removeChild(this._frontFx.owner);null!=this._fxEmitter&&(this._fxEmitter.enabled=!1);null!=this._backFx.owner.parent&&
this._backFx.owner.parent.removeChild(this._backFx.owner);this.onClearEffect.emit()},__class__:Qh});var Zf=function(){j.call(this)};g["game.components.Crowd"]=Zf;Zf.__name__=["game","components","Crowd"];Zf.__super__=j;Zf.prototype=k(j.prototype,{get_name:function(){return"Crowd_55"},onStart:function(){j.prototype.onStart.call(this);this._display=this.owner._compMap.Sprite_4;this._script=new Eb;this.owner.add(this._script)},onStop:function(){this._script=this._display=null;j.prototype.onStop.call(this)},
cheer:function(a){null==a&&(a=1);var b=this;this._display.set("cheer");a*=this._display.getDuration("cheer");this._script.run(new fb([new Z(a),new ga(function(){b._display.set("idle")})]))},__class__:Zf});var hf=function(){this.normalDuration=1;this.megaDuration=2;this.anim="idle";X.call(this)};g["game.components.Flashes"]=hf;hf.__name__=["game","components","Flashes"];hf.__super__=X;hf.prototype=k(X.prototype,{onStart:function(){X.prototype.onStart.call(this);this._script=new Eb;this.owner.add(this._script);
this._anims=[];for(var a,b=0,c=this.positions;b<c.length;){var d=c[b];++b;a=new ya(this.asset,this.pack);a.setXY(d.x,d.y);(new z).add(a);this._anims.push(a)}},dispose:function(){for(var a=0,b=this._anims;a<b.length;){var c=b[a];++a;c.owner.dispose()}this._script=this._anims=null;X.prototype.dispose.call(this)},trigger:function(a){null==a&&(a=!1);for(var b=this,c=0,d=this._anims;c<d.length;){var e=[d[c]];++c;null==e[0].owner.parent&&this._script.run(new fb([new Z(0.3*Math.random()),new ga(function(a){return function(){b.owner.addChild(a[0].owner);
a[0].gotoAndPlay(a[0])}}(e)),new Z(a?this.megaDuration:this.normalDuration),new ga(function(a){return function(){a[0].owner.parent.removeChild(a[0].owner)}}(e))]))}},__class__:hf});var v=function(){this._superMoveValue=0;this.onChange=new Y;this.delayVO=1;vb.call(this);this.cancelable=this.completeOnLanding=!1;this.isSuperDunk=this.physicsAnimation=!0};g["game.components.specials.SuperDunk"]=v;v.__name__=["game","components","specials","SuperDunk"];v.__super__=vb;v.prototype=k(vb.prototype,{onAdded:function(){vb.prototype.onAdded.call(this)},
dispose:function(){null!=this._specialFx&&this._specialFx.owner.dispose();this._specialFx=null;vb.prototype.dispose.call(this)},start:function(a,b){var c=this;if(this.isStarted)return!1;0>this.introTime&&(this.introTime=this.getDuration("in"));0>this.animTime&&(this.animTime=this.getDuration(null));this.cameraZoomTime=2;this.cameraZoomEase=q.quintInOut;this.canSuperMove()?(this.hideFX(),vb.prototype.start.call(this,a,b),x.delayCallTo(function(){u.play("mega_"+c._character.get_charData().name,"char")},
this.delayVO)):this.success=!1;return this.success},canSuperMove:function(){return this._superMoveValue>=C.superMoveTotal},resetSuperMove:function(){this.hideFX();this._superMoveValue=0;this.onChange.emit(0)},addSuperMoveValue:function(a){if(!(null==this._character||la.codeUnlocked("NO_MEGADUNK"))){var a=a*this._character.superMoveFactor,b=Math.floor(this._superMoveValue);this._superMoveValue=Math.max(0,Math.min(C.superMoveTotal,this._superMoveValue+a));b!=Math.floor(this._superMoveValue)&&(this.onChange.emit(this._superMoveValue/
C.superMoveTotal),this.canSuperMove()&&!this._character.isDunking()?this.showFX():this._superMoveValue<C.superMoveTotal&&this.hideFX())}},showFX:function(){null!=this._character&&(null==this._specialFx&&(this._specialFx=new ya("fx","sprites_pack",null,!0,{anims:{special_explosion:{fps:6}}}),(new z).add(this._specialFx)),this._character.owner.addChild(this._specialFx.owner),this._specialFx.animComplete.connect(m(this,this.specialFxNextAnim)).once(),this._specialFx.gotoAndPlay("special_explosion"),
this._specialFx.alpha.set__(1))},specialFxNextAnim:function(){this._character.owner.addChild(this._specialFx.owner,!1);this._specialFx.gotoAndPlay(["special_in","special_idle"])},hideFX:function(){var a=this;null!=this._specialFx&&null!=this._specialFx.owner.parent&&1==this._specialFx.alpha._value&&x.to(this._specialFx,{alpha:0},{time:1,ease:q.quintInOut,onComplete:function(){a._specialFx.owner.parent.removeChild(a._specialFx.owner)}})},setDunkSuccess:function(){this.success=!0},setVariation:function(){this.variation=
"special"},endAnim:function(){this._character.removeBall(this._transform);this.resetSuperMove();vb.prototype.endAnim.call(this)},__class__:v});var Rh=function(){v.call(this);this.dunkData={direction:1,loopPre:!1,loopIn:!1,loop:!0,loopOut:!0,loopHang:!0}};g["game.components.specials.CraigSpecial"]=Rh;Rh.__name__=["game","components","specials","CraigSpecial"];Rh.__super__=v;Rh.prototype=k(v.prototype,{start:function(a,b){return v.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=
this.getDuration("pre");this.animTime=this.introTime=1;this.endDelay=this.outroTime=0;this.completeOnLanding=!0;v.prototype.startSequence.call(this)},startAnticipation:function(){v.prototype.startAnticipation.call(this)},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});this.anim.set_isPlaying(!1);this._middlePosition=new cb(this._transform.position.x,this._transform.position.y-760);this._position.x.animateTo(this._middlePosition.x,
this.introTime/2,q.quadIn);this._position.y.animateTo(this._middlePosition.y,this.introTime/2,q.quadIn)},startAnim:function(){v.prototype.startAnim.call(this,null);var a=this._basket.getTransform().position;this._endPosition=new cb(a.x+(this.get_basket().isHome?50:-50),a.y);this.setPosition(this._endPosition.x,a.y-500);this._position.x.animateTo(this._endPosition.x,this.animTime,q.quadIn);this._position.y.animateTo(this._endPosition.y,this.animTime,q.quadIn)},startOutro:function(){v.prototype.startOutro.call(this,
"out")},startFall:function(){this._character.setKinematic(!1);this._physics.resetVelocity();this._physics.applyImpulse(0,300)},land:function(){var a=this;this.setAnim("land");x.delayCallTo(function(){a.completeOnLanding&&a.end()},0.5)},__class__:Rh});var lb=function(){v.call(this);this.dunkData={direction:1,loopIn:!1,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};g["game.components.specials.LeoSpecial"]=lb;lb.__name__=["game","components","specials","LeoSpecial"];lb.__super__=v;lb.prototype=k(v.prototype,
{dispose:function(){null!=lb._blackScreen&&lb._blackScreen.dispose();lb._blackScreen=null;v.prototype.dispose.call(this)},start:function(a,b){return v.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=this.getDuration("pre")+2.25;this.introTime=0.25;this.animTime=this.getDuration(null);this.outroTime=this.getDuration("out");this._middlePosition.x=this._endPosition.x;this._middlePosition.y=this._endPosition.y;v.prototype.startSequence.call(this)},startAnticipation:function(){var a=
this;v.prototype.startAnticipation.call(this,"pre");null==lb._blackScreen&&(lb._blackScreen=(new z).add(new xb(0,C.width,C.height)));x.delayCallTo(function(){a.owner.parent.parent.addChild(lb._blackScreen);null!=lb._blackScreen._compMap.Sprite_4&&(lb._blackScreen._compMap.Sprite_4.setAlpha(0),lb._blackScreen._compMap.Sprite_4.alpha.animateTo(0.8,0.25,q.quintInOut),x.delayCallTo(function(){lb._blackScreen._compMap.Sprite_4.setAlpha(0.8);lb._blackScreen._compMap.Sprite_4.alpha.set_behavior(new Ye(0,
0.5));x.to(lb._blackScreen._compMap.Sprite_4,{alpha:0},{delay:1.1,onComplete:function(){null!=lb._blackScreen.parent&&lb._blackScreen.parent.removeChild(lb._blackScreen.parent)}})},1.5,a.owner))},0.65,this.owner);x.delayCallTo(function(){a._position.x.animateTo(a._endPosition.x,0.3,q.quadOut);a._position.y.animateTo(a._endPosition.y-400,0.3,q.quadOut)},1.8,this.owner)},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});
null!=this._position.x&&(this._position.x.animateTo(this._middlePosition.x,this.introTime,q.quadOut),this._position.y.animateTo(this._middlePosition.y,this.introTime,q.quadOut))},startAnim:function(){v.prototype.startAnim.call(this,null)},startOutro:function(){v.prototype.startOutro.call(this)},startFall:function(){v.prototype.startFall.call(this);this.anim.set_isPlaying(!1)},__class__:lb});var Sh=function(){v.call(this);this.dunkData={direction:1,loopIn:!0,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};
g["game.components.specials.DonnieSpecial"]=Sh;Sh.__name__=["game","components","specials","DonnieSpecial"];Sh.__super__=v;Sh.prototype=k(v.prototype,{start:function(a,b){return v.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=1;this.animTime=this.getDuration(null);this.outroTime=0.3;v.prototype.startSequence.call(this)},startAnticipation:function(){v.prototype.startAnticipation.call(this,"pre")},startIntro:function(a){null==a&&
(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime,q.backIn),this._position.y.animateTo(this._endPosition.y,this.introTime,q.backIn))},startAnim:function(){v.prototype.startAnim.call(this)},startOutro:function(){v.prototype.startOutro.call(this)},__class__:Sh});var Th=function(){this._rotationSpeed=0.5;this._rotate=!1;this._puffTime=0.35;this._inTime1=this._inTime2=
1.5;v.call(this);this.dunkData={direction:1,loopIn:!0,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};g["game.components.specials.MikeSpecial"]=Th;Th.__name__=["game","components","specials","MikeSpecial"];Th.__super__=v;Th.prototype=k(v.prototype,{dispose:function(){null!=this._fx&&this._fx.dispose();this._fx=null;null!=this._fx2&&this._fx2.dispose();this._fx2=null;v.prototype.dispose.call(this)},onUpdate:function(a){v.prototype.onUpdate.call(this,a);this._rotate&&(this._transform.rotation+=this._rotationSpeed);
null!=this._fx&&null!=this._fx.parent&&this._fx._compMap.Sprite_4.setXY(this._transform.position.x,this._transform.position.y);null!=this._fx2&&null!=this._fx2.parent&&this._fx2._compMap.Sprite_4.setXY(this._transform.position.x,this._transform.position.y)},start:function(a,b){var c=v.prototype.start.call(this,a,b);this._middlePosition.x=this._endPosition.x;this._middlePosition.y=this._endPosition.y;null==this._fx&&(this._fx=this.createFx());null==this._fx2&&(this._fx2=this.createFx());return c},
startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=this._inTime1+this._inTime2;this.animTime=0.7;this.outroTime=0.3;v.prototype.startSequence.call(this)},startAnticipation:function(){v.prototype.startAnticipation.call(this,"pre");x.delayCallTo(function(){u.play("smoke_puff2","FX")},this.anticipationTime-this._puffTime)},startIntro:function(){u.play("smoke_puff","FX");this.owner.parent.addChild(this._fx);this.setAnim("in");this._position.x.set__(Math.min(460,Math.max(-460,
this._position.x._value-300)));this._position.y.set__(Math.max(-250,this._position.y._value-100));this._position.x.animateTo(this._position.x._value+100,this._inTime1,q.quadIn);this._transform.fixedRotation=!1;this._rotate=!0;x.delayCallTo(m(this,this.endIntro1),this._inTime1-this._puffTime)},endIntro1:function(){u.play("smoke_puff2","FX");this._anim.alpha.set__(0);this.owner.parent.addChild(this._fx2);x.delayCallTo(m(this,this.startIntro2),this._puffTime)},startIntro2:function(){u.play("smoke_puff",
"FX");this._anim.alpha.set__(1);this.owner.parent.addChild(this._fx);this._transform.rotation=0;this._rotate=!1;this.setAnim("in2");var a=this._position.y;a.set__(a._value-200);this._position.x.animateTo(this._position.x._value+100,this._inTime2,q.quadIn);x.delayCallTo(m(this,this.endIntro2),this._inTime1-this._puffTime)},endIntro2:function(){u.play("smoke_puff2","FX");this._anim.alpha.set__(0);this.owner.parent.addChild(this._fx2);this.startCameraZoom()},startAnim:function(a){u.play("smoke_puff",
"FX");this._anim.alpha.set__(1);null==a&&(a=null);this._transform.fixedRotation=!0;this.setAnim(a,{loop:this.dunkData.loop?!0:!1,onComplete:m(this,this.onAnimComplete)});this._position.x.set__(this._endPosition.x);this._position.y.set__(this._endPosition.y);x.delayCallTo(function(){u.play("mike_spinning_arms","DUNK")},0.25)},startOutro:function(){v.prototype.startOutro.call(this)},createFx:function(){var a=new z,b=new ya("mike_fx","team_tmnt_1");this._disposer.add(b.animComplete.connect(m(this,this.onFxComplete)));
a.add(b);return a},onFxComplete:function(a,b){this.owner.parent.removeChild(b.owner)},__class__:Th});var Uh=function(){v.call(this);this.dunkData={direction:1,loopPre:!1,loopIn:!1,loop:!0,loopOut:!1,loopHang:!1}};g["game.components.specials.SpongebobSpecial"]=Uh;Uh.__name__=["game","components","specials","SpongebobSpecial"];Uh.__super__=v;Uh.prototype=k(v.prototype,{start:function(a,b){return v.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=this.getDuration("pre");
this.introTime=0.65;this.animTime=this.getDuration(null);this.outroTime=0.25;v.prototype.startSequence.call(this)},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime,q.cubeOut),this._position.y.animateTo(this._endPosition.y,this.introTime,q.quintOut))},startAnim:function(){v.prototype.startAnim.call(this,null)},startOutro:function(){v.prototype.startOutro.call(this,
"land")},__class__:Uh});var Vh=function(){v.call(this);this.dunkData={direction:1,loopPre:!1,loopIn:!1,loop:!0,loopOut:!0,loopHang:!0}};g["game.components.specials.PatrickSpecial"]=Vh;Vh.__name__=["game","components","specials","PatrickSpecial"];Vh.__super__=v;Vh.prototype=k(v.prototype,{onStop:function(){if(null!=this._hooks){for(var a=0,b=this._hooks;a<b.length;){var c=b[a];++a;c.dispose()}this._hooks=null}v.prototype.onStop.call(this)},start:function(a,b){this.completeOnLanding=!1;this._hooks=
[];this.createHook("hook1",-100,-800);this.createHook("hook2",150,-850);this.createHook("hook3",250,-750);var c=v.prototype.start.call(this,a,b);this._middlePosition.y-=75;this._endPosition.x+=20;return c},onUpdate:function(a){v.prototype.onUpdate.call(this,a)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=1;this.animTime=this.getDuration(null);this.outroTime=this.getDuration("out");for(var a=1,b=0,c=this._hooks;b<c.length;){var d=c[b];++b;x.to(d._compMap.Sprite_4,
{y:d._compMap.Sprite_4.y._value+400},{time:0.75,delay:0.2*a,ease:q.bounceOut});this.owner.parent.addChild(d);a++}v.prototype.startSequence.call(this)},startAnticipation:function(){v.prototype.startAnticipation.call(this,"pre");x.delayCallTo(function(){u.play("patrick_bite","DUNK")},0.75)},startIntro:function(){v.prototype.startIntro.call(this,"in")},startAnim:function(){for(var a=this,b=1,c=0,d=this._hooks;c<d.length;){var e=[d[c]];++c;x.to(e[0]._compMap.Sprite_4,{y:e[0]._compMap.Sprite_4.y._value-
600},{time:0.75,delay:0.2*b,ease:q.bounceIn}).then(function(b){return function(){a.owner.parent.removeChild(b[0])}}(e));b++}v.prototype.startAnim.call(this,null);x.delayCallTo(function(){u.play("patrick_pop","DUNK")},0.4)},startOutro:function(){v.prototype.startOutro.call(this,"out")},startFall:function(a){v.prototype.startFall.call(this,a);null!=this._position&&null!=this._position.y&&this._position.y.animateTo(this._position.y._value+50,1,q.sineIn)},createHook:function(a,b,c){var d=new z,a=W.createImage(a,
w.getPack("team_sb")),e=this.owner._compMap.TransformComponent_26;a.setXY(e.position.x+b,e.position.y+c);d.add(a);this._hooks.push(d)},__class__:Vh});var Wh=function(){v.call(this);this.dunkData={direction:1,loopIn:!1,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};g["game.components.specials.SanjaySpecial"]=Wh;Wh.__name__=["game","components","specials","SanjaySpecial"];Wh.__super__=v;Wh.prototype=k(v.prototype,{start:function(a,b){return v.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=
this.getDuration("pre");this.introTime=0.75;this.animTime=this.getDuration(null);this.outroTime=0.3;v.prototype.startSequence.call(this)},startAnticipation:function(){v.prototype.startAnticipation.call(this,"pre")},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x-100,this.introTime,q.quadOut),this._position.y.animateTo(this._endPosition.y,this.introTime,
q.quadOut))},startAnim:function(){v.prototype.startAnim.call(this,null);null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime,q.quadOut),this._position.y.animateTo(this._endPosition.y,this.introTime,q.quadOut));x.delayCallTo(function(){u.play("sanjay_spin","DUNK")},1)},startOutro:function(){v.prototype.startOutro.call(this,"out")},__class__:Wh});var Xh=function(){v.call(this);this.dunkData={direction:1,loopIn:!0,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};g["game.components.specials.RaphSpecial"]=
Xh;Xh.__name__=["game","components","specials","RaphSpecial"];Xh.__super__=v;Xh.prototype=k(v.prototype,{start:function(a,b){return v.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=1;this.animTime=this.getDuration(null);this.outroTime=0.3;this._middlePosition.y-=100;v.prototype.startSequence.call(this)},startAnticipation:function(){v.prototype.startAnticipation.call(this,"pre")},startIntro:function(a){null==a&&(a="in");this.setAnim(a,
{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime,q.quadOut),this._position.y.animateTo(this._middlePosition.y,this.introTime/2,q.quadOut),x.delayCallTo(m(this,this.onHalfway),this.introTime/2))},onHalfway:function(){this.isStarted&&null!=this._position.x&&this._position.y.animateTo(this._endPosition.y,this.animTime,q.sineIn)},startAnim:function(a){v.prototype.startAnim.call(this,a)},
startOutro:function(){v.prototype.startOutro.call(this,"out")},__class__:Xh});var Yh=function(){v.call(this);this.dunkData={direction:1,loopIn:!0,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};g["game.components.specials.FeeSpecial"]=Yh;Yh.__name__=["game","components","specials","FeeSpecial"];Yh.__super__=v;Yh.prototype=k(v.prototype,{start:function(a,b){return v.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=1.25;this._middlePosition.x=
this._endPosition.x;this._middlePosition.y=this._endPosition.y;v.prototype.startSequence.call(this)},startAnticipation:function(){v.prototype.startAnticipation.call(this,"pre")},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._middlePosition.x,this.introTime/2,q.linear),this._position.y.animateTo(this._middlePosition.y,this.introTime/2,q.backOut),x.delayCallTo(m(this,
this.onHalfway),this.introTime/2))},startAnim:function(a){v.prototype.startAnim.call(this,a)},startOutro:function(){v.prototype.startOutro.call(this,"out")},__class__:Yh});var Zh=function(){v.call(this);this.dunkData={direction:1,loopIn:!0,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};g["game.components.specials.FooSpecial"]=Zh;Zh.__name__=["game","components","specials","FooSpecial"];Zh.__super__=v;Zh.prototype=k(v.prototype,{start:function(a,b){return v.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=
this.getDuration("pre");this.animTime=this.getDuration(null);this.outroTime=0.3;v.prototype.startSequence.call(this)},startAnticipation:function(){v.prototype.startAnticipation.call(this,"pre")},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime/2,q.linear),this._position.y.animateTo(this._endPosition.y,this.introTime,q.backOut))},
startAnim:function(a){v.prototype.startAnim.call(this,a)},startOutro:function(){v.prototype.startOutro.call(this,"out")},startFall:function(a){v.prototype.startFall.call(this,a);this._physics.moveBy(50*-this.get_basket().getTransform().direction,-50)},__class__:Zh});var $h=function(){this.superMoveOffset={x:0,y:0};v.call(this);this.dunkData={direction:1,loopIn:!0,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};g["game.components.specials.KorraSpecial"]=$h;$h.__name__=["game","components","specials","KorraSpecial"];
$h.__super__=v;$h.prototype=k(v.prototype,{dispose:function(){null!=this._fxRoot&&this._fxRoot.owner.dispose();this._fxRoot=this._fx=null;v.prototype.dispose.call(this)},start:function(a,b){return v.prototype.start.call(this,a,b)},createFx:function(){this._fxRoot=new D;(new z).add(this._fxRoot);var a=new z;this._fxRoot.owner.addChild(a);a.add(J.createComponent("transform"));this._fx=new gf;var b=this.owner._compMap.Sprite_4;this._fx.flumpAsset=b.flumpAsset;this._fx.animOffset=b.animOffset;this._fx.flumpOffset=
b.flumpOffset;this._fx.pack=b.pack;this._fx.asset=b.asset;this._fx.prefix=b.prefix;this._fx.start="special_fx";this._fx.layer=b.layer;this._fx.overrides=b.overrides;this._fx.labelLayer=b.labelLayer;this._fx.textureReplace=b.textureReplace;this._fx.onInitComplete.connect(m(this,this.onInitFxComplete)).once();a.add(this._fx)},onInitFxComplete:function(){this._disposer.add(this._fx.animation.animComplete.connect(m(this,this.onFxComplete)))},onFxComplete:function(){this.owner.parent.removeChild(this._fxRoot.owner);
v.prototype.releaseBall.call(this);this.resetSuperMove()},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.animTime=this.getDuration(null);this.endDelay=1;this.completeOnLanding=!0;v.prototype.startSequence.call(this)},startAnticipation:function(){v.prototype.startAnticipation.call(this,"pre")},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,
this.introTime/2,q.linear),this._position.y.animateTo(this._endPosition.y,this.introTime,q.backOut))},setEndPosition:function(){var a=this.get_basket().getTransform().position;this._endPosition=new cb(a.x+(this._character.dunkOffset.x+this.superMoveOffset.x)*this.get_basket().getTransform().direction,a.y+this._character.dunkOffset.y+this.superMoveOffset.y)},startAnim:function(a){v.prototype.startAnim.call(this,a)},startOutro:function(){v.prototype.startOutro.call(this,"out")},startFall:function(){this._character.setKinematic(!1);
this._physics.resetVelocity();this.usedDunkFallAnim=!0;this.setAnim("fall")},land:function(){var a=this;null==this._fx&&this.createFx();this.owner.parent.addChild(this._fxRoot.owner);this._fxRoot.setXY(this._endPosition.x-this.superMoveOffset.x*this.get_basket().getTransform().direction,this._endPosition.y-this.superMoveOffset.y);this._fxRoot.setScaleXY(-this.get_basket().getTransform().direction,1);this._fx.set("special_fx");this.setAnim("land",{next:"idle"});x.delayCallTo(function(){a.completeOnLanding&&
a.end()},this.endDelay)},releaseBall:function(){},endAnim:function(){},__class__:$h});var ai=function(){v.call(this);this.dunkData={direction:1,loopIn:!0,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};g["game.components.specials.AsamiSpecial"]=ai;ai.__name__=["game","components","specials","AsamiSpecial"];ai.__super__=v;ai.prototype=k(v.prototype,{start:function(a,b){return v.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.animTime=this.getDuration(null);
this.endDelay=0.3;v.prototype.startSequence.call(this)},startAnticipation:function(){v.prototype.startAnticipation.call(this,"pre")},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime/2,q.linear),this._position.y.animateTo(this._endPosition.y,this.introTime,q.backOut))},startAnim:function(a){v.prototype.startAnim.call(this,a)},startOutro:function(){v.prototype.startOutro.call(this,
"out")},__class__:ai});var bi=function(){v.call(this);this.dunkData={direction:1,loopIn:!0,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};g["game.components.specials.PigSpecial"]=bi;bi.__name__=["game","components","specials","PigSpecial"];bi.__super__=v;bi.prototype=k(v.prototype,{start:function(a,b){return v.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=1;this.animTime=this.getDuration(null);this.outroTime=0.3;v.prototype.startSequence.call(this)},
startAnticipation:function(){v.prototype.startAnticipation.call(this,"pre")},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime,q.backIn),this._position.y.animateTo(this._endPosition.y,this.introTime,q.backIn))},startAnim:function(){v.prototype.startAnim.call(this)},startOutro:function(){v.prototype.startOutro.call(this)},__class__:bi});
var ci=function(){v.call(this);this.dunkData={direction:1,loopIn:!1,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};g["game.components.specials.GoatSpecial"]=ci;ci.__name__=["game","components","specials","GoatSpecial"];ci.__super__=v;ci.prototype=k(v.prototype,{start:function(a,b){return v.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=0.75;this.animTime=this.getDuration(null);this.outroTime=0.3;v.prototype.startSequence.call(this)},
startAnticipation:function(){v.prototype.startAnticipation.call(this,"pre")},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x-100,this.introTime,q.quadOut),this._position.y.animateTo(this._endPosition.y,this.introTime,q.quadOut))},startAnim:function(){v.prototype.startAnim.call(this,null);null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,
this.introTime,q.quadOut),this._position.y.animateTo(this._endPosition.y,this.introTime,q.quadOut))},startOutro:function(){v.prototype.startOutro.call(this,"out")},__class__:ci});var di=function(){v.call(this);this.dunkData={direction:1,loopIn:!1,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};g["game.components.specials.LincolnSpecial"]=di;di.__name__=["game","components","specials","LincolnSpecial"];di.__super__=v;di.prototype=k(v.prototype,{start:function(a,b){return v.prototype.start.call(this,a,
b)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=0.75;this.animTime=this.getDuration(null);this.outroTime=1;this.completeOnLanding=!0;v.prototype.startSequence.call(this)},startAnticipation:function(){v.prototype.startAnticipation.call(this,"pre")},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime,
q.quadOut),this._position.y.animateTo(this._endPosition.y,this.introTime,q.quadOut))},startAnim:function(){this.isAnimStarted=!0;this.setAnim(null,{loop:this.dunkData.loop?!0:!1,onComplete:m(this,this.onAnimComplete)},0.7);this.success&&(!this.completeOnLanding&&this.showBasket&&this._camera.showBasket(this.get_basket()),this.isSuperDunk&&this.startCameraZoom());null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime,q.quadOut),this._position.y.animateTo(this._endPosition.y,
this.introTime,q.quadOut))},startOutro:function(){v.prototype.startOutro.call(this,"out");this._character.setKinematic(!1);this._physics.resetVelocity()},startFall:function(){this.usedDunkFallAnim=!0},land:function(){var a=this;this.setAnim("land");x.delayCallTo(function(){a.completeOnLanding&&a.end()},0.5)},__class__:di});var ei=function(){v.call(this);this.dunkData={direction:1,loopIn:!1,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};g["game.components.specials.LynnSpecial"]=ei;ei.__name__=["game",
"components","specials","LynnSpecial"];ei.__super__=v;ei.prototype=k(v.prototype,{start:function(a,b){return v.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=0.75;this.animTime=this.getDuration(null);this.outroTime=this.getDuration("out");this.endDelay=0;v.prototype.startSequence.call(this)},startAnticipation:function(){v.prototype.startAnticipation.call(this,"pre")},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?
!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime,q.quadOut),this._position.y.animateTo(this._endPosition.y-60,this.introTime,q.quadOut))},startAnim:function(){v.prototype.startAnim.call(this,null);null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime,q.quadOut),this._position.y.animateTo(this._endPosition.y,this.introTime,q.quadOut))},startOutro:function(){v.prototype.startOutro.call(this,
"out")},startFall:function(){this.setAnim("fall");this._character.setKinematic(!1);this._physics.resetVelocity()},land:function(){this.completeOnLanding&&this.end()},__class__:ei});var yc=function(){this._currentTickDt=0;this.variables=new K;this.behaviorTickRate=0.5;this.playerId=yc.PlayerID;j.call(this)};g["stolo.ensys.components.ai.BaseAI"]=yc;yc.__name__=["stolo","ensys","components","ai","BaseAI"];yc.__super__=j;yc.prototype=k(j.prototype,{get_name:function(){return"BaseAI_57"},onStart:function(){j.prototype.onStart.call(this);
this._actors=this.owner._internal_getFromParents("ActorSystem_3");this._physic=this.owner._compMap.PhysicsComponent_12;this._transform=this.owner._compMap.TransformComponent_26;this._disposer=this.owner._compMap.Disposer_28;V.getSystemEntity(this.owner);this._disposer.add(V.getSystemEntity(this.owner).getComponent("PhysicSystem_22").onPhysicUpdate.connect(m(this,this.onFixedUpdate)));this.createBehavior(this.behaviorData)},onStop:function(){j.prototype.onStop.call(this);this.variables=this._transform=
this._physic=this._actors=this._disposer=null;this.disposeBehavior()},onFixedUpdate:function(a){if(null!=this._behavior&&this.enabled)for(this._currentTickDt+=a;this._currentTickDt>=this.behaviorTickRate;)this.updateBehavior(),this._currentTickDt-=this.behaviorTickRate},updateBehavior:function(){this._behavior.tick(this)},createBehavior:function(a,b){null==b&&(b=!0);null==a&&null!=this.behaviorFile&&(a=Ba.getBehaviorData(this.behaviorFile,this.behaviorPack));if(null!=a)this._behavior=Ba.fromData(a);
else if(b)throw"No data to create behavior!";},disposeBehavior:function(){null!=this._behavior&&(this._behavior.abort(),this._behavior.dispose(),this.behaviorFile=this.behaviorData=this._behavior=null)},setParam:function(a,b){null!=a&&Object.prototype.hasOwnProperty.call(a,"variable")&&(this.variables.set(a.variable,b),b)},getParam:function(a,b){return null==a?b:Object.prototype.hasOwnProperty.call(a,"variable")&&"string"==typeof a.variable?this.variables.get(a.variable):a},getTarget:function(a){return null==
a||null==a.target?this.variables.get("target"):this.getParam(a.target)},HasComponent:function(a){var b=this.getParam(a.entity);if(null!=b){a=this.getParam(a.type);a=ra.resolveClass(a);for(b=b.firstComponent;null!=b;){if(pa.__instanceof(b,a))return E.Success;b=b.next}}return E.Failure},IsNull:function(a){return this.variables.exists(a.variable)&&null!=this.variables.get(a.variable)?E.Failure:E.Success},SetVariable:function(a){var b=a.value;this.variables.set(a.variable,b);b;return E.Success},RemoveVariable:function(a){this.variables.remove(a.variable);
return E.Success},CopyVariable:function(a){var b=a.destination,a=this.variables.get(a.origin);this.variables.set(b,a);a;return E.Success},DetectHole:function(a){return null==this._physic.raycast(null!=a?this.getParam(a.distance,this.detectionDistance):this.detectionDistance,0,1,50*this._transform.direction)?E.Success:E.Failure},DetectObject:function(a){var b=this._physic.raycast(null!=a?this.getParam(a.distance,this.playerDistance):this.playerDistance,this._transform.direction,0,this._transform.direction*
(this._physic.shape.width-1)/2,0);this.setParam(a.out,b);return null!=b?E.Success:E.Failure},DistanceDifference:function(a){var b=this.getParam(a.target);if(null==b)return E.Failure;b=b._compMap.TransformComponent_26;if(null!=a.x&&this.getParam(a.x)>Math.abs(this._transform.position.x-b.position.x)||null!=a.y&&(a=this.getParam(a.y),0<a&&a>b.position.y-this._transform.position.y||0>a&&a<b.position.y-this._transform.position.y))return E.Failure;return E.Success},ChangeDirection:function(a){if(null==
this._transform)return E.Failure;var b=null;null!=a&&(b=this.getParam(a.lookAt));this._transform.direction=null!=b?Qf.getDirection(this.owner,b):-1*this._transform.direction;return E.Success},GetPlayer:function(a){var b=this._actors.getActorById(this.playerId);null!=a&&this.setParam(a.out,b);return null!=b?E.Success:E.Failure},IsPlayer:function(a){a=this.getParam(a.entity);return null!=a&&(a=a._compMap.TemplateComponent_2,null!=a&&a.uuid==this.playerId)?E.Success:E.Failure},DetectPlayer:function(a){var b=
this._physic.raycast(null!=a?this.getParam(a.distance,this.playerDistance):this.playerDistance,this._transform.direction,0,this._transform.direction*(this._physic.shape.width-1)/2,0);this.setParam(a.out,b);return null!=b&&(a=b._compMap.TemplateComponent_2,null!=a&&a.uuid==this.playerId)?E.Success:E.Failure},__class__:yc});var $f=function(){this._movingForward=!1;yc.call(this)};g["game.components.mobs.BasketAI"]=$f;$f.__name__=["game","components","mobs","BasketAI"];$f.__super__=yc;$f.prototype=k(yc.prototype,
{get_name:function(){return"BasketAI_58"},onStart:function(){yc.prototype.onStart.call(this);this._actor=this.owner._compMap.Character_52},onStop:function(){yc.prototype.onStop.call(this);this._actor=null},onFixedUpdate:function(a){this.enabled&&this._actor.isEnabled&&!this._actor.isStun()&&(yc.prototype.onFixedUpdate.call(this,a),this._movingForward&&(this._actor.runDirection=this._transform.direction))},updateBehavior:function(){this._movingForward=!1;yc.prototype.updateBehavior.call(this)},inAttackDistance:function(a){return Qf.getDistanceX(this.owner,
a)<=this.attackDistance},Jump:function(){return this._actor.jump()?E.Success:E.Failure},MoveForward:function(){this._movingForward=!0;return E.Success},JumpForward:function(){return this._actor.jump()?(this._movingForward=!0,E.Success):E.Failure},JumpTowards:function(a){a=this.getTarget(a);if(null==a)return E.Failure;return this._actor.jumpTowards(a)?(this._movingForward=!0,E.Success):E.Failure},HasBall:function(a){var b=this._actor;null!=a&&(a=this.getParam(a.entity),null!=a&&null!=a._compMap.Character_52&&
(b=a._compMap.Character_52));return b.hasBall()?E.Success:E.Failure},IsTeammate:function(a){return null!=a&&null!=this._actor.getTeammate()&&(a=this.getParam(a.entity),null!=a&&a==this._actor.getTeammate().owner)?E.Success:E.Failure},GetPlayerWithBall:function(a){for(var b=this._actors.getActorsByComponent(Sc),c=0;c<b.length;){var d=b[c];++c;if(d._compMap.Character_52.hasBall())return this.setParam(a.out,d),E.Success}return E.Failure},GetLooseBall:function(a){var b=this._actors.getActorById("ball");
return null!=b.parent?(this.setParam(a.out,b),E.Success):E.Failure},GetOpponent:function(a){for(var b=this._actors.getActorsByComponent(Sc),c=0;c<b.length;){var d=b[c];++c;if(!d._compMap.PhysicsComponent_12.hasContactType(this._actor.contactType))return this.setParam(a.out,d),E.Success}return E.Failure},GetBasket:function(a){null!=a&&this.setParam(a.out,this._actor.targetBasket);return null!=this._actor.targetBasket?E.Success:E.Failure},Attack:function(a){a=this.getTarget(a);return!this.inAttackDistance(a)?
E.Failure:this._actor.attack(a)?E.Success:E.Failure},Dunk:function(){return this._actor.isDunking()?E.Running:this._actor.special()?E.Running:this._actor.dunk()?E.Running:E.Failure},InAttackDistance:function(a){a=this.getTarget(a);return null!=a&&this.inAttackDistance(a)?E.Success:E.Failure},__class__:$f});var cl=function(){};g["game.components.ComponentList"]=cl;cl.__name__=["game","components","ComponentList"];var ag=function(a){this.percent=new O(1);ia.call(this,a)};g["game.components.SubImageSprite"]=
ag;ag.__name__=["game","components","SubImageSprite"];ag.__super__=ia;ag.prototype=k(ia.prototype,{onUpdate:function(a){ia.prototype.onUpdate.call(this,a);this.percent.update(a)},draw:function(a){null!=this.texture&&0<this.percent._value&&a.drawSubTexture(this.texture,0,0,0,0,Math.min(this.texture.get_width(),Math.max(1,this.texture.get_width()*this.percent._value)),this.texture.get_height())},__class__:ag});var C=function(){};g["game.config.GameConfig"]=C;C.__name__=["game","config","GameConfig"];
C.__properties__={get_pointPerGame:"get_pointPerGame"};C.getModifiedHeight=function(a){null==a&&(a=45);return C.height-(o.iphone?a:0)};C.get_pointPerGame=function(){return la.codeUnlocked("HIGHSCORE")?52:21};var Le=function(a,b,c,d,e){null==e&&(e=0.001);null==d&&(d=1);null==c&&(c=2);null==b&&(b=1);null==a&&(a=0);this.zpp_inner=null;null==sa.zpp_pool?this.zpp_inner=new sa:(this.zpp_inner=sa.zpp_pool,sa.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);null;this.zpp_inner.outer=this;a!=this.zpp_inner.elasticity&&
(this.zpp_inner.elasticity=a/1,this.zpp_inner.invalidate(sa.WAKE|sa.ARBITERS));this.zpp_inner.elasticity;b!=this.zpp_inner.dynamicFriction&&(this.zpp_inner.dynamicFriction=b/1,this.zpp_inner.invalidate(sa.WAKE|sa.ANGDRAG|sa.ARBITERS));this.zpp_inner.dynamicFriction;c!=this.zpp_inner.staticFriction&&(this.zpp_inner.staticFriction=c/1,this.zpp_inner.invalidate(sa.WAKE|sa.ARBITERS));this.zpp_inner.staticFriction;d!=1E3*this.zpp_inner.density&&(this.zpp_inner.density=d/1E3,this.zpp_inner.invalidate(sa.WAKE|
sa.PROPS));1E3*this.zpp_inner.density;e!=this.zpp_inner.rollingFriction&&(this.zpp_inner.rollingFriction=e/1,this.zpp_inner.invalidate(sa.WAKE|sa.ARBITERS));this.zpp_inner.rollingFriction};g["nape.phys.Material"]=Le;Le.__name__=["nape","phys","Material"];Le.prototype={toString:function(){return"{ elasticity: "+this.zpp_inner.elasticity+" dynamicFriction: "+this.zpp_inner.dynamicFriction+" staticFriction: "+this.zpp_inner.staticFriction+" density: "+1E3*this.zpp_inner.density+" rollingFriction: "+
this.zpp_inner.rollingFriction+" }"},__class__:Le};var sa=function(){this.dynamicFriction=this.staticFriction=this.density=this.elasticity=this.rollingFriction=0;this.next=this.outer=this.shapes=null;this.shapes=new Me;this.elasticity=0;this.dynamicFriction=1;this.staticFriction=2;this.density=0.001;this.rollingFriction=0.01};g["zpp_nape.phys.ZPP_Material"]=sa;sa.__name__=["zpp_nape","phys","ZPP_Material"];sa.prototype={wrapper:function(){if(null==this.outer){this.outer=new Le;var a=this.outer.zpp_inner;
a.outer=null;a.next=sa.zpp_pool;sa.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},set:function(a){this.dynamicFriction=a.dynamicFriction;this.staticFriction=a.staticFriction;this.density=a.density;this.elasticity=a.elasticity;this.rollingFriction=a.rollingFriction},invalidate:function(a){for(var b=this.shapes.head;null!=b;)b.elt.invalidate_material(a),b=b.next},__class__:sa};var Me=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Shape"]=
Me;Me.__name__=["zpp_nape","util","ZNPList_ZPP_Shape"];Me.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==hb.zpp_pool?b=new hb:(b=hb.zpp_pool,hb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==hb.zpp_pool?c=new hb:(c=hb.zpp_pool,hb.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,
this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=hb.zpp_pool;hb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},erase:function(a){return this.inlined_erase(a)},
inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=hb.zpp_pool;hb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Me};var Va=function(){};g["game.config.PhysicsConfig"]=Va;Va.__name__=["game","config","PhysicsConfig"];Va.configure=function(a){a.setGravity(0,
Va.gravity);a.setFixedDt(Va.fixedDt);zc.add("ball",Va.BallMaterial);zc.add("slime",Va.SlimeBallMaterial);zc.add("superball",Va.SuperBallMaterial);zc.add("rock",Va.RockMaterial)};var H=function(){};g["game.data.Characters"]=H;H.__name__=["game","data","Characters"];H.getDataByName=function(a){for(var b=0,c=H.list;b<c.length;){var d=c[b];++b;if(d.name==a)return d}return null};var jb=g["game.data.GameType"]={__ename__:["game","data","GameType"],__constructs__:["TWO_VERSUS_TWO","ONE_VERSUS_ONE"]};jb.TWO_VERSUS_TWO=
["TWO_VERSUS_TWO",0];jb.TWO_VERSUS_TWO.toString=r;jb.TWO_VERSUS_TWO.__enum__=jb;jb.ONE_VERSUS_ONE=["ONE_VERSUS_ONE",1];jb.ONE_VERSUS_ONE.toString=r;jb.ONE_VERSUS_ONE.__enum__=jb;var l=function(){};g["game.data.GameData"]=l;l.__name__=["game","data","GameData"];l.init=function(){na.Prefix=C.$name+"_";na.Defaults=l.StorageDefaults;l.game=new kk;l.game.load()};l.userLevel=function(){return Da.list.indexOf(l.currentLevel)+1};l.matchId=function(){return"Round_"+l.round};l.gameMode=function(){return l.inTournament?
"tournament":"random_match"};l.loadConfig=function(a,b,c){null==c&&(c=!0);null==b&&(b="config");null==a&&(a="config.json");l.config=w.getJSON(a,b,c,!1)};l.isNewPosterize=function(){return l.game.isPosterTeamLocked(l.currentCharacter.name,l.currentOpponent.team)};l.getNumPosterize=function(){return l.game.getNumPostersUnlock(l.currentCharacter.name)};l.isCharacterUnlock=function(a){return!a.locked||!l.game.isCharacterLocked(a.name)};l.setRandomOpponent=function(){for(var a=[],b=0,c=H.list;b<c.length;){var d=
c[b];++b;!d.locked&&d.team!=l.currentCharacter.team&&a.push(d)}l.currentOpponent=a[Math.floor(Math.random()*a.length)]};l.getLastLevelUnlock=function(){for(var a=null,b=0,c=Da.list;b<c.length;){var d=c[b];++b;if(l.game.isLevelLocked(d))break;a=d}return a};l.endGame=function(a,b,c){null==c&&(c=-1);var d=l.currentCharacter;l.newCharacterUnlock=!1;l.newPosterUnlock=!1;l.game.addToStat(d.name,Ga.GAMES_PLAYED,1);l.game.addToStat(d.name,Ga.DUNKS,l.dunks);l.game.addToStat(d.name,Ga.MEGA_DUNKS,l.megaDunks);
l.game.addToStat(d.name,Ga.STEALS,l.steals);(l.hasWon=a)?(l.game.addToStat(d.name,Ga.GAMES_WON,1),l.inTournament&&(l.game.unlockLevel(Da.get(l.currentLevel).unlock),0<c&&l.game.setBestTime(l.currentLevel,c)),null!=d.unlocks&&l.game.getStats(d.name,Ga.GAMES_WON)>=H.NUM_WIN_TO_UNLOCK&&(l.newCharacterUnlock=l.game.unlockCharacter(d.unlocks)),b&&(l.newPosterUnlock=l.game.unlockPoster(d.name,l.currentOpponent.team)),M.trackMatchEnd("matchWon")):M.trackMatchEnd("matchLost");++l.round};var bg=function(){};
g["stolo.ensys.data.LevelData"]=bg;bg.__name__=["stolo","ensys","data","LevelData"];bg.prototype={getDefaultLayers:function(){return[{name:"default",parallax:{x:0,y:0},editor:{locked:!0},alpha:1}]},parse:function(a){if(null==a)throw"Level data null";this.data=a;this.name=this.parseName();this.filename=this.parseFilename();this.env=this.parseEnv();this.layers=this.parseLayers();this.actors=this.parseActors()},parseName:function(){return null==this.data.name?"noname":this.data.name},parseFilename:function(){return null==
this.data.filename?"nofilename":this.data.filename},parseEnv:function(){return null==this.data.env?"1":this.data.env},parseActors:function(){return null==this.data.actors?[]:this.data.actors},parseLayers:function(){return null==this.data.layers?this.getDefaultLayers():this.data.layers},__class__:bg};var jf=function(a){null!=a&&this.parse(a)};g["game.data.LevelData"]=jf;jf.__name__=["game","data","LevelData"];jf.__super__=bg;jf.prototype=k(bg.prototype,{parse:function(a){bg.prototype.parse.call(this,
a);null!=a.unlock&&(this.unlock=a.unlock);null!=a.endGame&&(this.endGame=a.endGame)},getDefaultLayers:function(){return jf.DefaultLayers},__class__:jf});var Da=function(){};g["game.data.Levels"]=Da;Da.__name__=["game","data","Levels"];Da.get=function(a){var b;Da._levelCache.exists(a)?b=Da._levelCache.get(a):(b=w.getJSON(a,Da.PackName),b=new jf(b),b.name=a,Da._levelCache.set(a,b),b);return b};Da.getPacks=function(a,b){null==b&&(b=!1);var c=["sprites_env"+Da.get(a).env+(o.slow?X.lowEndPackSuffix:""),
o.mobile?"htp_mobile":"htp",l.currentCharacter.asset,l.currentOpponent.asset];b&&(c.push("sprites_env1"),c.push("sprites_env2"),c.push("sprites_env3"),c.push("team_tmnt_1"),c.push("team_tmnt_2"),c.push("team_hb"),c.push("team_sb"),c.push("team_sc"),c.push("team_korra"));o.slow||(c.push("crowd"),c.push("crowd_bg"));return c};var Ga=g["game.data.GameStats"]={__ename__:["game","data","GameStats"],__constructs__:["GAMES_WON","GAMES_PLAYED","DUNKS","MEGA_DUNKS","STEALS"]};Ga.GAMES_WON=["GAMES_WON",0];
Ga.GAMES_WON.toString=r;Ga.GAMES_WON.__enum__=Ga;Ga.GAMES_PLAYED=["GAMES_PLAYED",1];Ga.GAMES_PLAYED.toString=r;Ga.GAMES_PLAYED.__enum__=Ga;Ga.DUNKS=["DUNKS",2];Ga.DUNKS.toString=r;Ga.DUNKS.__enum__=Ga;Ga.MEGA_DUNKS=["MEGA_DUNKS",3];Ga.MEGA_DUNKS.toString=r;Ga.MEGA_DUNKS.__enum__=Ga;Ga.STEALS=["STEALS",4];Ga.STEALS.toString=r;Ga.STEALS.__enum__=Ga;var kk=function(){this.clear()};g["game.data.SaveGame"]=kk;kk.__name__=["game","data","SaveGame"];kk.prototype={clear:function(){this.firstGame=!0;this.secondGame=
!1;this.stats=new K;this.highscores=new K;this.unlockedLevels=new K;this.levelBestTime=new K;this.unlockedCharacters=new K;this.unlockedPosters=new K;this.newPosters=new K;this.newLevels=new K;this.newCharacters=new K},load:function(){this.firstGame=na.get("firstGame",!0);this.secondGame=na.get("secondGame",!1);this.unlockedCharacters=na.get("characters",new K);this.unlockedLevels=na.get("levels",new K);this.levelBestTime=na.get("levelBestTime",new K);this.stats=na.get("stats",new K);this.highscores=
na.get("highscores",new K);this.unlockedPosters=na.get("posters",new K);this.newPosters=na.get("newPosters",new K);this.newLevels=na.get("newLevels",new K);this.newCharacters=na.get("newCharacters",new K);this.unlockLevel("level1");H.LOCK_KORRA&&(this.unlockPoster("leo","team_korra"),this.unlockPoster("raph","team_korra"),this.unlockPoster("mike","team_korra"),this.unlockPoster("donnie","team_korra"),this.unlockPoster("fee","team_korra"),this.unlockPoster("foo","team_korra"),this.unlockPoster("spongebob",
"team_korra"),this.unlockPoster("patrick","team_korra"),this.unlockPoster("craig","team_korra"),this.unlockPoster("sanjay","team_korra"))},save:function(){na.set("firstGame",this.firstGame);na.set("secondGame",this.secondGame);na.set("characters",this.unlockedCharacters);na.set("levels",this.unlockedLevels);na.set("levelBestTime",this.levelBestTime);na.set("stats",this.stats);na.set("highscores",this.highscores);na.set("posters",this.unlockedPosters);na.set("newPosters",this.newPosters);na.set("newLevels",
this.newLevels);na.set("newCharacters",this.newCharacters)},isFirstGame:function(){return this.firstGame},isSecondGame:function(){return this.secondGame},setSecondGame:function(){this.firstGame=!1;this.secondGame=!0;this.save()},endHtp:function(){this.secondGame=this.firstGame=!1;this.save()},isLevelLocked:function(a){return!Pa.isUnlocked(a,this.unlockedLevels)},unlockLevel:function(a){Pa.unlock(a,this.unlockedLevels)&&(Pa.unlock(a,this.newLevels),this.levelBestTime.set(a,0),this.save());return!0},
isNewLevel:function(a){return Pa.isUnlocked(a,this.newLevels)},levelNotNew:function(a){this.isNewLevel(a)&&(this.newLevels.set(a,!1),this.save())},getBestTime:function(a){return this.isLevelLocked(a)?0:this.levelBestTime.get(a)},setBestTime:function(a,b){if(this.isLevelLocked(a))return!1;var c=this.getBestTime(a);return 0==c||c>b?(this.levelBestTime.set(a,b),this.save(),!0):!1},isCharacterLocked:function(a){return!Pa.isUnlocked(a,this.unlockedCharacters)},unlockCharacter:function(a){var b=Pa.unlock(a,
this.unlockedCharacters);b&&(Pa.unlock(a,this.newCharacters),this.save());return b},isNewCharacter:function(a){return Pa.isUnlocked(a,this.newCharacters)},characterNotNew:function(a){this.isNewCharacter(a)&&(this.newCharacters.set(a,!1),this.save())},isPostersLocked:function(a){return 4>this.getNumPostersUnlock(a)},getNumPostersUnlock:function(a){if(!this.unlockedPosters.exists(a))return 0;for(var b=0,a=this.unlockedPosters.get(a).iterator();a.hasNext();)a.next()&&++b;return b},isPosterTeamLocked:function(a,
b){if(!this.unlockedPosters.exists(a))return!0;var c=this.unlockedPosters.get(a);return!Pa.isUnlocked(b,c)},unlockPoster:function(a,b){var c=!1;if(!this.unlockedPosters.exists(a)){var d=new K;this.unlockedPosters.set(a,d)}Pa.unlock(b,this.unlockedPosters.get(a))&&(this.isPostersLocked(a)||(this.setNewPoster(a),c=!0),this.save());return c},isAnyNewPoster:function(){for(var a=this.newPosters.iterator();a.hasNext();)if(a.next())return!0;return!1},isNewPoster:function(a){return this.newPosters.get(a)},
clearNewPoster:function(){for(var a=!1,b=this.newPosters.keys();b.hasNext();){var c=b.next();this.newPosters.get(c)&&(this.newPosters.set(c,!1),a=!0)}a&&this.save()},setNewPoster:function(a){this.newPosters.get(a)||this.newPosters.set(a,!0)},getStats:function(a,b){var c;if(!(c=!this.stats.exists(a)))c=!this.stats.get(a).exists(b);return c?0:this.stats.get(a).get(b)},addToStat:function(a,b,c){var d=this.getStats(a,b),e=this.stats.get(a);null==e&&(e=new cg,this.stats.set(a,e));e.set(b,d+c);this.save();
return!0},__class__:kk};var Tb=function(){this._camera=new dg;this._targets=[];this.currentTargetIndex=-1;this.autoSwitch=!1;this.enabled=this.autoCenterZoom=!0;j.call(this)};g["stolo.ensys.system.CameraSystem"]=Tb;Tb.__name__=["stolo","ensys","system","CameraSystem"];Tb.__super__=j;Tb.prototype=k(j.prototype,{get_name:function(){return"CameraSystem_18"},onAdded:function(){this.sharedBase=new z;this.owner.addChild(this.sharedBase)},onStart:function(){this._renderer=this.owner._compMap.RendererSystem_6},
onUpdate:function(a){if(this.enabled){this.autoSwitch&&null==this._camera.target&&this.nextTarget();this._camera.update(a);var b=0,c=0;null!=this.rendererOffset&&(this.rendererOffset.update(a),b+=this.rendererOffset.x._value,c+=this.rendererOffset.y._value);null!=this._camera.zoom&&(this.autoCenterZoom&&(a=this._renderer.dimensions,b+=0.5*(a.width-a.width*this._camera.zoom._value),c+=0.5*(a.height-a.height*this._camera.zoom._value)),this._renderer.setScale(this._camera.zoom._value));this._renderer.move(-this._camera.x+
b,-this._camera.y+c)}},zoomTo:function(a,b,c){null==b&&(b=0);this._camera.zoomTo(a,b,c)},centerRenderer:function(){null==this._renderer&&(this._renderer=this.owner._compMap.RendererSystem_6);null==this.rendererOffset&&(this.rendererOffset=new Jd);this.rendererOffset.x.set__(Math.round(this._renderer.dimensions.width/2));this.rendererOffset.y.set__(Math.round(this._renderer.dimensions.height/2))},configure:function(a){if(null!=a)for(var b=0,c=B.fields(a);b<c.length;){var d=c[b];++b;B.setProperty(this._camera,
d,B.field(a,d))}},addTarget:function(a){this._targets.push(a);null==this._target&&this.autoSwitch&&this.nextTarget()},removeTarget:function(a){S.remove(this._targets,a)&&this._target==a&&this.previousTarget()},setTarget:function(a,b){null==b&&(b={time:0});if(null==a){if(0==this._targets.length)return this._target=null;a=this._targets[0]}this._target=a;if(null==this._target||null==this._target.owner)return null;if(0<b.time){var c=this._target.owner._compMap.Sprite_4;null!=c&&(this._wasSpringX=this.get_camera().springX,
this._wasSpringY=this.get_camera().springY,this.get_camera().springX=this.get_camera().springY=!1,this.get_camera().animateTo(c.x._value+a.offsetX,c.y._value+a.offsetY,b.time,b.ease));x.delayCallTo(m(this,this.onCameraAnimationComplete),b.time,this.owner)}else this.syncTarget(!1);this.offsetTarget(a,a.offsetX,a.offsetY,b.offsetTime,b.offsetEase,b.offsetTimeY,b.offsetEaseY);return a},onCameraAnimationComplete:function(){this.syncTarget(!0);this.get_camera().springX=this._wasSpringX;this.get_camera().springY=
this._wasSpringY},syncTarget:function(){if(!(null==this._target||null==this._target.owner)){var a=this._target.owner._compMap.Sprite_4;null!=a&&this._camera.followSprite(a)}},offsetTarget:function(a,b,c,d,e,h,n){null==h&&(h=-1);null==d&&(d=-1);a.offsetX=b;a.offsetY=c;0>d&&(d=Tb.DEFAULT_OFFET_TIME);null==e&&(e=Tb.DEFAULT_OFFET_EASING);this._camera.setOffset(b*a.offsetDirectionX,c*a.offsetDirectionY,d,e,h,n)},get_camera:function(){return this._camera},nextTarget:function(){this.currentTargetIndex++;
this.currentTargetIndex>this._targets.length-1&&(this.currentTargetIndex=0);return this.setTarget(this._targets[this.currentTargetIndex])},previousTarget:function(){this.currentTargetIndex--;0>this.currentTargetIndex&&(this.currentTargetIndex=this._targets.length-1);return this.setTarget(this._targets[this.currentTargetIndex])},__class__:Tb,__properties__:k(j.prototype.__properties__,{get_camera:"get_camera"})});var Rf=function(){Tb.call(this)};g["game.system.GameCamera"]=Rf;Rf.__name__=["game","system",
"GameCamera"];Rf.__super__=Tb;Rf.prototype=k(Tb.prototype,{onStart:function(){Tb.prototype.onStart.call(this);this._logic=this.owner._compMap.GameLogic_54},onStop:function(){Tb.prototype.onStop.call(this);this._logic=this._levelTarget=null},onUpdate:function(a){if(this._logic.isStarted&&null!=this._levelTarget){if(this.followBall&&null!=this._logic.player&&null!=this._logic.player.owner&&null!=this._logic.ball){var b=this._logic.ball.owner._compMap.TransformComponent_26,c=this._logic.playerTransform;
null!=this._logic.ball.get_carrier()&&(this._logic.ball.get_carrier(),b=this._logic.ball.get_carrier().getComponent("TransformComponent_26"),this._logic.ball.get_carrier(),this._logic.ball.get_carrier().getComponent("Character_52").isSuperDunking()&&(c=b));this._cameraTarget.setXY(0.5*(b.position.x+c.position.x),0.5*(b.position.y+c.position.y));this._levelTargetTranform.setXY(this._cameraTarget.x._value,this._cameraTarget.y._value)}this._camera.update(a);c=b=0;null!=this.rendererOffset&&(this.rendererOffset.update(a),
b+=this.rendererOffset.x._value,c+=this.rendererOffset.y._value);null!=this._camera.zoom&&(this.autoCenterZoom&&(a=this._renderer.dimensions,b+=0.5*(a.width-a.width*this._camera.zoom._value),c+=0.5*(a.height-a.height*this._camera.zoom._value)),this._renderer.setScale(this._camera.zoom._value));this._renderer.move(-this._camera.x+b,-this._camera.y+c)}},configure:function(){Tb.prototype.configure.call(this,{linearDampingX:0.2,linearDampingY:0.2,springX:!0,stiffnessX:0.7,massX:40,dampingX:20,springY:!0,
stiffnessY:0.7,massY:40,dampingY:20});this.centerRenderer()},setLevelTarget:function(a){this._levelTarget=a;this._levelTargetTranform=a.owner._compMap.TransformComponent_26;this.get_camera().setLimits(a.cameraLimit.minX,a.cameraLimit.maxX,a.cameraLimit.minY,a.cameraLimit.maxY);this._cameraTarget=this.get_camera().setTarget(0,0,!0)},centerForFaceoff:function(a,b,c){null==a&&(a=0);null==b&&(b=q.backInOut);null==c&&(c=q.quintInOut);this.animateTo(0,0,a,b,c)},showBasket:function(a,b,c,d){null==b&&(b=
1);var e=a.owner._compMap.TransformComponent_26.position;this.animateTo(e.x+(a.isHome?50:-50),e.y+-100,b,c,d)},animateTo:function(a,b,c,d,e){null==c&&(c=1);null==d&&(d=q.quintInOut);null==e&&(e=q.quadInOut);this.followBall=!1;this.get_camera().springX=this.get_camera().springY=!1;this.get_camera().linearDampingX=this.get_camera().linearDampingY=1;0<c?(this._cameraTarget.x.animateTo(a,c,d),this._cameraTarget.y.animateTo(b,c,e)):(this._cameraTarget.setXY(a,b),this.get_camera().moveToTarget())},startFollow:function(){this.followBall=
!0;this.get_camera().springX=this.get_camera().springY=!0},dunkShake:function(a){switch(a){case 0:break;case 2:this.get_camera().shake(4.5,50);break;default:this.get_camera().shake(0.5,30)}},__class__:Rf});var fi=function(a){this._numToLoad=4;this._previousTime=0;this._gameStarted=this._infiniTime=!1;this.GAME_TIME=480;j.call(this);this._infiniTime=la.codeUnlocked("INFINITE");this._timer=this.GAME_TIME;this._system=a};g["game.system.GameLogic"]=fi;fi.__name__=["game","system","GameLogic"];fi.__super__=
j;fi.prototype=k(j.prototype,{get_name:function(){return"GameLogic_54"},onAdded:function(){this._disposer=this.owner._compMap.Disposer_28;j.prototype.onAdded.call(this)},onStop:function(){j.prototype.onStop.call(this);this.playerTransform=this.player=this._system=this._disposer=null;null==this.ball.owner.parent&&this.ball.owner.dispose();this._characters=this._crowds=this.opponent2=this.opponent1=this.teammate=this.ball=null},onUpdate:function(a){this.isStarted&&(j.prototype.onUpdate.call(this,a),
!this._infiniTime&&this._gameStarted&&(null==this._htpBoard&&(this._timer-=a),a=Math.ceil(this._timer),a!=this._previousTime&&(this._system.hud.setTime(a),this._previousTime=a,0==a&&this.end(l.homeScore>=l.awayScore,!1))))},start:function(){if(!this.isStarted){this.isStarted=!0;this._camera=this._system.camera;if(l.inTournament)this._levelModifier=H.levelModifiers.get(l.currentLevel);else{var a=l.getLastLevelUnlock();this._levelModifier=H.levelModifiers.get(a)}la.codeUnlocked("HARD_MODE")&&(this._levelModifier=
H.levelModifiers.get("level7"));l.homeScore=0;l.awayScore=0;l.dunks=0;l.megaDunks=0;l.blocks=0;l.steals=0;l.superAbility=0;this.createFieldLogo(l.currentCharacter.asset);a="ball";l.slimeBall?a="slime_ball":null!=l.gameBall&&(a=l.gameBall);this.createBall(a)}},onBallLoaded:function(){this._crowds=[];var a=this._system.actors.getActorsByComponent(Zf);if(null!=a)for(var b=0;b<a.length;){var c=a[b];++b;this._crowds.push(c._compMap.Crowd_55)}a=this._system.actors.getActorsByComponent(hf);null!=a&&0<a.length&&
(this._flash=G.instance(a[0]._compMap.Sprite_4,hf));this._numToLoad=2;this._characters=[];a=!0;if(!o.mobile&&(la.codeUnlocked("TWOKEYBOARDS")||la.codeUnlocked("FOURHANDS")))a=!1;this.player=this.createCharacter(l.currentCharacter.template,"HOME_TEAM");this.opponent1=this.createCharacter(l.currentOpponent.name,"AWAY_TEAM",a);this._system.hud.setTeams(l.currentCharacter.team,l.currentOpponent.team);l.gameType==jb.TWO_VERSUS_TWO&&(this._numToLoad=4,this.teammate=this.createCharacter(l.currentCharacter.partner,
"HOME_TEAM"),this.opponent2=this.createCharacter(l.currentOpponent.partner,"AWAY_TEAM",a))},onLoaded:function(){--this._numToLoad;if(0>=this._numToLoad){this.createPlayer();o.mobile||(la.codeUnlocked("TWOKEYBOARDS")?(this.extraController(this.opponent1,3),l.gameType==jb.TWO_VERSUS_TWO&&(this.extraController(this.teammate,2),this.extraController(this.opponent2,4))):la.codeUnlocked("FOURHANDS")&&this.extraController(this.opponent1,2));this.player.setPlayers(this.teammate,this.opponent1,this.opponent2);
this.opponent1.setPlayers(this.opponent2,this.player,this.teammate);l.gameType==jb.TWO_VERSUS_TWO&&(this.teammate.setPlayers(this.player,this.opponent1,this.opponent2),this.opponent2.setPlayers(this.opponent1,this.player,this.teammate));this._camera.setLevelTarget(G.instance(this._system.actors.getActorsByComponent(xd)[0].getComponent("CameraTargetComponent_19"),xd));this.connectBasket();if(l.game.isFirstGame()||l.game.isSecondGame())w.loadPack("ui_htp",m(this,this.onHtpLoaded)),this._system.hud.hideScoreboard();
this.faceoffSetup(!0,!0)}},onHtpLoaded:function(){this._htpBoard=this._system.actors.spawn({template:{key:"htp_panel"}});this._htpBoard._compMap.Htpboard_56.onHtpDone.connect(m(this,this.onHtpDone));this.player.targetBasket._compMap.Basket_67.showZone()},onHtpDone:function(){this._system.hud.showScoreboard();this._system.actors.removeActor(this._htpBoard);this._htpBoard=null;this.player.targetBasket._compMap.Basket_67.hideZone()},faceoffSetup:function(a,b){var c=this,d=this.getSpawnPointPosition("HOME_SPAWN_1");
this.player.respawn(d,1);var e=this.getSpawnPointPosition("AWAY_SPAWN_1");this.opponent1.respawn(e,-1);a?this.ball.reset(0,0):b?this.ball.reset(d.x,0):this.ball.reset(e.x,0);this.ball.setKinetic();this.player.isEnabled=!1;this.opponent1.isEnabled=!1;this.player.owner.parent.addChild(this.player.owner);l.gameType==jb.TWO_VERSUS_TWO&&(this.teammate.respawn(this.getSpawnPointPosition("HOME_SPAWN_2"),1),this.teammate.isEnabled=!1,this.opponent2.respawn(this.getSpawnPointPosition("AWAY_SPAWN_2"),-1),this.opponent2.isEnabled=
!1);a?(d=this._system.hud.callout("faceoff"),this._camera.centerForFaceoff(),this.ball.owner._compMap.Sprite_4.alpha.set__(0),d.onBallThrown.connect(m(this,this.onBallThrown)).once(),x.delayCallTo(function(){c._system.hud.fadeToGame(0.5)},0.2)):this.faceoffStart()},onBallThrown:function(){this.ball.owner._compMap.Sprite_4.alpha.set__(1);this.faceoffStart(600)},faceoffStart:function(a){null==a&&(a=-800);this._camera.zoomTo(1);this._gameStarted=!0;this.ball.setDynamic();this.ball.applyForce(0,a);this.ball.set_intangible(!1);
for(var a=0,b=this._characters;a<b.length;){var c=b[a];++a;c.enable()}this._camera.startFollow()},getSpawnPointPosition:function(a){var b=this._system.actors.getActorsByTags(a);if(null==b||1>b.length)throw"No spawn point '"+a+"' found!";return b[0]._compMap.TransformComponent_26.position},end:function(a,b){this.isStarted&&(this.isStarted=!1,this.player.isEnabled=!1,this.opponent1.isEnabled=!1,l.gameType==jb.TWO_VERSUS_TWO&&(this.teammate.isEnabled=!1,this.opponent2.isEnabled=!1),this._system.setSpeed(0,
0.5),l.endGame(a,b,this._infiniTime?-1:Math.ceil(this.GAME_TIME-this._timer)),x.delayCallTo(m(this,this.onEndComplete),1.25))},onEndComplete:function(){l.inTournament&&this.homeWins()&&Da.get(l.currentLevel).endGame?I.change("End"):I.change("Win")},createPlayer:function(){var a=this.player.owner;this.player.set_isPlayer(!0);this.player.superMoveFactor=this._levelModifier.playerSuperMoveFactor;null!=a._compMap.BasketAI_58&&(a._compMap.BasketAI_58.enabled=!1);this.playerTransform=a._compMap.TransformComponent_26;
null!=this._system.webControls&&this._system.webControls.set_player(this.player);null!=this._system.touchControls&&this._system.touchControls.set_player(this.player);a._compMap.TemplateComponent_2.uuid="player";this._system.actors.updateRegisteredActor(a);this._disposer.add(this.player.get_superDunk().onChange.connect(m(this,this.onSuperDunkChange)))},createCharacter:function(a,b,c){null==c&&(c=!1);var d=ba.clone(J.getTemplate("defaultCharacter"));l.slimeBall?d.mixed_anim.textureReplace.push({layer:"Ball-flump",
sprite:"sprites_pack",asset:"slime_ball"}):null!=l.gameBall&&d.mixed_anim.textureReplace.push({layer:"Ball-flump",sprite:"sprites_pack",asset:l.gameBall});var e=J.getTemplate(a);G.instance(this._system.actors.getActorsByComponent(xd)[0].getComponent("CameraTargetComponent_19"),xd);d=ba.merge(d,e,!0);d=ba.merge(d,{character:{contactType:b,character:a}},!0);c&&(d=ba.merge(d,{character:{weapon:this._levelModifier.aiWeapon},basket_ai:{behaviorTickRate:this._levelModifier.behaviorTickRate}},!0));a=this._system.actors.spawn(d)._compMap.Character_52;
a.onFirstUpdate.connect(m(this,this.onLoaded)).once();this._disposer.add(a.onDunkStart.connect(m(this,this.onDunkStart)));this._disposer.add(a.onDunkContact.connect(m(this,this.onDunkContact)));this._disposer.add(a.onDunkCancelled.connect(m(this,this.onDunkCancelled)));this._disposer.add(a.onScore.connect(m(this,this.onScore)));c&&(a.aiSpeedFactor=this._levelModifier.aiSpeedFactor);a.superMoveFactor=this._levelModifier.aiSuperMoveFactor;la.codeUnlocked("SPEEDY")&&(a.speedFactor=H.speedyFactor);la.codeUnlocked("POISON")&&
(a.floatyFactor=H.poisonFactor);la.codeUnlocked("FLOATY")&&(a.floatyFactor=H.floatyFactor);this._characters.push(a);return a},onSuperDunkChange:function(a){this._system.hud.setSuperMove(a)},onDunkStart:function(a){a.success&&a.fromPlayer&&null!=this._flash&&this._flash.trigger(a.isSuperDunk)},onDunkCancelled:function(a){a.isAnimStarted&&this._system.hud.callout("dunkbreaker",{delay:0})},onDunkContact:function(a){var b=!1,c;c=a.isSuperDunk?C.pointPerMegaDunk:C.pointPerDunk;if(null==this._htpBoard&&
a.success&&(a.get_basket().isHome&&l.homeScore+c>=C.get_pointPerGame()||!a.get_basket().isHome&&l.awayScore+c>=C.get_pointPerGame()))b=!0;c=b;a.get_basket().handleDunkContact(a,c);c&&a.startCameraZoom();if(a.success){a.isSuperDunk?u.play("mega_dunk","DUNK"):l.slimeBall?u.play("dunk_slime","DUNK"):u.play("dunk","DUNK");c=0;for(var d=this._crowds;c<d.length;){var e=d[c];++c;e.cheer(3)}a.isSuperDunk?(this._camera.dunkShake(2),b&&a.fromPlayer?l.isNewPosterize()?this._system.hud.callout("posterized",{delay:0.3,
numPost:l.getNumPosterize()+1}):this._system.hud.callout("dunkality",{delay:0.3}):this._system.hud.callout("superdunk",{delay:0.3})):(this._camera.dunkShake(1),this._system.hud.callout("score",{delay:0.5}),u.play("dunk{random("+a.charData.numDunkAudio+")}_"+a.charData.name,"char"))}else a.cancelled||(u.play("dunk_miss","DUNK"),u.play("miss_"+a.charData.name,"char"),a.fromPlayer&&this._system.hud.callout("missed",{delay:0.2}))},onScore:function(a){var b=this,c=a.dunk.isSuperDunk;a.basket.score(a.dunk);
for(var d=0,e=this._characters;d<e.length;){var h=e[d];++d;h.disable();a.dunk.isSuperDunk&&a.character.owner._compMap.BasketAI_58.enabled&&h.owner._compMap.BasketAI_58.enabled&&h.resetSuperMove()}a.fromPlayer&&(c?l.megaDunks+=1:l.dunks+=1);null==this._htpBoard&&(a.isHome?(l.homeScore=a.dunk.isSuperDunk?l.homeScore+C.pointPerMegaDunk:l.homeScore+C.pointPerDunk,this._system.hud.setHomeScore(l.homeScore)):(l.awayScore=a.dunk.isSuperDunk?l.awayScore+C.pointPerMegaDunk:l.awayScore+C.pointPerDunk,this._system.hud.setAwayScore(l.awayScore)));
l.homeScore>=C.get_pointPerGame()||l.awayScore>=C.get_pointPerGame()?(this._system.setSpeed(0,1),this._system.parallelScript.run(new fb([new Z(1.2),new ga(function(){b.end(b.homeWins(),c&&a.fromPlayer)})]))):(this._system.setSpeed(0,1,q.quintInOut),this._system.parallelScript.run(new fb([new Z(c?1.2:0.4),new ga(function(){b._system.hud.fadeToBlack(0.4)}),new Z(0.4),new ga(function(){b._system.setSpeed(0.7,0);b._system.setSpeed(1,0.7)}),new Z(0.1),new ga(function(){b._camera.centerForFaceoff();b.faceoffSetup(!1,
!a.isHome);b._system.hud.fadeToGame()})])))},homeWins:function(){return l.homeScore>=l.awayScore},createFieldLogo:function(a){this._system.actors.spawn(J.getTemplate("field_logo_"+a))},createBall:function(a){var b=J.getTemplate("ball"),c="ball";l.slimeBall?c="slime":la.codeUnlocked("SUPERBALL")?c="superball":la.codeUnlocked("THEROCK")&&(c="rock");a=this._system.actors.spawn(ba.merge(b,{image:{asset:a},physics:{shape:{material:c}}},!0));this.ball=a._compMap.Ball_66;this.ball.onFirstUpdate.connect(m(this,
this.onBallLoaded)).once();a._compMap.TemplateComponent_2.uuid="ball";this._system.actors.updateRegisteredActor(a)},connectBasket:function(){for(var a=this._system.actors.getActorsByComponent(Of),b=0;b<a.length;){var c=a[b];++b;"AWAY_TEAM"==c._compMap.PhysicsComponent_12.contacts?(this.opponent1.targetBasket=c,l.gameType==jb.TWO_VERSUS_TWO&&(this.opponent2.targetBasket=c)):"HOME_TEAM"==c._compMap.PhysicsComponent_12.contacts&&(this.player.targetBasket=c,l.gameType==jb.TWO_VERSUS_TWO&&(this.teammate.targetBasket=
c))}},extraController:function(a,b){if(null!=a&&(a.owner._compMap.BasketAI_58.enabled=!1,this._system.actors.updateRegisteredActor(a.owner),a.superMoveFactor=this._levelModifier.playerSuperMoveFactor,null!=this._system.webControls))switch(b){case 2:this._system.webControls.secondPlayer=a;break;case 3:this._system.webControls.thirdPlayer=a;break;case 4:this._system.webControls.fourthPlayer=a}},__class__:fi});var gc=function(a){this._disposer=new uc;this.onInitComplete=new ua;j.call(this);this.dimensions=
a};g["stolo.ensys.system.BaseGameSystem"]=gc;gc.__name__=["stolo","ensys","system","BaseGameSystem"];gc.__super__=j;gc.prototype=k(j.prototype,{get_name:function(){return"BaseGameSystem_7"},onAdded:function(){j.prototype.onAdded.call(this);this.owner.add(this._disposer);this.parallelEntity=new z;this.parallelScript=new Eb;this.parallelEntity.add(this.parallelScript);this._speedAdjuster=new $g;this.owner.add(this._speedAdjuster);this.buildSubSystems();this.init()},onStart:function(){j.prototype.onStart.call(this);
null!=this.owner.parent?this.owner.parent.addChild(this.parallelEntity):p.root.addChild(this.parallelEntity)},onStop:function(){this.level=this.camera=this.culling=this.physics=this.sound=this.actors=this.renderer=null;j.prototype.onStop.call(this)},buildSubSystems:function(){this.buildRenderer();this.buildCamera();this.buildActors();this.buildPhysics();this.buildSound();this.buildLevel()},buildRenderer:function(){this.renderer=new eg(this.dimensions);this.culling=new fg(this.renderer,this.dimensions);
this.owner.add(this.renderer);this.owner.add(this.culling)},buildCamera:function(){this.camera=new Tb;this.owner.add(this.camera)},buildActors:function(){this.actors=new gg;this.owner.add(this.actors)},buildPhysics:function(){this.physics=new yd;this.owner.add(this.physics)},buildSound:function(){this.sound=new hg;this.owner.add(this.sound)},buildLevel:function(){this.level=new Ne;this.owner.add(this.level)},init:function(){this.onInitComplete.emit()},setSpeed:function(a,b,c){null==b&&(b=0.2);0>=
b?(this._speedAdjuster.scale.set__(a),this._speedAdjuster.scale.set_behavior(null)):this._speedAdjuster.scale.animateTo(a,b,c)},__class__:gc});var Nf=function(){this.touchControlsEnabled=p._platform.getTouch().get_supported();gc.call(this,new Nc(0,0,C.width,C.height))};g["game.system.GameSystem"]=Nf;Nf.__name__=["game","system","GameSystem"];Nf.__super__=gc;Nf.prototype=k(gc.prototype,{onAdded:function(){gc.prototype.onAdded.call(this)},onStop:function(){gc.prototype.onStop.call(this);null!=this._dunkscript.owner&&
(this._dunkscript.owner.parent.removeChild(this._dunkscript.owner),this._dunkscript.owner.dispose());this.touchControls=this.webControls=this.logic=this.hud=this._dunkscript=null},buildSubSystems:function(){this.renderer=new eg(this.dimensions);this.actors=new gg;this.sound=new hg;this.physics=new yd;this.level=new Ne;this.culling=new fg(this.renderer,this.dimensions);this.camera=new Rf;this.owner.add(this.renderer);this.owner.add(this.actors);this.owner.add(this.sound);this.owner.add(this.physics);
this.owner.add(this.level);this.owner.add(this.culling);this.owner.add(this.camera);this._dunkscript=new Eb;this.parallelEntity.addChild((new z).add(this._dunkscript));this.hud=new gi;this.parallelEntity.add(this.hud);this.touchControlsEnabled?(this.touchControls=new hi(this.hud),this.owner.add(this.touchControls)):(this.webControls=new ii,this.owner.add(this.webControls));this.logic=new fi(this);this.owner.add(this.logic)},init:function(){gc.prototype.init.call(this);Va.configure(this.physics);this.camera.configure();
var a=Da.get(l.currentLevel);this.level.build(a.layers,a.actors);this.onLevelLoaded()},onLevelLoaded:function(){var a;this.actors.getActorsByTags("scoreboard");a=this.actors.getActorsByTags("scoreboard")[0].getComponent("Scoreboard_63");this.hud.setScoreboard(a);a.setTarget(function(a){a.actors.getActorsByComponent(xd);return a.actors.getActorsByComponent(xd)[0].getComponent("TransformComponent_26")}(this));this.logic.start()},runDunkSequence:function(a){a=new fb(a);this._dunkscript.stopAll();this._dunkscript.run(a);
return a},__class__:Nf});var gi=function(){this._itemCount=0;j.call(this)};g["game.system.Hud"]=gi;gi.__name__=["game","system","Hud"];gi.__super__=j;gi.prototype=k(j.prototype,{get_name:function(){return"Hud_62"},onAdded:function(){this.pack=w.getPack("ui_hud");this.gameOverlay=new z;this.owner.addChild(this.gameOverlay);this.container=new z;this.container.add(new D);this.owner.addChild(this.container);this._disposer=new uc;this.owner.addChild((new z).add(this._disposer));this.build();this._blackScreen=
new xb(0,C.width,C.height);this.gameOverlay.add(this._blackScreen);this._blackScreen.alpha.set__(1)},onStop:function(){this._disposer=this._supergauge=this._scoreboard=this._pauseButton=this.container=this.pack=null;null!=this._blackScreen&&this._blackScreen.dispose();this.removeCallout(this._currentCallout);for(var a=this._callouts.iterator();a.hasNext();)a.next().dispose();this._callouts=this._currentCallout=null;j.prototype.onStop.call(this)},build:function(){this._pauseButton=W.createButton(m(this,
this.onPauseClick),"btn_pause");this._pauseButton.setXY(C.width-80,20);this.addSprite(this._pauseButton);this._supergauge=o.touch?new ji(this.pack):new Kd(this.pack);this.addSprite(this._supergauge);this.setSuperMove(0);this.buildCallouts()},setScoreboard:function(a){this._scoreboard=a},setSuperMove:function(a){this._supergauge.set_value(a)},setTeams:function(a,b){this._scoreboard.setTeams(a,b)},setHomeScore:function(a){this._scoreboard.setHomeScore(a)},setAwayScore:function(a){this._scoreboard.setAwayScore(a)},
setTime:function(a){this._scoreboard.setTime(a)},onPauseClick:function(){M.trackUI("PAUSE","Gameplay");I.push("Pause")},addSprite:function(a,b){null==b&&(b=this.container);b.addChild((new z).add(a),!1);var c=a.owner._compMap.Sprite_4;null!=c&&(c.y._value<C.height/2?Math.random():Math.random(),c.y.animateTo(c.y._value,1.5+0.2*this._itemCount,q.elasticOut));this._itemCount++;return a},hitTest:function(a,b,c){return D.hitTest(this.container,b,c)==a?!0:!1},buildCallouts:function(){null==this._callouts&&
(this._callouts=new K,this._callouts.set("faceoff",new ki),this._callouts.set("missed",new li),this._callouts.set("superdunk",new mi),this._callouts.set("score",new ni),this._callouts.set("dunkbreaker",new oi),this._callouts.set("posterized",new pi),this._callouts.set("dunkality",new qi));this._calloutEntity=this.owner},callout:function(a,b){this.removeCallout(this._currentCallout);this._currentCallout=this._callouts.get(a);if(null==this._currentCallout)throw"Callout not found: '"+a+"'";null==this._currentCallout.owner&&
(new z).add(this._currentCallout);this._calloutEntity.addChild(this._currentCallout.owner);this._currentCallout.setXY(0.5*C.width,0.5*C.height);this._currentCallout.complete.connect(m(this,this.onCalloutComplete)).once();this._currentCallout.start(b);return this._currentCallout},onCalloutComplete:function(){this.removeCallout(this._currentCallout);this._currentCallout=null},removeCallout:function(a){null!=a&&null!=a.owner&&null!=a.owner.parent&&a.owner.parent.removeChild(a.owner)},fadeToBlack:function(a){null==
a&&(a=0.5);this.gameOverlay.add(this._blackScreen);this._blackScreen.setAlpha(0);this._blackScreen.alpha.animateTo(1,a,q.quintInOut);return this._blackScreen},fadeToGame:function(a){null==a&&(a=0.5);var b=this;this._blackScreen.alpha.animateTo(0,a,q.quintInOut);x.delayCallTo(function(){b.gameOverlay.remove(b._blackScreen)},a,this.gameOverlay);return this._blackScreen},hideScoreboard:function(){this._scoreboard.owner._compMap.Sprite_4.setAlpha(0)},showScoreboard:function(){this._scoreboard.owner._compMap.Sprite_4.alpha.animateTo(1,
0.5)},__class__:gi});var hi=function(a){this._jumpDown=!1;this._jumpTouch=null;this._actionDown=!1;this._actionTouch=null;this._disposer=new uc;j.call(this);this._hud=a};g["game.system.TouchControls"]=hi;hi.__name__=["game","system","TouchControls"];hi.__super__=j;hi.prototype=k(j.prototype,{get_name:function(){return"TouchControls_59"},onStart:function(){this.owner.addChild((new z).add(this._disposer));this.buildTouchControls()},onStop:function(){this._megaPressedButton=this._megaButton=this._attackButton=
this._jumpButton=this._normalButton=this._jumpTouch=this._actionTouch=this.actionButton=this.slider=this._player=this._hud=null},onUpdate:function(){if(null!=this._player)if(null!=this.slider&&this.slider.isActive&&0!=this.slider.value&&(this._player.runDirection=0<this.slider.value?1:-1),this._actionDown&&(this._player.shouldAttack=this._actionDown),this._jumpDown&&(this._player.shouldJump=this._jumpDown),this._jumpDown=this._actionDown=!1,this._player.canSuperMove()&&this._player.hasBall()&&(this.actionButton.texture!=
this._megaButton||this.actionButton.texture!=this._megaPressedButton))this.actionButton.texture=this._megaButton;else if(this.actionButton.texture==this._megaButton||this.actionButton.texture==this._megaPressedButton)this.actionButton.texture=this._normalButton},buildTouchControls:function(){null==this.slider&&(this.slider=new ri(this._hud.pack),this.slider.deadZone=0,this.slider.showWhenInactive(0,C.getModifiedHeight()),this._hud.addSprite(this.slider),this._normalButton=this._hud.pack.getTexture("corner_button"),
this._jumpButton=this._hud.pack.getTexture("corner_button_jump"),this._attackButton=this._hud.pack.getTexture("corner_button_attack"),this._megaButton=this._hud.pack.getTexture("corner_button_megadunk"),this._megaPressedButton=this._hud.pack.getTexture("corner_button_megadunk_pressed"),this.actionButton=new ia(this._normalButton),this.actionButton.setXY(C.width-this.actionButton.getNaturalWidth(),C.getModifiedHeight()-this.actionButton.getNaturalHeight()),this._hud.container.addChild((new z).add(this.actionButton),
!1),this._disposer.add(p._platform.getTouch().down.connect(m(this,this.onTouchDown))),this._disposer.add(p._platform.getTouch().up.connect(m(this,this.onTouchUp))))},onTouchUp:function(a){null!=this._actionTouch&&this._actionTouch.id==a.id&&(this._actionTouch=null);null!=this._jumpTouch&&this._jumpTouch.id==a.id&&(this._jumpTouch=null);this.actionButton.texture=this._player.canSuperMove()?this._megaButton:this._normalButton},onTouchDown:function(a){var b=a.viewX,c=a.viewY;1!=o.scale&&(b/=o.scale,
c/=o.scale);if(!(b<p._platform.getStage().get_width()/2)&&this._hud.hitTest(this.actionButton,b,c))if(this._player.canSuperMove()&&this._player.hasBall()){if(null==this._actionTouch||this._actionTouch.id!=a.id)this._actionTouch=a,this._actionDown=!0,this.actionButton.texture=this._megaPressedButton}else if(C.width-b>C.height-c){if(null==this._actionTouch||this._actionTouch.id!=a.id)this._actionTouch=a,this._actionDown=!0,this.actionButton.texture=this._attackButton}else if(null==this._jumpTouch||
this._jumpTouch.id!=a.id)this._jumpTouch=a,this._jumpDown=!0,this.actionButton.texture=this._jumpButton},set_player:function(a){return this._player=a},__class__:hi,__properties__:k(j.prototype.__properties__,{set_player:"set_player"})});var ii=function(){this._actionDown=this._jumpDown=!1;this._disposer=new uc;this.isEnabled=this._actionDown2=this._jumpDown2=this._actionDown3=this._jumpDown3=this._actionDown4=this._jumpDown4=!1;j.call(this)};g["game.system.WebControls"]=ii;ii.__name__=["game","system",
"WebControls"];ii.__super__=j;ii.prototype=k(j.prototype,{get_name:function(){return"WebControls_61"},onStart:function(){this.owner.addChild((new z).add(this._disposer));this.enable(!0)},onRemoved:function(){this.enable(!1)},dispose:function(){this.enable(!1);j.prototype.dispose.call(this)},enable:function(a){a&&!this.isEnabled?(this.isEnabled=!0,this._disposer.add(p._platform.getKeyboard().down.connect(m(this,this.onKeyDown)))):!a&&this.isEnabled&&(this.isEnabled=!1,this._disposer.dispose())},onKeyDown:function(a){null!=
this._player&&(a.key==i.Up?this._jumpDown=!0:a.key==i.Space&&(this._actionDown=!0),null!=this.secondPlayer&&(a.key==i.W?this._jumpDown2=!0:a.key==i.Number1&&(this._actionDown2=!0)),null!=this.thirdPlayer&&(a.key==i.Numpad8?this._jumpDown3=!0:a.key==i.Enter&&(this._actionDown3=!0)),null!=this.fourthPlayer&&(a.key==i.I?this._jumpDown4=!0:a.key==i.Number6&&(this._actionDown4=!0)))},onUpdate:function(){null!=this._player&&this.isEnabled&&(p._platform.getKeyboard().isDown(i.Left)&&(this._player.runDirection=
-1),p._platform.getKeyboard().isDown(i.Right)&&(this._player.runDirection=1),this._jumpDown&&(this._player.shouldJump=this._jumpDown),this._actionDown&&(this._player.shouldAttack=this._actionDown),this._actionDown=this._jumpDown=!1,null!=this.secondPlayer&&(p._platform.getKeyboard().isDown(i.A)&&(this.secondPlayer.runDirection=-1),p._platform.getKeyboard().isDown(i.D)&&(this.secondPlayer.runDirection=1),this._jumpDown2&&(this.secondPlayer.shouldJump=this._jumpDown2),this._actionDown2&&(this.secondPlayer.shouldAttack=
this._actionDown2),this._actionDown2=this._jumpDown2=!1),null!=this.thirdPlayer&&(p._platform.getKeyboard().isDown(i.Numpad4)&&(this.thirdPlayer.runDirection=-1),p._platform.getKeyboard().isDown(i.Numpad6)&&(this.thirdPlayer.runDirection=1),this._jumpDown3&&(this.thirdPlayer.shouldJump=this._jumpDown3),this._actionDown3&&(this.thirdPlayer.shouldAttack=this._actionDown3),this._actionDown3=this._jumpDown3=!1),null!=this.fourthPlayer&&(p._platform.getKeyboard().isDown(i.J)&&(this.fourthPlayer.runDirection=
-1),p._platform.getKeyboard().isDown(i.L)&&(this.fourthPlayer.runDirection=1),this._jumpDown4&&(this.fourthPlayer.shouldJump=this._jumpDown4),this._actionDown4&&(this.fourthPlayer.shouldAttack=this._actionDown4),this._actionDown4=this._jumpDown4=!1))},set_player:function(a){return this._player=a},__class__:ii,__properties__:k(j.prototype.__properties__,{set_player:"set_player"})});var ea=function(){this.complete=new ua;this.started=new ua;D.call(this);this.set_pointerEnabled(!1)};g["game.ui.callouts.BaseCallout"]=
ea;ea.__name__=["game","ui","callouts","BaseCallout"];ea.__super__=D;ea.prototype=k(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);this._pack=w.getPack("ui_hud");null==this._script?this.build():(this._script.dispose(),this._script=new Eb,this.owner.add(this._script),x.kill(this),x.kill(this._txt1),x.kill(this._txt2),x.kill(this._txt3),x.kill(this._bg1),x.kill(this._bg2))},dispose:function(){D.prototype.dispose.call(this);this._bg2=this._bg1=this._txt3=this._txt2=this._txt1=this._script=
null},start:function(){throw"override";},build:function(){this._script=new Eb;this.owner.add(this._script)},runSequence:function(a,b){if(null!=b){if(null!=b.onStart)this.started.connect(b.onStart).once();if(null!=b.onComplete)this.complete.connect(b.onComplete).once();0<b.delay&&a.unshift(new Z(b.delay))}a.unshift(new ga((hc=this.started,m(hc,hc.emit))));a.push(new ga((hc=this.complete,m(hc,hc.emit))));this._script.run(new fb(a))},createText:function(a,b,c){a=U.getLocalizedTextSprite(a,b,null,null,
c);a.centerAnchor();a.disablePointer();this.addSprite(a);return a},createImage:function(a){a=W.createImage(a,this._pack);a.centerAnchor();a.disablePointer();this.addSprite(a);return a},addSprite:function(a){null==a.owner&&(new z).add(a);this.owner.addChild(a.owner);return a},scaleIn:function(a,b){if(null==a)throw"Target cannot be null";null==b&&(b={});0<b.time||(b.time=0.5);null==b.ease&&(b.ease=q.quintOut);a.setAlpha(0);a.setScale(0);return x.to(a,{scaleX:1,scaleY:1,alpha:1},b)},scaleOut:function(a,
b){if(null==a)throw"Target cannot be null";null==b&&(b={});0<b.time||(b.time=0.3);null==b.ease&&(b.ease=q.quintIn);return x.to(a,{scaleX:0,scaleY:0,alpha:0},b)},itemScaleIn:function(a,b){var c=0.4,d=0.3,e=0.01,h=1;null!=b&&(0<b.time&&(c=b.time),0<b.inDelay&&(d=b.inDelay),0<b.outDelay&&(e=b.outDelay),0<b.scale&&(h=b.scale));a.centerAnchor();a.setScale(0);a.alpha.set_behavior(null);a.alpha.set__(1);return new fb([new Z(d),new ga(function(){if(null!=b&&null!=b.onStart)b.onStart()}),new gd([new fd(a.scaleX,
h,c,q.backOut),new fd(a.scaleY,h,c,q.backOut)]),new ga(function(){if(null!=b&&null!=b.onComplete)b.onComplete()}),new Z(e),new gd([new fd(a.scaleX,1.5,0.5*c,q.quintOut),new fd(a.scaleY,1.5,0.5*c,q.quintOut),new fd(a.alpha,0,0.5*c,q.quintOut)])])},shake:function(a,b,c,d,e){null==d&&(d=2);null==c&&(c=2);null==b&&(b=2);var h=a.owner._compMap.Script_24;null==h&&(h=new Eb);a.owner.add(h);a=new fb([new wh(c,d,b),new Z(b)]);null!=e&&a.add(new ga(e));h.run(a)},__class__:ea});var oi=function(){ea.call(this)};
g["game.ui.callouts.DunkBreakerCallout"]=oi;oi.__name__=["game","ui","callouts","DunkBreakerCallout"];oi.__super__=ea;oi.prototype=k(ea.prototype,{build:function(){ea.prototype.build.call(this);this._txt1=this.createText("CALLOUT_BREAKER_1_1","hud_callout");this._txt1.setXY(50,-50);this._txt2=this.createText("CALLOUT_BREAKER_2","hud_callout");this._txt2.setAlpha(0);this._txt2.setXY(0,50);this._ballL=W.createImage("ball_left",this._pack);this._ballL.setXY(0,60);this._ballL.centerAnchor();this._ballL.disablePointer();
this.owner.addChild((new z).add(this._ballL));this._ballR=W.createImage("ball_right",this._pack);this._ballR.setXY(0,60);this._ballR.centerAnchor();this._ballR.disablePointer();this.owner.addChild((new z).add(this._ballR))},start:function(a){var b=this;u.play("dunk_breaker","CALLOUT");this._ballL.setXY(0,60);this._ballL.setRotation(0);this._ballR.setXY(0,60);this._ballR.setRotation(0);this.scaleIn(this._txt1);this.scaleIn(this._ballL);this.scaleIn(this._ballR);this.runSequence([new Z(0.1),new ga(function(){b._txt1.setText("CALLOUT_BREAKER_1_2");
b._txt1.setAlign(Ta.Center)}),new Z(0.1),new ga(function(){b._txt1.setText("CALLOUT_BREAKER_1_3");b._txt1.setAlign(Ta.Center)}),new Z(0.1),new ga(function(){b._txt1.setText("CALLOUT_BREAKER_1_4");b._txt1.setAlign(Ta.Center)}),new Z(0.1),new ga(function(){b._txt1.setText("CALLOUT_BREAKER_1_5");b._txt1.setAlign(Ta.Center)}),new Z(0.1),new ga(function(){b._txt1.setText("CALLOUT_BREAKER_1_6");b._txt1.setAlign(Ta.Center)}),new Z(0.3),new ga(function(){x.to(b._ballL,{x:"-=280",rotation:"-=40"},{time:1,
delay:0},q.quintOut);x.to(b._ballR,{x:"+=280",rotation:"+=40"},{time:1,delay:0},q.quintOut);b.scaleIn(b._txt2)}),new Z(1),new ga(function(){b.scaleOut(b._txt1);b.scaleOut(b._txt2);b.scaleOut(b._ballL);b.scaleOut(b._ballR)}),new Z(1)],a)},dispose:function(){ea.prototype.dispose.call(this);this._ballR=this._ballL=null},__class__:oi});var qi=function(){ea.call(this)};g["game.ui.callouts.DunkalityCallout"]=qi;qi.__name__=["game","ui","callouts","DunkalityCallout"];qi.__super__=ea;qi.prototype=k(ea.prototype,
{build:function(){ea.prototype.build.call(this);this._emitter=new Za("particle","ui_hud");this._emitter.setXY(0,0);this._emitter.textures=[this._pack.getTexture("star_white"),this._pack.getTexture("star_black")];this.addSprite(this._emitter);this._txt1=this.createText("CALLOUT_DUNKALITY","hud_callout")},start:function(a){var b=this;this.scaleIn(this._txt1);u.play("dunkality","CALLOUT");this.runSequence([new Z(0.5),new ga(function(){b.shake(b._txt1,2,3,3)}),new Z(2),new ga(function(){b.scaleOut(b._txt1);
b.scaleOut(b._emitter)}),new Z(0.7)],a)},dispose:function(){ea.prototype.dispose.call(this);this._emitter=null},__class__:qi});var ki=function(){this.onBallThrown=new ua;ea.call(this)};g["game.ui.callouts.FaceoffCallout"]=ki;ki.__name__=["game","ui","callouts","FaceoffCallout"];ki.__super__=ea;ki.prototype=k(ea.prototype,{build:function(){ea.prototype.build.call(this);this._bg2=this.createImage("bg2");this._bg2.setXY(0,10);this._bg1=this.createImage("bg1");this._bg1.setXY(0,20);this._txt1=this.createText("CALLOUT_1",
"hud_callout");this._txt2=this.createText("CALLOUT_2","hud_callout");this._txt3=this.createText("CALLOUT_3"+(l.slimeBall?"_SLIME":""),"hud_callout");this._ball=this.createImage("ball")},start:function(a){var b=this;this._bg1.setAlpha(0);this._bg2.setAlpha(0);this._ball.setScale(3);this._ball.setXY(0,700);this._ball.set_visible(!0);this.runSequence([new gd([this.itemScaleIn(this._txt1,{time:0.4,inDelay:0.3,onStart:function(){},onComplete:function(){b._bg1.alpha.animateTo(0,1,q.quintInOut)}}),this.itemScaleIn(this._bg1,
{time:0.4,inDelay:0.3})]),new gd([this.itemScaleIn(this._txt2,{time:0.4,inDelay:0.3,onStart:function(){},onComplete:function(){b._bg1.alpha.animateTo(0,1,q.quintInOut);b.throwBall()}}),this.itemScaleIn(this._bg2,{time:0.4,inDelay:0.3})]),new gd([this.itemScaleIn(this._txt3,{time:0.4,inDelay:0.3,onStart:function(){b._bg2.setScale(0);b._bg2.alpha.set_behavior(null);b._bg2.alpha.set__(1)},onComplete:function(){}}),this.itemScaleIn(this._bg2,{time:0.4,inDelay:0.3})]),new ga(function(){u.play("ref_whistle_1",
"CALLOUT")}),new Z(2)],a)},throwBall:function(){var a=this;l.slimeBall?x.delayCallTo(function(){a.onBallThrown.emit()},1):(this._ball.rotation.animateTo(360,5,q.quintOut),x.to(this._ball,{y:-200,scaleX:1,scaleY:1},{delay:0.1,time:0.4,ease:q.sineOut,onComplete:function(){a.owner.addChild(a._txt3.owner);x.to(a._ball,{y:40,scaleX:0.2,scaleY:0.2},{time:0.4,ease:q.sineIn,onComplete:function(){a._ball.set_visible(!1);a.onBallThrown.emit()}})}}))},__class__:ki});var li=function(){ea.call(this)};g["game.ui.callouts.MissedCallout"]=
li;li.__name__=["game","ui","callouts","MissedCallout"];li.__super__=ea;li.prototype=k(ea.prototype,{build:function(){ea.prototype.build.call(this);this._txt1=this.createText("CALLOUT_MISSED_1","hud_callout");this._txt1.anchorX.set__(0)},start:function(a){var b=this;this._txt1.setXY(0.5*-this._txt1.getNaturalWidth()+20,-20);this._txt1.setRotation(90);this._txt1.rotation.animateTo(0,0.6,q.quintOut);this.scaleIn(this._txt1);this.runSequence([new Z(0.8),new ga(function(){x.to(b._txt1,{rotation:90},{time:1.2,
ease:q.backInOut,delay:0.08})}),new Z(1),new ga(function(){b._txt1.y.animateTo(700,0.6,q.quadIn);b._txt1.alpha.animateTo(0,0.6,q.quadIn)}),new Z(1)],a)},__class__:li});var pi=function(){ea.call(this)};g["game.ui.callouts.PosterizedCallout"]=pi;pi.__name__=["game","ui","callouts","PosterizedCallout"];pi.__super__=ea;pi.prototype=k(ea.prototype,{build:function(){ea.prototype.build.call(this);this._camera=W.createImage("camera",this._pack);this._camera.setXY(-200,0);this._camera.centerAnchor();this._camera.disablePointer();
this.owner.addChild((new z).add(this._camera));this._flash=new xb(16777215,C.width,C.height);this._flash.setXY(0.5*-C.width,0.5*-C.height);this._flash.disablePointer();this._flash.setAlpha(0);this.owner.addChild((new z).add(this._flash));this._txt1=this.createText("CALLOUT_POSTERIZED","hud_callout");this._txt1.setAlpha(0);this._txt1.setXY(0,-50);this._txt2=this.createText("CALLOUT_POSTERIZED_NUM","hud_callout");this._txt2.setAlpha(0);this._txt2.setXY(0,50)},start:function(a){var b=this,c=1;null!=
a&&null!=a.numPost&&(c=a.numPost);this._txt2.setText("CALLOUT_POSTERIZED_NUM",{n:c});this.scaleIn(this._camera);this.runSequence([new Z(0.5),new ga(function(){b._flash.setAlpha(1);u.play("posterized","CALLOUT")}),new Z(0.2),new ga(function(){x.to(b._flash,{alpha:0},{time:0.5});b._txt1.setAlpha(1);b._txt2.setAlpha(1)}),new Z(1),new ga(function(){b.scaleOut(b._txt1);b.scaleOut(b._txt2);b.scaleOut(b._camera)}),new Z(1)],a)},dispose:function(){ea.prototype.dispose.call(this);this._flash=this._camera=
null},__class__:pi});var ni=function(){ea.call(this)};g["game.ui.callouts.ScoreCallout"]=ni;ni.__name__=["game","ui","callouts","ScoreCallout"];ni.__super__=ea;ni.prototype=k(ea.prototype,{build:function(){ea.prototype.build.call(this);this._txt1=this.createText("CALLOUT_SCORE","hud_callout");var a=new z;this.owner.addChild(a);this._basketball=new D;a.add(this._basketball);var b=W.createImage("ball_lines_back",this._pack);b.setXY(0,0);b.centerAnchor();b.disablePointer();a.addChild((new z).add(b));
b=W.createImage("ball",this._pack);b.setXY(25,50);b.centerAnchor();b.disablePointer();a.addChild((new z).add(b));b=W.createImage("ball_lines",this._pack);b.setXY(20,15);b.centerAnchor();b.disablePointer();a.addChild((new z).add(b))},start:function(a){var b=this;this._basketball.setXY(-40,-30);this._basketball.setScale(1);this._basketball.setAlpha(1);this.scaleIn(this._txt1);x.from(this._basketball,{x:-80,y:-150,alpha:0},{time:0.5},q.quintOut);u.play("cheer_1","SCORE");this.runSequence([new Z(0.5),
new ga(function(){b.shake(b._txt1);b.shake(b._basketball)}),new Z(1),new ga(function(){b.scaleOut(b._txt1);b.scaleOut(b._basketball)}),new Z(0.7)],a)},dispose:function(){ea.prototype.dispose.call(this);this._basketball=null},__class__:ni});var mi=function(){ea.call(this)};g["game.ui.callouts.SuperDunkCallout"]=mi;mi.__name__=["game","ui","callouts","SuperDunkCallout"];mi.__super__=ea;mi.prototype=k(ea.prototype,{build:function(){ea.prototype.build.call(this);this._bg2=this.createImage("bg2");this._bg1=
this.createImage("bg1");this._mega=this.createImage("mega");this._txt1=this.createText("CALLOUT_MEGA_1","hud_callout");this._txt1.x.set__(-40);this._txt2=this.createText("CALLOUT_MEGA_2","hud_callout");this._txt2.x.set__(this._txt1.x._value);this._mega.setXY(this._txt1.x._value+0.5*this._txt1.getNaturalWidth()+100,20)},start:function(a){var b=this;this._txt1.setXY(0,-150);this._txt2.setXY(0,150);this.scaleIn(this._bg1,{time:0.6,ease:q.quintOut,delay:0.3});this.scaleIn(this._bg2,{time:0.6,ease:q.quintOut,
delay:0.5});this.scaleIn(this._txt1,{time:0.6,ease:q.quintOut});this.scaleIn(this._txt2,{time:0.6,ease:q.quintOut,delay:0.3,onStart:function(){b._txt1.y.animateTo(-40,0.9,q.bounceOut);b._txt2.y.animateTo(40,0.9,q.bounceOut)}});this.scaleIn(this._mega,{time:1.5,ease:q.elasticOut,delay:0.4});this.runSequence([new Z(1.3),new ga(function(){b.scaleOut(b._bg1);b.scaleOut(b._bg2);b.scaleOut(b._txt1,{delay:0.3});b.scaleOut(b._txt2,{delay:0.3});b.scaleOut(b._mega,{delay:0.2})}),new Z(1)],a)},__class__:mi});
var jk=function(){};g["game.ui.htp.TutorialPages"]=jk;jk.__name__=["game","ui","htp","TutorialPages"];var Gb=function(){this._isDirty=!1;this._children=[];D.call(this)};g["stolo.display.Container"]=Gb;Gb.__name__=["stolo","display","Container"];Gb.__super__=D;Gb.prototype=k(D.prototype,{onStop:function(){D.prototype.onStop.call(this);this._children=null},onUpdate:function(){this._isDirty&&this.sortDepth()},addChild:function(a){this._children.push(a);this.owner.addChild(a);return a},removeChild:function(a){S.remove(this._children,
a);this.owner.removeChild(a);return a},addSprite:function(a){null==a.owner&&(new z).add(a);this.addChild(a.owner);return a},sortDepth:function(){for(var a=0,b=this._children;a<b.length;){var c=b[a];++a;this.owner.addChild(c)}this._isDirty=!1},__class__:Gb});var Kd=function(a){this._value=-1;Gb.call(this);this.pack=a};g["game.ui.hud.SuperGauge"]=Kd;Kd.__name__=["game","ui","hud","SuperGauge"];Kd.__super__=Gb;Kd.prototype=k(Gb.prototype,{onAdded:function(){Gb.prototype.onAdded.call(this);this._gauge=
W.createImage("gauge",this.pack);this._gauge.setXY(9,6);this._gauge.disablePointer();this.addSprite(this._gauge);this._gaugeBall=W.createImage("gauge_ball",this.pack);this._gaugeBall.setXY(32,28);this._gaugeBall.disablePointer();this.addSprite(this._gaugeBall);this._mask=new si(this._gaugeBall);this.set_value(0)},onUpdate:function(a){Gb.prototype.onUpdate.call(this,a);this._mask.update(a)},set_value:function(a){if(a==this._value)return this._value;var b=Math.abs(this._value-a);this._mask.y.animateTo(this._gaugeBall.getNaturalHeight()*
(1-a),0.5,q.quintOut);this._mask.height.animateTo(this._gaugeBall.getNaturalHeight()*a,0.5,q.quintOut);1<=a?(u.play("super_ready","HUD"),this._gauge.alpha.set_behavior(new Ob(0.4,0.9,0.4)),this._gaugeBall.alpha.set_behavior(new Ob(0.4,0.9,0.4))):0.1<=b&&(this._gauge.alpha.set_behavior(new Ob(1,0.4,0.1,3)),this._gaugeBall.alpha.set_behavior(new Ob(1,0.4,0.1,3)));return this._value=a},__class__:Kd,__properties__:k(Gb.prototype.__properties__,{set_value:"set_value"})});var ji=function(a){Kd.call(this,
a)};g["game.ui.hud.MobileSuperGauge"]=ji;ji.__name__=["game","ui","hud","MobileSuperGauge"];ji.__super__=Kd;ji.prototype=k(Kd.prototype,{onAdded:function(){this._barBg=new ia(this.pack.getTexture("gauge_bar"));this._barBg.disablePointer();this._barBg.setXY(C.width-this._barBg.getNaturalWidth(),C.getModifiedHeight()-this._barBg.getNaturalHeight());this.addSprite(this._barBg);this._barGray=new ag(this.pack.getTexture("bar_gray"));this._barGray.centerAnchor().rotation.set__(316);this._barGray.setXY(850,
C.getModifiedHeight()-106);this._barGray.disablePointer();this.addSprite(this._barGray);this._bar=new ag(this.pack.getTexture("bar"));this._bar.centerAnchor().rotation.set__(316);this._bar.setXY(850,C.getModifiedHeight()-106);this._bar.disablePointer();this.addSprite(this._bar);this._barFx=new ya("hud_fx","ui_hud");this._barFx.disablePointer();this._barFx.setXY(863,C.getModifiedHeight()-103);this._barFx.set_visible(!1);this._barFx.disablePointer();this.addSprite(this._barFx)},onUpdate:function(){},
onStop:function(){Kd.prototype.onStop.call(this);this._barBg=this._barFx=this._barGray=this._bar=null},set_value:function(a){if(a==this._value)return this._value;this._barGray.percent.set__(a);this._bar.percent.animateTo(a,0.3,q.quadIn);1<=a?(u.play("super_ready","HUD"),0==(this._barFx._flags&2)&&(this._barFx.set_visible(!0),this._barFx.gotoAndPlay(["in","idle"]))):0!=(this._barFx._flags&2)&&this._barFx.set_visible(!1);return this._value=a},__class__:ji});var ig=function(a){this.url=a;this.headers=
new me;this.params=new me;this.async=!0};g["haxe.Http"]=ig;ig.__name__=["haxe","Http"];ig.prototype={addHeader:function(a,b){this.headers.push({header:a,value:b});return this},setPostData:function(a){this.postData=a;return this},request:function(a){var b=this;b.responseData=null;var c=this.req=Ug.createXMLHttpRequest(),d=function(){if(4==c.readyState){var a;try{a=c.status}catch(d){a=null}void 0==a&&(a=null);if(null!=a)b.onStatus(a);if(null!=a&&200<=a&&400>a)b.req=null,b.onData(b.responseData=c.responseText);
else if(null==a)b.req=null,b.onError("Failed to connect or resolve host");else switch(a){case 12029:b.req=null;b.onError("Failed to connect to host");break;case 12007:b.req=null;b.onError("Unknown host");break;default:b.req=null,b.responseData=c.responseText,b.onError("Http Error #"+c.status)}}};this.async&&(c.onreadystatechange=d);var e=this.postData;if(null!=e)a=!0;else for(var h=this.params.iterator();h.hasNext();)var n=h.next(),e=null==e?"":e+"&",e=e+(encodeURIComponent(n.param)+"="+encodeURIComponent(n.value));
try{if(a)c.open("POST",this.url,this.async);else if(null!=e){var f=1>=this.url.split("?").length;c.open("GET",this.url+(f?"?":"&")+e,this.async);e=null}else c.open("GET",this.url,this.async)}catch(g){b.req=null;this.onError(g.toString());return}!Ce.exists(this.headers,function(a){return"Content-Type"==a.header})&&a&&null==this.postData&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(a=this.headers.iterator();a.hasNext();)h=a.next(),c.setRequestHeader(h.header,h.value);
c.send(e);this.async||d(null)},onData:function(){},onError:function(){},onStatus:function(){},__class__:ig};var rd=function(){this.buf=new De;this.cache=[];this.useCache=rd.USE_CACHE;this.useEnumIndex=rd.USE_ENUM_INDEX;this.shash=new K;this.scount=0};g["haxe.Serializer"]=rd;rd.__name__=["haxe","Serializer"];rd.prototype={toString:function(){return this.buf.b},serializeString:function(a){var b=this.shash.get(a);null!=b?(this.buf.b+="R",this.buf.b=null==b?this.buf.b+"null":this.buf.b+(""+b)):(this.shash.set(a,
this.scount++),this.buf.b+="y",a=encodeURIComponent(a),this.buf.b=null==a.length?this.buf.b+"null":this.buf.b+(""+a.length),this.buf.b+=":",this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a))},serializeRef:function(a){for(var b=typeof a,c=0,d=this.cache.length;c<d;){var e=c++,h=this.cache[e];if(typeof h==b&&h==a)return this.buf.b+="r",this.buf.b=null==e?this.buf.b+"null":this.buf.b+(""+e),!0}this.cache.push(a);return!1},serializeFields:function(a){for(var b=0,c=B.fields(a);b<c.length;){var d=
c[b];++b;this.serializeString(d);this.serialize(B.field(a,d))}this.buf.b+="g"},serialize:function(a){var b=ra["typeof"](a);switch(b[1]){case 0:this.buf.b+="n";break;case 1:if(0==a){this.buf.b+="z";break}this.buf.b+="i";this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a);break;case 2:Math.isNaN(a)?this.buf.b+="k":Math.isFinite(a)?(this.buf.b+="d",this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a)):this.buf.b=0>a?this.buf.b+"m":this.buf.b+"p";break;case 3:this.buf.b=a?this.buf.b+"t":this.buf.b+
"f";break;case 6:b=b[2];if(b==String){this.serializeString(a);break}if(this.useCache&&this.serializeRef(a))break;switch(b){case Array:b=0;this.buf.b+="a";for(var c=a.length,d=0;d<c;){var e=d++;null==a[e]?b++:(0<b&&(1==b?this.buf.b+="n":(this.buf.b+="u",this.buf.b=null==b?this.buf.b+"null":this.buf.b+(""+b)),b=0),this.serialize(a[e]))}0<b&&(1==b?this.buf.b+="n":(this.buf.b+="u",this.buf.b=null==b?this.buf.b+"null":this.buf.b+(""+b)));this.buf.b+="h";break;case me:this.buf.b+="l";for(a=a.iterator();a.hasNext();)this.serialize(a.next());
this.buf.b+="h";break;case Date:this.buf.b+="v";this.buf.add(S.dateStr(a));break;case K:this.buf.b+="b";for(b=a.keys();b.hasNext();)c=b.next(),this.serializeString(c),this.serialize(a.get(c));this.buf.b+="h";break;case Ya:this.buf.b+="q";for(b=a.keys();b.hasNext();)c=b.next(),this.buf.b+=":",this.buf.b=null==c?this.buf.b+"null":this.buf.b+(""+c),this.serialize(a.get(c));this.buf.b+="h";break;case Sb:this.buf.b+="M";for(b=a.keys();b.hasNext();)c=b.next(),d=B.field(c,"__id__"),B.deleteField(c,"__id__"),
this.serialize(c),c.__id__=d,this.serialize(a.h[c.__id__]);this.buf.b+="h";break;case kf:d=0;e=a.length-2;b=new De;for(c=rd.BASE64;d<e;){var h=a.get(d++),n=a.get(d++),f=a.get(d++);b.add(c.charAt(h>>2));b.add(c.charAt((h<<4|n>>4)&63));b.add(c.charAt((n<<2|f>>6)&63));b.add(c.charAt(f&63))}d==e?(e=a.get(d++),a=a.get(d++),b.add(c.charAt(e>>2)),b.add(c.charAt((e<<4|a>>4)&63)),b.add(c.charAt(a<<2&63))):d==e+1&&(a=a.get(d++),b.add(c.charAt(a>>2)),b.add(c.charAt(a<<4&63)));a=b.b;this.buf.b+="s";this.buf.b=
null==a.length?this.buf.b+"null":this.buf.b+(""+a.length);this.buf.b+=":";this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a);break;default:this.useCache&&this.cache.pop(),null!=a.hxSerialize?(this.buf.b+="C",this.serializeString(ra.getClassName(b)),this.useCache&&this.cache.push(a),a.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(ra.getClassName(b)),this.useCache&&this.cache.push(a),this.serializeFields(a))}break;case 4:if(this.useCache&&this.serializeRef(a))break;this.buf.b+=
"o";this.serializeFields(a);break;case 7:b=b[2];if(this.useCache){if(this.serializeRef(a))break;this.cache.pop()}this.buf.b=this.useEnumIndex?this.buf.b+"j":this.buf.b+"w";this.serializeString(ra.getEnumName(b));this.useEnumIndex?(this.buf.b+=":",this.buf.b+=G.string(a[1])):this.serializeString(a[0]);this.buf.b+=":";b=a.length;this.buf.b+=G.string(b-2);for(c=2;c<b;)d=c++,this.serialize(a[d]);this.useCache&&this.cache.push(a);break;case 5:throw"Cannot serialize function";default:throw"Cannot serialize "+
G.string(a);}},__class__:rd};var re=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};g["haxe.Timer"]=re;re.__name__=["haxe","Timer"];re.delay=function(a,b){var c=new re(b);c.run=function(){c.stop();a()};return c};re.stamp=function(){return(new Date).getTime()/1E3};re.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:re};var fc=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=[];this.cache=[];a=fc.DEFAULT_RESOLVER;
null==a&&(a=ra,fc.DEFAULT_RESOLVER=a);this.setResolver(a)};g["haxe.Unserializer"]=fc;fc.__name__=["haxe","Unserializer"];fc.initCodes=function(){for(var a=[],b=0,c=fc.BASE64.length;b<c;){var d=b++;a[fc.BASE64.charCodeAt(d)]=d}return a};fc.run=function(a){return(new fc(a)).unserialize()};fc.prototype={setResolver:function(a){this.resolver=null==a?{resolveClass:function(){return null},resolveEnum:function(){return null}}:a},get:function(a){return this.buf.charCodeAt(a)},readDigits:function(){for(var a=
0,b=!1,c=this.pos;;){var d=this.buf.charCodeAt(this.pos);if(d!=d)break;if(45==d){if(this.pos!=c)break;b=!0}else{if(48>d||57<d)break;a=10*a+(d-48)}this.pos++}b&&(a*=-1);return a},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw"Invalid object";if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if("string"!=typeof b)throw"Invalid object key";var c=this.unserialize();a[b]=c}this.pos++},unserializeEnum:function(a,b){if(58!=this.get(this.pos++))throw"Invalid enum format";
var c=this.readDigits();if(0==c)return ra.createEnum(a,b);for(var d=[];0<c--;)d.push(this.unserialize());return ra.createEnum(a,b,d)},unserialize:function(){switch(this.get(this.pos++)){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;case 105:return this.readDigits();case 100:for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return G.parseFloat(S.substr(this.buf,a,this.pos-a));case 121:a=this.readDigits();if(58!=
this.get(this.pos++)||this.length-this.pos<a)throw"Invalid string length";b=S.substr(this.buf,this.pos,a);this.pos+=a;b=decodeURIComponent(b.split("+").join(" "));this.scache.push(b);return b;case 107:return Math.NaN;case 109:return Math.NEGATIVE_INFINITY;case 112:return Math.POSITIVE_INFINITY;case 97:a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);if(104==b){this.pos++;break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}return a;case 111:return a=
{},this.cache.push(a),this.unserializeObject(a),a;case 114:a=this.readDigits();if(0>a||a>=this.cache.length)throw"Invalid reference";return this.cache[a];case 82:a=this.readDigits();if(0>a||a>=this.scache.length)throw"Invalid string reference";return this.scache[a];case 120:throw this.unserialize();case 99:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw"Class not found "+a;a=ra.createEmptyInstance(b);this.cache.push(a);this.unserializeObject(a);return a;case 119:a=this.unserialize();
b=this.resolver.resolveEnum(a);if(null==b)throw"Enum not found "+a;a=this.unserializeEnum(b,this.unserialize());this.cache.push(a);return a;case 106:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw"Enum not found "+a;this.pos++;var c=this.readDigits(),d=ra.getEnumConstructs(b)[c];if(null==d)throw"Unknown enum index "+a+"@"+c;a=this.unserializeEnum(b,d);this.cache.push(a);return a;case 108:a=new me;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)a.add(this.unserialize());
this.pos++;return a;case 98:a=new K;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 113:a=new Ya;this.cache.push(a);for(b=this.get(this.pos++);58==b;)b=this.readDigits(),a.set(b,this.unserialize()),b=this.get(this.pos++);if(104!=b)throw"Invalid IntMap format";return a;case 77:a=new Sb;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 118:return a=
S.substr(this.buf,this.pos,19),a=S.strDate(a),this.cache.push(a),this.pos+=19,a;case 115:a=this.readDigits();d=this.buf;if(58!=this.get(this.pos++)||this.length-this.pos<a)throw"Invalid bytes length";var e=fc.CODES;null==e&&(e=fc.initCodes(),fc.CODES=e);for(var h=this.pos,n=a&3,f=h+(a-n),b=kf.alloc(3*(a>>2)+(2<=n?n-1:0)),c=0;h<f;){var g=e[fa.fastCodeAt(d,h++)],i=e[fa.fastCodeAt(d,h++)];b.set(c++,g<<2|i>>4);g=e[fa.fastCodeAt(d,h++)];b.set(c++,i<<4|g>>2);i=e[fa.fastCodeAt(d,h++)];b.set(c++,g<<6|i)}2<=
n&&(i=e[fa.fastCodeAt(d,h++)],f=e[fa.fastCodeAt(d,h++)],b.set(c++,i<<2|f>>4),3==n&&(d=e[fa.fastCodeAt(d,h++)],b.set(c++,f<<4|d>>2)));this.pos+=a;this.cache.push(b);return b;case 67:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw"Class not found "+a;a=ra.createEmptyInstance(b);this.cache.push(a);a.hxUnserialize(this);if(103!=this.get(this.pos++))throw"Invalid custom data";return a}this.pos--;throw"Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos;},__class__:fc};
var ti=function(){};g["haxe.ds.BalancedTree"]=ti;ti.__name__=["haxe","ds","BalancedTree"];ti.prototype={set:function(a,b){this.root=this.setLoop(a,b,this.root)},get:function(a){for(var b=this.root;null!=b;){var c=this.compare(a,b.key);if(0==c)return b.value;b=0>c?b.left:b.right}return null},exists:function(a){for(var b=this.root;null!=b;){var c=this.compare(a,b.key);if(0==c)return!0;b=0>c?b.left:b.right}return!1},setLoop:function(a,b,c){if(null==c)return new zb(null,a,b,null);var d=this.compare(a,
c.key);if(0==d)return new zb(c.left,a,b,c.right,null==c?0:c._height);if(0>d)return this.balance(this.setLoop(a,b,c.left),c.key,c.value,c.right);a=this.setLoop(a,b,c.right);return this.balance(c.left,c.key,c.value,a)},balance:function(a,b,c,d){var e;e=null==a?0:a._height;var h;h=null==d?0:d._height;return e>h+2?function(){var b=a.left;return null==b?0:b._height}(this)>=function(){var b=a.right;return null==b?0:b._height}(this)?new zb(a.left,a.key,a.value,new zb(a.right,b,c,d)):new zb(new zb(a.left,
a.key,a.value,a.right.left),a.right.key,a.right.value,new zb(a.right.right,b,c,d)):h>e+2?function(){var a=d.right;return null==a?0:a._height}(this)>function(){var a=d.left;return null==a?0:a._height}(this)?new zb(new zb(a,b,c,d.left),d.key,d.value,d.right):new zb(new zb(a,b,c,d.left.left),d.left.key,d.left.value,new zb(d.left.right,d.key,d.value,d.right)):new zb(a,b,c,d,(e>h?e:h)+1)},compare:function(a,b){return B.compare(a,b)},__class__:ti};var zb=function(a,b,c,d,e){null==e&&(e=-1);this.left=a;
this.key=b;this.value=c;this.right=d;this._height=-1==e?(function(a){a=a.left;return null==a?0:a._height}(this)>function(a){a=a.right;return null==a?0:a._height}(this)?function(a){a=a.left;return null==a?0:a._height}(this):function(a){a=a.right;return null==a?0:a._height}(this))+1:e};g["haxe.ds.TreeNode"]=zb;zb.__name__=["haxe","ds","TreeNode"];zb.prototype={__class__:zb};var cg=function(){};g["haxe.ds.EnumValueMap"]=cg;cg.__name__=["haxe","ds","EnumValueMap"];cg.__interfaces__=[Ue];cg.__super__=
ti;cg.prototype=k(ti.prototype,{compare:function(a,b){var c=a[1]-b[1];if(0!=c)return c;var c=a.slice(2),d=b.slice(2);return 0==c.length&&0==d.length?0:this.compareArgs(c,d)},compareArgs:function(a,b){var c=a.length-b.length;if(0!=c)return c;for(var c=0,d=a.length;c<d;){var e=c++,e=this.compareArg(a[e],b[e]);if(0!=e)return e}return 0},compareArg:function(a,b){return B.isEnumValue(a)&&B.isEnumValue(b)?this.compare(a,b):a instanceof Array&&null==a.__enum__&&b instanceof Array&&null==b.__enum__?this.compareArgs(a,
b):B.compare(a,b)},__class__:cg});var Ya=function(){this.h={}};g["haxe.ds.IntMap"]=Ya;Ya.__name__=["haxe","ds","IntMap"];Ya.__interfaces__=[Ue];Ya.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return S.iter(a)},__class__:Ya};var Sb=function(){this.h={};this.h.__keys__=
{}};g["haxe.ds.ObjectMap"]=Sb;Sb.__name__=["haxe","ds","ObjectMap"];Sb.__interfaces__=[Ue];Sb.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++Sb.count);this.h[c]=b;this.h.__keys__[c]=a},get:function(a){return this.h[a.__id__]},exists:function(a){return null!=this.h.__keys__[a.__id__]},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);
return S.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref[this.it.next().__id__]}}},__class__:Sb};var K=function(){this.h={}};g["haxe.ds.StringMap"]=K;K.__name__=["haxe","ds","StringMap"];K.__interfaces__=[Ue];K.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},exists:function(a){return this.h.hasOwnProperty("$"+a)},remove:function(a){a="$"+a;if(!this.h.hasOwnProperty(a))return!1;
delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return S.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},__class__:K};var jg=function(a,b){this.replacer=a;this.indent=b;this.pretty=null!=b;this.nind=0;this.buf=new De};g["haxe.format.JsonPrinter"]=jg;jg.__name__=["haxe","format","JsonPrinter"];jg.print=function(a,b,c){b=
new jg(b,c);b.write("",a);return b.buf.b};jg.prototype={ipad:function(){if(this.pretty){var a=fa.lpad("",this.indent,this.nind*this.indent.length);this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a)}},write:function(a,b){null!=this.replacer&&(b=this.replacer(a,b));var c=ra["typeof"](b);switch(c[1]){case 8:this.buf.b+='"???"';break;case 4:this.fieldsString(b,B.fields(b));break;case 1:c=b;this.buf.b=null==c?this.buf.b+"null":this.buf.b+(""+c);break;case 2:c=Math.isFinite(b)?b:"null";this.buf.b=null==
c?this.buf.b+"null":this.buf.b+(""+c);break;case 5:this.buf.b+='"<fun>"';break;case 6:c=c[2];if(c==String)this.quote(b);else if(c==Array){c=b;this.buf.b+="[";for(var d=c.length,e=d-1,h=0;h<d;){var n=h++;0<n?this.buf.b+=",":this.nind++;this.pretty&&(this.buf.b+="\n");this.ipad();this.write(n,c[n]);n==e&&(this.nind--,this.pretty&&(this.buf.b+="\n"),this.ipad())}this.buf.b+="]"}else if(c==K){c=b;d={};for(e=c.keys();e.hasNext();)h=e.next(),B.setField(d,h,c.get(h));this.fieldsString(d,B.fields(d))}else c==
Date?this.quote(S.dateStr(b)):this.fieldsString(b,B.fields(b));break;case 7:c=ra.enumIndex(b);this.buf.b=null==c?this.buf.b+"null":this.buf.b+(""+c);break;case 3:c=b;this.buf.b=null==c?this.buf.b+"null":this.buf.b+(""+c);break;case 0:this.buf.b+="null"}},fieldsString:function(a,b){this.buf.b+="{";for(var c=b.length,d=c-1,e=0;e<c;){var h=e++,n=b[h],f=B.field(a,n);B.isFunction(f)||(0<h?this.buf.b+=",":this.nind++,this.pretty&&(this.buf.b+="\n"),this.ipad(),this.quote(n),this.buf.b+=":",this.pretty&&
(this.buf.b+=" "),this.write(n,f),h==d&&(this.nind--,this.pretty&&(this.buf.b+="\n"),this.ipad()))}this.buf.b+="}"},quote:function(a){this.buf.b+='"';for(var b=0;;){var c=fa.fastCodeAt(a,b++);if(c!=c)break;switch(c){case 34:this.buf.b+='\\"';break;case 92:this.buf.b+="\\\\";break;case 10:this.buf.b+="\\n";break;case 13:this.buf.b+="\\r";break;case 9:this.buf.b+="\\t";break;case 8:this.buf.b+="\\b";break;case 12:this.buf.b+="\\f";break;default:this.buf.b+=String.fromCharCode(c)}}this.buf.b+='"'},__class__:jg};
var kf=function(a,b){this.length=a;this.b=b};g["haxe.io.Bytes"]=kf;kf.__name__=["haxe","io","Bytes"];kf.alloc=function(a){for(var b=[],c=0;c<a;)c++,b.push(0);return new kf(a,b)};kf.prototype={get:function(a){return this.b[a]},set:function(a,b){this.b[a]=b&255},__class__:kf};var dl=function(){};g["haxe.io.Eof"]=dl;dl.__name__=["haxe","io","Eof"];dl.prototype={toString:function(){return"Eof"},__class__:dl};var Mj=function(){};g["haxe.rtti.Meta"]=Mj;Mj.__name__=["haxe","rtti","Meta"];Mj.getType=function(a){a=
a.__meta__;return null==a||null==a.obj?{}:a.obj};var lk=function(a){this.__x=a};g["haxe.xml._Fast.NodeAccess"]=lk;lk.__name__=["haxe","xml","_Fast","NodeAccess"];lk.prototype={resolve:function(a){var b=this.__x.elementsNamed(a).next();if(null==b)throw(this.__x.nodeType==T.Document?"Document":this.__x.get_nodeName())+" is missing element "+a;return new kg(b)},__class__:lk};var mk=function(a){this.__x=a};g["haxe.xml._Fast.AttribAccess"]=mk;mk.__name__=["haxe","xml","_Fast","AttribAccess"];mk.prototype=
{resolve:function(a){if(this.__x.nodeType==T.Document)throw"Cannot access document attribute "+a;var b=this.__x.get(a);if(null==b)throw this.__x.get_nodeName()+" is missing attribute "+a;return b},__class__:mk};var nk=function(a){this.__x=a};g["haxe.xml._Fast.HasAttribAccess"]=nk;nk.__name__=["haxe","xml","_Fast","HasAttribAccess"];nk.prototype={resolve:function(a){if(this.__x.nodeType==T.Document)throw"Cannot access document attribute "+a;return this.__x.exists(a)},__class__:nk};var ok=function(a){this.__x=
a};g["haxe.xml._Fast.HasNodeAccess"]=ok;ok.__name__=["haxe","xml","_Fast","HasNodeAccess"];ok.prototype={resolve:function(a){return this.__x.elementsNamed(a).hasNext()},__class__:ok};var pk=function(a){this.__x=a};g["haxe.xml._Fast.NodeListAccess"]=pk;pk.__name__=["haxe","xml","_Fast","NodeListAccess"];pk.prototype={resolve:function(a){for(var b=new me,a=this.__x.elementsNamed(a);a.hasNext();){var c=a.next();b.add(new kg(c))}return b},__class__:pk};var kg=function(a){if(a.nodeType!=T.Document&&a.nodeType!=
T.Element)throw"Invalid nodeType "+G.string(a.nodeType);this.x=a;this.node=new lk(a);this.nodes=new pk(a);this.att=new mk(a);this.has=new nk(a);this.hasNode=new ok(a)};g["haxe.xml.Fast"]=kg;kg.__name__=["haxe","xml","Fast"];kg.prototype={get_name:function(){return this.x.nodeType==T.Document?"Document":this.x.get_nodeName()},get_innerData:function(){var a=this.x.iterator();if(!a.hasNext())throw this.get_name()+" does not have data";var b=a.next(),c=a.next();if(null!=c){if(b.nodeType==T.PCData&&c.nodeType==
T.CData&&""==fa.trim(b.get_nodeValue())&&(b=a.next(),null==b||b.nodeType==T.PCData&&""==fa.trim(b.get_nodeValue())&&null==a.next()))return c.get_nodeValue();throw this.get_name()+" does not only have data";}if(b.nodeType!=T.PCData&&b.nodeType!=T.CData)throw this.get_name()+" does not have data";return b.get_nodeValue()},__class__:kg,__properties__:{get_innerData:"get_innerData",get_name:"get_name"}};var ne=function(){};g["haxe.xml.Parser"]=ne;ne.__name__=["haxe","xml","Parser"];ne.parse=function(a){var b=
T.createDocument();ne.doParse(a,0,b);return b};ne.doParse=function(a,b,c){null==b&&(b=0);for(var d=null,e=1,h=1,n=null,f=0,g=0,i=0,s=a.charCodeAt(b),j=new De;s==s;){switch(e){case 0:switch(s){case 10:case 13:case 9:case 32:break;default:e=h;continue}break;case 1:switch(s){case 60:e=0;h=2;break;default:f=b;e=13;continue}break;case 13:60==s?(h=T.createPCData(j.b+S.substr(a,f,b-f)),j=new De,c.addChild(h),g++,e=0,h=2):38==s&&(j.addSub(a,f,b-f),e=18,h=13,f=b+1);break;case 17:93==s&&93==a.charCodeAt(b+
1)&&62==a.charCodeAt(b+2)&&(e=T.createCData(S.substr(a,f,b-f)),c.addChild(e),g++,b+=2,e=1);break;case 2:switch(s){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=S.substr(a,b,6).toUpperCase())throw"Expected <![CDATA[";b+=5;e=17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=S.substr(a,b+2,6).toUpperCase())throw"Expected <!DOCTYPE";b+=8;e=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw"Expected <\!--";b+=2;e=15}f=b+1;break;case 63:e=14;f=b;break;case 47:if(null==
c)throw"Expected node name";f=b+1;e=0;h=10;break;default:e=3;f=b;continue}break;case 3:if(!(97<=s&&122>=s||65<=s&&90>=s||48<=s&&57>=s||58==s||46==s||95==s||45==s)){if(b==f)throw"Expected node name";d=T.createElement(S.substr(a,f,b-f));c.addChild(d);e=0;h=4;continue}break;case 4:switch(s){case 47:e=11;g++;break;case 62:e=9;g++;break;default:e=5;f=b;continue}break;case 5:if(!(97<=s&&122>=s||65<=s&&90>=s||48<=s&&57>=s||58==s||46==s||95==s||45==s)){if(f==b)throw"Expected attribute name";n=S.substr(a,
f,b-f);if(d.exists(n))throw"Duplicate attribute";e=0;h=6;continue}break;case 6:switch(s){case 61:e=0;h=7;break;default:throw"Expected =";}break;case 7:switch(s){case 34:case 39:e=8;f=b;break;default:throw'Expected "';}break;case 8:s==a.charCodeAt(f)&&(h=S.substr(a,f+1,b-f-1),d.set(n,h),e=0,h=4);break;case 9:f=b=ne.doParse(a,b,d);e=1;break;case 11:switch(s){case 62:e=1;break;default:throw"Expected >";}break;case 12:switch(s){case 62:return 0==g&&c.addChild(T.createPCData("")),b;default:throw"Expected >";
}case 10:if(!(97<=s&&122>=s||65<=s&&90>=s||48<=s&&57>=s||58==s||46==s||95==s||45==s)){if(f==b)throw"Expected node name";if(S.substr(a,f,b-f)!=c.get_nodeName())throw"Expected </"+c.get_nodeName()+">";e=0;h=12;continue}break;case 15:45==s&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(c.addChild(T.createComment(S.substr(a,f,b-f))),b+=2,e=1);break;case 16:91==s?i++:93==s?i--:62==s&&0==i&&(c.addChild(T.createDocType(S.substr(a,f,b-f))),e=1);break;case 14:63==s&&62==a.charCodeAt(b+1)&&(b++,e=S.substr(a,
f+1,b-f-2),c.addChild(T.createProcessingInstruction(e)),e=1);break;case 18:59==s&&(f=S.substr(a,f,b-f),35==f.charCodeAt(0)?(f=120==f.charCodeAt(1)?G.parseInt("0"+S.substr(f,1,f.length-1)):G.parseInt(S.substr(f,1,f.length-1)),j.add(String.fromCharCode(f))):ne.escapes.exists(f)?j.add(ne.escapes.get(f)):j.b+=G.string("&"+f+";"),f=b+1,e=h)}s=fa.fastCodeAt(a,++b)}1==e&&(f=b,e=13);if(13==e)return(b!=f||0==g)&&c.addChild(T.createPCData(j.b+S.substr(a,f,b-f))),b;throw"Unexpected end";};var pa=function(){};
g["js.Boot"]=pa;pa.__name__=["js","Boot"];pa.getClass=function(a){return a instanceof Array&&null==a.__enum__?Array:a.__class__};pa.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var c=a[0]+"(",b=b+"\t",d=2,e=a.length;d<e;)var h=d++,c=2!=h?c+(","+pa.__string_rec(a[h],b)):c+pa.__string_rec(a[h],b);return c+
")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)h=e++,d+=(0<h?",":"")+pa.__string_rec(a[h],b);return d+"]"}try{d=a.toString}catch(n){return"???"}if(null!=d&&d!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";e=null!=a.hasOwnProperty;for(c in a)if(!e||a.hasOwnProperty(c))"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+pa.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "function":return"<function>";
case "string":return a;default:return""+a}};pa.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var h=d++,h=c[h];if(h==b||pa.__interfLoop(h,b))return!0}return pa.__interfLoop(a.__super__,b)};pa.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Rl:return(a|0)===a;case Ml:return"number"==typeof a;case Nl:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==
a.__enum__;case Sl:return!0;default:if(null!=a){if("function"==typeof b&&(a instanceof b||pa.__interfLoop(pa.getClass(a),b)))return!0}else return!1;return b==Tl&&null!=a.__name__||b==Ul&&null!=a.__ename__?!0:a.__enum__==b}};pa.__cast=function(a,b){if(pa.__instanceof(a,b))return a;throw"Cannot cast "+G.string(a)+" to "+G.string(b);};var Ug=function(){};g["js.Browser"]=Ug;Ug.__name__=["js","Browser"];Ug.getLocalStorage=function(){try{var a=window.localStorage;a.getItem("");return a}catch(b){return null}};
Ug.createXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw"Unable to create XMLHttpRequest object.";};var $k=function(){};g["js.html._CanvasElement.CanvasUtil"]=$k;$k.__name__=["js","html","_CanvasElement","CanvasUtil"];$k.getContextWebGL=function(a,b){for(var c=0,d=["webgl","experimental-webgl"];c<d.length;){var e=d[c];++c;e=a.getContext(e,b);if(null!=e)return e}return null};
var Ma=function(){j.call(this);if(null!=Ma._scaleSprite)throw"AutoScale should be added only once!";wa.init()};g["jsembed.AutoScale"]=Ma;Ma.__name__=["jsembed","AutoScale"];Ma.__super__=j;Ma.prototype=k(j.prototype,{get_name:function(){return"AutoScale_76"},onAdded:function(){null!=this.owner._compMap.Sprite_4?Ma._scaleSprite=this.owner._compMap.Sprite_4:(Ma._scaleSprite=new D,this.owner.add(Ma._scaleSprite))},onUpdate:function(){Ma.tmp=wa.get_canvasScale();0<Ma.tmp&&Ma.tmp!=Ma.SCALE&&(Ma.SCALE=Ma.tmp,
Ma._scaleSprite.scaleX.set__(Ma.tmp),Ma._scaleSprite.scaleY.set__(Ma.tmp))},__class__:Ma});var ub=function(){};g["jsembed.BaseUtils"]=ub;ub.__name__=["jsembed","BaseUtils"];ub.setupManifest=function(a){""!=ub.BASE_URL&&(wa.get_isCrossdomain()?a.set_remoteBase(ub.BASE_URL):a.set_localBase(ub.BASE_URL))};ub.setupBaseURL=function(){wa.init();ub.BASE_URL=wa.get_exists()?wa.get_isCrossdomain()?ub.appendAssetsToUrl(wa.get_base()):ub.trimUrl(wa.get_base()):""};ub.trimUrl=function(a){if(""==a)return"";if(0>
a.indexOf("http"))return"/"==a.charAt(0)&&(a=S.substr(a,1,a.length-1)),a;var b=a.indexOf("http://");0>b?(b=a.indexOf("https://"),b=0>b?0:b+8):b+=7;b=a.indexOf("/",b);a=S.substr(a,b,a.length-b);return a=ub.appendAssetsToUrl(a)};ub.appendAssetsToUrl=function(a){"/"!=a.charAt(a.length-1)&&(a+="/");return a+"assets/"};var va=function(a,b){j.call(this);if(!va.hasInit)throw"Please call 'jsembed.HardwareAutoScale.init();' BEFORE  Flambe 'System.init()'";wa.init();this.gameWidth=a;this.gameHeight=b;this._htmlStage=
p._platform.getStage();this._stage=p._platform.getStage();this._canvas=this._stage._canvas;this.resizeCanvas(a,b)};g["jsembed.HardwareAutoScale"]=va;va.__name__=["jsembed","HardwareAutoScale"];va.init=function(){if(!va.hasInit){va.hasInit=!0;var a=Af;a.prototype.onWindowResize=function(){};a.prototype.requestResize=function(){};a.prototype.resizeCanvas=function(a,c){this._canvas.width=a;this._canvas.height=c;this.resize.emit();return!0}}};va.__super__=j;va.prototype=k(j.prototype,{get_name:function(){return"HardwareAutoScale_75"},
resizeCanvas:function(a,b){this._canvas.width=this._stage.width=a;this._canvas.height=this._stage.width=b;this._htmlStage.resize.emit()},onUpdate:function(){va._tmp=wa.get_canvasScale();0<va._tmp&&va._tmp!=va.SCALE&&(va.SCALE=va._tmp,this._canvas.style.width=this.gameWidth*va.SCALE+"px",this._canvas.style.height=this.gameHeight*va.SCALE+"px")},__class__:va});var wa=function(){};g["jsembed.JSEmbedProxy"]=wa;wa.__name__=["jsembed","JSEmbedProxy"];wa.__properties__={get_canvasScale:"get_canvasScale",
get_isCrossdomain:"get_isCrossdomain",get_base:"get_base",get_exists:"get_exists"};wa.init=function(){if(null!=wa.JSEMBED)return!0;try{return wa.JSEMBED=eval("jsembed"),wa.enabled=!0}catch(a){}return!1};wa.get_exists=function(){return!wa.enabled?!1:wa.JSEMBED.exists()};wa.get_base=function(){return!wa.enabled?null:wa.JSEMBED.baseUrl()};wa.get_isCrossdomain=function(){return!wa.enabled?!0:wa.JSEMBED.isBaseCrossdomain()};wa.get_canvasScale=function(){return!wa.enabled?0:G.parseFloat(wa.JSEMBED.canvasScale())};
var t=function(){};g["nape.Config"]=t;t.__name__=["nape","Config"];var Ld=function(){this.zpp_inner=null};g["nape.callbacks.Callback"]=Ld;Ld.__name__=["nape","callbacks","Callback"];Ld.prototype={toString:function(){return""},__class__:Ld};var ui=function(){this.zpp_inner=null};g["nape.callbacks.BodyCallback"]=ui;ui.__name__=["nape","callbacks","BodyCallback"];ui.__super__=Ld;ui.prototype=k(Ld.prototype,{toString:function(){var a;a="Cb:"+["WAKE","SLEEP"][this.zpp_inner.event-f.id_CbEvent_WAKE];a+=
":"+this.zpp_inner.body.outer.toString();return a+=" : listener: "+G.string(this.zpp_inner.listener.outer)},__class__:ui});var Md=function(){this.zpp_inner=null};g["nape.callbacks.Listener"]=Md;Md.__name__=["nape","callbacks","Listener"];Md.prototype={toString:function(){var a="BEGIN,END,WAKE,SLEEP,BREAK,PRE,ONGOING".split(",")[this.zpp_inner.event];if(this.zpp_inner.type==f.id_ListenerType_BODY)return"BodyListener{"+a+"::"+G.string(this.zpp_inner.body.outer_zn.zpp_inner_zn.options.outer)+"}";if(this.zpp_inner.type==
f.id_ListenerType_CONSTRAINT)return"ConstraintListener{"+a+"::"+G.string(this.zpp_inner.constraint.outer_zn.zpp_inner_zn.options.outer)+"}";var b=this.zpp_inner.interaction,c;switch(b.itype){case f.id_InteractionType_COLLISION:c="COLLISION";break;case f.id_InteractionType_SENSOR:c="SENSOR";break;case f.id_InteractionType_FLUID:c="FLUID";break;default:c="ALL"}return(this.zpp_inner.type==f.id_ListenerType_INTERACTION?"InteractionListener{"+a+"#"+c+"::"+G.string(b.outer_zni.zpp_inner_zn.options1.outer)+
":"+G.string(b.outer_zni.zpp_inner_zn.options2.outer)+"}":"PreListener{"+c+"::"+G.string(b.outer_znp.zpp_inner_zn.options1.outer)+":"+G.string(b.outer_znp.zpp_inner_zn.options2.outer)+"}")+" precedence="+this.zpp_inner.precedence},__class__:Md};var qk=function(){this.zpp_inner_zn=null};g["nape.callbacks.BodyListener"]=qk;qk.__name__=["nape","callbacks","BodyListener"];qk.__super__=Md;qk.prototype=k(Md.prototype,{__class__:qk});var Hb=function(){};g["nape.callbacks.CbEvent"]=Hb;Hb.__name__=["nape",
"callbacks","CbEvent"];Hb.prototype={toString:function(){var a;null==f.CbEvent_PRE&&(f.internal=!0,f.CbEvent_PRE=new Hb,f.internal=!1);this==f.CbEvent_PRE?a="PRE":(null==f.CbEvent_BEGIN&&(f.internal=!0,f.CbEvent_BEGIN=new Hb,f.internal=!1),this==f.CbEvent_BEGIN?a="BEGIN":(null==f.CbEvent_ONGOING&&(f.internal=!0,f.CbEvent_ONGOING=new Hb,f.internal=!1),this==f.CbEvent_ONGOING?a="ONGOING":(null==f.CbEvent_END&&(f.internal=!0,f.CbEvent_END=new Hb,f.internal=!1),this==f.CbEvent_END?a="END":(null==f.CbEvent_WAKE&&
(f.internal=!0,f.CbEvent_WAKE=new Hb,f.internal=!1),this==f.CbEvent_WAKE?a="WAKE":(null==f.CbEvent_SLEEP&&(f.internal=!0,f.CbEvent_SLEEP=new Hb,f.internal=!1),this==f.CbEvent_SLEEP?a="SLEEP":(null==f.CbEvent_BREAK&&(f.internal=!0,f.CbEvent_BREAK=new Hb,f.internal=!1),a=this==f.CbEvent_BREAK?"BREAK":""))))));return a},__class__:Hb};var Nd=function(){this.zpp_inner=null;this.zpp_inner=new ic;this.zpp_inner.outer=this};g["nape.callbacks.CbType"]=Nd;Nd.__name__=["nape","callbacks","CbType"];Nd.prototype=
{toString:function(){return this==ic.ANY_BODY?"ANY_BODY":this==ic.ANY_SHAPE?"ANY_SHAPE":this==ic.ANY_COMPOUND?"ANY_COMPOUND":this==ic.ANY_CONSTRAINT?"ANY_CONSTRAINT":"CbType#"+this.zpp_inner.id},__class__:Nd};var ob=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.callbacks.CbTypeIterator"]=ob;ob.__name__=["nape","callbacks","CbTypeIterator"];ob.get=function(a){var b;null==ob.zpp_pool?(hd.internal=!0,b=new ob,hd.internal=!1):(b=ob.zpp_pool,ob.zpp_pool=b.zpp_next);
b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};ob.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=ob.zpp_pool;ob.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:ob};var vi=function(){this.zpp_inner=null;this.zpp_inner=new hd;this.zpp_inner.outer=this};g["nape.callbacks.CbTypeList"]=vi;vi.__name__=["nape",
"callbacks","CbTypeList"];vi.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},has:function(a){this.zpp_inner.valmod();return this.zpp_inner.inner.has(a.zpp_inner)},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=
this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-
1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-
1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&
this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=ob.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:vi,__properties__:{get_length:"get_length"}};var wi=function(){this.zpp_inner=null};g["nape.callbacks.ConstraintCallback"]=wi;wi.__name__=["nape","callbacks",
"ConstraintCallback"];wi.__super__=Ld;wi.prototype=k(Ld.prototype,{toString:function(){var a;a="Cb:"+["WAKE","SLEEP","BREAK"][this.zpp_inner.event-f.id_CbEvent_WAKE];a+=":"+this.zpp_inner.constraint.outer.toString();return a+=" : listener: "+G.string(this.zpp_inner.listener.outer)},__class__:wi});var rk=function(){this.zpp_inner_zn=null};g["nape.callbacks.ConstraintListener"]=rk;rk.__name__=["nape","callbacks","ConstraintListener"];rk.__super__=Md;rk.prototype=k(Md.prototype,{__class__:rk});var xi=
function(){this.zpp_inner=null};g["nape.callbacks.InteractionCallback"]=xi;xi.__name__=["nape","callbacks","InteractionCallback"];xi.__super__=Ld;xi.prototype=k(Ld.prototype,{toString:function(){var a;a="Cb:"+"BEGIN,END,,,,,ONGOING".split(",")[this.zpp_inner.event];a+=":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString();a+=" : "+this.zpp_inner.wrap_arbiters.toString();return a+=" : listener: "+G.string(this.zpp_inner.listener.outer)},__class__:xi});var lf=function(a,
b,c,d,e,h){null==h&&(h=0);this.zpp_inner=this.zpp_inner_zn=null;var n=-1;null==f.CbEvent_BEGIN&&(f.internal=!0,f.CbEvent_BEGIN=new Hb,f.internal=!1);a==f.CbEvent_BEGIN?n=f.id_CbEvent_BEGIN:(null==f.CbEvent_END&&(f.internal=!0,f.CbEvent_END=new Hb,f.internal=!1),a==f.CbEvent_END?n=f.id_CbEvent_END:(null==f.CbEvent_ONGOING&&(f.internal=!0,f.CbEvent_ONGOING=new Hb,f.internal=!1),a==f.CbEvent_ONGOING&&(n=f.id_CbEvent_ONGOING)));this.zpp_inner=this.zpp_inner_zn=new mb(he.argument(c),he.argument(d),n,f.id_ListenerType_INTERACTION);
this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zni=this;this.zpp_inner.precedence=h;this.zpp_inner_zn.handleri=e;this.set_interactionType(b)};g["nape.callbacks.InteractionListener"]=lf;lf.__name__=["nape","callbacks","InteractionListener"];lf.__super__=Md;lf.prototype=k(Md.prototype,{get_interactionType:function(){var a=this.zpp_inner_zn.itype;if(a==f.id_InteractionType_COLLISION)return null==f.InteractionType_COLLISION&&(f.internal=!0,f.InteractionType_COLLISION=new Wa,f.internal=!1),f.InteractionType_COLLISION;
if(a==f.id_InteractionType_SENSOR)return null==f.InteractionType_SENSOR&&(f.internal=!0,f.InteractionType_SENSOR=new Wa,f.internal=!1),f.InteractionType_SENSOR;if(a==f.id_InteractionType_FLUID)return null==f.InteractionType_FLUID&&(f.internal=!0,f.InteractionType_FLUID=new Wa,f.internal=!1),f.InteractionType_FLUID;return a==f.id_InteractionType_ANY?(null==f.InteractionType_ANY&&(f.internal=!0,f.InteractionType_ANY=new Wa,f.internal=!1),f.InteractionType_ANY):null},set_interactionType:function(a){if(this.get_interactionType()!=
a){var b=this.zpp_inner_zn;null==f.InteractionType_COLLISION&&(f.internal=!0,f.InteractionType_COLLISION=new Wa,f.internal=!1);a==f.InteractionType_COLLISION?a=f.id_InteractionType_COLLISION:(null==f.InteractionType_SENSOR&&(f.internal=!0,f.InteractionType_SENSOR=new Wa,f.internal=!1),a==f.InteractionType_SENSOR?a=f.id_InteractionType_SENSOR:(null==f.InteractionType_FLUID&&(f.internal=!0,f.InteractionType_FLUID=new Wa,f.internal=!1),a=a==f.InteractionType_FLUID?f.id_InteractionType_FLUID:f.id_InteractionType_ANY));
b.itype=a}return this.get_interactionType()},__class__:lf,__properties__:{set_interactionType:"set_interactionType",get_interactionType:"get_interactionType"}});var Wa=function(){};g["nape.callbacks.InteractionType"]=Wa;Wa.__name__=["nape","callbacks","InteractionType"];Wa.prototype={toString:function(){var a;null==f.InteractionType_COLLISION&&(f.internal=!0,f.InteractionType_COLLISION=new Wa,f.internal=!1);this==f.InteractionType_COLLISION?a="COLLISION":(null==f.InteractionType_SENSOR&&(f.internal=
!0,f.InteractionType_SENSOR=new Wa,f.internal=!1),this==f.InteractionType_SENSOR?a="SENSOR":(null==f.InteractionType_FLUID&&(f.internal=!0,f.InteractionType_FLUID=new Wa,f.internal=!1),this==f.InteractionType_FLUID?a="FLUID":(null==f.InteractionType_ANY&&(f.internal=!0,f.InteractionType_ANY=new Wa,f.internal=!1),a=this==f.InteractionType_ANY?"ANY":"")));return a},__class__:Wa};var id=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.callbacks.ListenerIterator"]=
id;id.__name__=["nape","callbacks","ListenerIterator"];id.get=function(a){var b;null==id.zpp_pool?(ie.internal=!0,b=new id,ie.internal=!1):(b=id.zpp_pool,id.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};id.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=id.zpp_pool;id.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},
__class__:id};var sk=function(){this.zpp_inner=null;this.zpp_inner=new ie;this.zpp_inner.outer=this};g["nape.callbacks.ListenerList"]=sk;sk.__name__=["nape","callbacks","ListenerList"];sk.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||
null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=
null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=
null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=
c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=id.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:sk,__properties__:{get_length:"get_length"}};var mf=function(){};g["nape.callbacks.ListenerType"]=
mf;mf.__name__=["nape","callbacks","ListenerType"];mf.prototype={toString:function(){var a;null==f.ListenerType_BODY&&(f.internal=!0,f.ListenerType_BODY=new mf,f.internal=!1);this==f.ListenerType_BODY?a="BODY":(null==f.ListenerType_CONSTRAINT&&(f.internal=!0,f.ListenerType_CONSTRAINT=new mf,f.internal=!1),this==f.ListenerType_CONSTRAINT?a="CONSTRAINT":(null==f.ListenerType_INTERACTION&&(f.internal=!0,f.ListenerType_INTERACTION=new mf,f.internal=!1),this==f.ListenerType_INTERACTION?a="INTERACTION":
(null==f.ListenerType_PRE&&(f.internal=!0,f.ListenerType_PRE=new mf,f.internal=!1),a=this==f.ListenerType_PRE?"PRE":"")));return a},__class__:mf};var nf=function(a,b){this.zpp_inner=null;this.zpp_inner=new he;this.zpp_inner.outer=this;null!=a&&this.including(a);null!=b&&this.excluding(b)};g["nape.callbacks.OptionType"]=nf;nf.__name__=["nape","callbacks","OptionType"];nf.prototype={including:function(a){this.zpp_inner.append(this.zpp_inner.includes,a);return this},excluding:function(a){this.zpp_inner.append(this.zpp_inner.excludes,
a);return this},toString:function(){null==this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes();var a=this.zpp_inner.wrap_includes.toString();null==this.zpp_inner.wrap_excludes&&this.zpp_inner.setup_excludes();return"@{"+a+" excluding "+this.zpp_inner.wrap_excludes.toString()+"}"},__class__:nf};var yi=function(){this.zpp_inner=null};g["nape.callbacks.PreCallback"]=yi;yi.__name__=["nape","callbacks","PreCallback"];yi.__super__=Ld;yi.prototype=k(Ld.prototype,{toString:function(){var a;a="Cb:PRE:"+
(":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString());a+=" : "+this.zpp_inner.pre_arbiter.wrapper().toString();return a+=" : listnener: "+G.string(this.zpp_inner.listener.outer)},__class__:yi});var db=function(){};g["nape.callbacks.PreFlag"]=db;db.__name__=["nape","callbacks","PreFlag"];db.prototype={toString:function(){var a;null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=new db,f.internal=!1);this==f.PreFlag_ACCEPT?a="ACCEPT":(null==f.PreFlag_IGNORE&&(f.internal=
!0,f.PreFlag_IGNORE=new db,f.internal=!1),this==f.PreFlag_IGNORE?a="IGNORE":(null==f.PreFlag_ACCEPT_ONCE&&(f.internal=!0,f.PreFlag_ACCEPT_ONCE=new db,f.internal=!1),this==f.PreFlag_ACCEPT_ONCE?a="ACCEPT_ONCE":(null==f.PreFlag_IGNORE_ONCE&&(f.internal=!0,f.PreFlag_IGNORE_ONCE=new db,f.internal=!1),a=this==f.PreFlag_IGNORE_ONCE?"IGNORE_ONCE":"")));return a},__class__:db};var zi=function(a,b,c,d,e,h){null==h&&(h=!1);null==e&&(e=0);this.zpp_inner=this.zpp_inner_zn=null;this.zpp_inner=this.zpp_inner_zn=
new mb(he.argument(b),he.argument(c),f.id_CbEvent_PRE,f.id_ListenerType_PRE);this.zpp_inner.outer=this;this.zpp_inner_zn.outer_znp=this;this.zpp_inner.precedence=e;this.zpp_inner_zn.pure=h;this.zpp_inner_zn.handlerp=d;this.set_interactionType(a)};g["nape.callbacks.PreListener"]=zi;zi.__name__=["nape","callbacks","PreListener"];zi.__super__=Md;zi.prototype=k(Md.prototype,{get_interactionType:function(){var a=this.zpp_inner_zn.itype;if(a==f.id_InteractionType_COLLISION)return null==f.InteractionType_COLLISION&&
(f.internal=!0,f.InteractionType_COLLISION=new Wa,f.internal=!1),f.InteractionType_COLLISION;if(a==f.id_InteractionType_SENSOR)return null==f.InteractionType_SENSOR&&(f.internal=!0,f.InteractionType_SENSOR=new Wa,f.internal=!1),f.InteractionType_SENSOR;if(a==f.id_InteractionType_FLUID)return null==f.InteractionType_FLUID&&(f.internal=!0,f.InteractionType_FLUID=new Wa,f.internal=!1),f.InteractionType_FLUID;return a==f.id_InteractionType_ANY?(null==f.InteractionType_ANY&&(f.internal=!0,f.InteractionType_ANY=
new Wa,f.internal=!1),f.InteractionType_ANY):null},set_interactionType:function(a){if(this.get_interactionType()!=a){var b=this.zpp_inner_zn;null==f.InteractionType_COLLISION&&(f.internal=!0,f.InteractionType_COLLISION=new Wa,f.internal=!1);a==f.InteractionType_COLLISION?a=f.id_InteractionType_COLLISION:(null==f.InteractionType_SENSOR&&(f.internal=!0,f.InteractionType_SENSOR=new Wa,f.internal=!1),a==f.InteractionType_SENSOR?a=f.id_InteractionType_SENSOR:(null==f.InteractionType_FLUID&&(f.internal=
!0,f.InteractionType_FLUID=new Wa,f.internal=!1),a=a==f.InteractionType_FLUID?f.id_InteractionType_FLUID:f.id_InteractionType_ANY));b.itype=a}return this.get_interactionType()},__class__:zi,__properties__:{set_interactionType:"set_interactionType",get_interactionType:"get_interactionType"}});var el=function(){};g["nape.constraint.Constraint"]=el;el.__name__=["nape","constraint","Constraint"];el.prototype={toString:function(){return"{Constraint}"},__class__:el};var zd=function(){this.zpp_next=null;
this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.constraint.ConstraintIterator"]=zd;zd.__name__=["nape","constraint","ConstraintIterator"];zd.get=function(a){var b;null==zd.zpp_pool?(se.internal=!0,b=new zd,se.internal=!1):(b=zd.zpp_pool,zd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};zd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=zd.zpp_pool;
zd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:zd};var tk=function(){this.zpp_inner=null;this.zpp_inner=new se;this.zpp_inner.outer=this};g["nape.constraint.ConstraintList"]=tk;tk.__name__=["nape","constraint","ConstraintList"];tk.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},
at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=
c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=zd.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:tk,__properties__:{get_length:"get_length"}};var te=function(){this.zpp_inner=
null};g["nape.dynamics.Arbiter"]=te;te.__name__=["nape","dynamics","Arbiter"];te.prototype={get_collisionArbiter:function(){return this.zpp_inner.type==xa.COL?this.zpp_inner.colarb.outer_zn:null},get_state:function(){var a=this.zpp_inner.immState;if(a==(f.id_ImmState_ACCEPT|f.id_ImmState_ALWAYS))return null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=new db,f.internal=!1),f.PreFlag_ACCEPT;switch(a){case f.id_ImmState_ACCEPT:return null==f.PreFlag_ACCEPT_ONCE&&(f.internal=!0,f.PreFlag_ACCEPT_ONCE=
new db,f.internal=!1),f.PreFlag_ACCEPT_ONCE;default:if(a==(f.id_ImmState_IGNORE|f.id_ImmState_ALWAYS))return null==f.PreFlag_IGNORE&&(f.internal=!0,f.PreFlag_IGNORE=new db,f.internal=!1),f.PreFlag_IGNORE;null==f.PreFlag_IGNORE_ONCE&&(f.internal=!0,f.PreFlag_IGNORE_ONCE=new db,f.internal=!1);return f.PreFlag_IGNORE_ONCE}},toString:function(){var a;a=this.zpp_inner.type==xa.COL?"CollisionArbiter":this.zpp_inner.type==xa.FLUID?"FluidArbiter":"SensorArbiter";return this.zpp_inner.cleared?a+"(object-pooled)":
a+"("+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).toString()+"|"+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).toString()+")"+(this.zpp_inner.type==xa.COL?"["+["SD","DD"][this.zpp_inner.colarb.stat?0:1]+"]":"")+"<-"+this.get_state().toString()},__class__:te,__properties__:{get_state:"get_state",get_collisionArbiter:"get_collisionArbiter"}};var jd=function(){this.zpp_next=null;this.zpp_critical=!1;
this.zpp_i=0;this.zpp_inner=null};g["nape.dynamics.ArbiterIterator"]=jd;jd.__name__=["nape","dynamics","ArbiterIterator"];jd.get=function(a){var b;null==jd.zpp_pool?(je.internal=!0,b=new jd,je.internal=!1):(b=jd.zpp_pool,jd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};jd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.zpp_gl();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=jd.zpp_pool;jd.zpp_pool=this;this.zpp_inner=null;
return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:jd};var uk=function(){this.zpp_inner=null;this.zpp_inner=new je;this.zpp_inner.outer=this};g["nape.dynamics.ArbiterList"]=uk;uk.__name__=["nape","dynamics","ArbiterList"];uk.prototype={zpp_gl:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1;this.zpp_inner.user_length=0;for(var a=this.zpp_inner.inner.head;null!=a;)a.elt.active&&this.zpp_inner.user_length++,a=
a.next}return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite){this.zpp_inner.at_index=0;for(this.zpp_inner.at_ite=this.zpp_inner.inner.head;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}for(;this.zpp_inner.at_index!=a;){this.zpp_inner.at_index++;for(this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=
this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.wrapper()},iterator:function(){this.zpp_vm();return jd.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:uk};var lg=function(){};g["nape.dynamics.ArbiterType"]=lg;lg.__name__=["nape","dynamics","ArbiterType"];lg.prototype={toString:function(){var a;null==f.ArbiterType_COLLISION&&(f.internal=
!0,f.ArbiterType_COLLISION=new lg,f.internal=!1);this==f.ArbiterType_COLLISION?a="COLLISION":(null==f.ArbiterType_SENSOR&&(f.internal=!0,f.ArbiterType_SENSOR=new lg,f.internal=!1),this==f.ArbiterType_SENSOR?a="SENSOR":(null==f.ArbiterType_FLUID&&(f.internal=!0,f.ArbiterType_FLUID=new lg,f.internal=!1),a=this==f.ArbiterType_FLUID?"FLUID":""));return a},__class__:lg};var Ai=function(){this.zpp_inner=null};g["nape.dynamics.CollisionArbiter"]=Ai;Ai.__name__=["nape","dynamics","CollisionArbiter"];Ai.__super__=
te;Ai.prototype=k(te.prototype,{get_dynamicFriction:function(){var a=this.zpp_inner.colarb;a.invalidated&&(a.invalidated=!1,a.userdef_restitution||(a.restitution=a.s1.material.elasticity<=Math.NEGATIVE_INFINITY||a.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:a.s1.material.elasticity>=Math.POSITIVE_INFINITY||a.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(a.s1.material.elasticity+a.s2.material.elasticity)/2,0>a.restitution&&(a.restitution=0),1<a.restitution&&(a.restitution=1)),a.userdef_dyn_fric||
(a.dyn_fric=Math.sqrt(a.s1.material.dynamicFriction*a.s2.material.dynamicFriction)),a.userdef_stat_fric||(a.stat_fric=Math.sqrt(a.s1.material.staticFriction*a.s2.material.staticFriction)),a.userdef_rfric||(a.rfric=Math.sqrt(a.s1.material.rollingFriction*a.s2.material.rollingFriction)));return a.dyn_fric},set_dynamicFriction:function(a){var b=this.zpp_inner.colarb;b.dyn_fric=a;b.userdef_dyn_fric=!0;return this.get_dynamicFriction()},get_staticFriction:function(){var a=this.zpp_inner.colarb;a.invalidated&&
(a.invalidated=!1,a.userdef_restitution||(a.restitution=a.s1.material.elasticity<=Math.NEGATIVE_INFINITY||a.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:a.s1.material.elasticity>=Math.POSITIVE_INFINITY||a.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(a.s1.material.elasticity+a.s2.material.elasticity)/2,0>a.restitution&&(a.restitution=0),1<a.restitution&&(a.restitution=1)),a.userdef_dyn_fric||(a.dyn_fric=Math.sqrt(a.s1.material.dynamicFriction*a.s2.material.dynamicFriction)),a.userdef_stat_fric||
(a.stat_fric=Math.sqrt(a.s1.material.staticFriction*a.s2.material.staticFriction)),a.userdef_rfric||(a.rfric=Math.sqrt(a.s1.material.rollingFriction*a.s2.material.rollingFriction)));return a.stat_fric},set_staticFriction:function(a){var b=this.zpp_inner.colarb;b.stat_fric=a;b.userdef_stat_fric=!0;return this.get_staticFriction()},get_rollingFriction:function(){var a=this.zpp_inner.colarb;a.invalidated&&(a.invalidated=!1,a.userdef_restitution||(a.restitution=a.s1.material.elasticity<=Math.NEGATIVE_INFINITY||
a.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:a.s1.material.elasticity>=Math.POSITIVE_INFINITY||a.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(a.s1.material.elasticity+a.s2.material.elasticity)/2,0>a.restitution&&(a.restitution=0),1<a.restitution&&(a.restitution=1)),a.userdef_dyn_fric||(a.dyn_fric=Math.sqrt(a.s1.material.dynamicFriction*a.s2.material.dynamicFriction)),a.userdef_stat_fric||(a.stat_fric=Math.sqrt(a.s1.material.staticFriction*a.s2.material.staticFriction)),a.userdef_rfric||
(a.rfric=Math.sqrt(a.s1.material.rollingFriction*a.s2.material.rollingFriction)));return a.rfric},set_rollingFriction:function(a){var b=this.zpp_inner.colarb;b.rfric=a;b.userdef_rfric=!0;return this.get_rollingFriction()},__class__:Ai,__properties__:k(te.prototype.__properties__,{set_rollingFriction:"set_rollingFriction",get_rollingFriction:"get_rollingFriction",set_staticFriction:"set_staticFriction",get_staticFriction:"get_staticFriction",set_dynamicFriction:"set_dynamicFriction",get_dynamicFriction:"get_dynamicFriction"})});
var vk=function(){this.zpp_inner=null};g["nape.dynamics.Contact"]=vk;vk.__name__=["nape","dynamics","Contact"];vk.prototype={toString:function(){return null==this.zpp_inner.arbiter||this.zpp_inner.arbiter.cleared?"{object-pooled}":"{Contact}"},__class__:vk};var kd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.dynamics.ContactIterator"]=kd;kd.__name__=["nape","dynamics","ContactIterator"];kd.get=function(a){var b;null==kd.zpp_pool?(mg.internal=!0,b=new kd,
mg.internal=!1):(b=kd.zpp_pool,kd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};kd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=kd.zpp_pool;kd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:kd};var fl=function(){this.zpp_inner=null};g["nape.dynamics.ContactList"]=fl;fl.__name__=
["nape","dynamics","ContactList"];fl.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1;this.zpp_inner.user_length=0;for(var a=this.zpp_inner.inner.next;null!=a;){var b=a;b.active&&b.arbiter.active&&this.zpp_inner.user_length++;a=a.next}}return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite){this.zpp_inner.at_index=
0;for(this.zpp_inner.at_ite=this.zpp_inner.inner.next;;){var b=this.zpp_inner.at_ite;if(b.active&&b.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}for(;this.zpp_inner.at_index!=a;){this.zpp_inner.at_index++;for(this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;;){b=this.zpp_inner.at_ite;if(b.active&&b.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.wrapper()},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=
kd.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:fl,__properties__:{get_length:"get_length"}};var Bi=function(){this.zpp_inner=null};g["nape.dynamics.FluidArbiter"]=Bi;Bi.__name__=["nape","dynamics","FluidArbiter"];Bi.__super__=te;Bi.prototype=k(te.prototype,{__class__:Bi});var wk=function(a,b,c,d,e,h){null==h&&(h=-1);null==e&&(e=1);null==d&&(d=-1);null==c&&(c=1);null==b&&(b=-1);null==a&&(a=1);
this.zpp_inner=null;null==Ub.zpp_pool?this.zpp_inner=new Ub:(this.zpp_inner=Ub.zpp_pool,Ub.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);null;this.zpp_inner.outer=this;this.zpp_inner.collisionGroup!=a&&(this.zpp_inner.collisionGroup=a,this.zpp_inner.invalidate());this.zpp_inner.collisionGroup;this.zpp_inner.collisionMask!=b&&(this.zpp_inner.collisionMask=b,this.zpp_inner.invalidate());this.zpp_inner.collisionMask;this.zpp_inner.sensorGroup!=c&&(this.zpp_inner.sensorGroup=c,this.zpp_inner.invalidate());
this.zpp_inner.sensorGroup;this.zpp_inner.sensorMask!=d&&(this.zpp_inner.sensorMask=d,this.zpp_inner.invalidate());this.zpp_inner.sensorMask;this.zpp_inner.fluidGroup!=e&&(this.zpp_inner.fluidGroup=e,this.zpp_inner.invalidate());this.zpp_inner.fluidGroup;this.zpp_inner.fluidMask!=h&&(this.zpp_inner.fluidMask=h,this.zpp_inner.invalidate());this.zpp_inner.fluidMask};g["nape.dynamics.InteractionFilter"]=wk;wk.__name__=["nape","dynamics","InteractionFilter"];wk.prototype={set_collisionGroup:function(a){this.zpp_inner.collisionGroup!=
a&&(this.zpp_inner.collisionGroup=a,this.zpp_inner.invalidate());return this.zpp_inner.collisionGroup},set_collisionMask:function(a){this.zpp_inner.collisionMask!=a&&(this.zpp_inner.collisionMask=a,this.zpp_inner.invalidate());return this.zpp_inner.collisionMask},set_sensorGroup:function(a){this.zpp_inner.sensorGroup!=a&&(this.zpp_inner.sensorGroup=a,this.zpp_inner.invalidate());return this.zpp_inner.sensorGroup},set_sensorMask:function(a){this.zpp_inner.sensorMask!=a&&(this.zpp_inner.sensorMask=
a,this.zpp_inner.invalidate());return this.zpp_inner.sensorMask},set_fluidGroup:function(a){this.zpp_inner.fluidGroup!=a&&(this.zpp_inner.fluidGroup=a,this.zpp_inner.invalidate());return this.zpp_inner.fluidGroup},set_fluidMask:function(a){this.zpp_inner.fluidMask!=a&&(this.zpp_inner.fluidMask=a,this.zpp_inner.invalidate());return this.zpp_inner.fluidMask},__class__:wk,__properties__:{set_fluidMask:"set_fluidMask",set_fluidGroup:"set_fluidGroup",set_sensorMask:"set_sensorMask",set_sensorGroup:"set_sensorGroup",
set_collisionMask:"set_collisionMask",set_collisionGroup:"set_collisionGroup"}};var gl=function(){this.zpp_inner=null};g["nape.dynamics.InteractionGroup"]=gl;gl.__name__=["nape","dynamics","InteractionGroup"];gl.prototype={toString:function(){var a="InteractionGroup";this.zpp_inner.ignore&&(a+=":ignore");return a},__class__:gl};var ld=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.dynamics.InteractionGroupIterator"]=ld;ld.__name__=["nape","dynamics","InteractionGroupIterator"];
ld.get=function(a){var b;null==ld.zpp_pool?(ng.internal=!0,b=new ld,ng.internal=!1):(b=ld.zpp_pool,ld.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};ld.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=ld.zpp_pool;ld.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:ld};var hl=function(){this.zpp_inner=
null};g["nape.dynamics.InteractionGroupList"]=hl;hl.__name__=["nape","dynamics","InteractionGroupList"];hl.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=
this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=ld.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:hl,__properties__:{get_length:"get_length"}};var il=function(){this.zpp_inner=null};g["nape.geom.AABB"]=
il;il.__name__=["nape","geom","AABB"];il.prototype={toString:function(){this.zpp_inner.validate();return this.zpp_inner.toString()},__class__:il};var jl=function(){this.zpp_inner=null};g["nape.geom.ConvexResult"]=jl;jl.__name__=["nape","geom","ConvexResult"];jl.prototype={toString:function(){return"{ shape: "+G.string(this.zpp_inner.shape)+" toi: "+this.zpp_inner.toiDistance+" }"},__class__:jl};var md=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.geom.ConvexResultIterator"]=
md;md.__name__=["nape","geom","ConvexResultIterator"];md.get=function(a){var b;null==md.zpp_pool?(og.internal=!0,b=new md,og.internal=!1):(b=md.zpp_pool,md.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};md.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=md.zpp_pool;md.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},
__class__:md};var kl=function(){this.zpp_inner=null};g["nape.geom.ConvexResultList"]=kl;kl.__name__=["nape","geom","ConvexResultList"];kl.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=
a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=md.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:kl,__properties__:{get_length:"get_length"}};var xk=function(){this.zpp_inner=
null};g["nape.geom.GeomPoly"]=xk;xk.__name__=["nape","geom","GeomPoly"];xk.prototype={toString:function(){var a="GeomPoly[",b=this.zpp_inner.vertices,c=this.zpp_inner.vertices;if(null!=b){do{var d=b;d!=this.zpp_inner.vertices&&(a+=",");a+="{"+d.x+","+d.y+"}";b=b.next}while(b!=c)}return a+"]"},__class__:xk};var Ac=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.geom.GeomPolyIterator"]=Ac;Ac.__name__=["nape","geom","GeomPolyIterator"];Ac.get=function(a){var b;
null==Ac.zpp_pool?(pg.internal=!0,b=new Ac,pg.internal=!1):(b=Ac.zpp_pool,Ac.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Ac.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Ac.zpp_pool;Ac.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Ac};var ll=function(){this.zpp_inner=null};g["nape.geom.GeomPolyList"]=
ll;ll.__name__=["nape","geom","GeomPolyList"];ll.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=
a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Ac.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:ll,__properties__:{get_length:"get_length"}};var ml=function(){this.zpp_inner=null};g["nape.geom.Mat23"]=ml;ml.__name__=["nape","geom","Mat23"];ml.prototype={toString:function(){return"{ a: "+
this.zpp_inner.a+" b: "+this.zpp_inner.b+" c: "+this.zpp_inner.c+" d: "+this.zpp_inner.d+" tx: "+this.zpp_inner.tx+" ty: "+this.zpp_inner.ty+" }"},__class__:ml};var nl=function(){this.zpp_inner=null};g["nape.geom.MatMN"]=nl;nl.__name__=["nape","geom","MatMN"];nl.prototype={toString:function(){for(var a="{ ",b=!0,c=0,d=this.zpp_inner.m;c<d;){var e=c++;b||(a+="; ");for(var b=!1,h=0,n=this.zpp_inner.n;h<n;)var f=h++,a=a+(this.zpp_inner.x[e*this.zpp_inner.n+f]+" ")}return a+"}"},__class__:nl};var zk=
function(a,b){this.zpp_inner=null;this.zpp_inner=new yk;this.zpp_inner.origin.set(a);this.zpp_inner.origin;this.zpp_inner.direction.set(b);this.zpp_inner.zip_dir=!0;this.zpp_inner.direction;this.zpp_inner.maxdist=Math.POSITIVE_INFINITY};g["nape.geom.Ray"]=zk;zk.__name__=["nape","geom","Ray"];zk.prototype={set_maxDistance:function(a){this.zpp_inner.maxdist=a;return this.zpp_inner.maxdist},__class__:zk,__properties__:{set_maxDistance:"set_maxDistance"}};var Ak=function(){this.zpp_inner=null};g["nape.geom.RayResult"]=
Ak;Ak.__name__=["nape","geom","RayResult"];Ak.prototype={toString:function(){return"{ shape: "+G.string(this.zpp_inner.shape)+" distance: "+this.zpp_inner.toiDistance+" ?inner: "+G.string(this.zpp_inner.inner)+" }"},__class__:Ak};var Tc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.geom.RayResultIterator"]=Tc;Tc.__name__=["nape","geom","RayResultIterator"];Tc.get=function(a){var b;null==Tc.zpp_pool?(qg.internal=!0,b=new Tc,qg.internal=!1):(b=Tc.zpp_pool,
Tc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Tc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Tc.zpp_pool;Tc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Tc};var ol=function(){this.zpp_inner=null};g["nape.geom.RayResultList"]=ol;ol.__name__=["nape","geom","RayResultList"];
ol.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,
this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Tc.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:ol,__properties__:{get_length:"get_length"}};var ha=function(a,b){null==b&&(b=0);null==a&&(a=0);this.zpp_inner=this.zpp_pool=null;this.zpp_inner=ta.get(a,b,null);this.zpp_inner.outer=this};g["nape.geom.Vec2"]=
ha;ha.__name__=["nape","geom","Vec2"];ha.weak=function(a,b){null==b&&(b=0);null==a&&(a=0);return ha.get(a,b,!0)};ha.get=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);var d;null==rg.poolVec2?d=new ha:(d=rg.poolVec2,rg.poolVec2=d.zpp_pool,d.zpp_pool=null);if(null==d.zpp_inner)d.zpp_inner=ta.get(a,b,null),d.zpp_inner.outer=d;else{var e;d.zpp_inner.validate();if(e=d.zpp_inner.x==a)d.zpp_inner.validate(),e=d.zpp_inner.y==b;e||(d.zpp_inner.x=a,d.zpp_inner.y=b,d.zpp_inner.invalidate());d}d.zpp_inner.weak=
c;return d};ha.prototype={dispose:function(){var a=this.zpp_inner;this.zpp_inner=this.zpp_inner.outer=null;this.zpp_pool=rg.poolVec2;rg.poolVec2=this;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=ta.zpp_pool;ta.zpp_pool=a},get_x:function(){this.zpp_inner.validate();return this.zpp_inner.x},set_x:function(a){this.zpp_inner.validate();this.zpp_inner.x!=a&&(this.zpp_inner.x=a,this.zpp_inner.invalidate());this.zpp_inner.validate();
return this.zpp_inner.x},get_y:function(){this.zpp_inner.validate();return this.zpp_inner.y},set_y:function(a){this.zpp_inner.validate();this.zpp_inner.y!=a&&(this.zpp_inner.y=a,this.zpp_inner.invalidate());this.zpp_inner.validate();return this.zpp_inner.y},set:function(a){var b=this.setxy(function(){a.zpp_inner.validate();return a.zpp_inner.x}(this),function(){a.zpp_inner.validate();return a.zpp_inner.y}(this));a.zpp_inner.weak?(a.dispose(),!0):!1;return b},setxy:function(a,b){var c;this.zpp_inner.validate();
if(c=this.zpp_inner.x==a)this.zpp_inner.validate(),c=this.zpp_inner.y==b;c||(this.zpp_inner.x=a,this.zpp_inner.y=b,this.zpp_inner.invalidate());return this},sub:function(a,b){null==b&&(b=!1);var c=ha.get(function(a){a.zpp_inner.validate();return a.zpp_inner.x}(this)-function(){a.zpp_inner.validate();return a.zpp_inner.x}(this),function(a){a.zpp_inner.validate();return a.zpp_inner.y}(this)-function(){a.zpp_inner.validate();return a.zpp_inner.y}(this),b);a.zpp_inner.weak?(a.dispose(),!0):!1;return c},
muleq:function(a){return this.setxy(function(a){a.zpp_inner.validate();return a.zpp_inner.x}(this)*a,function(a){a.zpp_inner.validate();return a.zpp_inner.y}(this)*a)},toString:function(){this.zpp_inner.validate();return this.zpp_inner.toString()},__class__:ha,__properties__:{set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x"}};var jc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.geom.Vec2Iterator"]=jc;jc.__name__=["nape","geom","Vec2Iterator"];
jc.get=function(a){var b;null==jc.zpp_pool?(of.internal=!0,b=new jc,of.internal=!1):(b=jc.zpp_pool,jc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};jc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.zpp_gl();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=jc.zpp_pool;jc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:jc};var Oe=function(){this.zpp_inner=
null;this.zpp_inner=new of;this.zpp_inner.outer=this};g["nape.geom.Vec2List"]=Oe;Oe.__name__=["nape","geom","Vec2List"];Oe.prototype={zpp_gl:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=
a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},push:function(a){this.zpp_inner.modify_test();this.zpp_vm();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-
1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},empty:function(){return 0==this.zpp_gl()},iterator:function(){this.zpp_vm();return jc.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Oe};var pl=function(){this.zpp_inner=
null};g["nape.geom.Vec3"]=pl;pl.__name__=["nape","geom","Vec3"];pl.prototype={toString:function(){this.zpp_inner.validate();var a="{ x: "+this.zpp_inner.x+" y: ";this.zpp_inner.validate();a=a+this.zpp_inner.y+" z: ";this.zpp_inner.validate();return a+this.zpp_inner.z+" }"},__class__:pl};var sg=function(){};g["nape.geom.Winding"]=sg;sg.__name__=["nape","geom","Winding"];sg.prototype={toString:function(){var a;null==f.Winding_UNDEFINED&&(f.internal=!0,f.Winding_UNDEFINED=new sg,f.internal=!1);this==
f.Winding_UNDEFINED?a="UNDEFINED":(null==f.Winding_CLOCKWISE&&(f.internal=!0,f.Winding_CLOCKWISE=new sg,f.internal=!1),this==f.Winding_CLOCKWISE?a="CLOCKWISE":(null==f.Winding_ANTICLOCKWISE&&(f.internal=!0,f.Winding_ANTICLOCKWISE=new sg,f.internal=!1),a=this==f.Winding_ANTICLOCKWISE?"ANTICLOCKWISE":""));return a},__class__:sg};var Ad=function(){this.zpp_inner_i=null};g["nape.phys.Interactor"]=Ad;Ad.__name__=["nape","phys","Interactor"];Ad.prototype={get_userData:function(){null==this.zpp_inner_i.userData&&
(this.zpp_inner_i.userData={});return this.zpp_inner_i.userData},get_castBody:function(){return null!=this.zpp_inner_i.ibody?this.zpp_inner_i.ibody.outer:null},get_cbTypes:function(){null==this.zpp_inner_i.wrap_cbTypes&&this.zpp_inner_i.setupcbTypes();return this.zpp_inner_i.wrap_cbTypes},toString:function(){return""},__class__:Ad,__properties__:{get_cbTypes:"get_cbTypes",get_castBody:"get_castBody",get_userData:"get_userData"}};var tg=function(a,b){this.zpp_inner_i=this.zpp_inner=null;this.zpp_inner=
new Ib;this.zpp_inner.outer=this;this.zpp_inner.outer_i=this;this.zpp_inner_i=this.zpp_inner;null!=b?(b.zpp_inner.validate(),this.zpp_inner.posx=b.zpp_inner.x,b.zpp_inner.validate(),this.zpp_inner.posy=b.zpp_inner.y):(this.zpp_inner.posx=0,this.zpp_inner.posy=0);this.set_type(null==a?function(){null==f.BodyType_DYNAMIC&&(f.internal=!0,f.BodyType_DYNAMIC=new Jb,f.internal=!1);return f.BodyType_DYNAMIC}(this):a);null!=b&&(b.zpp_inner.weak?(b.dispose(),!0):!1);this.zpp_inner_i.insert_cbtype(ic.ANY_BODY.zpp_inner)};
g["nape.phys.Body"]=tg;tg.__name__=["nape","phys","Body"];tg.__super__=Ad;tg.prototype=k(Ad.prototype,{set_type:function(a){this.zpp_inner.immutable_midstep("Body::type");Ib.types[this.zpp_inner.type]!=a&&(null==f.BodyType_DYNAMIC&&(f.internal=!0,f.BodyType_DYNAMIC=new Jb,f.internal=!1),a==f.BodyType_DYNAMIC?a=f.id_BodyType_DYNAMIC:(null==f.BodyType_KINEMATIC&&(f.internal=!0,f.BodyType_KINEMATIC=new Jb,f.internal=!1),a=a==f.BodyType_KINEMATIC?f.id_BodyType_KINEMATIC:f.id_BodyType_STATIC),a==f.id_BodyType_STATIC&&
null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,this.zpp_inner.angvel=0),this.zpp_inner.invalidate_type(),null!=this.zpp_inner.space?this.zpp_inner.space.transmitType(this.zpp_inner,a):this.zpp_inner.type=a);return Ib.types[this.zpp_inner.type]},set_isBullet:function(a){this.zpp_inner.bulletEnabled=a;return this.zpp_inner.bulletEnabled},get_space:function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},get_position:function(){null==this.zpp_inner.wrap_pos&&
this.zpp_inner.setupPosition();return this.zpp_inner.wrap_pos},set_position:function(a){null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();this.zpp_inner.wrap_pos.set(a);null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();return this.zpp_inner.wrap_pos},get_velocity:function(){null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();return this.zpp_inner.wrap_vel},setVelocityFromTarget:function(a,b,c){c=1/c;null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();this.zpp_inner.wrap_vel.set(a.sub(function(a){null==
a.zpp_inner.wrap_pos&&a.zpp_inner.setupPosition();return a.zpp_inner.wrap_pos}(this),!0).muleq(c));this.set_angularVel((b-this.zpp_inner.rot)*c);a.zpp_inner.weak?(a.dispose(),!0):!1;return this},set_force:function(a){null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce();this.zpp_inner.wrap_force.set(a);null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce();return this.zpp_inner.wrap_force},set_rotation:function(a){this.zpp_inner.immutable_midstep("Body::rotation");this.zpp_inner.rot!=
a&&(this.zpp_inner.rot=a,this.zpp_inner.invalidate_rot(),this.zpp_inner.wake());return this.zpp_inner.rot},set_angularVel:function(a){this.zpp_inner.angvel!=a&&(this.zpp_inner.angvel=a,this.zpp_inner.wake());return this.zpp_inner.angvel},set_allowRotation:function(a){this.zpp_inner.immutable_midstep("Body::"+(null==a?"null":""+a));!this.zpp_inner.norotate!=a&&(this.zpp_inner.norotate=!a,this.zpp_inner.invalidate_inertia());return!this.zpp_inner.norotate},set_mass:function(a){this.zpp_inner.immutable_midstep("Body::mass");
this.zpp_inner.massMode=f.id_MassMode_FIXED;this.zpp_inner.cmass=a;this.zpp_inner.invalidate_mass();this.zpp_inner.validate_mass();return this.zpp_inner.cmass},set_gravMassScale:function(a){this.zpp_inner.immutable_midstep("Body::gravMassScale");this.zpp_inner.gravMassMode=f.id_GravMassMode_SCALED;this.zpp_inner.gravMassScale=a;this.zpp_inner.invalidate_gravMassScale();this.zpp_inner.validate_gravMassScale();return this.zpp_inner.gravMassScale},localPointToWorld:function(a,b){null==b&&(b=!1);this.zpp_inner.validate_axis();
var c=0,d=0,c=this.zpp_inner.axisy;a.zpp_inner.validate();c*=a.zpp_inner.x;d=this.zpp_inner.axisx;a.zpp_inner.validate();c-=d*a.zpp_inner.y;a.zpp_inner.validate();d=a.zpp_inner.x*this.zpp_inner.axisx;a.zpp_inner.validate();d+=a.zpp_inner.y*this.zpp_inner.axisy;a.zpp_inner.weak?(a.dispose(),!0):!1;return ha.get(c+this.zpp_inner.posx,d+this.zpp_inner.posy,b)},applyImpulse:function(a,b,c){null==c&&(c=!1);if(c&&this.zpp_inner.component.sleeping)return a.zpp_inner.weak?(a.dispose(),!0):!1,null!=b&&(b.zpp_inner.weak?
(b.dispose(),!0):!1),this;this.zpp_inner.validate_mass();var d=this.zpp_inner.imass,e=this.zpp_inner,h=this.zpp_inner.velx;a.zpp_inner.validate();e.velx=h+a.zpp_inner.x*d;e=this.zpp_inner;h=this.zpp_inner.vely;a.zpp_inner.validate();e.vely=h+a.zpp_inner.y*d;if(null!=b){var n=0,d=0;b.zpp_inner.validate();n=b.zpp_inner.x-this.zpp_inner.posx;b.zpp_inner.validate();d=b.zpp_inner.y-this.zpp_inner.posy;this.zpp_inner.validate_inertia();e=this.zpp_inner;h=this.zpp_inner.angvel;a.zpp_inner.validate();n*=
a.zpp_inner.y;a.zpp_inner.validate();e.angvel=h+(n-a.zpp_inner.x*d)*this.zpp_inner.iinertia;b.zpp_inner.weak?(b.dispose(),!0):!1}c||this.zpp_inner.type==f.id_BodyType_DYNAMIC&&this.zpp_inner.wake();a.zpp_inner.weak?(a.dispose(),!0):!1;return this},toString:function(){return(this.zpp_inner.world?"(space::world":"("+(this.zpp_inner.type==f.id_BodyType_DYNAMIC?"dynamic":this.zpp_inner.type==f.id_BodyType_STATIC?"static":"kinematic"))+")#"+this.zpp_inner_i.id},__class__:tg,__properties__:k(Ad.prototype.__properties__,
{set_gravMassScale:"set_gravMassScale",set_mass:"set_mass",set_allowRotation:"set_allowRotation",set_angularVel:"set_angularVel",set_rotation:"set_rotation",set_force:"set_force",get_velocity:"get_velocity",set_position:"set_position",get_position:"get_position",get_space:"get_space",set_isBullet:"set_isBullet",set_type:"set_type"})});var Bd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.phys.BodyIterator"]=Bd;Bd.__name__=["nape","phys","BodyIterator"];
Bd.get=function(a){var b;null==Bd.zpp_pool?(Kb.internal=!0,b=new Bd,Kb.internal=!1):(b=Bd.zpp_pool,Bd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Bd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Bd.zpp_pool;Bd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Bd};var Bk=function(){this.zpp_inner=
null;this.zpp_inner=new Kb;this.zpp_inner.outer=this};g["nape.phys.BodyList"]=Bk;Bk.__name__=["nape","phys","BodyList"];Bk.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=
a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?
null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?
null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==
a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Bd.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Bk,__properties__:{get_length:"get_length"}};var Jb=function(){};g["nape.phys.BodyType"]=
Jb;Jb.__name__=["nape","phys","BodyType"];Jb.prototype={toString:function(){var a;null==f.BodyType_STATIC&&(f.internal=!0,f.BodyType_STATIC=new Jb,f.internal=!1);this==f.BodyType_STATIC?a="STATIC":(null==f.BodyType_DYNAMIC&&(f.internal=!0,f.BodyType_DYNAMIC=new Jb,f.internal=!1),this==f.BodyType_DYNAMIC?a="DYNAMIC":(null==f.BodyType_KINEMATIC&&(f.internal=!0,f.BodyType_KINEMATIC=new Jb,f.internal=!1),a=this==f.BodyType_KINEMATIC?"KINEMATIC":""));return a},__class__:Jb};var Ck=function(){this.zpp_inner=
null};g["nape.phys.Compound"]=Ck;Ck.__name__=["nape","phys","Compound"];Ck.__super__=Ad;Ck.prototype=k(Ad.prototype,{toString:function(){return"Compound"+this.zpp_inner_i.id},__class__:Ck});var Od=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.phys.CompoundIterator"]=Od;Od.__name__=["nape","phys","CompoundIterator"];Od.get=function(a){var b;null==Od.zpp_pool?(ue.internal=!0,b=new Od,ue.internal=!1):(b=Od.zpp_pool,Od.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=
a;b.zpp_critical=!1;return b};Od.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Od.zpp_pool;Od.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Od};var Dk=function(){this.zpp_inner=null;this.zpp_inner=new ue;this.zpp_inner.outer=this};g["nape.phys.CompoundList"]=Dk;Dk.__name__=["nape","phys","CompoundList"];
Dk.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,
this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Od.get(this);c.hasNext();){var d;
c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Dk,__properties__:{get_length:"get_length"}};var Pe=function(a,b){null==b&&(b=1);null==a&&(a=1);this.zpp_inner=null;null==Pd.zpp_pool?this.zpp_inner=new Pd:(this.zpp_inner=Pd.zpp_pool,Pd.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);null;this.zpp_inner.outer=this;a!=1E3*this.zpp_inner.density&&(this.zpp_inner.density=a/1E3,this.zpp_inner.invalidate());1E3*this.zpp_inner.density;
b!=this.zpp_inner.viscosity&&(this.zpp_inner.viscosity=b/1,this.zpp_inner.invalidate());this.zpp_inner.viscosity};g["nape.phys.FluidProperties"]=Pe;Pe.__name__=["nape","phys","FluidProperties"];Pe.prototype={set_density:function(a){a!=1E3*this.zpp_inner.density&&(this.zpp_inner.density=a/1E3,this.zpp_inner.invalidate());return 1E3*this.zpp_inner.density},set_viscosity:function(a){a!=this.zpp_inner.viscosity&&(this.zpp_inner.viscosity=a/1,this.zpp_inner.invalidate());return this.zpp_inner.viscosity},
toString:function(){return"{ density: "+1E3*this.zpp_inner.density+" viscosity: "+this.zpp_inner.viscosity+" gravity: "+G.string(this.zpp_inner.wrap_gravity)+" }"},__class__:Pe,__properties__:{set_viscosity:"set_viscosity",set_density:"set_density"}};var ug=function(){};g["nape.phys.GravMassMode"]=ug;ug.__name__=["nape","phys","GravMassMode"];ug.prototype={toString:function(){var a;null==f.GravMassMode_DEFAULT&&(f.internal=!0,f.GravMassMode_DEFAULT=new ug,f.internal=!1);this==f.GravMassMode_DEFAULT?
a="DEFAULT":(null==f.GravMassMode_FIXED&&(f.internal=!0,f.GravMassMode_FIXED=new ug,f.internal=!1),this==f.GravMassMode_FIXED?a="FIXED":(null==f.GravMassMode_SCALED&&(f.internal=!0,f.GravMassMode_SCALED=new ug,f.internal=!1),a=this==f.GravMassMode_SCALED?"SCALED":""));return a},__class__:ug};var Ci=function(){};g["nape.phys.InertiaMode"]=Ci;Ci.__name__=["nape","phys","InertiaMode"];Ci.prototype={toString:function(){var a;null==f.InertiaMode_DEFAULT&&(f.internal=!0,f.InertiaMode_DEFAULT=new Ci,f.internal=
!1);this==f.InertiaMode_DEFAULT?a="DEFAULT":(null==f.InertiaMode_FIXED&&(f.internal=!0,f.InertiaMode_FIXED=new Ci,f.internal=!1),a=this==f.InertiaMode_FIXED?"FIXED":"");return a},__class__:Ci};var Qd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.phys.InteractorIterator"]=Qd;Qd.__name__=["nape","phys","InteractorIterator"];Qd.get=function(a){var b;null==Qd.zpp_pool?(vg.internal=!0,b=new Qd,vg.internal=!1):(b=Qd.zpp_pool,Qd.zpp_pool=b.zpp_next);b.zpp_i=
0;b.zpp_inner=a;b.zpp_critical=!1;return b};Qd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Qd.zpp_pool;Qd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Qd};var ql=function(){this.zpp_inner=null};g["nape.phys.InteractorList"]=ql;ql.__name__=["nape","phys","InteractorList"];ql.prototype={get_length:function(){this.zpp_inner.valmod();
this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer_i},
toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Qd.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:ql,__properties__:{get_length:"get_length"}};var Di=function(){};g["nape.phys.MassMode"]=Di;Di.__name__=["nape","phys","MassMode"];Di.prototype={toString:function(){var a;null==f.MassMode_DEFAULT&&(f.internal=!0,f.MassMode_DEFAULT=new Di,f.internal=!1);this==f.MassMode_DEFAULT?a=
"DEFAULT":(null==f.MassMode_FIXED&&(f.internal=!0,f.MassMode_FIXED=new Di,f.internal=!1),a=this==f.MassMode_FIXED?"FIXED":"");return a},__class__:Di};var Rd=function(){this.zpp_inner_i=this.zpp_inner=null};g["nape.shape.Shape"]=Rd;Rd.__name__=["nape","shape","Shape"];Rd.__super__=Ad;Rd.prototype=k(Ad.prototype,{get_body:function(){return null!=this.zpp_inner.body?this.zpp_inner.body.outer:null},set_localCOM:function(a){this.zpp_inner.immutable_midstep("Body::localCOM");null==this.zpp_inner.wrap_localCOM&&
(this.zpp_inner.type==f.id_ShapeType_CIRCLE?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM());this.zpp_inner.wrap_localCOM.set(a);null==this.zpp_inner.wrap_localCOM&&(this.zpp_inner.type==f.id_ShapeType_CIRCLE?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM());return this.zpp_inner.wrap_localCOM},set_fluidProperties:function(a){this.zpp_inner.setFluid(a.zpp_inner);this.zpp_inner.immutable_midstep("Shape::fluidProperties");null==this.zpp_inner.fluidProperties&&
this.zpp_inner.setFluid((new Pe).zpp_inner);return this.zpp_inner.fluidProperties.wrapper()},set_sensorEnabled:function(a){this.zpp_inner.immutable_midstep("Shape::sensorEnabled");this.zpp_inner.sensorEnabled=a;this.zpp_inner.wake();return this.zpp_inner.sensorEnabled},toString:function(){return(this.zpp_inner.type==f.id_ShapeType_CIRCLE?"Circle":"Polygon")+"#"+this.zpp_inner_i.id},__class__:Rd,__properties__:k(Ad.prototype.__properties__,{set_sensorEnabled:"set_sensorEnabled",set_fluidProperties:"set_fluidProperties",
set_localCOM:"set_localCOM",get_body:"get_body"})});var Fi=function(a,b,c,d){this.zpp_inner_zn=null;Rd.call(this);this.zpp_inner_zn=new Ei;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner_i=this.zpp_inner=this.zpp_inner_zn;this.zpp_inner_i.outer_i=this;this.zpp_inner.immutable_midstep("Circle::radius");a!=this.zpp_inner_zn.radius&&(this.zpp_inner_zn.radius=a,this.zpp_inner_zn.invalidate_radius());this.zpp_inner_zn.radius;null==b?(this.zpp_inner.localCOMx=0,this.zpp_inner.localCOMy=
0):(b.zpp_inner.validate(),this.zpp_inner.localCOMx=b.zpp_inner.x,b.zpp_inner.validate(),this.zpp_inner.localCOMy=b.zpp_inner.y,b.zpp_inner.weak?(b.dispose(),!0):!1);null==c?(null==sa.zpp_pool?this.zpp_inner.material=new sa:(this.zpp_inner.material=sa.zpp_pool,sa.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null),null):(this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(c.zpp_inner),this.zpp_inner.material.wrapper());null==d?(null==Ub.zpp_pool?this.zpp_inner.filter=
new Ub:(this.zpp_inner.filter=Ub.zpp_pool,Ub.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null),null):(this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(d.zpp_inner),this.zpp_inner.filter.wrapper());this.zpp_inner_i.insert_cbtype(ic.ANY_SHAPE.zpp_inner)};g["nape.shape.Circle"]=Fi;Fi.__name__=["nape","shape","Circle"];Fi.__super__=Rd;Fi.prototype=k(Rd.prototype,{__class__:Fi});var Ek=function(){this.zpp_inner=null};g["nape.shape.Edge"]=Ek;Ek.__name__=["nape",
"shape","Edge"];Ek.prototype={toString:function(){if(null==this.zpp_inner.polygon)return"Edge(object-pooled)";if(null==this.zpp_inner.polygon.body)return this.zpp_inner.polygon.validate_laxi(),"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" }";this.zpp_inner.polygon.validate_gaxi();return"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" worldNormal : "+("{ x: "+this.zpp_inner.gnormx+" y: "+this.zpp_inner.gnormy+" }")+" }"},
__class__:Ek};var Sd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.shape.EdgeIterator"]=Sd;Sd.__name__=["nape","shape","EdgeIterator"];Sd.get=function(a){var b;null==Sd.zpp_pool?(wg.internal=!0,b=new Sd,wg.internal=!1):(b=Sd.zpp_pool,Sd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Sd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;
this.zpp_next=Sd.zpp_pool;Sd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Sd};var rl=function(){this.zpp_inner=null};g["nape.shape.EdgeList"]=rl;rl.__name__=["nape","shape","EdgeList"];rl.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();
this.zpp_inner.reverse_flag&&a!=this.get_length()-1&&(a=this.get_length()-2-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Sd.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);
b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:rl,__properties__:{get_length:"get_length"}};var Bc=function(a,b,c){this.zpp_inner_zn=null;Rd.call(this);this.zpp_inner_zn=new Gi;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner_i=this.zpp_inner=this.zpp_inner_zn;this.zpp_inner_i.outer_i=this;if(a instanceof Array&&null==a.__enum__)for(var d=0;d<a.length;){var e=a[d];++d;var h=e;null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();
this.zpp_inner_zn.wrap_lverts.push(ha.get(function(){h.zpp_inner.validate();return h.zpp_inner.x}(this),function(){h.zpp_inner.validate();return h.zpp_inner.y}(this),!1))}else if(pa.__instanceof(a,Oe))for(d=a.iterator();d.hasNext();){var n;d.zpp_critical=!1;n=d.zpp_inner.at(d.zpp_i++);null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(ha.get(function(){n.zpp_inner.validate();return n.zpp_inner.x}(this),function(){n.zpp_inner.validate();return n.zpp_inner.y}(this),
!1))}else if(pa.__instanceof(a,xk)&&(d=a.zpp_inner.vertices,null!=d)){e=d;do{var f=ha.get(e.x,e.y,null),e=e.next;null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(ha.get(function(){f.zpp_inner.validate();return f.zpp_inner.x}(this),function(){f.zpp_inner.validate();return f.zpp_inner.y}(this),!1));f.dispose()}while(e!=d)}if(a instanceof Array&&null==a.__enum__)for(d=0;d<a.length;){var e=a[d],g;if(g=e.zpp_inner.weak)e.dispose(),g=!0;g?a.splice(d,
1):d++}else if(pa.__instanceof(a,Oe)){null!=a.zpp_inner._validate&&a.zpp_inner._validate();a=a.zpp_inner.inner;d=null;for(e=a.head;null!=e;)g=e.elt,g.outer.zpp_inner.weak?(e=a.erase(d),g.outer.zpp_inner.weak?(g.outer.dispose(),!0):!1):(d=e,e=e.next)}null==b?(null==sa.zpp_pool?this.zpp_inner.material=new sa:(this.zpp_inner.material=sa.zpp_pool,sa.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null),null):(this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(b.zpp_inner),
this.zpp_inner.material.wrapper());null==c?(null==Ub.zpp_pool?this.zpp_inner.filter=new Ub:(this.zpp_inner.filter=Ub.zpp_pool,Ub.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null),null):(this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(c.zpp_inner),this.zpp_inner.filter.wrapper());this.zpp_inner_i.insert_cbtype(ic.ANY_SHAPE.zpp_inner)};g["nape.shape.Polygon"]=Bc;Bc.__name__=["nape","shape","Polygon"];Bc.rect=function(a,b,c,d,e){null==e&&(e=!1);return[ha.get(a,
b,e),ha.get(a+c,b,e),ha.get(a+c,b+d,e),ha.get(a,b+d,e)]};Bc.box=function(a,b,c){null==c&&(c=!1);return Bc.rect(-a/2,-b/2,a,b,c)};Bc.regular=function(a,b,c,d,e){null==e&&(e=!1);null==d&&(d=0);for(var h=[],n=2*Math.PI/c,f=0;f<c;){var g=f++*n+d,g=ha.get(Math.cos(g)*a,Math.sin(g)*b,e);h.push(g)}return h};Bc.__super__=Rd;Bc.prototype=k(Rd.prototype,{__class__:Bc});var Td=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.shape.ShapeIterator"]=Td;Td.__name__=["nape",
"shape","ShapeIterator"];Td.get=function(a){var b;null==Td.zpp_pool?(Cd.internal=!0,b=new Td,Cd.internal=!1):(b=Td.zpp_pool,Td.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Td.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Td.zpp_pool;Td.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Td};
var Fk=function(){this.zpp_inner=null;this.zpp_inner=new Cd;this.zpp_inner.outer=this};g["nape.shape.ShapeList"]=Fk;Fk.__name__=["nape","shape","ShapeList"];Fk.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=
a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?
null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?
null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},pop:function(){this.zpp_inner.modify_test();this.zpp_inner.valmod();var a=null;if(this.zpp_inner.reverse_flag){var a=this.zpp_inner.inner.head.elt,b=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(b);this.zpp_inner.dontremove||
this.zpp_inner.inner.pop()}else{null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var b=1==this.get_length()?null:this.zpp_inner.inner.iterator_at(this.get_length()-2),a=null==b?this.zpp_inner.inner.head.elt:b.next.elt,c=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(c);this.zpp_inner.dontremove||this.zpp_inner.inner.erase(b)}this.zpp_inner.invalidate();return a.outer},shift:function(){this.zpp_inner.modify_test();this.zpp_inner.valmod();var a=
null;if(this.zpp_inner.reverse_flag){null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var b;b=1==this.get_length()?null:this.zpp_inner.inner.iterator_at(this.get_length()-2);var a=null==b?this.zpp_inner.inner.head.elt:b.next.elt,c=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(c);this.zpp_inner.dontremove||this.zpp_inner.inner.erase(b)}else a=this.zpp_inner.inner.head.elt,b=a.outer,null!=this.zpp_inner.subber&&this.zpp_inner.subber(b),this.zpp_inner.dontremove||
this.zpp_inner.inner.pop();this.zpp_inner.invalidate();return a.outer},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},clear:function(){if(this.zpp_inner.reverse_flag)for(;null!=
this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},empty:function(){return null==this.zpp_inner.inner.head},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Td.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Fk,__properties__:{get_length:"get_length"}};var Hi=function(){};g["nape.shape.ShapeType"]=Hi;Hi.__name__=["nape","shape","ShapeType"];
Hi.prototype={toString:function(){var a;null==f.ShapeType_CIRCLE&&(f.internal=!0,f.ShapeType_CIRCLE=new Hi,f.internal=!1);this==f.ShapeType_CIRCLE?a="CIRCLE":(null==f.ShapeType_POLYGON&&(f.internal=!0,f.ShapeType_POLYGON=new Hi,f.internal=!1),a=this==f.ShapeType_POLYGON?"POLYGON":"");return a},__class__:Hi};var pf=function(){};g["nape.shape.ValidationResult"]=pf;pf.__name__=["nape","shape","ValidationResult"];pf.prototype={toString:function(){var a;null==f.ValidationResult_VALID&&(f.internal=!0,f.ValidationResult_VALID=
new pf,f.internal=!1);this==f.ValidationResult_VALID?a="VALID":(null==f.ValidationResult_DEGENERATE&&(f.internal=!0,f.ValidationResult_DEGENERATE=new pf,f.internal=!1),this==f.ValidationResult_DEGENERATE?a="DEGENERATE":(null==f.ValidationResult_CONCAVE&&(f.internal=!0,f.ValidationResult_CONCAVE=new pf,f.internal=!1),this==f.ValidationResult_CONCAVE?a="CONCAVE":(null==f.ValidationResult_SELF_INTERSECTING&&(f.internal=!0,f.ValidationResult_SELF_INTERSECTING=new pf,f.internal=!1),a=this==f.ValidationResult_SELF_INTERSECTING?
"SELF_INTERSECTING":"")));return a},__class__:pf};var qf=function(){};g["nape.space.Broadphase"]=qf;qf.__name__=["nape","space","Broadphase"];qf.prototype={toString:function(){var a;null==f.Broadphase_DYNAMIC_AABB_TREE&&(f.internal=!0,f.Broadphase_DYNAMIC_AABB_TREE=new qf,f.internal=!1);this==f.Broadphase_DYNAMIC_AABB_TREE?a="DYNAMIC_AABB_TREE":(null==f.Broadphase_SWEEP_AND_PRUNE&&(f.internal=!0,f.Broadphase_SWEEP_AND_PRUNE=new qf,f.internal=!1),a=this==f.Broadphase_SWEEP_AND_PRUNE?"SWEEP_AND_PRUNE":
"");return a},__class__:qf};var Hk=function(a,b){this.zpp_inner=null;this.zpp_inner=new Gk(null==a?null:a.zpp_inner,b);this.zpp_inner.outer=this;null!=a&&(a.zpp_inner.weak?(a.dispose(),!0):!1)};g["nape.space.Space"]=Hk;Hk.__name__=["nape","space","Space"];Hk.prototype={get_gravity:function(){null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity();return this.zpp_inner.wrap_gravity},set_gravity:function(a){null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity();this.zpp_inner.wrap_gravity.set(a);
null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity();return this.zpp_inner.wrap_gravity},clear:function(){this.zpp_inner.clear()},step:function(a,b,c){null==c&&(c=10);null==b&&(b=10);this.zpp_inner.step(a,b,c)},rayCast:function(a,b,c){null==b&&(b=!1);return this.zpp_inner.rayCast(a,b,c)},__class__:Hk,__properties__:{set_gravity:"set_gravity",get_gravity:"get_gravity"}};var tb=function(a,b){null==b&&(b=!0);null==a&&(a=!1);j.call(this);wa.init();ub.setupBaseURL();w.onManifestInit.connect(tb.onManifestInit);
a&&(b?p.root.add(new va(o.gameWidth,o.gameHeight)):(tb.autoScaleEnabled=!0,p.root.add(new D),p.root.add(new Ma)))};g["nick.NickUtils"]=tb;tb.__name__=["nick","NickUtils"];tb.configure=function(a){if(null==a.nick)throw"No nick section found in config.json";if(null==a.nick.url)throw"nick.url not set in config.json";if(null!=a.nick.url&&-1<a.nick.url.indexOf("GAME_PAGE.html"))throw"nick.url requires actual game url (should not be GAME_PAGE)";for(var b=0,c=tb.staging;b<c.length;){var d=c[b];++b;Qa.DOMAIN_LIST.push(d)}tb.checkPiracy(a.nick.url)};
tb.checkPiracy=function(a){Qa.checkPiracy(a)};tb.onManifestInit=function(a,b){ub.setupManifest(b)};tb.__super__=j;tb.prototype=k(j.prototype,{get_name:function(){return"NickUtils_0"},onUpdate:function(){tb.autoScaleEnabled&&o.setScale(Ma.SCALE)},__class__:tb});var Qa=function(){};g["nicksdk.AntiPiracy"]=Qa;Qa.__name__=["nicksdk","AntiPiracy"];Qa.checkPiracy=function(a){null==a&&(a="");Qa.REDIRECT_URL=a;""==Qa.REDIRECT_URL&&(Qa.REDIRECT_URL="http://www.nick.com/games/");xg.eval("eval",["window.getDomains = function(data) {eval('list=data.domains');}"]);
xg.eval("eval",["window.getList = function() {return list;}"]);Qa.eval("var script = document.createElement('script');script.src = \"http://www.nick.com/nick-assets/games/nick_domain/NickDomain.json\";document.body.insertBefore(script, document.body.firstChild);");re.delay(function(){for(var a=null,a=xg.eval("getList"),a=pa.__cast(a,Array),c=0;c<a.length;){var d=a[c];++c;Qa.DOMAIN_LIST.push(d)}Qa.startCheck()},Qa.GET_DOMAINS_DELAY)};Qa.startCheck=function(){Qa.debug("startCheck()");var a="",b=a="",
c=!1,d=!0,a=window.location.host;try{b=window.parent.location.host}catch(e){c=!0}b!=a&&(c=!0);Qa.debug("childURL : "+a);Qa.debug("parentURL : "+b);Qa.debug("isiFrameCrossDomain : "+(null==c?"null":""+c));if(c)d=!0;else{b=0;for(c=Qa.DOMAIN_LIST;b<c.length;){var h=c[b];++b;if((new Nb(h,"i")).match(a)){d=!1;break}}}d?(Qa.debug("redirect"),re.delay(Qa.redirect,Qa.REDIRECT_DELAY)):Qa.debug("do not redirect")};Qa.redirect=function(){window.top.location.replace(Qa.REDIRECT_URL)};Qa.eval=function(a){xg.eval("eval",
["void (function() {"+a+"}())"])};Qa.debug=function(){};var xg=function(){};g["nicksdk.SDK"]=xg;xg.__name__=["nicksdk","SDK"];xg.eval=function(a,b){null==b&&(b=[]);for(var c=window,d=c,e=0,h=a.split(".");e<h.length;){var n=h[e];++e;c=d;d=B.field(c,n)}return d.apply(c,b)};var kc=function(){this.status=E.Invalid};g["stolo.ai.bt.Behavior"]=kc;kc.__name__=["stolo","ai","bt","Behavior"];kc.prototype={initialize:function(){},terminate:function(){},update:function(){return this.status},reset:function(){this.status=
E.Invalid},abort:function(){this.terminate(E.Aborted);this.status=E.Aborted},dispose:function(){},tick:function(a){this.status!=E.Running&&this.initialize();this.status=this.update(a);this.status!=E.Running&&this.terminate(this.status);return this.status},__class__:kc};var Ii=function(a,b){this.status=E.Invalid;this._action=a;this._params=b};g["stolo.ai.bt.Action"]=Ii;Ii.__name__=["stolo","ai","bt","Action"];Ii.__super__=kc;Ii.prototype=k(kc.prototype,{update:function(a){return null==this._action?
E.Failure:B.field(a,this._action).apply(a,[this._params])},dispose:function(){kc.prototype.dispose.call(this);this._params=this._action=null},__class__:Ii});var ab=function(){this.status=E.Invalid;this.children=new me};g["stolo.ai.bt.Composite"]=ab;ab.__name__=["stolo","ai","bt","Composite"];ab.__super__=kc;ab.prototype=k(kc.prototype,{initialize:function(){},addChild:function(a){this.children.add(a)},terminate:function(){for(var a=this.children.iterator();a.hasNext();){var b=a.next();b.status==E.Running&&
b.abort()}},dispose:function(){kc.prototype.dispose.call(this);for(var a=this.children.iterator();a.hasNext();)a.next().dispose();this.children=null},__class__:ab});var ke=function(){ab.call(this)};g["stolo.ai.bt.Selector"]=ke;ke.__name__=["stolo","ai","bt","Selector"];ke.__super__=ab;ke.prototype=k(ab.prototype,{initialize:function(){null!=this.children&&(this._current=this.children.iterator(),this._currentBehavior=this._current.next())},update:function(a){for(;null!=this._currentBehavior;){var b=
this._currentBehavior.tick(a);if(b!=E.Failure)return b;if(this._current.hasNext())this._currentBehavior=this._current.next();else break}return E.Failure},terminate:function(a){ab.prototype.terminate.call(this,a)},dispose:function(){ab.prototype.dispose.call(this);this._currentBehavior=this._current=null},__class__:ke});var Ji=function(){ab.call(this)};g["stolo.ai.bt.ActiveSelector"]=Ji;Ji.__name__=["stolo","ai","bt","ActiveSelector"];Ji.__super__=ke;Ji.prototype=k(ke.prototype,{initialize:function(){for(this._current=
this.children.iterator();this._current.hasNext();)this._currentBehavior=this._current.next()},update:function(a){var b=this._currentBehavior;ke.prototype.initialize.call(this);a=ke.prototype.update.call(this,a);this._currentBehavior!=b&&b.terminate(E.Aborted);return a},__class__:Ji});var E=g["stolo.ai.bt.BehaviorStatus"]={__ename__:["stolo","ai","bt","BehaviorStatus"],__constructs__:["Invalid","Success","Running","Failure","Aborted"]};E.Invalid=["Invalid",0];E.Invalid.toString=r;E.Invalid.__enum__=
E;E.Success=["Success",1];E.Success.toString=r;E.Success.__enum__=E;E.Running=["Running",2];E.Running.toString=r;E.Running.__enum__=E;E.Failure=["Failure",3];E.Failure.toString=r;E.Failure.__enum__=E;E.Aborted=["Aborted",4];E.Aborted.toString=r;E.Aborted.__enum__=E;var Ba=function(){};g["stolo.ai.bt.BehaviorTree"]=Ba;Ba.__name__=["stolo","ai","bt","BehaviorTree"];Ba.getBehaviorData=function(a,b){null==b&&(b=Ba.defaultPack);var c=b+"_"+a;if(Ba._cache.exists(c))return Ba._cache.get(c);var d=w.getJSON(a,
b);Ba._cache.set(c,d);d;if(d instanceof Array&&null==d.__enum__)throw"Unsupported format: Array";return d};Ba.fromData=function(a){if(null!=a&&null!=a.type)return Ba.createBehavior(a);var b=new ke;null!=a&&Ba.createComposite(a,b);return b};Ba.createComposite=function(a,b){for(var c,d=0,e=a.behaviors.length;d<e;)c=d++,c=a.behaviors[c],b.addChild(Ba.createBehavior(c))};Ba.createBehavior=function(a){switch(a.type){case "action":return new Ii(a.action,a.params);case "sequence":var b=new Ki;Ba.createComposite(a,
b);return b;case "random":return b=new Li,Ba.createComposite(a,b),b;case "parallel":var b=null!=a.success?Ba.policyFromString(a.success):Vb.RequireOne,c;c=null!=a.failure?Ba.policyFromString(a.failure):Vb.RequireOne;b=new Mi(b,c);Ba.createComposite(a,b);return b;case "repeat":return b=Ba.createBehavior(a.behavior),a=null!=a.count?G.parseInt(a.count):1,new Ni(b,a);case "inverter":return a=Ba.createBehavior(a.behavior),new Oi(a);case "succeeder":return a=Ba.createBehavior(a.behavior),new Pi(a);case "active":return b=
new Ji,Ba.createComposite(a,b),b;case "selector":return b=new ke,Ba.createComposite(a,b),b;case "wait":return new Qi(null!=a.time?a.time:1);case "file":return a=Ba.getBehaviorData(a.file,a.pack),Ba.fromData(a);default:throw"Unrecognized behavior type : "+G.string(a.type);}};Ba.policyFromString=function(a){switch(a){case "one":return Vb.RequireOne;case "all":return Vb.RequireAll;default:throw"Invalid policy, expected `one` or `all`.";}};var Cc=function(a){this.status=E.Invalid;this.child=a};g["stolo.ai.bt.Decorator"]=
Cc;Cc.__name__=["stolo","ai","bt","Decorator"];Cc.__super__=kc;Cc.prototype=k(kc.prototype,{terminate:function(){this.child.status==E.Running&&this.child.abort()},dispose:function(){kc.prototype.dispose.call(this);this.child=null},__class__:Cc});var Oi=function(a){Cc.call(this,a)};g["stolo.ai.bt.Inverter"]=Oi;Oi.__name__=["stolo","ai","bt","Inverter"];Oi.__super__=Cc;Oi.prototype=k(Cc.prototype,{update:function(a){a=this.child.tick(a);switch(a[1]){case 1:return E.Failure;case 3:return E.Success}return a},
__class__:Oi});var Vb=g["stolo.ai.bt.Policy"]={__ename__:["stolo","ai","bt","Policy"],__constructs__:["RequireOne","RequireAll"]};Vb.RequireOne=["RequireOne",0];Vb.RequireOne.toString=r;Vb.RequireOne.__enum__=Vb;Vb.RequireAll=["RequireAll",1];Vb.RequireAll.toString=r;Vb.RequireAll.__enum__=Vb;var Mi=function(a,b){ab.call(this);this._successPolicy=a;this._failurePolicy=b};g["stolo.ai.bt.Parallel"]=Mi;Mi.__name__=["stolo","ai","bt","Parallel"];Mi.__super__=ab;Mi.prototype=k(ab.prototype,{update:function(a){for(var b=
0,c=0,d=this.children.iterator();d.hasNext();){var e=d.next();e.status==E.Success||e.status==E.Failure||e.tick(a);switch(e.status[1]){case 1:b+=1;if(this._successPolicy==Vb.RequireOne)return E.Success;break;case 3:if(c+=1,this._failurePolicy==Vb.RequireOne)return E.Failure}}return this._failurePolicy==Vb.RequireAll&&c==this.children.length?E.Failure:this._successPolicy==Vb.RequireAll&&b==this.children.length?E.Success:E.Running},__class__:Mi});var Li=function(){ab.call(this)};g["stolo.ai.bt.Random"]=
Li;Li.__name__=["stolo","ai","bt","Random"];Li.__super__=ab;Li.prototype=k(ab.prototype,{initialize:function(){var a=Ce.array(this.children),b=Math.floor(Math.random()*a.length);this._currentBehavior=a[b]},update:function(a){return this._currentBehavior.tick(a)},terminate:function(a){ab.prototype.terminate.call(this,a)},dispose:function(){ab.prototype.dispose.call(this);this._currentBehavior=null},__class__:Li});var Ni=function(a,b){null==b&&(b=0);this.count=this._counter=0;Cc.call(this,a);this.count=
b};g["stolo.ai.bt.Repeat"]=Ni;Ni.__name__=["stolo","ai","bt","Repeat"];Ni.__super__=Cc;Ni.prototype=k(Cc.prototype,{initialize:function(){this._counter=0},update:function(a){try{for(;;){switch(this.child.tick(a)[1]){case 2:throw"__break__";case 3:return E.Failure;default:if(++this._counter==this.count)return E.Success}this.child.reset()}}catch(b){if("__break__"!=b)throw b;}return E.Invalid},__class__:Ni});var Ki=function(){ab.call(this)};g["stolo.ai.bt.Sequence"]=Ki;Ki.__name__=["stolo","ai","bt",
"Sequence"];Ki.__super__=ab;Ki.prototype=k(ab.prototype,{initialize:function(){null!=this.children&&(this._current=this.children.iterator(),this._currentBehavior=this._current.next())},update:function(a){for(;null!=this._currentBehavior;){var b=this._currentBehavior.tick(a);if(b!=E.Success)return b;if(this._current.hasNext())this._currentBehavior=this._current.next();else break}return E.Success},terminate:function(a){ab.prototype.terminate.call(this,a)},dispose:function(){ab.prototype.dispose.call(this);
this._currentBehavior=this._current=null},__class__:Ki});var Pi=function(a){Cc.call(this,a)};g["stolo.ai.bt.Succeeder"]=Pi;Pi.__name__=["stolo","ai","bt","Succeeder"];Pi.__super__=Cc;Pi.prototype=k(Cc.prototype,{update:function(a){a=this.child.tick(a);switch(a[1]){case 3:return E.Success}return a},__class__:Pi});var Qi=function(a){this.status=E.Invalid;this._time=a};g["stolo.ai.bt.Wait"]=Qi;Qi.__name__=["stolo","ai","bt","Wait"];Qi.__super__=kc;Qi.prototype=k(kc.prototype,{initialize:function(){this._countTimer=
this._time},update:function(a){this._countTimer-=a.behaviorTickRate;return 0>=this._countTimer?E.Success:E.Running},__class__:Qi});var x=function(){};g["stolo.animation.Animate"]=x;x.__name__=["stolo","animation","Animate"];x.delayCallTo=function(a,b,c){if(0>=b)a();else{null==c&&(c=p.root);var d=c._compMap.Script_24;null==d&&(d=new Eb,c.add(d));d.run(new fb([new Z(b),new ga(a)]))}};x.kill=function(a){x.removeSequence(a)};x.killAll=function(){for(var a=x.tweens.iterator();a.hasNext();)a.next().dispose();
x.tweens=new Sb};x.removeSequence=function(a){if(null!=x.tweens.h.__keys__[a.__id__]){var b=x.tweens.h[a.__id__];x.tweens.remove(a);b.dispose()}};x.to=function(a,b,c,d){if(null==a)return null;c=x.checkTweenParams(c,d);x.kill(a);d=new yg(a,c.entity);d.to(b,c.time,c.ease,c.delay,c.origin);x.tweens.set(a,d);d.run(null,c.onComplete,c.onStart);return d};x.from=function(a,b,c,d){if(null==a)return null;c=x.checkTweenParams(c,d);x.kill(a);d=new yg(a,c.entity);d.from(b,c.time,c.ease,c.delay,c.origin);x.tweens.set(a,
d);d.run(null,c.onComplete,c.onStart);return d};x.checkTweenParams=function(a,b){0<a&&(a={time:a});null==a&&(a={});null==a.time&&(a.time=x.DefaultTime);null!=b&&(a.ease=b);null==a.ease&&(a.ease=x.DefaultEase);return a};x.runTemplate=function(a,b,c){for(var d=null,e=0;e<a.length;){var h=a[e];++e;if(null!=h.then){if(null==d)throw"'then' can be used only after 'to' or 'from' sequences";d.then(h.then,h.time,h.ease,h.delay,null!=c?c.origin:null)}else if(null!=h.to||null!=h.from)if(null!=c?(d={time:h.time,
ease:h.ease},d.delay=c.delay,d.onStart=c.onStart,d.onComplete=c.onComplete,d.origin=c.origin):d=h,null!=h.to)d=x.to(b,h.to,d);else if(null!=h.from)d=x.from(b,h.from,d);else throw"Unsupported tween data:"+G.string(h);else null!=h.delay&&0<h.delay&&d.addDelay(h.delay)}return d};var sl=function(){};g["stolo.animation.Animations"]=sl;sl.__name__=["stolo","animation","Animations"];var Jd=function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=new O(a);this.y=new O(b);this.z=new O(c)};g["stolo.animation.behaviors.AnimatedPoint"]=
Jd;Jd.__name__=["stolo","animation","behaviors","AnimatedPoint"];Jd.__interfaces__=[oe];Jd.prototype={dispose:function(){this.z=this.y=this.x=null},setXY:function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.x.set__(a);this.y.set__(b);c&&(this.x.set_behavior(null),this.y.set_behavior(null))},update:function(a){this.x.update(a);this.y.update(a);this.z.update(a);return 0},isComplete:function(){return null!=this.x._behavior&&!this.x._behavior.isComplete()||null!=this.y._behavior&&!this.y._behavior.isComplete()||
null!=this.z._behavior&&!this.z._behavior.isComplete()?!1:!0},__class__:Jd};var si=function(a){this.rect=null!=a?pa.__instanceof(a,D)?this.maskSprite(a):a:new Nc(0,0,0,0);this.x=new O(this.rect.x);this.y=new O(this.rect.y);this.width=new O(this.rect.width);this.height=new O(this.rect.height)};g["stolo.animation.behaviors.AnimatedRect"]=si;si.__name__=["stolo","animation","behaviors","AnimatedRect"];si.__interfaces__=[oe];si.prototype={maskSprite:function(a){return this.rect=a.scissor=new Nc(0,0,a.getNaturalWidth(),
a.getNaturalHeight())},update:function(a){this.x.update(a);this.y.update(a);this.width.update(a);this.height.update(a);null!=this.rect&&(this.rect.x=this.x._value,this.rect.y=this.y._value,this.rect.width=this.width._value,this.rect.height=this.height._value);return 0},isComplete:function(){return null!=this.x._behavior&&!this.x._behavior.isComplete()||null!=this.y._behavior&&!this.y._behavior.isComplete()||null!=this.width._behavior&&!this.width._behavior.isComplete()||null!=this.height._behavior&&
!this.height._behavior.isComplete()?!1:!0},__class__:si};var Fb=function(a,b,c,d,e){null==c&&(c=-1);null==b&&(b=-1);null==a&&(a=-1);this.value=this.velocity=this.force=this.diff=0;this.maxVelocity=0<e?e:Fb.defaultMaxVelocity;this.stiffness=new O(0<=a?a:Fb.defaultStiffness);this.damping=new O(0<=b?b:Fb.defaultDamping);this.mass=new O(0<=c?c:Fb.defaultMass);this.target=d;null==this.target&&(this.target=new O(0),this.updateTarget=!0)};g["stolo.animation.behaviors.AnimatedSpring"]=Fb;Fb.__name__=["stolo",
"animation","behaviors","AnimatedSpring"];Fb.__interfaces__=[oe];Fb.prototype={setTargetValue:function(a){this.target.set__(a);return this.target},update:function(a){this.updateTarget&&this.target.update(a);this.stiffness.update(a);this.damping.update(a);this.mass.update(a);this.diff=this.target._value-this.value;0.01<Math.abs(this.diff)?(this.force=this.stiffness._value*this.diff-this.damping._value*this.velocity,this.velocity+=this.force/this.mass._value,0<this.maxVelocity&&(this.velocity>this.maxVelocity?
this.velocity=this.maxVelocity:this.velocity<-this.maxVelocity&&(this.velocity=-this.maxVelocity)),this.value+=this.velocity):this.isComplete()&&(this.diff=0,this.value=this.target._value);return this.value},isComplete:function(){return 0.01>Math.abs(this.velocity)},__class__:Fb};var Ud=function(a,b){null==b&&(b=0);this.onComplete=new ua;this.onStart=new ua;this.autoDispose=!0;this.isRunning=!1;fb.call(this);null!=a&&(this._entity=a);this.setDelay(b);this.add(new ga((hc=this.onStart,m(hc,hc.emit))))};
g["stolo.animation.sequences.AnimationSequence"]=Ud;Ud.__name__=["stolo","animation","sequences","AnimationSequence"];Ud.__super__=fb;Ud.prototype=k(fb.prototype,{dispose:function(){this._ownScript&&null!=this._script&&(null!=this._script.owner&&this._script.owner.dispose(),this._script.stopAll(),this._script.dispose());this.onComplete=this.onStart=this._entity=this._script=null;this.isRunning=!1;this.removeAll()},setDelay:function(a){0<a&&this.add(new Z(a))},addDelay:function(a){this.add(new Z(a))},
run:function(a,b,c){null!=a&&(this._entity=a);if(null==this._entity)throw"Please run on an Entity";this._script=this._entity._compMap.Script_24;null==this._script&&(this._ownScript=!0,this._script=new Eb,this._entity.addChild((new z).add(this._script)));this.add(new ga((hc=this.onComplete,m(hc,hc.emit))));if(null!=c)this.onStart.connect(c).once();if(null!=b)this.onComplete.connect(b).once();this.onComplete.connect(m(this,this.onSequenceComplete)).once();this.isRunning=!0;this._script.run(this)},onSequenceComplete:function(){this.autoDispose&&
this.dispose();this.isRunning=!1},__class__:Ud});var Qe=function(a){Ud.call(this,a)};g["stolo.animation.sequences.ShakeSequence"]=Qe;Qe.__name__=["stolo","animation","sequences","ShakeSequence"];Qe.shake=function(a,b,c,d,e){null==d&&(d=60);null==c&&(c=1);a=new Qe(a);a.sineShake(b,c,d,e);return a};Qe.__super__=Ud;Qe.prototype=k(Ud.prototype,{sineShake:function(a,b,c,d){null==c&&(c=60);null==b&&(b=1);if(null==a)throw"No shakeProp set!";c=new Ob(0.5*-c,0.5*c,0.05);c.speed.animateTo(0.3*b,0.75*b,q.sineInOut);
a.set_behavior(c);this.add(new Z(0.75*b));this.add(new fd(a,0,0.25*b,q.sineInOut));this.run(null,d)},__class__:Qe});var yg=function(a,b){this._target=a;this._entity=b;null==b&&(b=a.owner);null==b&&(b=p.root);Ud.call(this,b)};g["stolo.animation.sequences.TweenSequence"]=yg;yg.__name__=["stolo","animation","sequences","TweenSequence"];yg.__super__=Ud;yg.prototype=k(Ud.prototype,{dispose:function(){Ud.prototype.dispose.call(this);null!=this._target&&(null!=x.tweens.h.__keys__[this._target.__id__]&&x.tweens.remove(this._target),
this._target=null)},to:function(a,b,c,d,e){null==d&&(d=0);null==c&&(c=x.DefaultEase);if(0>b||null==b)b=x.DefaultTime;this.setDelay(d);this.add(this.getActions(a,b,c,!1,e));return this},from:function(a,b,c,d,e){null==d&&(d=0);null==c&&(c=x.DefaultEase);if(0>b||null==b)b=x.DefaultTime;this.setDelay(d);this.add(this.getActions(a,b,c,!0,e));return this},then:function(a,b,c,d,e){null==d&&(d=0);null==c&&(c=x.DefaultEase);if(0>b||null==b)b=x.DefaultTime;this.isRunning&&this._runningActions.pop();0<d&&this.add(new Z(d));
this.add(this.getActions(a,b,c,!1,e));this.isRunning&&this.add(new ga((hc=this.onComplete,m(hc,hc.emit))));return this},getActions:function(a,b,c,d,e){null==d&&(d=!1);for(var h=[],n,f,g=0,i=B.fields(a);g<i.length;){var s=i[g];++g;n=B.field(this._target,s);if(null==n)throw"Cannot find property '"+s+"' to animate";var j=B.field(a,s);f=n._value;null!=e&&Object.prototype.hasOwnProperty.call(e,s)&&(f=B.field(e,s));"string"==typeof j&&(j=ba.mod(f,j));d&&(n.set__(j),j=f);h.push(new fd(n,j,b,c))}return new gd(h)},
__class__:yg});var Vd=g["stolo.display.particles.EmitterType"]={__ename__:["stolo","display","particles","EmitterType"],__constructs__:["Gravity","Radial"]};Vd.Gravity=["Gravity",0];Vd.Gravity.toString=r;Vd.Gravity.__enum__=Vd;Vd.Radial=["Radial",1];Vd.Radial.toString=r;Vd.Radial.__enum__=Vd;var Za=function(a,b){this.direction=1;this.tangentialAccelVariance=new O(0);this.tangentialAccel=new O(0);this.radialAccelVariance=new O(0);this.radialAccel=new O(0);this.speedVariance=new O(0);this.speed=new O(0);
this.sizeEndVariance=new O(0);this.sizeEnd=new O(0);this.sizeStartVariance=new O(0);this.sizeStart=new O(0);this.rotationEndVariance=new O(0);this.rotationEnd=new O(0);this.rotationStartVariance=new O(0);this.rotationStart=new O(0);this.rotatePerSecondVariance=new O(0);this.rotatePerSecond=new O(0);this.lifespan=new O(0);this.lifespanVariance=new O(0);this.minRadius=new O(0);this.maxRadiusVariance=new O(0);this.maxRadius=new O(0);this.gravityY=new O(0);this.gravityX=new O(0);this.angleVariance=new O(0);
this.angle=new O(0);this.alphaEndVariance=new O(0);this.alphaEnd=new O(0);this.alphaStartVariance=new O(0);this.alphaStart=new O(0);this.emitYVariance=new O(0);this.emitY=new O(0);this.emitXVariance=new O(0);this.emitX=new O(0);this.enabled=!0;this.emitElapsed=this.totalElapsed=this.numParticles=this.duration=0;null!=a&&null!=b&&ma.setEmitter(this,a,b);D.call(this)};g["stolo.display.particles.Emitter"]=Za;Za.__name__=["stolo","display","particles","Emitter"];Za.random=function(a,b){0!=b&&(a+=b*(2*
Math.random()-1));return a};Za.__super__=D;Za.prototype=k(D.prototype,{onAdded:function(){this.build()},build:function(){this.particles=Array(this._maxParticles);for(var a=0,b=this.particles.length;a<b;)this.particles[a]=new Ri,++a},restart:function(){this.enabled=!0;this.totalElapsed=0},clearParticles:function(){this.numParticles=0},onUpdate:function(a){D.prototype.onUpdate.call(this,a);this.alphaEnd.update(a);this.alphaEndVariance.update(a);this.alphaStart.update(a);this.alphaStartVariance.update(a);
this.angle.update(a);this.angleVariance.update(a);this.emitX.update(a);this.emitXVariance.update(a);this.emitY.update(a);this.emitYVariance.update(a);this.gravityX.update(a);this.gravityY.update(a);this.lifespan.update(a);this.lifespanVariance.update(a);this.maxRadius.update(a);this.maxRadiusVariance.update(a);this.minRadius.update(a);this.radialAccel.update(a);this.radialAccelVariance.update(a);this.rotatePerSecond.update(a);this.rotatePerSecondVariance.update(a);this.rotationEnd.update(a);this.rotationEndVariance.update(a);
this.rotationStart.update(a);this.rotationStartVariance.update(a);this.sizeEnd.update(a);this.sizeEndVariance.update(a);this.sizeStart.update(a);this.sizeStartVariance.update(a);this.speed.update(a);this.speedVariance.update(a);this.tangentialAccel.update(a);this.tangentialAccelVariance.update(a);for(var b=this.type==Vd.Gravity,c=0;c<this.numParticles;){var d=this.particles[c];if(d.life>a){if(b){d.x+=d.velX*a;d.y+=d.velY*a;var e=this.gravityX._value,h=-this.gravityY._value;if(0!=d.radialAccel||0!=
d.tangentialAccel)var n=d.x-d.emitX,f=d.y-d.emitY,g=Math.sqrt(n*n+f*f),n=n/g,f=f/g,e=e+n*d.radialAccel,h=h+f*d.radialAccel,g=n,e=e+-f*d.tangentialAccel,h=h+g*d.tangentialAccel;d.velX+=e*a;d.velY+=h*a}else d.radialRotation+=d.velRadialRotation*a,d.radialRadius+=d.velRadialRadius*a,e=d.radialRadius,d.x=this.emitX._value-Math.cos(d.radialRotation)*e,d.y=this.emitY._value-Math.sin(d.radialRotation)*e,e<this.minRadius._value&&(d.life=0);d.scale+=d.velScale*a;d.rotation+=d.velRotation*a;d.alpha+=d.velAlpha*
a;d.life-=a;++c}else--this.numParticles,c!=this.numParticles&&(this.particles[c]=this.particles[this.numParticles],this.particles[this.numParticles]=d)}if(this.enabled){if(0<this.duration&&(this.totalElapsed+=a,this.totalElapsed>=this.duration)){this.enabled=!1;return}b=this.lifespan._value/this.particles.length;for(this.emitElapsed+=a;this.emitElapsed>=b;)this.numParticles<this.particles.length&&this.initParticle(this.particles[this.numParticles])&&++this.numParticles,this.emitElapsed-=b}},draw:function(a){for(var b=
0,c=this.numParticles;b<c;){var d=this.particles[b];a.save();a.translate(d.x,d.y);d.draw(a);a.restore();++b}},getRandomTexture:function(){return 1>=this.textures.length?this.textures[0]:this.textures[Math.floor(Math.random()*this.textures.length)]},getRandomColor:function(){return null==this.colors?16777215:1>=this.colors.length?this.colors[0]:this.colors[Math.round(Math.random()*this.colors.length)]},initParticle:function(a){a.life=Za.random(this.lifespan._value,this.lifespanVariance._value);if(0>=
a.life)return!1;a.emitX=this.emitX._value;a.emitY=this.emitY._value;var b=-aa.toRadians(Za.random(this.angle._value,this.angleVariance._value)),c=Za.random(this.speed._value,this.speedVariance._value)*this.direction;a.velX=c*Math.cos(b);a.velY=c*Math.sin(b);a.radialAccel=Za.random(this.radialAccel._value,this.radialAccelVariance._value);a.tangentialAccel=Za.random(this.tangentialAccel._value,this.tangentialAccelVariance._value);a.radialRadius=Za.random(this.maxRadius._value,this.maxRadiusVariance._value);
a.velRadialRadius=-a.radialRadius/a.life;a.radialRotation=b;a.velRadialRotation=aa.toRadians(Za.random(this.rotatePerSecond._value,this.rotatePerSecondVariance._value));this.type==Vd.Gravity?(a.x=Za.random(this.emitX._value,this.emitXVariance._value),a.y=Za.random(this.emitY._value,this.emitYVariance._value)):(b=a.radialRadius,a.x=this.emitX._value-Math.cos(a.radialRotation)*b,a.y=this.emitY._value-Math.sin(a.radialRotation)*b);null!=this.textures&&0<this.textures.length?(a.texture=this.getRandomTexture(a),
a.width=a.texture.get_width(),a.height=a.texture.get_height()):(a.color=this.getRandomColor(a),a.width=0<this.particleWidth?this.particleWidth:this.particleHeight,a.height=0<this.particleHeight?this.particleHeight:this.particleWidth);c=a.width;a.offsetX=-a.width/2;a.offsetY=-a.height/2;b=Za.random(this.sizeStart._value,this.sizeStartVariance._value)/c;c=Za.random(this.sizeEnd._value,this.sizeEndVariance._value)/c;a.scale=b;a.velScale=(c-b)/a.life;b=Za.random(this.rotationStart._value,this.rotationStartVariance._value);
c=Za.random(this.rotationEnd._value,this.rotationEndVariance._value);a.rotation=b;a.velRotation=(c-b)/a.life;b=Za.random(this.alphaStart._value,this.alphaStartVariance._value);c=Za.random(this.alphaEnd._value,this.alphaEndVariance._value);a.alpha=b;a.velAlpha=(c-b)/a.life;a.direction=this.direction;return!0},set_maxParticles:function(a){this._maxParticles=a;if(null==this.particles)return this._maxParticles;var b=this.particles.length;for(this.particles.length=a;b<a;)this.particles[b]=new Ri,++b;this.numParticles>
a&&(this.numParticles=a);return this._maxParticles},__class__:Za,__properties__:k(D.prototype.__properties__,{set_maxParticles:"set_maxParticles"})});var tl=g["stolo.display.particles.FileFormat"]={__ename__:["stolo","display","particles","FileFormat"],__constructs__:["ParticleDesignerXML"]};tl.ParticleDesignerXML=["ParticleDesignerXML",0];tl.ParticleDesignerXML.toString=r;tl.ParticleDesignerXML.__enum__=tl;var ma=function(){};g["stolo.display.particles.EmitterFactory"]=ma;ma.__name__=["stolo","display",
"particles","EmitterFactory"];ma.setEmitter=function(a,b,c){return ma.getPexEmitter(b,c,a)};ma.getPexEmitter=function(a,b,c){var d=w.getPack(b),e=w.getXML(a+".pex",b,!0,!0);null==c&&(c=new Za);c.textures=null;for(var b=a.lastIndexOf("/"),a=0<=b?S.substr(a,0,b+1):"",h=b=0,e=e.firstElement().elements();e.hasNext();){var n=e.next();switch(n.get_nodeName().toLowerCase()){case "colors":n=n.get("value").split(",");c.colors=[];for(var f=0;f<n.length;){var g=n[f];++f;g=G.parseInt("0x"+g);c.colors.push(g)}break;
case "width":c.particleWidth=ma.getFloat(n,"value");break;case "height":c.particleHeight=ma.getFloat(n,"value");break;case "texture":null==c.textures&&(c.textures=[]);c.textures.push(d.getTexture(a+Ra.removeFileExtension(n.get("name"))));break;case "angle":c.angle.set__(ma.getFloat(n,"value"));break;case "anglevariance":c.angleVariance.set__(ma.getFloat(n,"value"));break;case "blendfuncdestination":b=G["int"](ma.getFloat(n,"value"));break;case "blendfuncsource":h=G["int"](ma.getFloat(n,"value"));
break;case "duration":c.duration=ma.getFloat(n,"value");break;case "emittertype":c.type=0==G["int"](ma.getFloat(n,"value"))?Vd.Gravity:Vd.Radial;break;case "finishcolor":c.alphaEnd.set__(ma.getFloat(n,"alpha"));break;case "finishcolorvariance":c.alphaEndVariance.set__(ma.getFloat(n,"alpha"));break;case "finishparticlesize":c.sizeEnd.set__(ma.getFloat(n,"value"));break;case "finishparticlesizevariance":c.sizeEndVariance.set__(ma.getFloat(n,"value"));break;case "gravity":c.gravityX.set__(ma.getFloat(n,
"x"));c.gravityY.set__(ma.getFloat(n,"y"));break;case "maxparticles":c.set_maxParticles(G["int"](ma.getFloat(n,"value")));break;case "maxradius":c.maxRadius.set__(ma.getFloat(n,"value"));break;case "maxradiusvariance":c.maxRadiusVariance.set__(ma.getFloat(n,"value"));break;case "minradius":c.minRadius.set__(ma.getFloat(n,"value"));break;case "particlelifespan":c.lifespan.set__(ma.getFloat(n,"value"));break;case "particlelifespanvariance":c.lifespanVariance.set__(ma.getFloat(n,"value"));break;case "radialaccelvariance":c.radialAccelVariance.set__(ma.getFloat(n,
"value"));break;case "radialacceleration":c.radialAccel.set__(ma.getFloat(n,"value"));break;case "rotatepersecond":c.rotatePerSecond.set__(ma.getFloat(n,"value"));break;case "rotatepersecondvariance":c.rotatePerSecondVariance.set__(ma.getFloat(n,"value"));break;case "rotationend":c.rotationEnd.set__(ma.getFloat(n,"value"));break;case "rotationendvariance":c.rotationEndVariance.set__(ma.getFloat(n,"value"));break;case "rotationstart":c.rotationStart.set__(ma.getFloat(n,"value"));break;case "rotationstartvariance":c.rotationStartVariance.set__(ma.getFloat(n,
"value"));break;case "sourcepositionvariance":c.emitXVariance.set__(ma.getFloat(n,"x"));c.emitYVariance.set__(ma.getFloat(n,"y"));break;case "speed":c.speed.set__(ma.getFloat(n,"value"));break;case "speedvariance":c.speedVariance.set__(ma.getFloat(n,"value"));break;case "startcolor":c.alphaStart.set__(ma.getFloat(n,"alpha"));break;case "startcolorvariance":c.alphaStartVariance.set__(ma.getFloat(n,"alpha"));break;case "startparticlesize":c.sizeStart.set__(ma.getFloat(n,"value"));break;case "startparticlesizevariance":c.sizeStartVariance.set__(ma.getFloat(n,
"value"));break;case "tangentialaccelvariance":c.tangentialAccelVariance.set__(ma.getFloat(n,"value"));break;case "tangentialacceleration":c.tangentialAccel.set__(ma.getFloat(n,"value"))}}0>=c.lifespan._value&&c.lifespan.set__(c.duration);1==h&&1==b?c.blendMode=Sa.Add:1==h&&771==b?c.blendMode=null:(0!=h||0!=b)&&null;return c};ma.getFloat=function(a,b){return G.parseFloat(a.get(b))};var Ri=function(){this.direction=1;this.color=16777215;this.emitX=this.emitY=this.x=this.velX=this.y=this.velY=this.radialRadius=
this.velRadialRadius=this.radialRotation=this.velRadialRotation=this.radialAccel=this.tangentialAccel=this.scale=this.velScale=this.rotation=this.velRotation=this.alpha=this.velAlpha=this.life=this.offsetX=this.offsetY=0};g["stolo.display.particles.Particle"]=Ri;Ri.__name__=["stolo","display","particles","Particle"];Ri.prototype={draw:function(a){null==this.texture?this.drawRect(a):(1>this.alpha&&a.multiplyAlpha(this.alpha),0!=this.rotation&&a.rotate(this.rotation),(1!=this.scale||1!=this.direction)&&
a.scale(this.scale*this.direction,this.scale),a.drawTexture(this.texture,this.offsetX,this.offsetY))},drawRect:function(a){1>this.alpha&&a.multiplyAlpha(this.alpha);0!=this.rotation&&a.rotate(this.rotation);1!=this.scale&&a.scale(this.scale,this.scale);a.fillRect(this.color,this.offsetX,this.offsetY,this.width,this.height)},__class__:Ri};var J=function(){};g["stolo.ensys.actor.ActorFactory"]=J;J.__name__=["stolo","ensys","actor","ActorFactory"];J.reset=function(){for(var a=J._registeredComponents.keys();a.hasNext();){var b=
a.next();J._registeredComponents.remove(b)}for(a=J._componentMap.keys();a.hasNext();)b=a.next(),J._componentMap.remove(b);for(a=J._templateMap.keys();a.hasNext();)b=a.next(),J._templateMap.remove(b)};J.create=function(a){var b=new z,c=J.getTemplate(J.getTemplateName(a,!0));if(null!=c&&(c.template.onlyHighEnd&&o.slow||c.template.onlySlowEnd&&!o.slow))return null;a=ba.merge(c,a,!0);if(null==a)return null;J.onActorData.emit(a);return J.compose(b,a)};J.compose=function(a,b){for(var c=0,d=B.fields(b);c<
d.length;){var e=d[c];++c;var h=B.field(b,e);if(!(null==h||!1==h)&&null==h.debug){h=J.createComponent(e,h);if(null==h)throw"ActorFactory: Unknown component '"+e+"'";a.add(h)}}return a};J.registerComponent=function(a,b){J._registeredComponents.set(a,b);var c=ra.getClassName(b);J._componentMap.set(c,a)};J.getComponentsIds=function(){for(var a=[],b=J._registeredComponents.iterator();b.hasNext();){var c=b.next();a.push(ra.getClassName(c))}return a};J.getTemplateIds=function(){for(var a=[],b=J._templateMap.iterator();b.hasNext();){var c=
b.next();a.push(c.template.key)}return a};J.getTemplate=function(a,b){null==b&&(b=!0);var c=J._templateMap.get(a);if(b&&null!=c&&Object.prototype.hasOwnProperty.call(c.template,"parent")){var d;d=J._templateMap.get(c.template.parent);var e=G.string(d.template.key)+"_"+a,c=ba.merge(d,c,!0);c.template.key=e;c.template.generated=!0;B.deleteField(c.template,"parent")}return c};J.getTemplates=function(){for(var a=[],b=J._templateMap.iterator();b.hasNext();){var c=b.next();a.push(c)}return a};J.addTemplate=
function(a){var b=J.getTemplateName(a);null!=b&&(J._templateMap.exists(b)?null:J._templateMap.set(b,a),J.onTemplateAdded.emit(a))};J.getTemplateName=function(a,b){null==b&&(b=!1);var c=B.getProperty(a,"template");if(null!=c&&null!=c.key){c=c.key;if(b&&!J._templateMap.exists(c))throw"ActorFactory: Unknown template '"+c+"'";return c}return null};J.createComponent=function(a,b){var c;if("string"==typeof a){if(c=J._registeredComponents.get(a),null==c)return null}else c=a;return J.initComponent(ra.createInstance(c,
[]),b)};J.initComponent=function(a,b){var c=J.getComponentDefaults(a);null!=c&&(b=null!=b?ba.merge(c,b,!0):c);J.applyProps(a,b);return a};J.applyProps=function(a,b){for(var c=0,d=B.fields(b);c<d.length;){var e=d[c];++c;var h=B.field(b,e);B.setProperty(a,e,h)}return a};J.applyDefaults=function(a){var b=J.getComponentDefaults(a);J.applyProps(a,b);return a};J.getComponentDefaults=function(a){return B.getProperty(ra.getClass(a),"DEFAULTS")};var Si=function(){this.target=N.ANY_BODY;this.enabled=!0;j.call(this)};
g["stolo.ensys.components.BouncerComponent"]=Si;Si.__name__=["stolo","ensys","components","BouncerComponent"];Si.__super__=j;Si.prototype=k(j.prototype,{get_name:function(){return"BouncerComponent_51"},onStart:function(){j.prototype.onStart.call(this);V.getSystemEntity(this.owner);this._physicsSystem=V.getSystemEntity(this.owner).getComponent("PhysicSystem_22");null!=this.owner._compMap.PhysicsComponent_12&&this.owner._compMap.PhysicsComponent_12.addContactType(N.BOUNCER);this._physicsSystem.addContactListener(da.BEGIN,
ja.ANY,this.target,N.BOUNCER,this.owner,m(this,this.onContactBegin))},onStop:function(){this._physicsSystem.removeContactListener(da.BEGIN,ja.ANY,this.target,N.BOUNCER,this.owner);this._physicsSystem=null;j.prototype.onStop.call(this)},onContactBegin:function(a,b){if(this.enabled&&null!=b){var c=a._compMap.PhysicsComponent_12;if(null!=c){var d=c.getVelocity();if(0<this.impulse){var e=-Math.cos(b.angle)*this.impulse,e=Math.round(100*e)/100,h=-Math.sin(b.angle)*this.impulse,h=Math.round(100*h)/100;
c.setVelocity(function(){d.zpp_inner.validate();return d.zpp_inner.x}(this)+e,function(){d.zpp_inner.validate();return d.zpp_inner.y}(this)+h)}else 0<this.ratio&&c.setVelocity(function(){d.zpp_inner.validate();return d.zpp_inner.x}(this)*this.ratio,function(){d.zpp_inner.validate();return d.zpp_inner.y}(this)*this.ratio)}}},__class__:Si});var zg=function(){j.call(this)};g["stolo.ensys.components.CheckpointComponent"]=zg;zg.__name__=["stolo","ensys","components","CheckpointComponent"];zg.__super__=
j;zg.prototype=k(j.prototype,{get_name:function(){return"CheckpointComponent_47"},onStart:function(){null!=this.owner._compMap.PhysicsComponent_12&&this.owner._compMap.PhysicsComponent_12.addContactType(N.CHECKPOINT)},__class__:zg});var Ag=function(){j.call(this)};g["stolo.ensys.components.CheckpointerComponent"]=Ag;Ag.__name__=["stolo","ensys","components","CheckpointerComponent"];Ag.__super__=j;Ag.prototype=k(j.prototype,{get_name:function(){return"CheckpointerComponent_48"},onStart:function(){this._transform=
this.owner._compMap.TransformComponent_26;this._physic=this.owner._compMap.PhysicsComponent_12;this.position.x=this._transform.position.x;this.position.y=this._transform.position.y;null!=this._physic&&this._physic.addContactType(N.CHECKPOINTER);V.getSystemEntity(this.owner);this._physicSystem=V.getSystemEntity(this.owner).getComponent("PhysicSystem_22");this._physicSystem.addContactListener(da.BEGIN,ja.SENSOR,N.CHECKPOINT,N.CHECKPOINTER,this.owner,m(this,this.onContactBegin))},onStop:function(){this._physicSystem.removeContactListener(da.BEGIN,
ja.SENSOR,N.CHECKPOINT,N.CHECKPOINTER,this.owner);j.prototype.onStop.call(this)},onContactBegin:function(a){this.position=a._compMap.TransformComponent_26.position},__class__:Ag});var rf=function(){this.isCollected=!1;this.collectedSound="";this.type=N.COLLECTABLE;this.data={};this.amount=1;this.isActive=!0;j.call(this)};g["stolo.ensys.components.CollectableComponent"]=rf;rf.__name__=["stolo","ensys","components","CollectableComponent"];rf.__super__=j;rf.prototype=k(j.prototype,{get_name:function(){return"CollectableComponent_44"},
onStart:function(){V.getSystemEntity(this.owner);this._actorSystem=V.getSystemEntity(this.owner).getComponent("ActorSystem_3");null!=this.owner._compMap.PhysicsComponent_12&&this.owner._compMap.PhysicsComponent_12.addContactType(this.type);this._soundSystem=V.getSystemEntity(this.owner)._compMap.SoundSystem_23},collect:function(a){""!=this.collectedSound&&this._soundSystem.play(this.collectedSound,this.owner,rf.SOUND_CHANNEL);this.isCollected=!0;null!=this.owner._compMap.PhysicsComponent_12&&this.owner._compMap.PhysicsComponent_12.enable(!1);
if(pa.__instanceof(this.owner._compMap.Sprite_4,yb)){var b=this.owner._compMap.Sprite_4;if(b.animation.hasAnim("pickup")){b.animation.gotoAndPlay("pickup",{onComplete:function(a,b){return function(){return a(b)}}(m(this,this.onCollect),a),loop:!1});return}}this.onCollect(a)},onCollect:function(){this._actorSystem.removeActor(this.owner)},isCollectable:function(){return this.isActive&&!this.isCollected},__class__:rf});var Ti=function(){this.onCollection=new ad;this.targets=[N.COLLECTABLE];j.call(this)};
g["stolo.ensys.components.CollectorComponent"]=Ti;Ti.__name__=["stolo","ensys","components","CollectorComponent"];Ti.__super__=j;Ti.prototype=k(j.prototype,{get_name:function(){return"CollectorComponent_43"},onStart:function(){j.prototype.onStart.call(this);this._physic=this.owner._compMap.PhysicsComponent_12;null!=this._physic&&this._physic.addContactType(N.COLLECTOR);V.getSystemEntity(this.owner);this._physicSystem=V.getSystemEntity(this.owner).getComponent("PhysicSystem_22");this._physicSystem.addContactListener(da.BEGIN,
ja.ANY,N.COLLECTOR,this.targets,this.owner,m(this,this.onContactBegin))},onStop:function(){this._physicSystem.removeContactListener(da.BEGIN,ja.ANY,N.COLLECTOR,this.targets,this.owner);this._physic=this._physicSystem=null;j.prototype.onStop.call(this)},onContactBegin:function(a){var b=a._compMap.CollectableComponent_44;null!=b&&(b.isCollectable()&&b.collect(this.owner),this.onCollection.emit(this.owner,a))},__class__:Ti});var N=function(){};g["stolo.ensys.physics.ContactType"]=N;N.__name__=["stolo",
"ensys","physics","ContactType"];var Bg=function(){this.onDamage=new Y;this._ignoreList=new Sb;this._actorsToDamage=[];this.currentCooldown=-100;j.call(this)};g["stolo.ensys.components.DamageComponent"]=Bg;Bg.__name__=["stolo","ensys","components","DamageComponent"];Bg.__super__=j;Bg.prototype=k(j.prototype,{get_name:function(){return"DamageComponent_41"},enable:function(a){null==a&&(a=!0);if(!a)return this.disable();this.enabled=!0},disable:function(){this.enabled=!1},ignoreActor:function(a,b){null==
b&&(b=!0);(b||null!=this._ignoreList.h.__keys__[a.__id__])&&this._ignoreList.set(a,b)},onStart:function(){null==this.damager&&(this.damager=this.owner);this._physicsSystem=V.getSystemEntity(this.owner)._compMap.PhysicSystem_22;null!=this.owner._compMap.PhysicsComponent_12&&this.owner._compMap.PhysicsComponent_12.addContactType(N.DAMAGER);this._physicsSystem.addContactListener(da.PRELISTENER,ja.ANY,this.target,N.DAMAGER,this.owner,m(this,this.onPreContact));this._physicsSystem.addContactListener(da.BEGIN,
ja.ANY,this.target,N.DAMAGER,this.owner,m(this,this.onContactBegin));this._physicsSystem.addContactListener(da.END,ja.ANY,this.target,N.DAMAGER,this.owner,m(this,this.onContactEnd));j.prototype.onStart.call(this)},onStop:function(){this._physicsSystem.removeContactListener(da.PRELISTENER,ja.ANY,this.target,N.DAMAGER,this.owner);this._physicsSystem.removeContactListener(da.BEGIN,ja.ANY,this.target,N.DAMAGER,this.owner);this._physicsSystem.removeContactListener(da.END,ja.ANY,this.target,N.DAMAGER,this.owner);
this._actorsToDamage=this._ignoreList=this._physicsSystem=null;j.prototype.onStop.call(this)},onUpdate:function(a){this.currentCooldown-=a;if(!(0<this.currentCooldown||0==this._actorsToDamage.length||!this.enabled||0==this.charge)){for(var a=0,b=this._actorsToDamage;a<b.length;){var c=b[a];++a;this.damageActor(c)}this.charge--;this.currentCooldown=this.cooldown}},damageActor:function(a){if(!this._ignoreList.h[a.__id__]){var b=a._compMap.HealthComponent_42,c=!1;null!=b&&(c=b.damage(this.value,this.damager,
this.knockBackX,this.knockBackY))&&this.onDamage.emit(a)}},onPreContact:function(){return!0},onContactBegin:function(a){this._actorsToDamage.push(a)},onContactEnd:function(a){S.remove(this._actorsToDamage,a)},__class__:Bg});var le=function(a,b,c,d,e){null==e&&(e=0.3);null==d&&(d=16727552);null==b&&(b=100);null==a&&(a=100);this.font=le.DefaultFont;this.debugOnly=!0;j.call(this);this.shape=le.getShape(a,b,d,e);this.text=c};g["stolo.ensys.components.DebugComponent"]=le;le.__name__=["stolo","ensys","components",
"DebugComponent"];le.getShape=function(a,b,c,d){null==d&&(d=0.3);null==c&&(c=16727552);null==b&&(b=100);null==a&&(a=100);return{alpha:d,color:c,width:a,height:b}};le.__super__=j;le.prototype=k(j.prototype,{get_name:function(){return"DebugComponent_32"},onAdded:function(){this.debugOnly&&this.owner.remove(this)},onStart:function(){this.debugOnly||(null==this.owner._compMap.Sprite_4&&this.owner.add(new X),null!=this.shape&&0<this.shape.width&&0<this.shape.height&&(0>=this.shape.color&&(this.shape.color=
0),0>=this.shape.alpha&&(this.shape.alpha=0.3),this.setShape(this.shape)),null!=this.text&&""!=this.text&&(this.textSprite=U.getTextSprite(this.font),this.textSprite.set_text(this.text),this.owner.addChild((new z).add(this.textSprite)),this.centerText&&this.textSprite.centerAnchor()),j.prototype.onStart.call(this))},setShape:function(a){null!=this.bg&&this.bg.owner.dispose();this.bg=new xb(a.color,a.width,a.height);this.bg.alpha.set__(a.alpha);this.owner.addChild((new z).add(this.bg));this.center&&
this.bg.centerAnchor();return this.bg},__class__:le});var Ui=function(){this.fixed=this.fixedRotation=!0;this.direction=1;this.rotation=0;this.position={x:0,y:0};j.call(this)};g["stolo.ensys.components.TransformComponent"]=Ui;Ui.__name__=["stolo","ensys","components","TransformComponent"];Ui.__super__=j;Ui.prototype=k(j.prototype,{get_name:function(){return"TransformComponent_26"},setXY:function(a,b){this.position.x=a;this.position.y=b},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},
distanceToSquared:function(a){var b=this.position.x-a.position.x,a=this.position.y-a.position.y;return b*b+a*a},__class__:Ui});var Vi=function(){this.moving=!1;j.call(this)};g["stolo.ensys.components.MoveTransformComponent"]=Vi;Vi.__name__=["stolo","ensys","components","MoveTransformComponent"];Vi.__super__=j;Vi.prototype=k(j.prototype,{get_name:function(){return"MoveTransformComponent_33"},onAdded:function(){j.prototype.onAdded.call(this);this._transform=this.owner._compMap.TransformComponent_26;
null!=this._transform&&(this._posX=new O(this._transform.position.x),this._posY=new O(this._transform.position.y))},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.moving&&(this._posX.update(a),this._posY.update(a),null!=this._transform&&this._transform.setXY(this._posX._value,this._posY._value),null==this._posX._behavior&&(this.moving=!1,this.onMoveDone()))},onMoveDone:function(){if(null!=this._callback){var a=this._callback;this._callback=null;a(this.owner)}},__class__:Vi});var Cg=function(){this.padding=
5;this.color2=16777215;this.color1=0;this.dotLength=5;this.thickness=1;j.call(this)};g["stolo.ensys.editor.component.EditorSelectionComponent"]=Cg;Cg.__name__=["stolo","ensys","editor","component","EditorSelectionComponent"];Cg.__super__=j;Cg.prototype=k(j.prototype,{get_name:function(){return"EditorSelectionComponent_11"},onAdded:function(){j.prototype.onAdded.call(this);this._transform=this.owner._compMap.TransformComponent_26;this._display=this.owner._compMap.Sprite_4;if(null!=this._display)if(this._display.initialized)this.build();
else this._display.onInitComplete.connect(m(this,this.build)).once()},onRemoved:function(){j.prototype.onRemoved.call(this);null!=this._container&&(this._container.parent.removeChild(this._container),this._container=null);this._display=this._transform=this._sprite=null},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.updateTransform()},updateTransform:function(){null!=this._sprite&&(this._sprite.setXY(this._transform.position.x,this._transform.position.y),this._sprite.setRotation(this._transform.rotation))},
build:function(){null!=this._container&&this._container.dispose();var a;V.getSystemEntity(this.owner);a=V.getSystemEntity(this.owner).getComponent("RendererSystem_6");var b=a.getActorLayer(this.owner);a=a.addLayer({name:b.getName()+"_selection\u00a0",parallax:b.parallax,editor:{unlockable:!0,locked:!0}});a.set_pointerEnabled(!1);var b=this._display.getNaturalWidth()+2*this.padding,c=this._display.getNaturalHeight()+2*this.padding;if(pa.__instanceof(this._display,yb)&&null!=this.owner._compMap.PhysicsComponent_12){var d=
this.owner._compMap.PhysicsComponent_12.shape;null!=d.width&&null!=d.height&&(b=d.width+2*this.padding,c=d.height+2*this.padding)}var d=p._platform.getRenderer().createTexture(b,c),e=d.get_graphics();this.drawDottedLine(e,!0,0,0,b,this.dotLength,this.thickness);this.drawDottedLine(e,!1,0,0,c,this.dotLength,this.thickness);this.drawDottedLine(e,!0,0,c-this.thickness,b,this.dotLength,this.thickness);this.drawDottedLine(e,!1,b-this.thickness,0,c,this.dotLength,this.thickness);this._sprite=new ia(d);
this._sprite.setAnchor(0.5*b,0.5*c);this._container=new z;this._container.add(this._sprite);a.owner.addChild(this._container)},drawDottedLine:function(a,b,c,d,e,h,n){for(var f=0,g=!1;f<e;){var i;i=g?this.color1:this.color2;b?a.fillRect(i,c+f,d,Math.min(h,e-f),n):a.fillRect(i,c,d+f,n,Math.min(h,e-f));g=!g;f+=h}},__class__:Cg});var Wi=function(){this._startingSymbol=null;X.call(this)};g["stolo.ensys.components.ImageComponent"]=Wi;Wi.__name__=["stolo","ensys","components","ImageComponent"];Wi.__super__=
X;Wi.prototype=k(X.prototype,{dispose:function(){X.prototype.dispose.call(this);this._startingSymbol=this._texture=this.bitmapSprite=this.sprite=null},initStart:function(){null!=this.spritesheet?this.loadSpritesheet(this.spritesheet,this.asset):(this.set_texture(this.getTexture(this.pack,this.asset)),this.width=this.get_texture().get_width(),this.height=this.get_texture().get_height(),this.useSprite&&this.createSprite(),X.prototype.initStart.call(this))},initEnd:function(){null!=this._startingSymbol&&
(this.setSymbol(this._startingSymbol),this._startingSymbol=null);X.prototype.initEnd.call(this)},createSprite:function(){null==this.sprite&&(this.sprite=new ia(this._texture),this.sprite.set_pointerEnabled(!1),this.owner.addChild((new z).add(this.sprite)),this._texture=null)},centerSprite:function(){null!=this.sprite&&(this.sprite.centerAnchor(),this.sprite.setXY(0.5*this.getNaturalWidth(),0.5*this.getNaturalHeight()))},draw:function(a){null!=this._texture&&a.drawTexture(this._texture,0,0)},get_texture:function(){return null!=
this.sprite?this.sprite.texture:this._texture},set_texture:function(a){this.width=a.get_width();this.height=a.get_height();return null!=this.sprite?this.sprite.texture=a:this._texture=a},set_pointerEnabled:function(a){null!=this.sprite&&this.sprite.set_pointerEnabled(a);null!=this.bitmapSprite&&this.bitmapSprite.set_pointerEnabled(a);return X.prototype.set_pointerEnabled.call(this,a)},getNaturalWidth:function(){return this.width},getNaturalHeight:function(){return this.height},loadSpritesheet:function(a,
b){var c=new z;this.owner.addChild(c);this.bitmapSprite=new Na(a,b,this.pack,m(this,this.onBitmapSpriteInit),!1);c.add(this.bitmapSprite)},onBitmapSpriteInit:function(){this.updateBitmapSprite();this.initEnd()},setSymbol:function(a){if(!this.initialized)return this._startingSymbol=a,null;if(null==this.bitmapSprite)throw"Not spritesheet loaded!";a=this.bitmapSprite.setSymbol(a);this.updateBitmapSprite();return a},updateBitmapSprite:function(){this.width=Math.round(this.bitmapSprite.getNaturalWidth());
this.height=Math.round(this.bitmapSprite.getNaturalHeight())},__class__:Wi,__properties__:k(X.prototype.__properties__,{set_texture:"set_texture",get_texture:"get_texture"})});var Dg=function(){X.call(this)};g["stolo.ensys.components.FillComponent"]=Dg;Dg.__name__=["stolo","ensys","components","FillComponent"];Dg.__super__=X;Dg.prototype=k(X.prototype,{initStart:function(){this.setAlpha(1-this.transparency);this.initEnd()},draw:function(a){a.fillRect(this.color,0,0,this.width,this.height)},getNaturalWidth:function(){return this.width},
getNaturalHeight:function(){return this.height},__class__:Dg});var Eg=function(){X.call(this)};g["stolo.ensys.components.PatternComponent"]=Eg;Eg.__name__=["stolo","ensys","components","PatternComponent"];Eg.__super__=X;Eg.prototype=k(X.prototype,{initStart:function(){this._texture=this.getTexture(this.pack,this.asset);this.initEnd()},draw:function(a){null!=this._texture&&a.drawPattern(this._texture,0,0,this.width,this.height)},getNaturalWidth:function(){return this.width},getNaturalHeight:function(){return this.height},
__class__:Eg});var nb=function(){this._px=this._py=this._tx=this._ty=0;X.call(this)};g["stolo.ensys.components.TilerComponent"]=nb;nb.__name__=["stolo","ensys","components","TilerComponent"];nb.__super__=X;nb.prototype=k(X.prototype,{draw:function(a){null!=this._texture&&a.drawTexture(this._texture,0,0)},enableCulling:function(a){X.prototype.enableCulling.call(this,a);this.cullTexture&&!a&&!this.isBuilt&&this.buildTexture()},getNaturalWidth:function(){return this.width},getNaturalHeight:function(){return this.height},
initStart:function(){this._image=this.getTexture(this.pack,this.asset);this.width=this.xsize*this.tileWidth|0;this.height=this.ysize*this.tileHeight|0;this._px=G["int"](Math.floor(this._transform.position.x/this.tileWidth)*this.tileWidth);this._py=G["int"](Math.floor(this._transform.position.y/this.tileHeight)*this.tileHeight);0!=this.xsize%2&&(this._px+=0.5*this.tileWidth|0);0!=this.ysize%2&&(this._py+=0.5*this.tileHeight|0);this._tx=(this._px-0.5*this.width)/this.tileWidth|0;this._ty=(this._py-
0.5*this.height)/this.tileHeight|0;this._transform.position.x=this._px;this._transform.position.y=this._py;null!=this.owner._compMap.PhysicsComponent_12&&this.owner._compMap.PhysicsComponent_12.setPosition(this._transform.position.x,this._transform.position.y);this._grid=nb.tileCache.get(this.grid);null==this._grid&&(this._grid=new K,nb.tileCache.set(this.grid,this._grid));for(var a=0,b=this.xsize;a<b;)for(var c=a++,d=0,e=this.ysize;d<e;){var h=d++;this.setTile(this._tx+c,this._ty+h)}this.cullTexture||
this.buildTexture()},getTileId:function(a,b){return a+"_"+b},getTile:function(a,b){return this._grid.get(this.getTileId(a,b))},setTile:function(a,b,c){null==c&&(c=!0);this._grid.set(this.getTileId(a,b),c)},getTextureCacheId:function(){return"tiler_"+this.pack+"_"+this.asset+"_"+this.width+"x"+this.height},buildTexture:function(){this.isBuilt=!0;var a=null,b=null;if(this.drawTexture){a=this.getTextureCacheId();this._texture=nb.cache.get(a);if(null!=this._texture)return this.endBuild();this._texture=
p._platform.getRenderer().createTexture(this.width,this.height);b=this._texture.get_graphics()}for(var c=Math.floor(this._image.get_width()/this.tileWidth),d=0,e=this.xsize;d<e;)for(var h=d++,n=0,f=this.ysize;n<f;){var g=n++,i=this._tx+h,s=this._ty+g,j=0;this.cornerMode?(this.getTile(i+1,s-1)&&(j+=1),this.getTile(i+1,s+1)&&(j+=2),this.getTile(i-1,s+1)&&(j+=4),this.getTile(i-1,s-1)&&(j+=8),7==j&&!this.getTile(i,s-1)&&(j=6),7==j&&!this.getTile(i-1,s)&&(j=3),14==j&&!this.getTile(i,s-1)&&(j=6),14==j&&
!this.getTile(i+1,s)&&(j=12),11==j&&!this.getTile(i,s+1)&&(j=9),11==j&&!this.getTile(i-1,s)&&(j=3),13==j&&!this.getTile(i,s+1)&&(j=9),13==j&&!this.getTile(i+1,s)&&(j=12)):(this.getTile(i,s-1)&&(j+=1),this.getTile(i+1,s)&&(j+=2),this.getTile(i,s+1)&&(j+=4),this.getTile(i-1,s)&&(j+=8));var i=this.mapping[j],k=i[Math.floor(Math.random()*i.length)],i=k%c,s=Math.floor(k/c);this.drawTexture?b.drawSubTexture(this._image,h*this.tileWidth,g*this.tileHeight,i*this.tileWidth,s*this.tileHeight,this.tileWidth,
this.tileHeight):(a="tiler_"+this.pack+"_"+this.asset+"_"+j+"_"+k,j=null,nb.cache.exists(a)?j=nb.cache.get(a):(j=this._image.subTexture(i*this.tileWidth,s*this.tileHeight,this.tileWidth,this.tileHeight),nb.cache.set(a,j)),j=new ia(j),j.set_pointerEnabled(0!=(this._flags&4)),this.owner.addChild((new z).add(j)),j.setXY(h*this.tileWidth,g*this.tileHeight))}this.drawTexture&&nb.cache.set(a,this._texture);this.endBuild()},endBuild:function(){this.initEnd();this.isBuilt=!0},dispose:function(){this._texture=
this._grid=this._image=null;X.prototype.dispose.call(this)},__class__:nb});var lc=function(){X.call(this)};g["stolo.ensys.components.SlicerComponent"]=lc;lc.__name__=["stolo","ensys","components","SlicerComponent"];lc.ValidateActorExport=function(a,b){a.width=b.dataWidth;a.height=b.dataHeight;return a};lc.__super__=X;lc.prototype=k(X.prototype,{draw:function(a){null!=this._texture&&a.drawTexture(this._texture,0,0)},onAdded:function(){this.dataWidth=this.width;this.dataHeight=this.height;X.prototype.onAdded.call(this)},
enableCulling:function(a){X.prototype.enableCulling.call(this,a);this.cullTexture&&!a&&!this.isBuilt&&this.buildTexture()},getNaturalWidth:function(){return this.width},getNaturalHeight:function(){return this.height},initStart:function(){this._image=this.getTexture(this.pack,this.asset);var a=this.slices[0],b=this.slices[1];this.slicesData=new Ya;for(var c=0,d=0,e,h,n=0,f=0,g=b.length-1;f<g;){c=f++;d=b[c];h=b[c+1]-d;for(var i=0,j=a.length-1;i<j;)e=i++,c=a[e],e=a[e+1]-c,this.slicesData.set(++n,{id:n,
x:c,y:d,width:e,height:h})}this.slicesData.set(-1,{id:-1,x:0,y:0,width:0,height:0});b=this.slicesData.get(this.template[0][0][0]);n=this.slicesData.get(this.template[0][2][0]);a=this.slicesData.get(this.template[1][1][0]);this.slicesData.get(this.template[2][0][0]);d=this.slicesData.get(this.template[2][2][0]);n=b.width+n.width;this.widthVar=this.width-n;this.widthRepeat=Math.ceil(this.widthVar/a.width);this.widthVar=this.widthRepeat*a.width|0;b=b.height+d.height;this.heightVar=this.height-b;this.heightRepeat=
Math.ceil(this.heightVar/a.height);this.heightVar=this.heightRepeat*a.height|0;this.width=this.widthVar+n;this.height=this.heightVar+b;this.cullTexture||this.buildTexture()},getTextureCacheId:function(){return"slicer_"+this.pack+"_"+this.asset+"_"+this.slices[0].toString()+"_"+this.slices[1].toString()+"_"+this.dataWidth+"x"+this.dataHeight},buildTexture:function(){var a=0,b=0,c,d,e=null,h=null,n=null;if(this.drawTexture){n=this.getTextureCacheId();this._texture=lc.cache.get(n);if(null!=this._texture)return this.endBuild();
this._texture=p._platform.getRenderer().createTexture(this.width,this.height);h=this._texture.get_graphics()}for(var f=0;3>f;){for(var g=f++,i=this.template[g],j=0;3>j;){var k=j++,l=i[k];d=1==g?this.heightRepeat:1;c=1==k?this.widthRepeat:1;for(var m=0,o=0,t=0;t<d;){t++;for(var r=0;r<c;){r++;e=this.slicesData.get(l[Math.floor(Math.random()*l.length)]);if(-1!=e.id&&0<e.width&&0<e.height)if(this.drawTexture)h.drawSubTexture(this._image,a+m,b+o,e.x,e.y,e.width,e.height);else{var n="slicer_"+this.pack+
"_"+this.asset+"_"+G.string(e.x)+"x"+G.string(e.y)+"_"+G.string(e.width)+"x"+G.string(e.height),q=null;lc.cache.exists(n)?q=lc.cache.get(n):(q=this._image.subTexture(e.x,e.y,e.width,e.height),lc.cache.set(n,q));q=new ia(q);q.set_pointerEnabled(0!=(this._flags&4));this.owner.addChild((new z).add(q));q.setXY(a+m,b+o)}m+=e.width}o+=e.height;m=0}a=1==k?a+this.widthVar:a+e.width}a=0;b=1==g?b+this.heightVar:b+e.height}this.drawTexture&&lc.cache.set(n,this._texture);this.endBuild()},endBuild:function(){this.initEnd();
this.isBuilt=!0},dispose:function(){this.slicesData=this._texture=this.template=this.slices=this._image=null;X.prototype.dispose.call(this)},__class__:lc});var Xi=function(){this.textvars={};this.localized=!0;this.font="debug_font";this.text="notext";X.call(this)};g["stolo.ensys.components.TextComponent"]=Xi;Xi.__name__=["stolo","ensys","components","TextComponent"];Xi.__super__=X;Xi.prototype=k(X.prototype,{initStart:function(){this.localized?this.textfield=new ud(this.text,this.font,this.textvars):
(this.textfield=U.getTextSprite(this.font),this.textfield.set_text(this.text));this.owner.addChild((new z).add(this.textfield));this.initEnd()},getNaturalWidth:function(){return this.textfield.getNaturalWidth()},getNaturalHeight:function(){return this.textfield.getNaturalWidth()},__class__:Xi});var Uc=function(){this._partsTotal=0;this._parts=[];this.horizontal=!0;this.scroll=this.scrollOffset=this.autoScroll=0;X.call(this)};g["stolo.ensys.components.ScrollerComponent"]=Uc;Uc.__name__=["stolo","ensys",
"components","ScrollerComponent"];Uc.__super__=X;Uc.prototype=k(X.prototype,{onAdded:function(){X.prototype.onAdded.call(this);null==this.assets&&(this.assets=[]);null!=this.asset&&""!=this.asset&&this.assets.push(this.asset)},onRemoved:function(){X.prototype.onRemoved.call(this);for(var a=0,b=this._parts;a<b.length;){var c=b[a];++a;c.texture=null;c.next=null;c.previous=null}this._parts=null},onUpdate:function(a){this.scrollOffset+=this.autoScroll;X.prototype.onUpdate.call(this,a)},initStart:function(){for(var a=
0,b=this.assets;a<b.length;){var c=b[a];++a;var c=this.getTexture(this.pack,c),d;d=this.horizontal?c.get_width():c.get_height();this._parts.push({texture:c,width:c.get_width(),height:c.get_height(),next:null,previous:null,first:!1,last:!1,start:this._partsTotal,end:this._partsTotal+d});this._partsTotal+=d}a=0;for(b=this._parts.length;a<b;)c=a++,d=this._parts[c],d.next=this._parts[c+1],d.previous=this._parts[c-1],d.first=0==c,d.last=c==this._parts.length-1;this._parts[0].previous=this._parts[this._parts.length-
1];this._parts[this._parts.length-1].next=this._parts[0];this._drawTextureFunc=this.horizontal?m(this,this.drawTextureHorizontal):m(this,this.drawTextureVertical);this.initEnd()},draw:function(a){if(!(0>=this._parts.length)){var b=(this.scroll+this.scrollOffset)%this._partsTotal;0>b&&(b=this._partsTotal+b);for(var c=this._parts[0];b>c.end&&!(c=c.next,c.last););this._drawTextureFunc(a,c,b-c.start,0)}},drawTextureHorizontal:function(a,b,c,d){var e=Math.max(1,b.width-c),h=Math.max(1,this.width-d);e<
h?(a.drawSubTexture(b.texture,d,0,c,0,e,this.height),this.drawTextureHorizontal(a,b.next,0,d+e)):a.drawSubTexture(b.texture,d,0,c,0,h,this.height)},drawTextureVertical:function(a,b,c,d){var e=Math.max(1,b.height-c),h=Math.max(1,this.height-d);e<h?(a.drawSubTexture(b.texture,0,d,0,c,this.width,e),this.drawTextureVertical(a,b.next,0,d+e)):a.drawSubTexture(b.texture,0,d,0,c,this.width,h)},getNaturalWidth:function(){return this.width},getNaturalHeight:function(){return this.height},__class__:Uc});var Yi=
function(){this.lockHorizontal=this.lockVertical=this.lockWidth=this.lockHeight=!1;Uc.call(this)};g["stolo.ensys.components.LayerScrollerComponent"]=Yi;Yi.__name__=["stolo","ensys","components","LayerScrollerComponent"];Yi.__super__=Uc;Yi.prototype=k(Uc.prototype,{onAdded:function(){Uc.prototype.onAdded.call(this)},onRemoved:function(){Uc.prototype.onRemoved.call(this)},onStart:function(){Uc.prototype.onStart.call(this);this._layer=this.owner.parent._compMap.Sprite_4;this._layerX=this._layer.x;this._layerY=
this._layer.y;this._layerS=this.horizontal?this._layerX:this._layerY;V.getSystemEntity(this.owner);this._rendererDimensions=V.getSystemEntity(this.owner).getComponent("RendererSystem_6").dimensionsScaled},onUpdate:function(a){Uc.prototype.onUpdate.call(this,a);this.scroll=-this._layerS._value;this.lockHorizontal&&this.anchorX.set__(this._layerX._value);this.lockVertical&&this.anchorY.set__(this._layerY._value);this.lockWidth&&(this.width=this._rendererDimensions.width|0);this.lockHeight&&(this.height=
this._rendererDimensions.height|0)},__class__:Yi});var Zi=function(){this.lockX=this.lockY=!1;j.call(this)};g["stolo.ensys.components.PositionLockComponent"]=Zi;Zi.__name__=["stolo","ensys","components","PositionLockComponent"];Zi.__super__=j;Zi.prototype=k(j.prototype,{get_name:function(){return"PositionLockComponent_34"},onStart:function(){j.prototype.onStart.call(this);this._transform=this.owner._compMap.TransformComponent_26;this._targetX=this._transform.position.x;this._targetY=this._transform.position.y},
onStop:function(){j.prototype.onStop.call(this)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.lockX&&(this._transform.position.x=this._targetX);this.lockY&&(this._transform.position.y=this._targetY)},__class__:Zi});var Dd=function(){this._typesToRemove=[];this._typesToAdd=[];this._complexShape=!1;this.onShapesCreated=new ua;this.onInitialize=new ua;this.forceUpdate=this.initialized=!1;this.setTransform=!0;this.damping=Dd.defaultDamping;j.call(this)};g["stolo.ensys.components.PhysicsComponent"]=
Dd;Dd.__name__=["stolo","ensys","components","PhysicsComponent"];Dd.__interfaces__=[Ph];Dd.__super__=j;Dd.prototype=k(j.prototype,{get_name:function(){return"PhysicsComponent_12"},onStart:function(){V.getSystemEntity(this.owner);this._cullingSystem=V.getSystemEntity(this.owner).getComponent("CullingSystem_5");V.getSystemEntity(this.owner);this._physicSystem=V.getSystemEntity(this.owner).getComponent("PhysicSystem_22");V.getSystemEntity(this.owner);this._physicDebugSystem=V.getSystemEntity(this.owner).getComponent("PhysicDebugSystem_21");
this._transform=this.owner._compMap.TransformComponent_26;this._display=this.owner._compMap.Sprite_4;this.createBody();if(null!=this._display&&!this._display.initialized)this._display.onInitComplete.connect(m(this,this.initBody)).once();else this.initBody()},onStop:function(){this.enable(!1);this._cullingSystem.removeComponent(this,this.owner);j.prototype.onRemoved.call(this);this._physicDebugSystem=this._display=this._cullingSystem=this._physicSystem=null;null!=this._body&&(this._body.get_userData().component=
null,this._body.get_userData().actor=null);this._transform=this._rayResultList=this._ray=null},onUpdate:function(a){if(this.enabled){if(!this._transform.fixed||this.forceUpdate)this.setTransform?0<this.damping?(this._transform.position.x=Ik.lerp(this._transform.position.x,this._body.get_position().get_x(),a*this.damping),this._transform.position.y=Ik.lerp(this._transform.position.y,this._body.get_position().get_y(),a*this.damping)):(this._transform.position.x=this._body.get_position().get_x(),this._transform.position.y=
this._body.get_position().get_y()):this.setPosition(this._transform.position.x,this._transform.position.y);if(!this._transform.fixedRotation||this.forceUpdate)this.setTransform?this._transform.rotation=180*this._body.zpp_inner.rot/3.141592653589793:this.setRotation(3.141592653589793*this._transform.rotation/180);this.forceUpdate=!1}},enableCulling:function(a){a?this._physicSystem.removeBody(this._body):this.enabled&&this._physicSystem.addBody(this._body)},enable:function(a){null==a&&(a=!0);null!=
this._physicSystem&&(a?(!this.enabled&&null!=this._transform&&this.setPosition(this._transform.position.x,this._transform.position.y),this._physicSystem.addBody(this._body)):this._physicSystem.removeBody(this._body),this.enabled=a)},disable:function(){this.enable(!1)},createBody:function(){this._body=new tg;this.resetType();0!=this.mass&&this._body.set_mass(this.mass);-1!=this.massScale&&this._body.set_gravMassScale(this.massScale);this._body.set_allowRotation(!this._transform.fixedRotation);this._body.set_isBullet(this.bullet);
this._body.get_userData().component=this;this._body.get_userData().actor=this.owner;this._body.get_position().set_x(this._transform.position.x);this._body.get_position().set_y(this._transform.position.y);this._body.set_rotation(3.141592653589793*this._transform.rotation/180)},initBody:function(){this.createShapes();this.initContacts();for(var a=0,b=this._typesToAdd;a<b.length;){var c=b[a];++a;this.addContactType(c)}a=0;for(b=this._typesToRemove;a<b.length;)c=b[a],++a,this.removeContactType(c);this.setVelocity(this.velocity.x,
this.velocity.y);this.applyImpulse(this.impulse.x,this.impulse.y);this._cullingSystem.addComponent(this,this.owner);this.onInitialize.emit();this.initialized=!0},createShapes:function(){this._body.zpp_inner.wrap_shapes.clear();if(ba.is(this.shape,P.TObject))this._complexShape=!1,this.createShape(this.shape);else if(ba.is(this.shape,P.TClass(Array))){this._complexShape=!0;var a=0,b;for(b=pa.__cast(this.shape,Array);a<b.length;){var c=b[a];++a;this.createShape(c)}}this.onShapesCreated.emit()},createShape:function(a){var b=
null,c;c=0<a.x||0>a.x?a.x:0;var d;d=0<a.y||0>a.y?a.y:0;if("box"==a.type||null==a.type){0>=a.width&&null!=this._display&&(a.width=this._display.getNaturalWidth());0>=a.height&&null!=this._display&&(a.height=this._display.getNaturalHeight());var b=a.width,e=a.height,h=a.padding,n=a.docking;if(null!=this._display&&null!=n){var f=0.5*this._display.getNaturalWidth(),g=0.5*this._display.getNaturalHeight();0!=n.left&&0!=n.right?b=(n.left+n.right)*f:0!=n.left?c=-f+0.5*b:0!=n.right&&(c=f-0.5*b);0!=n.top&&
0!=n.bottom?e=(n.top+n.bottom)*g:0!=n.top?d=-g+0.5*e:0!=n.bottom&&(d=g-0.5*e);null!=this._display.align&&(-1<this._display.align.indexOf("left")&&(c-=-f),-1<this._display.align.indexOf("top")&&(d-=-g))}null!=h&&(0!=h.left&&(b-=h.left,c+=0.5*h.left),0!=h.right&&(b-=h.right,c-=0.5*h.right),0!=h.top&&(e-=h.top,d+=0.5*h.top),0!=h.bottom&&(e-=h.bottom,d-=0.5*h.bottom));0>=b&&(b=100);0>=e&&(e=100);b=new Bc(Bc.box(b,e,!0))}else if("circle"==a.type)this._complexShape=!0,b=new Fi(a.radius);else if("regular"==
a.type)this._complexShape=!0,b=new Bc(Bc.regular(a.xRadius,a.yRadius,a.edge));else if("polygon"==a.type){this._complexShape=!0;b=[];e=a.points;for(h=0;h<e.length;)n=e[h],++h,b.push(ha.weak(n.x,n.y));b=new Bc(b)}if(null!=b){e=null!=a.filter?a.filter:Dd.defaultShapeFilter;if(null!=e){h=0;for(n=B.fields(e);h<n.length;)switch(f=n[h],++h,f){case "collisionMask":b.zpp_inner.filter.wrapper().set_collisionMask(B.field(e,f));break;case "collisionGroup":b.zpp_inner.filter.wrapper().set_collisionGroup(B.field(e,
f));break;case "sensorGroup":b.zpp_inner.filter.wrapper().set_sensorGroup(B.field(e,f));break;case "sensorMask":b.zpp_inner.filter.wrapper().set_sensorMask(B.field(e,f));break;case "fluidGroup":b.zpp_inner.filter.wrapper().set_fluidGroup(B.field(e,f));break;case "fluidMask":b.zpp_inner.filter.wrapper().set_fluidMask(B.field(e,f));break;default:null}}null!=a.material&&(e=zc.get(a.material),null!=e?(b.zpp_inner.immutable_midstep("Shape::material"),b.zpp_inner.setMaterial(e.zpp_inner),b.zpp_inner.material.wrapper()):
null);null!=a.fluid&&(b.zpp_inner.immutable_midstep("Shape::fluidEnabled"),b.zpp_inner.fluidEnabled=!0,null==b.zpp_inner.fluidProperties&&b.set_fluidProperties(new Pe),b.zpp_inner.wake(),b.zpp_inner.fluidEnabled,null!=a.fluid.density&&(b.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==b.zpp_inner.fluidProperties&&b.zpp_inner.setFluid((new Pe).zpp_inner),b.zpp_inner.fluidProperties.wrapper().set_density(a.fluid.density)),null!=a.fluid.viscosity&&(b.zpp_inner.immutable_midstep("Shape::fluidProperties"),
null==b.zpp_inner.fluidProperties&&b.zpp_inner.setFluid((new Pe).zpp_inner),b.zpp_inner.fluidProperties.wrapper().set_viscosity(a.fluid.viscosity)));b.set_localCOM(ha.weak(this.offset.x+c,this.offset.y+d));b.set_sensorEnabled(a.sensor);this._body.zpp_inner.wrap_shapes.add(b)}},getBody:function(){return this._body},initContacts:function(){if(ba.is(this.contacts,P.TClass(String)))this.addContactType(this.contacts.toUpperCase());else if(ba.is(this.contacts,P.TClass(Array))){var a=0,b;for(b=pa.__cast(this.contacts,
Array);a<b.length;){var c=b[a];++a;this.addContactType(c.toUpperCase())}}},getCbType:function(a){return this._physicSystem.getCbType(a)},hasContactType:function(a){return this._body.get_cbTypes().has(this.getCbType(a))},removeContactType:function(a){null==this._body?this._typesToRemove.push(a):this._body.get_cbTypes().remove(this.getCbType(a))},addContactType:function(a){null==this._body?this._typesToAdd.push(a):this._body.get_cbTypes().add(this.getCbType(a))},raycast:function(a,b,c,d,e,h){null==
e&&(e=0);null==d&&(d=0);if(null==this._body||null==this._body.get_space())return null;null==this._ray&&(this._ray=new zk(ha.get(0,0,!0),ha.get(0,0,!0)));b=ha.get(b,c,null);this._ray.zpp_inner.origin.set(this._body.localPointToWorld(ha.get(d,e,!0),!0));this._ray.zpp_inner.direction.set(b);this._ray.set_maxDistance(a);a=this._body.get_space().rayCast(this._ray,!1,h);if(null!=a)return a.zpp_inner.shape.get_body().get_userData().actor;b.dispose();return null},getVelocity:function(){return null==this._body?
ha.get(0,0,!0):this._body.get_velocity()},resetVelocity:function(){null!=this._body&&this.getVelocity().setxy(0,0)},setVelocity:function(a,b){null!=this._body&&(this._body.get_velocity().set_x(a),this._body.get_velocity().set_y(b))},applyImpulse:function(a,b){null!=this._body&&this._body.applyImpulse(ha.get(a,b,!0))},applyAngularImpulse:function(a,b){null!=this._body&&this._body.applyImpulse(ha.weak(Math.cos(a)*b,Math.sin(a)*b))},resetImpulse:function(){null!=this._body&&this._body.set_force(ha.get(0,
0,!0))},setPosition:function(a,b,c){null==c&&(c=0);null!=this._body&&(0<c?this._body.setVelocityFromTarget(ha.get(a,b,!0),this._body.zpp_inner.rot,c):(this._body.set_position(ha.get(a,b,!0)),this.setTransform&&(this._transform.position.x=a,this._transform.position.y=b)))},moveBy:function(a,b,c){null==c&&(c=0);null!=this._transform&&this.setPosition(this._transform.position.x+a,this._transform.position.y+b,c)},enableRotation:function(a){this._transform.fixedRotation=!a;this._body.set_allowRotation(a);
a||(this._body.set_angularVel(0),this._transform.rotation=0,a=this.owner._compMap.Sprite_4,null!=a&&a.setRotation(0))},rotate:function(a){var b=this._body;b.set_rotation(b.zpp_inner.rot+a)},setRotation:function(a){null!=this._body&&(this._body.set_rotation(a),this.setTransform&&(this._transform.rotation=180*this._body.zpp_inner.rot/3.141592653589793))},getRotation:function(){return this._body.zpp_inner.rot},getAngle:function(a){var b=a._compMap.PhysicsComponent_12.getBody().get_position();return Math.atan2(function(){b.zpp_inner.validate();
return b.zpp_inner.y}(this)-this._body.get_position().get_y(),function(){b.zpp_inner.validate();return b.zpp_inner.x}(this)-this._body.get_position().get_x())},setKinematic:function(){this._body.set_type(function(){null==f.BodyType_KINEMATIC&&(f.internal=!0,f.BodyType_KINEMATIC=new Jb,f.internal=!1);return f.BodyType_KINEMATIC}(this))},setDynamic:function(){this._body.set_type(function(){null==f.BodyType_DYNAMIC&&(f.internal=!0,f.BodyType_DYNAMIC=new Jb,f.internal=!1);return f.BodyType_DYNAMIC}(this))},
setMassScale:function(a){this._body.set_gravMassScale(a)},resetType:function(){if(null!=this._transform){var a;this._transform.fixed?(null==f.BodyType_STATIC&&(f.internal=!0,f.BodyType_STATIC=new Jb,f.internal=!1),a=f.BodyType_STATIC):(null==f.BodyType_DYNAMIC&&(f.internal=!0,f.BodyType_DYNAMIC=new Jb,f.internal=!1),a=f.BodyType_DYNAMIC);this.kinematic&&(null==f.BodyType_KINEMATIC&&(f.internal=!0,f.BodyType_KINEMATIC=new Jb,f.internal=!1),a=f.BodyType_KINEMATIC,this._transform.fixed=!1);null!=this._body&&
this._body.set_type(a)}},getInteractionType:function(){return this.isSensor()?ja.SENSOR:ja.COLLISION},isSensor:function(){return null!=this.shape&&this.shape.sensor},__class__:Dd});var nd=function(){this.color=16776960;this.size=1;this.debug=!0;j.call(this)};g["stolo.ensys.components.PhysicsDebugComponent"]=nd;nd.__name__=["stolo","ensys","components","PhysicsDebugComponent"];nd.__super__=j;nd.prototype=k(j.prototype,{get_name:function(){return"PhysicsDebugComponent_31"},onStart:function(){j.prototype.onStart.call(this);
this._transform=this.owner._compMap.TransformComponent_26;this._physics=this.owner._compMap.PhysicsComponent_12;if(null!=this._physics){var a=this._physics.getBody();null!=a&&!a.zpp_inner.wrap_shapes.empty()&&this.createShapes();this._physics.onShapesCreated.connect(m(this,this.createShapes))}},onStop:function(){null!=this._container&&(this._container.parent.removeChild(this._container),this._container=null);this._sprite=null;j.prototype.onStop.call(this)},onUpdate:function(a){j.prototype.onUpdate.call(this,
a);this.updateTransform()},updateTransform:function(){null!=this._sprite&&(this._sprite.setXY(this._transform.position.x,this._transform.position.y),this._sprite.setRotation(this._transform.rotation))},createShapes:function(){null!=this._container&&this._container.dispose();var a;V.getSystemEntity(this.owner);a=V.getSystemEntity(this.owner).getComponent("RendererSystem_6");var b=a.getActorLayer(this.owner);a=a.addLayer({name:b.getName()+"_physics",parallax:b.parallax,editor:{unlockable:!0,locked:!0}});
a.set_pointerEnabled(!1);this._container=new z;this._sprite=new D;this._container.add(this._sprite);a.owner.addChild(this._container);b=this._physics.shape;if(ba.is(b,P.TObject))this.createShape(b);else if(ba.is(b,P.TClass(Array))){a=0;for(b=pa.__cast(b,Array);a<b.length;){var c=b[a];++a;this.createShape(c)}}},createShape:function(a){var b=null;if("box"==a.type||null==a.type){var c=Math.round(a.width),d=Math.round(a.height);if(c>nd.maxSize||d>nd.maxSize)c=Math.min(nd.maxSize,a.width),d=Math.min(nd.maxSize,
a.height);var b=p._platform.getRenderer().createTexture(c,d),e=b.get_graphics();e.fillRect(this.color,0,0,c,this.size);e.fillRect(this.color,0,d-this.size,c,this.size);e.fillRect(this.color,0,0,this.size,d);e.fillRect(this.color,c-this.size,0,this.size,d);e.translate(0.5*c,0.5*d);e.fillRect(this.color,-10,0.5*-this.size,20,this.size);e.fillRect(this.color,0.5*-this.size,-10,this.size,20);b=new ia(b);b.setAnchor(0.5*c-Math.round(a.x),0.5*d-Math.round(a.y))}else if("circle"==a.type){c=a.radius;d=p._platform.getRenderer().createTexture(2*
c+2*this.size,2*c+2*this.size);b=d.get_graphics();for(e=0;360>e;){var h=e++;b.fillRect(this.color,this.size+c+Math.cos(h)*c,this.size+c+Math.sin(h)*c,this.size,this.size)}b.translate(this.size+c,this.size+c);b.fillRect(this.color,0,0,c,this.size);b=new ia(d);b.setAnchor(c-Math.round(a.x),c-Math.round(a.y))}null!=b&&this._container.addChild((new z).add(b))},__class__:nd});var Fg=function(){this.left=this.right=this.top=this.bottom=this.acceptOnce=!1;j.call(this)};g["stolo.ensys.components.PassthroughComponent"]=
Fg;Fg.__name__=["stolo","ensys","components","PassthroughComponent"];Fg.__super__=j;Fg.prototype=k(j.prototype,{get_name:function(){return"PassthroughComponent_35"},onStart:function(){j.prototype.onStart.call(this);null!=this.owner._compMap.PhysicsComponent_12&&this.owner._compMap.PhysicsComponent_12.addContactType(N.PASSTHROUGH);V.getSystemEntity(this.owner);this._physicSystem=V.getSystemEntity(this.owner).getComponent("PhysicSystem_22");this._physicSystem.addContactListener(da.PRELISTENER,ja.COLLISION,
N.PASSTHROUGH,N.PASSTHROUGHABLE,this.owner,m(this,this.onPreContact),this.acceptOnce)},onStop:function(){this._physicSystem.removeContactListener(da.PRELISTENER,ja.COLLISION,N.PASSTHROUGH,N.PASSTHROUGHABLE,this.owner);j.prototype.onStop.call(this);this._physicSystem=null},onPreContact:function(a,b){var c=a._compMap.PassthroughableComponent_36,d=null!=a._compMap.TransformComponent_26&&1==a._compMap.TransformComponent_26.direction;return this.left||c.left&&180*b.angle/3.141592653589793==(d?180:0)||
this.right||c.right&&180*b.angle/3.141592653589793==(d?0:180)||this.top||c.top&&90==180*b.angle/3.141592653589793||this.bottom||c.bottom&&-90==180*b.angle/3.141592653589793?!1:!0},__class__:Fg});var Gg=function(){j.call(this)};g["stolo.ensys.components.PassthroughableComponent"]=Gg;Gg.__name__=["stolo","ensys","components","PassthroughableComponent"];Gg.__super__=j;Gg.prototype=k(j.prototype,{get_name:function(){return"PassthroughableComponent_36"},onStart:function(){null!=this.owner._compMap.PhysicsComponent_12&&
this.owner._compMap.PhysicsComponent_12.addContactType(N.PASSTHROUGHABLE)},__class__:Gg});var Hg=function(){j.call(this)};g["stolo.ensys.components.FrictionerComponent"]=Hg;Hg.__name__=["stolo","ensys","components","FrictionerComponent"];Hg.__super__=j;Hg.prototype=k(j.prototype,{get_name:function(){return"FrictionerComponent_37"},onStart:function(){j.prototype.onStart.call(this);null!=this.owner._compMap.PhysicsComponent_12&&this.owner._compMap.PhysicsComponent_12.addContactType(N.FRICTIONER);V.getSystemEntity(this.owner);
this._physicSystem=V.getSystemEntity(this.owner).getComponent("PhysicSystem_22");this._physicSystem.addContactListener(da.PRELISTENER,ja.COLLISION,N.FRICTIONER,N.ANY_BODY,this.owner,m(this,this.onPreContact))},onStop:function(){this._physicSystem.removeContactListener(da.PRELISTENER,ja.COLLISION,N.FRICTIONER,N.ANY_BODY,this.owner);j.prototype.onStop.call(this)},onPreContact:function(a,b){90!=180*b.angle/3.141592653589793&&b.disableFriction();return!0},__class__:Hg});var ve=function(){this.end=this.prelisten=
this.ongoing=!1;this.begin=!0;this.listenFrom=this.listenTo=N.ANY_BODY;this.isActive=!0;j.call(this)};g["stolo.ensys.physics.components.ContactBased"]=ve;ve.__name__=["stolo","ensys","physics","components","ContactBased"];ve.__super__=j;ve.prototype=k(j.prototype,{get_name:function(){return"ContactBased_38"},dispose:function(){j.prototype.dispose.call(this)},onAdded:function(){j.prototype.onAdded.call(this)},onStart:function(){j.prototype.onStart.call(this);var a;a=this.owner._internal_getFromParents("PhysicSystem_22");
null==this._interactionType&&(this._interactionType=this.owner._compMap.PhysicsComponent_12.getInteractionType());this.listenFrom=this.validateContactType(this.listenFrom);this.listenTo=this.validateContactType(this.listenTo);this.begin&&a.addContactListener(da.BEGIN,this._interactionType,this.listenFrom,this.listenTo,this.owner,m(this,this.onContactBegin));this.end&&a.addContactListener(da.END,this._interactionType,this.listenFrom,this.listenTo,this.owner,m(this,this.onContactEnd));this.prelisten&&
a.addContactListener(da.PRELISTENER,this._interactionType,this.listenFrom,this.listenTo,this.owner,m(this,this.onPreContact));this.ongoing&&a.addContactListener(da.ONGOING,this._interactionType,this.listenFrom,this.listenTo,this.owner,m(this,this.onContactOnGoing))},validateContactType:function(a){return null==a||""==a?N.ANY_BODY:a},onStop:function(){var a;a=this.owner._internal_getFromParents("PhysicSystem_22");this.begin&&a.removeContactListener(da.BEGIN,this._interactionType,this.listenFrom,this.listenTo,
this.owner);this.end&&a.removeContactListener(da.END,this._interactionType,this.listenFrom,this.listenTo,this.owner);this.prelisten&&a.removeContactListener(da.PRELISTENER,this._interactionType,this.listenFrom,this.listenTo,this.owner);this.ongoing&&a.removeContactListener(da.ONGOING,this._interactionType,this.listenFrom,this.listenTo,this.owner);j.prototype.onStop.call(this)},onPreContact:function(){return!0},onContactBegin:function(){return!0},onContactOnGoing:function(){return!0},onContactEnd:function(){return!0},
__class__:ve});var $i=function(){this._fixedAngle=!1;this.angleDirection=!0;this.angle=-1;this.centrifuge=!1;this.force=3E3;ve.call(this)};g["stolo.ensys.physics.components.ForceField"]=$i;$i.__name__=["stolo","ensys","physics","components","ForceField"];$i.__super__=ve;$i.prototype=k(ve.prototype,{dispose:function(){ve.prototype.dispose.call(this)},onStart:function(){ve.prototype.onStart.call(this);this.setAngle(this.angle)},onContactBegin:function(a,b){this.applyForce(a,this.getContactAngle(a,b));
return!0},onContactOnGoing:function(a,b){this.applyForce(a,this.getContactAngle(a,b));return!0},getContactAngle:function(a,b){return this._fixedAngle?this.angleDirection&&-1==this.owner._compMap.TransformComponent_26.direction?this._radians+Math.PI:this._radians:this.centrifuge||null==b?this.owner._compMap.PhysicsComponent_12.getAngle(a):b.angle},applyForce:function(a,b){a._compMap.PhysicsComponent_12.applyAngularImpulse(b,this.force)},setAngle:function(a){this.angle=a;-1==a?this._fixedAngle=!1:(this._fixedAngle=
!0,this._radians=(a+-90)*Math.PI/180)},__class__:$i});var sf=function(){this.resistanceX=this.resistanceY=-1;this.resistance=sf.defaultResistance;this.enabled=!0;j.call(this)};g["stolo.ensys.physics.components.AirFriction"]=sf;sf.__name__=["stolo","ensys","physics","components","AirFriction"];sf.__super__=j;sf.prototype=k(j.prototype,{get_name:function(){return"AirFriction_39"},onStart:function(){j.prototype.onStart.call(this);-1==this.resistanceX&&(this.resistanceX=this.resistance);-1==this.resistanceY&&
(this.resistanceY=this.resistance);this._physics=this.owner._compMap.PhysicsComponent_12},onUpdate:function(a){j.prototype.onUpdate.call(this,a);if(this.enabled){var b=this._physics.getBody().get_velocity();0<this.resistanceX&&b.set_x(function(){b.zpp_inner.validate();return b.zpp_inner.x}(this)-function(){b.zpp_inner.validate();return b.zpp_inner.x}(this)*this.resistanceX*a);0<this.resistanceY&&b.set_y(function(){b.zpp_inner.validate();return b.zpp_inner.y}(this)-function(){b.zpp_inner.validate();
return b.zpp_inner.y}(this)*this.resistanceY*a)}},__class__:sf});var Ig=function(){j.call(this)};g["stolo.ensys.components.SpawnPointComponent"]=Ig;Ig.__name__=["stolo","ensys","components","SpawnPointComponent"];Ig.__super__=j;Ig.prototype=k(j.prototype,{get_name:function(){return"SpawnPointComponent_40"},onStart:function(){},__class__:Ig});var Ed=function(){this._cooldown=0;this.onDeath=new Y;this.onDamageCancelled=new Y;this.onDamage=new Y;this.health=new $a(0);j.call(this)};g["stolo.ensys.components.HealthComponent"]=
Ed;Ed.__name__=["stolo","ensys","components","HealthComponent"];Ed.__super__=j;Ed.prototype=k(j.prototype,{get_name:function(){return"HealthComponent_42"},dispose:function(){j.prototype.dispose.call(this);this._soundSystem=null},onAdded:function(){0<this.hits&&(this.maximum=this.hits);this.set(0<this.start?this.start:this.maximum)},onStart:function(){j.prototype.onStart.call(this);this._soundSystem=V.getSystemEntity(this.owner)._compMap.SoundSystem_23;null!=this.owner._compMap.PhysicsComponent_12&&
this.owner._compMap.PhysicsComponent_12.addContactType(N.DAMAGEABLE)},onUpdate:function(a){0<this._cooldown&&(this._cooldown-=a);j.prototype.onUpdate.call(this,a)},onStop:function(){j.prototype.onStop.call(this);this.onDeath=this.onDamage=this.onDamageCancelled=null},modify:function(a){this.health.set__(Math.min(Math.max(0,this.health._value+a),this.maximum));return this.health._value},set:function(a){this.health.set__(Math.min(Math.max(0,a),this.maximum));return this.health._value},isDead:function(){return 0>=
this.health._value},canDamage:function(){return this.invincible||0>=this.health._value?!1:!0},damage:function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);if(0<this._cooldown)return!1;if(!this.canDamage())return this.invincible&&null!=this.invincibleSound&&!this.isDead()&&this._soundSystem.play(this.invincibleSound,this.owner,Ed.SOUND_CHANNEL),this.onDamageCancelled.emit(b),!1;0<this.hits?(this.modify(-1),this.lastDamage=1):(this.modify(-a),this.lastDamage=a);0<this.cooldown&&(this._cooldown=this.cooldown);
null!=this.damageSound&&!this.isDead()&&this._soundSystem.play(this.damageSound,this.owner,Ed.SOUND_CHANNEL);(0!=this.knock&&0!=c||0!=d)&&this.knockPhysics(b,c,d,this.knock);this.onDamage.emit(b);this.isDead()&&this.die(b);return!0},die:function(a){this.health.set__(0);""!=this.deathSound&&this._soundSystem.play(this.deathSound,this.owner,Ed.SOUND_CHANNEL_DEATH);if(this.disposeOwner)V.getSystemEntity(this.owner),V.getSystemEntity(this.owner).getComponent("ActorSystem_3").removeActor(this.owner);else if(this.removePhysics){var b=
this.owner._compMap.PhysicsComponent_12;null!=b&&b.enable(!1)}this.onDeath.emit(a)},knockPhysics:function(a,b,c,d){null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);if(0!=d){var e=this.owner._compMap.PhysicsComponent_12,h=this.owner._compMap.TransformComponent_26;null!=e&&!e.kinematic&&e.setVelocity(b*d*(a._compMap.TransformComponent_26.position.x>h.position.x?-1:1),-c*d)}},__class__:Ed});var Wd=function(){this._timer=0;this.ignoreActors=[];this.assetDisplayType="image";this.assetBase=1;this.assetIndex=
0;j.call(this)};g["stolo.ensys.components.LauncherComponent"]=Wd;Wd.__name__=["stolo","ensys","components","LauncherComponent"];Wd.__super__=j;Wd.prototype=k(j.prototype,{get_name:function(){return"LauncherComponent_45"},onStart:function(){this._timer=this.shotDelay;V.getSystemEntity(this.owner);this._actors=V.getSystemEntity(this.owner).getComponent("ActorSystem_3");V.getSystemEntity(this.owner);this._sounds=V.getSystemEntity(this.owner).getComponent("SoundSystem_23");this._transform=this.owner._compMap.TransformComponent_26},
onStop:function(){j.prototype.onStop.call(this);this._sounds=this._actors=this._transform=null},onUpdate:function(a){0<this._timer&&(this._timer-=a)},launch:function(a){if(null==this._transform||0<this._timer)return null;var b=this.projectile,c=this.offset,d=this.force,e=this.angle;null!=a&&(null!=a.projectile&&(b=a.projectile),null!=a.offset&&(c=a.offset),null!=a.force&&(d=a.force),null!=a.angle&&(e=a.angle));this._timer=null!=a&&null!=a.shotDelay?a.shotDelay:this.shotDelay;a=3.141592653589793*this._transform.rotation/
180;e=a+3.141592653589793*e/180;""!=this.launchSound&&this._sounds.play(this.launchSound,this.owner,"LAUNCHER");b={template:{key:b},transform:{position:{x:this._transform.position.x+this._transform.direction*c.x*Math.cos(a)-c.y*Math.sin(a),y:this._transform.position.y+c.y*Math.cos(a)+c.x*Math.sin(a)},rotation:180*e/3.141592653589793*this._transform.direction,direction:this._transform.direction},physics:{impulse:{x:Math.cos(e)*d*this._transform.direction,y:Math.sin(e)*d}}};null!=this.asset&&0<this.assetMax&&
(c=this.getNextAsset(),b[this.assetDisplayType]={asset:c});b=this._actors.spawn(b);c=b._compMap.ProjectileComponent_46;null!=c&&(d=this.ignoreActors.slice(),d.push(this.owner),c.ignoreActors=d);return b},getNextAsset:function(){var a=this.assetBase;"linear"==this.assetProgression?(a+=this.assetIndex,this.assetIndex++,this.assetIndex>=this.assetMax&&(this.assetIndex=0)):a+=Math.round(Math.random()*(this.assetMax-this.assetBase));return this.asset+a},__class__:Wd});var ff=function(){this.angleSpread=
50;this.projectiles=0;Wd.call(this)};g["stolo.ensys.components.ExploderComponent"]=ff;ff.__name__=["stolo","ensys","components","ExploderComponent"];ff.__super__=Wd;ff.prototype=k(Wd.prototype,{explode:function(){for(var a=0,b=this.projectiles;a<b;)this.launch({angle:this.getNextAngle(a++),shotDelay:0})},getNextAngle:function(){return this.getRandomAngle()},getRandomAngle:function(){return this.angle+Math.random()*this.angleSpread-0.5*this.angleSpread},__class__:ff});var Jg=function(){this._removeIn=
0;this.onExploded=new Y;this.onExplode=new Y;this.ignoreActors=[];this.exploded=!1;j.call(this)};g["stolo.ensys.components.ProjectileComponent"]=Jg;Jg.__name__=["stolo","ensys","components","ProjectileComponent"];Jg.__super__=j;Jg.prototype=k(j.prototype,{get_name:function(){return"ProjectileComponent_46"},onStart:function(){j.prototype.onStart.call(this);V.getSystemEntity(this.owner);this._actorSystem=V.getSystemEntity(this.owner).getComponent("ActorSystem_3");V.getSystemEntity(this.owner);this._physicSystem=
V.getSystemEntity(this.owner).getComponent("PhysicSystem_22");V.getSystemEntity(this.owner);this._soundSystem=V.getSystemEntity(this.owner).getComponent("SoundSystem_23");this._sprite=this.owner._compMap.Sprite_4;this._animation=null!=G.instance(this.owner._compMap.Sprite_4,yb)?this._sprite:null;this._physics=this.owner._compMap.PhysicsComponent_12;this._transform=this.owner._compMap.TransformComponent_26;null!=this._physics&&(this._physics.addContactType(N.PROJECTILE),this._physicSystem.addContactListener(da.PRELISTENER,
ja.COLLISION,N.PROJECTILE,this.target,this.owner,m(this,this.onContactBegin)));this._removeIn=this.expire;if(null!=this._animation){this.velocityRotation&&this._animation.rotation.set__(0);var a=this._animation.animation;null!=a&&a.hasAnim("shoot")&&a.hasAnim("idle")&&(a.gotoAndPlay(["shoot","idle"]).loop=!1)}},onStop:function(){this._physicSystem.removeContactListener(da.PRELISTENER,ja.COLLISION,N.PROJECTILE,this.target,this.owner);j.prototype.onStop.call(this);this._soundSystem=this._physicSystem=
this._actorSystem=this._transform=this._animation=this._physics=this._sprite=this.onExploded=this.onExplode=this.ignoreActors=null},onUpdate:function(a){if(this.exploded||0<this.expire)0<this._removeIn?this._removeIn-=a:this._actorSystem.removeActor(this.owner);!this.exploded&&this.velocityRotation&&(a=this._physics.getVelocity(),null!=this._animation&&(a.zpp_inner.validate(),0>a.zpp_inner.y?this._animation.rotation.set__(0):this._animation.rotation.set__(180)))},onContactBegin:function(a){var b=
a._compMap.PhysicsComponent_12;if(null==b||b.hasContactType(N.PROJECTILE)&&this.ignoreProjectiles)return!1;for(var b=0,c=this.ignoreActors;b<c.length;){var d=c[b];++b;if(d==a)return!1}this.exploded||this.explode();return!0},explode:function(){if(!this.exploded){this.onExplode.emit(this.owner);this.exploded=!0;this._removeIn=this.removeAfter;if(null!=this._animation){var a=this._animation.animation;null!=a&&a.hasAnim("explode")&&(a.gotoAndPlay("explode",{onComplete:m(this,this.onExplodeComplete)}),
this._removeIn=999,""!=this.explodeSound&&this._soundSystem.play(this.explodeSound,this.owner,"PROJECTILE"),this._animation.rotation.set__(0),this._transform.rotation=0,this._transform.fixedRotation=!0)}else this.onExploded.emit(this.owner);null!=this._physics&&this.stopPhysicOnExplode&&(this._physics.enable(!1),""!=this.hitSound&&this._soundSystem.play(this.hitSound,this.owner,"PROJECTILE"))}},onExplodeComplete:function(){this._removeIn=-1;null!=this._animation&&this._animation.animation.stop();
this.onExploded.emit(this.owner)},__class__:Jg});var Kg=function(){this._activated=!1;j.call(this)};g["stolo.ensys.components.PlatformComponent"]=Kg;Kg.__name__=["stolo","ensys","components","PlatformComponent"];Kg.__super__=j;Kg.prototype=k(j.prototype,{get_name:function(){return"PlatformComponent_49"},onStart:function(){this._physics=this.owner._compMap.PhysicsComponent_12;this._initPosition=new cb(this.owner._compMap.TransformComponent_26.position.x,this.owner._compMap.TransformComponent_26.position.y);
this._script=this.owner._compMap.Script_24;null==this._script&&(this._script=new Eb,this.owner.add(this._script));this._activated&&(this._activated=!1);this.activate()},onStop:function(){j.prototype.onStop.call(this);this._position=this._sequence=this._physics=this._script=null},onUpdate:function(a){null!=this._position&&(this._position.update(a),this._physics.setPosition(this._position.x._value,this._position.y._value,0.6))},startSequence:function(){if(!this.repeat&&null!=this._sequence)this._script.run(this._sequence);
else if(!(null==this.sequence||null!=this._sequence)){var a=this.sequence.actions;this._position=new Jd(this._initPosition.x,this._initPosition.y);var b={x:this._position.x,y:this._position.y,offsetX:this._initPosition.x,offsetY:this._initPosition.y};null==this.sequence.loop&&(this.sequence.loop=!0);this.repeat=this.sequence.yoyo||this.sequence.loop;this._sequence=Xa.getMovementSequence(a,b,this.sequence.loop,this.sequence.yoyo,this.sequence.delay);this._sequence.add(new ga(m(this,this.onSequenceComplete)));
this._script.run(this._sequence)}},onSequenceComplete:function(){null!=this._script&&(this.repeat?this._script.run(this._sequence):this._activated=!1)},activate:function(){this._activated||(this._activated=!0,null!=this.sequence&&this.startSequence())},__class__:Kg});var ul=function(){};g["stolo.ensys.components.DefaultComponents"]=ul;ul.__name__=["stolo","ensys","components","DefaultComponents"];var Lg=function(a){this._actors=[];this.position=new cb;this.axis=Vc.Horizontal;this.data=a;j.call(this)};
g["stolo.ensys.components.SequenceComponent"]=Lg;Lg.__name__=["stolo","ensys","components","SequenceComponent"];Lg.__super__=j;Lg.prototype=k(j.prototype,{get_name:function(){return"SequenceComponent_65"},onStart:function(){j.prototype.onStart.call(this);this._actorSystem=this.owner._internal_getFromParents("ActorSystem_3");null!=this.data&&this.build(this.data)},onStop:function(){j.prototype.onStop.call(this)},dispose:function(){j.prototype.dispose.call(this);for(var a=0,b=this._actors;a<b.length;){var c=
b[a];++a;this._actorSystem.removeActor(c)}this.position=this.parent=this.data=this._actorSystem=this._actors=null},build:function(a){this.data=a;if(null==this.actorTypes||0>=this.actorTypes.length)throw"No actor types for sequence!";for(var b=null,c=0,d=this.actorTypes;c<d.length;){var e=d[c];++c;b=B.field(a,e);null!=b&&this.buildActors(e,b)}},buildActors:function(a,b){for(var c=0;c<b.length;){var d=b[c];++c;this.buildActor(d,a)}},buildActor:function(a,b){a=this.parseActorData(a,b);null==a.template&&
(a.template={});a.template.spawner=2;var c=this._actorSystem.spawn(a);this.addActor(c,a,b);return c},parseActorData:function(a,b,c){null==c&&(c=!0);return a=tf.parseActorData(this,a,c)},addActor:function(a){this._actors.push(a);return a},__class__:Lg});var Re=function(a){this.parallax={x:1,y:1};Gb.call(this);this.data=a;this._name=a.name;null!=a.parallax&&(this.parallax.x=G.parseFloat(a.parallax.x),this.parallax.y=G.parseFloat(a.parallax.y));a.alpha&&this.setAlpha(a.alpha)};g["stolo.ensys.display.LayerSprite"]=
Re;Re.__name__=["stolo","ensys","display","LayerSprite"];Re.__super__=Gb;Re.prototype=k(Gb.prototype,{getName:function(){return this._name},move:function(a,b){null!=this.offset&&(a+=this.offset.x,b+=this.offset.y);this.setXY(a*this.parallax.x,b*this.parallax.y)},__class__:Re});var aj=function(a,b,c,d){null==d&&(d=100);this._width=this._height=1E3;this._size=100;Re.call(this,a);this._width=b;this._height=c;this._size=d;this.setAlpha(0.4);this.construct()};g["stolo.ensys.display.LayerGridSprite"]=aj;
aj.__name__=["stolo","ensys","display","LayerGridSprite"];aj.__super__=Re;aj.prototype=k(Re.prototype,{draw:function(a){a.drawTexture(this._texture,(-Math.floor(this.x._value/this._size)-1)*this._size,(-Math.floor(this.y._value/this._size)-1)*this._size)},construct:function(){var a=Math.ceil(this._width/this._size)+1,b=Math.ceil(this._height/this._size)+1;this._gridTexture=w.getPack("debug").getTexture("grid");this._texture=p._platform.getRenderer().createTexture(a*this._size,b*this._size);for(var c=
this._texture.get_graphics(),d=0;d<a;)for(var e=d++,h=0;h<b;){var n=h++;c.drawTexture(this._gridTexture,e*this._size,n*this._size)}},__class__:aj});var Je=function(a){gc.call(this);this.levelData=a};g["stolo.ensys.editor.EditorSystem"]=Je;Je.__name__=["stolo","ensys","editor","EditorSystem"];Je.__super__=gc;Je.prototype=k(gc.prototype,{buildSubSystems:function(){gc.prototype.buildSubSystems.call(this);this.camera.enabled=!1;this.clipboard=new bj;this.owner.add(this.clipboard);this.tool=new cj;this.owner.add(this.tool);
this.shortcut=new dj;this.owner.add(this.shortcut);this.history=new ej;this.owner.add(this.history);this.dialog=new fj;this.owner.add(this.dialog);this.selection=new gj;this.owner.add(this.selection);this.document=new hj;this.owner.add(this.document);this.logic=new ij;this.owner.add(this.logic)},buildLevel:function(){this.level=new jj;this.owner.add(this.level)},__class__:Je});var Dc=function(a){this._system=a};g["stolo.ensys.editor.action.Action"]=Dc;Dc.__name__=["stolo","ensys","editor","action",
"Action"];Dc.prototype={execute:function(){throw"action execute not implemented";},__class__:Dc};var kj=function(a){this._system=a};g["stolo.ensys.editor.action.CopyAction"]=kj;kj.__name__=["stolo","ensys","editor","action","CopyAction"];kj.__super__=Dc;kj.prototype=k(Dc.prototype,{execute:function(){var a=this._system.selection.getAll();if(0!=a.length){for(var b=[],c=0;c<a.length;){var d=a[c];++c;d=d._compMap.EditorMetaComponent_30;null!=d&&b.push(ba.clone(d.getTemplate()))}this._system.clipboard.set(b)}},
__class__:kj});var lj=function(a){this.offset=new cb(10,10);this._system=a};g["stolo.ensys.editor.action.PasteAction"]=lj;lj.__name__=["stolo","ensys","editor","action","PasteAction"];lj.__super__=Dc;lj.prototype=k(Dc.prototype,{execute:function(){var a=this._system.clipboard.get();this._system.selection.clear();for(var b=0;b<a.length;){var c=a[b];++b;c=ba.clone(c);null==c.transform&&(c.transform={});var d=c.transform.position;null==d&&(d=c.transform.position={x:0,y:0});d.x+=this.offset.x;d.y+=this.offset.y;
this._system.selection.add(this._system.logic.spawnActor(c))}},__class__:lj});var mj=function(a){this._system=a};g["stolo.ensys.editor.action.RedoAction"]=mj;mj.__name__=["stolo","ensys","editor","action","RedoAction"];mj.__super__=Dc;mj.prototype=k(Dc.prototype,{execute:function(){this._system.history.redo()},__class__:mj});var nj=function(a){this._system=a};g["stolo.ensys.editor.action.TestAction"]=nj;nj.__name__=["stolo","ensys","editor","action","TestAction"];nj.__super__=Dc;nj.prototype=k(Dc.prototype,
{execute:function(){null},__class__:nj});var oj=function(a){this._system=a};g["stolo.ensys.editor.action.UndoAction"]=oj;oj.__name__=["stolo","ensys","editor","action","UndoAction"];oj.__super__=Dc;oj.prototype=k(Dc.prototype,{execute:function(){this._system.history.undo()},__class__:oj});var vl=function(){};g["stolo.ensys.editor.command.Command"]=vl;vl.__name__=["stolo","ensys","editor","command","Command"];vl.prototype={redo:function(){throw"redo not implemented";},undo:function(){throw"undo not implemented";
},__class__:vl};var pj=function(a){j.call(this);this._template=null==a?{}:a};g["stolo.ensys.editor.component.EditorMetaComponent"]=pj;pj.__name__=["stolo","ensys","editor","component","EditorMetaComponent"];pj.__super__=j;pj.prototype=k(j.prototype,{get_name:function(){return"EditorMetaComponent_30"},onAdded:function(){j.prototype.onAdded.call(this)},onRemoved:function(){j.prototype.onRemoved.call(this)},updateProperty:function(a,b,c){Object.prototype.hasOwnProperty.call(this._template,a)||B.setProperty(this._template,
a,{});a=B.getProperty(this._template,a);B.setProperty(a,b,c)},getTemplate:function(){return this._template},__class__:pj});var za=function(a){D.call(this);for(var b=0,c=B.fields(a);b<c.length;){var d=c[b];++b;B.setProperty(this,d,B.field(a,d))}};g["stolo.ensys.editor.dialog.Dialog"]=za;za.__name__=["stolo","ensys","editor","dialog","Dialog"];za.getGui=function(a){if(null==za.gui){var b=eval("dat.GUI");za.gui=ra.createInstance(b,[])}return za.gui.addFolder(a)};za.__super__=D;za.prototype=k(D.prototype,
{__class__:za});var qj=function(a){za.call(this);this._system=a};g["stolo.ensys.editor.dialog.EditorDialog"]=qj;qj.__name__=["stolo","ensys","editor","dialog","EditorDialog"];qj.__super__=za;qj.prototype=k(za.prototype,{onStart:function(){var a=this;za.prototype.onStart.call(this);this._gui=za.getGui("Editor");this._data={snapX:this._system.logic.snapX,snapY:this._system.logic.snapY,snapRotation:this._system.logic.snapRotation,enablePhysics:this._system.logic.get_enablePhysics(),launch:function(){Qb.getURL("./jsembed.html?level="+
a._system.levelData.name)},"export":function(){a._system.document["export"]()}};this._gui.add(this._data,"snapX",0,100).step(10).listen().onChange(function(b){a._system.logic.snapX=b});this._gui.add(this._data,"snapY",0,100).step(10).listen().onChange(function(b){a._system.logic.snapY=b});this._gui.add(this._data,"snapRotation",0,180).step(5).listen().onChange(function(b){a._system.logic.snapRotation=b});this._gui.add(this._data,"enablePhysics").onChange(function(b){a._system.logic.set_enablePhysics(b)});
this._gui.add(this._data,"export");this._gui.add(this._data,"launch");var b=Qb.getUrlParams();if(0!=b.width&&0!=b.height){var c=this._system.renderer.addLayer({name:"borders",parallax:{x:1,y:1},editor:{locked:!0}}),d=b.width,b=b.height,e=p._platform.getRenderer().createTexture(d,b),h=e.get_graphics();h.fillRect(16777215,0,0,d,2);h.fillRect(16777215,0,b-2,d,2);h.fillRect(16777215,0,0,2,b);h.fillRect(16777215,d-2,0,2,b);h.translate(0.5*d,0.5*b);h.fillRect(16777215,-10,-1,20,2);h.fillRect(16777215,-1,
-10,2,20);d=new ia(e);c.owner.addChild((new z).add(d))}},onUpdate:function(a){za.prototype.onUpdate.call(this,a);this._data.snapX=this._system.logic.snapX;this._data.snapY=this._system.logic.snapY;this._data.snapRotation=this._system.logic.snapRotation;this._data.enablePhysics=this._system.logic.get_enablePhysics()},__class__:qj});var rj=function(a){za.call(this);this._system=a};g["stolo.ensys.editor.dialog.HistoryDialog"]=rj;rj.__name__=["stolo","ensys","editor","dialog","HistoryDialog"];rj.__super__=
za;rj.prototype=k(za.prototype,{onStart:function(){var a=this;za.prototype.onStart.call(this);this._gui=za.getGui("History");this._data={undo:function(){a._system.history.undo()},redo:function(){a._system.history.redo()}};this._gui.add(this._data,"redo");this._gui.add(this._data,"undo")},__class__:rj});var sj=function(a){za.call(this);this._system=a;this._renderer=a.renderer};g["stolo.ensys.editor.dialog.RendererDialog"]=sj;sj.__name__=["stolo","ensys","editor","dialog","RendererDialog"];sj.__super__=
za;sj.prototype=k(za.prototype,{onStart:function(){var a=this;za.prototype.onStart.call(this);this._layers=this._renderer.getLayers();this._gui=za.getGui("Renderer");this._data={x:this._renderer.displacement.x,y:this._renderer.displacement.y,scale:this._renderer.scale};this._gui.add(this._data,"x").listen().onChange(function(b){a._renderer.move(b,a._data.y)});this._gui.add(this._data,"y").listen().onChange(function(b){a._renderer.move(a._data.x,b)});this._gui.add(this._data,"scale",0.2,1).listen().onChange(function(b){a._renderer.setScale(b)});
for(var b=this._gui.addFolder("Layers alpha"),c={},d=this._gui.addFolder("Layers lock"),e={},h=0,f=this._layers;h<f.length;){var g=[f[h]];++h;var i=g[0].getName(),j=g[0].data.editor;null!=j&&!0==j.locked&&g[0].set_pointerEnabled(!1);B.setProperty(c,i,g[0].alpha._value);b.add(c,i,0,1).onFinishChange(function(a){return function(b){a[0].setAlpha(b)}}(g));if(null==j||!0!=j.unlockable)B.setProperty(e,i,0==(g[0]._flags&4)),d.add(e,i).onFinishChange(function(a){return function(b){a[0].set_pointerEnabled(!b)}}(g))}},
onUpdate:function(a){za.prototype.onUpdate.call(this,a);this._data.scale=this._renderer.scale;this._data.x=this._renderer.displacement.x;this._data.y=this._renderer.displacement.y},__class__:sj});var mc=function(a){this.templateKey="";this.padding=5;D.call(this);this._template=a;this.templateKey=this._template.template.key};g["stolo.ensys.editor.dialog.TemplateThumbnail"]=mc;mc.__name__=["stolo","ensys","editor","dialog","TemplateThumbnail"];mc.getSpriteFromTemplate=function(a){var b=null,c=0,d=B.fields(a);
try{for(;c<d.length;){var e=d[c];++c;var h=B.field(a,e);switch(e){case "image":if(null!=h.spritesheet)throw b=new Na(h.spritesheet,h.asset,h.pack),"__break__";break;case "animation":throw b=new ya(h.asset,h.pack,null,!1,h.overrides),"__break__";}var f=mc.getComponentTexture(h);null!=f&&(b=new ia(f))}}catch(g){if("__break__"!=g)throw g;}null==b&&(b=new ia(mc.getComponentTexture({pack:"debug",asset:"sprite"})));return b};mc.getComponentTexture=function(a){if(null==a.pack)return null;var b=a.asset;if(null==
b){if(null==a.assets)return null;b=a.assets[0]}if(null==b)return null;a=w.getPack(a.pack);return null==a?null:W.getTexture(b,a,!1)};mc.__super__=D;mc.prototype=k(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);this._background=new xb(16777215,50,50);this.owner.addChild((new z).add(this._background));this._contentSprite=mc.getSpriteFromTemplate(this._template);this.owner.addChild((new z).add(this._contentSprite));this._textSprite=U.getTextSprite("debug_font");this._textSprite.set_text(this._template.template.key);
this.owner.addChild((new z).add(this._textSprite))},onStart:function(){D.prototype.onStart.call(this)},setSize:function(a,b){var c=a-2*this.padding,d=b-2*this.padding;this._background.setSize(a,b);this._contentSprite.setScaleXY(c/this._contentSprite.getNaturalWidth(),d/this._contentSprite.getNaturalHeight());this._contentSprite.setXY(this.padding,this.padding);this._textSprite.setXY(this.padding,this.padding);this._textSprite.setWrapWidth(c)},setTextVisible:function(a){this._textSprite.set_visible(a)},
filter:function(a){if(""==a)return!0;a=a.toLowerCase();if(-1!=this._template.template.key.toLowerCase().indexOf(a))return!0;var b=this._template.template.tags;if(null!=b&&-1!=b.toString().toLowerCase().indexOf(a))return!0;for(var b=0,c=B.fields(this._template);b<c.length;){var d=c[b];++b;if(-1!=d.toLowerCase().indexOf(a))return!0}return!1},__class__:mc});var tj=function(a){this._lastPointerUpTime=0;this._filter="";this._thumbnails=[];this._showLabel=!1;this._thumbnailMargin=5;this._thumbnailSize=
40;this._width=200;this._heigh=p._platform.getStage().get_height();za.call(this);this._system=a;this._templates=J.getTemplates();this._backgroundSprite=new xb(0,this._width,this._heigh);this._backgroundSprite.setAlpha(0.5)};g["stolo.ensys.editor.dialog.TemplatesDialog"]=tj;tj.__name__=["stolo","ensys","editor","dialog","TemplatesDialog"];tj.__super__=za;tj.prototype=k(za.prototype,{onStart:function(){var a=this;za.prototype.onStart.call(this);this.owner.addChild((new z).add(this._backgroundSprite));
this.createThumbnails();this._gui=za.getGui("Templates");this._data={visible:0!=(this._flags&2),width:this._width,size:this._thumbnailSize,margin:this._thumbnailMargin,filter:this._filter,text:!1};this._gui.add(this._data,"visible").onChange(function(b){a.set_visible(b)});this._gui.add(this._data,"width",0,p._platform.getStage().get_width()).onChange(function(b){a._width=b;a.refresh()});this._gui.add(this._data,"size",20,200).step(10).onChange(function(b){a._thumbnailSize=b;a.refresh()});this._gui.add(this._data,
"margin",0,100).step(10).onChange(function(b){a._thumbnailMargin=b;a.refresh()});this._gui.add(this._data,"text").onChange(function(b){a._showLabel=b;a.refresh()});this._gui.add(this._data,"filter").onChange(function(b){a._filter=b;a.refresh()})},createThumbnails:function(){for(var a=0,b=this._templates;a<b.length;){var c=b[a];++a;c=new mc(c);this.owner.addChild((new z).add(c));this._thumbnails.push(c);c.get_pointerUp().connect(m(this,this.onThumbnailPointerUp))}this.refresh()},refresh:function(){for(var a=
[],b=0,c=this._thumbnails;b<c.length;){var d=c[b];++b;d.filter(this._filter)?(d.set_visible(!0),d.setTextVisible(this._showLabel),a.push(d)):d.set_visible(!1)}b=Math.floor(this._width/(this._thumbnailSize+this._thumbnailMargin));c=0;for(d=a.length;c<d;){var e=c++,h=a[e];h.setSize(this._thumbnailSize,this._thumbnailSize);h.setXY(this._thumbnailMargin+e%b*(this._thumbnailSize+this._thumbnailMargin),this._thumbnailMargin+Math.floor(e/b)*(this._thumbnailSize+this._thumbnailMargin))}this._backgroundSprite.setSize(this._width,
this._heigh)},onUpdate:function(a){za.prototype.onUpdate.call(this,a)},onThumbnailPointerUp:function(a){if(0.3>p._platform.getTime()-this._lastPointerUpTime){for(var b=this._system.renderer.displacement,a=a.hit,c=null;null!=a&&null==c;)pa.__instanceof(a,mc)&&(c=a),a=null==a.owner?null:null==a.owner.parent?null:a.owner.parent._compMap.Sprite_4;if(null==c)return;this._system.logic.spawnActor({template:{key:c.templateKey},transform:{position:{x:0.5*this._system.renderer.dimensionsScaled.width-b.x,y:0.5*
this._system.renderer.dimensionsScaled.height-b.y}}})}this._lastPointerUpTime=p._platform.getTime()},__class__:tj});var bj=function(){this._templates=[];j.call(this)};g["stolo.ensys.editor.system.ClipboardSystem"]=bj;bj.__name__=["stolo","ensys","editor","system","ClipboardSystem"];bj.__super__=j;bj.prototype=k(j.prototype,{get_name:function(){return"ClipboardSystem_8"},set:function(a){this._templates=a},get:function(){return this._templates},__class__:bj});var fj=function(){j.call(this)};g["stolo.ensys.editor.system.DialogSystem"]=
fj;fj.__name__=["stolo","ensys","editor","system","DialogSystem"];fj.__super__=j;fj.prototype=k(j.prototype,{get_name:function(){return"DialogSystem_17"},onAdded:function(){this._system=G.instance(this.owner._compMap.BaseGameSystem_7,Je);this.container=new z;this.container.add(new D);this._disposer=this.owner._compMap.Disposer_28;this.build()},onStart:function(){j.prototype.onStart.call(this);null==this.container.parent&&this.owner.addChild(this.container)},onStop:function(){j.prototype.onStop.call(this);
this._disposer=this.container=null},build:function(){this._editorDialog=this.addSprite(new qj(this._system));this._rendererDialog=this.addSprite(new sj(this._system));this._templatesDialog=this.addSprite(new tj(this._system));this._historyDialog=this.addSprite(new rj(this._system))},addSprite:function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);this.container.addChild((new z).add(a));a.x.set__(d+b*p._platform.getStage().get_width());a.y.set__(e+c*p._platform.getStage().get_height());
return a},onUpdate:function(a){j.prototype.onUpdate.call(this,a)},__class__:fj});var hj=function(){j.call(this);this.show()};g["stolo.ensys.editor.system.DocumentSystem"]=hj;hj.__name__=["stolo","ensys","editor","system","DocumentSystem"];hj.__super__=j;hj.prototype=k(j.prototype,{get_name:function(){return"DocumentSystem_15"},onStart:function(){j.prototype.onStart.call(this);this._system=G.instance(this.owner._compMap.BaseGameSystem_7,Je)},onStop:function(){j.prototype.onStop.call(this)},"export":function(){for(var a=
this._system.actors.getAll(),b=[],c=0;c<a.length;){var d=a[c];++c;d=d._compMap.EditorMetaComponent_30;null!=d&&b.push(d.getTemplate())}a=jg.print({actors:b},null);b=this._system.levelData.filename.split("/");b=b[b.length-1];p._platform.getStorage().set(b,a);Qb.getURL("./editor.html?json=true&level="+b)},show:function(){var a=Qb.getUrlParams();if(null!=a.json&&null!=a.level){var b=p._platform.getStorage().get(a.level);eval("document.title='"+a.level+".json';");eval("document.body.innerHTML='"+b+"';");
za.getGui("test").getRoot().destroy()}},__class__:hj});var Ne=function(){j.call(this)};g["stolo.ensys.system.LevelSystem"]=Ne;Ne.__name__=["stolo","ensys","system","LevelSystem"];Ne.__super__=j;Ne.prototype=k(j.prototype,{get_name:function(){return"LevelSystem_20"},onAdded:function(){this._actors=this.owner._compMap.ActorSystem_3;this._renderer=this.owner._compMap.RendererSystem_6},onRemoved:function(){j.prototype.onRemoved.call(this);this._renderer=this._actors=null},load:function(a){this.build(a.layers,
a.actors)},build:function(a,b){if(null==a)throw"No layers in level!";for(var c=0;c<a.length;){var d=a[c];++c;this._renderer.addLayer(d)}if(null!=b)for(c=0;c<b.length;)d=b[c],++c,null!=d.template&&(d.template.spawner=1),this.spawnActor(d)},spawnActor:function(a){return this._actors.spawn(a)},__class__:Ne});var jj=function(){j.call(this)};g["stolo.ensys.editor.system.EditorLevelSystem"]=jj;jj.__name__=["stolo","ensys","editor","system","EditorLevelSystem"];jj.__super__=Ne;jj.prototype=k(Ne.prototype,
{spawnActor:function(a){var b=this._actors.spawn(a);b.add(new pj(a));return b},__class__:jj});var ej=function(){j.call(this)};g["stolo.ensys.editor.system.HistorySystem"]=ej;ej.__name__=["stolo","ensys","editor","system","HistorySystem"];ej.__super__=j;ej.prototype=k(j.prototype,{get_name:function(){return"HistorySystem_14"},onStart:function(){j.prototype.onStart.call(this);this._redos=[];this._undos=[]},onStop:function(){j.prototype.onStop.call(this);this._redos=this._undos=null},redo:function(){var a=
this._undos.pop();null!=a&&(a.redo(),this._redos.push(a))},undo:function(){var a=this._redos.pop();null!=a&&(a.undo(),this._undos.push(a))},__class__:ej});var ij=function(){this._enablePhysics=!1;this.snapRotation=45;this.snapX=this.snapY=30;j.call(this);X.ENABLE_POINTER=!0};g["stolo.ensys.editor.system.LogicSystem"]=ij;ij.__name__=["stolo","ensys","editor","system","LogicSystem"];ij.__super__=j;ij.prototype=k(j.prototype,{get_name:function(){return"LogicSystem_9"},onStart:function(){j.prototype.onStart.call(this);
this._system=G.instance(this.owner._compMap.BaseGameSystem_7,Je);this._disposer=this.owner._compMap.Disposer_28;this._system.physics.enable(this.get_enablePhysics());this._disposer.add(this._system.actors.onActorAdded.connect(m(this,this.onActorAdded)));this._disposer.add(this._system.shortcut.onAction.connect(m(this,this.onAction)));this._disposer.add(p._platform.getKeyboard().down.connect(m(this,this.onKeyDown)));this._disposer.add(p._platform.getKeyboard().up.connect(m(this,this.onKeyUp)));this._system.shortcut.add(new nj(this._system),
[i.Shift,i.T]);this._system.shortcut.add(new oj(this._system),[i.Control,i.Z]);this._system.shortcut.add(new mj(this._system),[i.Control,i.Y]);this._system.shortcut.add(new kj(this._system),[i.Control,i.C]);this._system.shortcut.add(new lj(this._system),[i.Control,i.V]);this.setDefaultTool();this._system.level.load(this._system.levelData)},onStop:function(){j.prototype.onStop.call(this);this._disposer=this._system=null},setDefaultTool:function(){this._system.tool.set(new uj(this._system))},spawnActor:function(a){return this._system.level.spawnActor(a)},
onActorAdded:function(a){null!=a._compMap.PhysicsComponent_12&&a.add(new nd)},onAction:function(a){a.execute()},onKeyUp:function(a){a.key==i.Space&&this.setDefaultTool()},onKeyDown:function(a){a.key==i.Space&&this._system.tool.set(new vj(this._system))},get_enablePhysics:function(){return this._enablePhysics},set_enablePhysics:function(a){null!=this._system&&this._system.physics.enable(a);return this._enablePhysics=a},__class__:ij,__properties__:k(j.prototype.__properties__,{set_enablePhysics:"set_enablePhysics",
get_enablePhysics:"get_enablePhysics"})});var gj=function(){j.call(this)};g["stolo.ensys.editor.system.SelectionSystem"]=gj;gj.__name__=["stolo","ensys","editor","system","SelectionSystem"];gj.__super__=j;gj.prototype=k(j.prototype,{get_name:function(){return"SelectionSystem_10"},onStart:function(){j.prototype.onStart.call(this);this._actors=[]},onStop:function(){this._actors=null;j.prototype.onStop.call(this)},contains:function(a){return-1!=this._actors.indexOf(a)},add:function(a){this.contains(a)||
null==a||(this._actors.push(a),a.add(new Cg))},remove:function(a){this.contains(a)&&null!=a&&(S.remove(this._actors,a),a.remove(a._compMap.EditorSelectionComponent_11))},getAll:function(){for(var a=[],b=0,c=this._actors;b<c.length;){var d=c[b];++b;a.push(d)}return a},clear:function(){for(var a=this.getAll(),b=0;b<a.length;){var c=a[b];++b;this.remove(c)}},__class__:gj});var dj=function(){this.onAction=new Y;j.call(this)};g["stolo.ensys.editor.system.ShortcutSystem"]=dj;dj.__name__=["stolo","ensys",
"editor","system","ShortcutSystem"];dj.__super__=j;dj.prototype=k(j.prototype,{get_name:function(){return"ShortcutSystem_16"},onStart:function(){j.prototype.onStart.call(this);this._disposer=this.owner._compMap.Disposer_28;this._disposer.add(p._platform.getKeyboard().down.connect(m(this,this.onKeyDown)));this._actions=new Sb},onStop:function(){j.prototype.onStop.call(this);this._disposer=this._actions=null},add:function(a,b){this._actions.set(a,b)},onKeyDown:function(a){for(var b=this._actions.keys();b.hasNext();){for(var c=
b.next(),d=this._actions.h[c.__id__],e=!0,h=0;h<d.length;){var f=d[h];++h;if(!p._platform.getKeyboard().isDown(f)&&a.key!=f){e=!1;break}}e&&this.onAction.emit(c)}},__class__:dj});var cj=function(){j.call(this)};g["stolo.ensys.editor.system.ToolSystem"]=cj;cj.__name__=["stolo","ensys","editor","system","ToolSystem"];cj.__super__=j;cj.prototype=k(j.prototype,{get_name:function(){return"ToolSystem_13"},onStart:function(){j.prototype.onStart.call(this)},onStop:function(){j.prototype.onStop.call(this);
this._tool=null},onUpdate:function(a){if(null!=this._tool)this._tool.onUpdate(a)},set:function(a){null!=this._tool&&this._tool.stop();this._tool=a;this._tool.start()},__class__:cj});var Wb=function(a){this._started=!1;this._disposer=new uc;this._system=a};g["stolo.ensys.editor.tool.Tool"]=Wb;Wb.__name__=["stolo","ensys","editor","tool","Tool"];Wb.prototype={onKeyRelease:function(){},onKeyPress:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){},onTap:function(){},onWheel:function(){},
onUpdate:function(){},start:function(){this._disposer.add(p._platform.getPointer().down.connect(m(this,this.onPointerDown)));this._disposer.add(p._platform.getPointer().move.connect(m(this,this.onPointerMove)));this._disposer.add(p._platform.getPointer().up.connect(m(this,this.onPointerUp)));this._disposer.add(p._platform.getKeyboard().down.connect(m(this,this.onKeyDown)));this._disposer.add(p._platform.getKeyboard().up.connect(m(this,this.onKeyUp)));this._disposer.add(p._platform.getMouse().scroll.connect(m(this,
this.onMouseWheel)));this._started=!0},stop:function(){this._disposer.dispose();this._system=null;this._started=!1},onKeyDown:function(a){if(this._started)this.onKeyPress(a.key)},onKeyUp:function(a){if(this._started)this.onKeyRelease(a.key)},onMouseWheel:function(a){if(this._started)this.onWheel(a)},onPointerDown:function(a){if(this._started){var b=this.findActor(a.viewX,a.viewY);this._pointer={drag:!1,x:0,y:0,xo:a.viewX,yo:a.viewY,xl:0,yl:0,distance:0,actor:b}}},onPointerMove:function(a){if(this._started&&
null!=this._pointer)if(this._pointer.xl=this._pointer.x,this._pointer.yl=this._pointer.y,this._pointer.x=a.viewX,this._pointer.y=a.viewY,this._pointer.distance=Math.sqrt(Math.pow(this._pointer.xo-this._pointer.x,2)+Math.pow(this._pointer.yo-this._pointer.y,2)),this._pointer.drag)this.onDrag(this._pointer);else 10<this._pointer.distance&&(this._pointer.drag=!0,this.onDragStart(this._pointer))},onPointerUp:function(){if(this._started&&null!=this._pointer){if(this._pointer.drag)this.onDragStop(this._pointer);
else this.onTap(this._pointer);this._pointer=null}},findActor:function(a,b){var c=D.hitTest(this._system.renderer.getContainer(),a,b);if(null==c)return null;for(c=c.owner;null!=c&&null==c._compMap.TransformComponent_26;)c=c.parent;return c},getRendererInverseScale:function(){return 1/this._system.renderer.scale},__class__:Wb};var uj=function(a){this._rotate=!1;this.selectorAlpha=0.5;this.selectorColor=65280;Wb.call(this,a)};g["stolo.ensys.editor.tool.ActorTransformTool"]=uj;uj.__name__=["stolo","ensys",
"editor","tool","ActorTransformTool"];uj.__super__=Wb;uj.prototype=k(Wb.prototype,{start:function(){Wb.prototype.start.call(this);p._platform.getMouse().set_cursor(ec.Default)},stop:function(){this._rotate=!1;this._positions=null;this.removeSelector();Wb.prototype.stop.call(this)},onTap:function(a){a=a.actor;(null==a||!p._platform.getKeyboard().isDown(i.Shift))&&this._system.selection.clear();this._system.selection.add(a)},onDragStart:function(a){var b=a.actor;if(null!=b)if(p._platform.getKeyboard().isDown(i.Control))this._rotate=
!0;else{a=this._system.selection.contains(b)?this._system.selection.getAll():[b];this._positions=[];for(b=0;b<a.length;){var c=a[b];++b;c=c._compMap.TransformComponent_26.position;this._positions.push(new cb(c.x,c.y))}}else b=this._system.renderer.getLayers(),b=b[b.length-1],this._selector=(new z).add((new xb(this.selectorColor,1,1)).setAlpha(this.selectorAlpha).setXY(-this._system.renderer.displacement.x+a.x*this.getRendererInverseScale(),-this._system.renderer.displacement.y+a.y*this.getRendererInverseScale())),
b.owner.addChild(this._selector)},onDrag:function(a){var b=a.actor;if(null!=this._selector)G.instance(this._selector._compMap.Sprite_4,xb).setSize(this.getRendererInverseScale()*(a.x-a.xo),this.getRendererInverseScale()*(a.y-a.yo));else if(this._rotate){var c=b._compMap.TransformComponent_26.position;this.rotateActor(aa.toDegrees(Math.atan2(-this._system.renderer.displacement.y+a.y*this.getRendererInverseScale()-c.y,-this._system.renderer.displacement.x+a.x*this.getRendererInverseScale()-c.x)),b)}else if(null!=
this._positions)for(var b=(c=this._system.selection.contains(b))?this._system.selection.getAll():[b],d=0,e=b.length;d<e;){var h=d++,f=b[h],g=this._positions[h],h=g.x+this.getRendererInverseScale()*(a.x-a.xo),g=g.y+this.getRendererInverseScale()*(a.y-a.yo);this.moveActor(h,g,f,!1,c?!1:!0)}},onDragStop:function(a){if(null!=this._selector){var b=G.instance(this._selector._compMap.Sprite_4,xb),c=this._system.actors.getAll(),d=a.xo*this.getRendererInverseScale()-this._system.renderer.displacement.x,e;
0>b.width._value?(e=d,d=e+b.width._value):e=d+b.width._value;var a=a.yo*this.getRendererInverseScale()-this._system.renderer.displacement.y,h;0>b.height._value?(h=a,a=h+b.height._value):h=a+b.height._value;for(b=0;b<c.length;){var f=c[b];++b;if(!(null==f||null==f.parent)){var g=f.parent._compMap.Sprite_4;null==g||0==(g._flags&4)||(g=f._compMap.TransformComponent_26.position,d>g.x||e<g.x||a>g.y||h<g.y||this._system.selection.add(f))}}}this._rotate=!1;this._positions=null;this.removeSelector()},onKeyRelease:function(a){var b=
this._system.selection.getAll(),c;c=p._platform.getKeyboard().isDown(i.Shift)?1:this._system.logic.snapX;if(a==i.Backspace||a==i.Delete)for(var d=0;d<b.length;){var e=b[d];++d;this._system.actors.removeActor(e)}if(a==i.I)for(d=0;d<b.length;)++d,null;if(a==i.Left)for(a=0;a<b.length;)d=b[a],++a,this.moveActor(-c,0,d,!0,!1);else if(a==i.Right)for(a=0;a<b.length;)d=b[a],++a,this.moveActor(c,0,d,!0,!1);else if(a==i.Up)for(a=0;a<b.length;)d=b[a],++a,this.moveActor(0,-c,d,!0,!1);else if(a==i.Down)for(a=
0;a<b.length;)d=b[a],++a,this.moveActor(0,c,d,!0,!1)},removeSelector:function(){null!=this._selector&&(this._selector.parent.removeChild(this._selector),this._selector=null)},moveActor:function(a,b,c,d,e){null==e&&(e=!0);null==d&&(d=!1);var h=c._compMap.PhysicsComponent_12,f=c._compMap.Sprite_4,g=c._compMap.TransformComponent_26,c=c._compMap.EditorMetaComponent_30;d&&(a+=g.position.x,b+=g.position.y);!p._platform.getKeyboard().isDown(i.Shift)&&0!=this._system.logic.snapX&&0!=this._system.logic.snapY&&
e&&(a=Math.round(a/this._system.logic.snapX)*this._system.logic.snapX,b=Math.round(b/this._system.logic.snapY)*this._system.logic.snapY);null!=g&&(g.position.x=a,g.position.y=b);null!=h&&(h.forceUpdate=!0,h.setPosition(a,b));null!=f&&(f.forceUpdate=!0);null!=c&&c.updateProperty("transform","position",{x:a,y:b})},rotateActor:function(a,b,c,d){null==d&&(d=!0);null==c&&(c=!1);var e=b._compMap.PhysicsComponent_12,h=b._compMap.Sprite_4,f=b._compMap.TransformComponent_26,b=b._compMap.EditorMetaComponent_30;
c&&(a+=f.rotation);!p._platform.getKeyboard().isDown(i.Shift)&&0!=this._system.logic.snapRotation&&d&&(a=Math.round(a/this._system.logic.snapRotation)*this._system.logic.snapRotation);null!=f&&(f.rotation=a);null!=e&&(e.forceUpdate=!0,e.setRotation(3.141592653589793*a/180));null!=h&&(h.forceUpdate=!0);null!=b&&b.updateProperty("transform","rotation",a)},__class__:uj});var vj=function(a){this.zoomMin=0.2;this.zoomMax=1;this.zoomSpeed=0.1;this.moveSpeedMultiplicator=5;this.moveSpeed=50;Wb.call(this,
a)};g["stolo.ensys.editor.tool.RendererTransformTool"]=vj;vj.__name__=["stolo","ensys","editor","tool","RendererTransformTool"];vj.__super__=Wb;vj.prototype=k(Wb.prototype,{start:function(){Wb.prototype.start.call(this);p._platform.getMouse().set_cursor(ec.Button)},stop:function(){this._start=null;Wb.prototype.stop.call(this)},onDragStart:function(){this._start=new cb(this._system.renderer.displacement.x,this._system.renderer.displacement.y)},onDrag:function(a){null!=this._start&&this.setRendererPosition(this._start.x+
this.getRendererInverseScale()*(a.x-a.xo),this._start.y+this.getRendererInverseScale()*(a.y-a.yo))},onDragStop:function(){this._start=null},onKeyRelease:function(a){var b=this.moveSpeed*this.getRendererInverseScale();p._platform.getKeyboard().isDown(i.Shift)&&(b*=this.moveSpeedMultiplicator);a==i.PageUp&&this.setRendererScale(this.zoomSpeed);a==i.PageDown&&this.setRendererScale(-this.zoomSpeed);a==i.Left?this.setRendererPosition(b,0,!0):a==i.Right?this.setRendererPosition(-b,0,!0):a==i.Up?this.setRendererPosition(0,
b,!0):a==i.Down&&this.setRendererPosition(0,-b,!0)},onWheel:function(a){var b=this._system.renderer.displacement.x,c=this._system.renderer.displacement.y,d=p._platform.getMouse().get_x()*this.getRendererInverseScale(),e=p._platform.getMouse().get_y()*this.getRendererInverseScale();this.setRendererScale(a/100);var a=p._platform.getMouse().get_x()*this.getRendererInverseScale(),h=p._platform.getMouse().get_y()*this.getRendererInverseScale();this.setRendererPosition(b+(a-d),c+(h-e))},setRendererScale:function(a,
b){null==b&&(b=!0);b&&(a+=this._system.renderer.scale);this._system.renderer.setScale(Math.max(this.zoomMin,Math.min(this.zoomMax,a)))},setRendererPosition:function(a,b,c){null==c&&(c=!1);c&&(a+=this._system.renderer.displacement.x,b+=this._system.renderer.displacement.y);this._system.renderer.move(a,b)},__class__:vj});var Qf=function(){};g["stolo.ensys.helpers.ActorHelper"]=Qf;Qf.__name__=["stolo","ensys","helpers","ActorHelper"];Qf.getDistanceX=function(a,b,c){null==c&&(c=!0);a=a._compMap.TransformComponent_26.position.x-
b._compMap.TransformComponent_26.position.x;return c?Math.abs(a):a};Qf.getDirection=function(a,b){return a._compMap.TransformComponent_26.position.x<b._compMap.TransformComponent_26.position.x?1:-1};var V=function(){};g["stolo.ensys.helpers.ComponentHelper"]=V;V.__name__=["stolo","ensys","helpers","ComponentHelper"];V.getSystemEntity=function(a){return a.parent.parent.parent};var tf=function(){};g["stolo.ensys.helpers.SequencerHelper"]=tf;tf.__name__=["stolo","ensys","helpers","SequencerHelper"];
tf.parseActorData=function(a,b,c){null==c&&(c=!0);c&&(b=ba.clone(b));c=b.sequenceItem;null!=c&&(B.deleteField(b,"sequenceItem"),null==b.template&&(b.template={key:c.template}));tf.setActorPosition(a,b,c);return b};tf.setActorPosition=function(a,b,c){var d=a.position.x,e=a.position.y,b=tf.getActorPosition(b),h=0;null!=c&&(h=1>Math.abs(c.position)?c.position*a.size:c.position);a.axis==Vc.Horizontal&&(d+=h);b.x+=d;b.y+=e};tf.getActorPosition=function(a){null==a.transform&&(a.transform={position:{x:0,
y:0}});null==a.transform.position.x&&(a.transform.position.x=0);null==a.transform.position.y&&(a.transform.position.y=0);return a.transform.position};var ee=function(){};g["stolo.ensys.helpers.SystemHelper"]=ee;ee.__name__=["stolo","ensys","helpers","SystemHelper"];ee.init=function(a,b,c){null==c&&(c=!0);J.reset();ee.registerComponents(b,c);ee.loadTemplates(a)};ee.registerComponents=function(a,b){null==b&&(b=!0);if(!ee.defaultComponentsRegistered&&b){for(var c=ul.ComponentMap,d=c.keys();d.hasNext();){var e=
d.next();J.registerComponent(e,c.get(e))}ee.defaultComponentsRegistered=!0}for(c=a.keys();c.hasNext();)d=c.next(),J.registerComponent(d,a.get(d))};ee.loadTemplates=function(a){for(var b=w.getPack(a).get_manifest().iterator();b.hasNext();){var c=b.next();if(-1<c.name.indexOf(".json")){var d=w.getJSON(c.name,a,!0,!1);if(null==d)throw"Invalid actors file '"+c.name+"'";for(c=0;c<d.length;){var e=d[c];++c;J.addTemplate(e)}}}};var wj=function(){};g["stolo.ensys.physics.ContactArbiter"]=wj;wj.__name__=["stolo",
"ensys","physics","ContactArbiter"];wj.__interfaces__=[tc];wj.prototype={init:function(a,b){this._arbiter=a;var c;b.zpp_inner.validate();c=b.zpp_inner.x;b.zpp_inner.validate();if(c=c==b.zpp_inner.y)b.zpp_inner.validate(),c=0==b.zpp_inner.x;this.angle=c?0:Math.atan2(function(){b.zpp_inner.validate();return b.zpp_inner.y}(this),function(){b.zpp_inner.validate();return b.zpp_inner.x}(this));b.zpp_inner.validate();this.normaly=b.zpp_inner.y},dispose:function(){this._arbiter=null},disableFriction:function(){this._arbiter.set_dynamicFriction(0);
this._arbiter.set_rollingFriction(0);this._arbiter.set_staticFriction(0)},__class__:wj};var f=function(){};g["zpp_nape.util.ZPP_Flags"]=f;f.__name__=["zpp_nape","util","ZPP_Flags"];var da=function(){};g["stolo.ensys.physics.ContactEvent"]=da;da.__name__=["stolo","ensys","physics","ContactEvent"];var xj=function(a){null==a&&(a=!1);this._acceptOnce=!1;this._contactArbiter=new wj;this._entities=new Sb;this._acceptOnce=a};g["stolo.ensys.physics.ContactListenerHandler"]=xj;xj.__name__=["stolo","ensys",
"physics","ContactListenerHandler"];xj.__interfaces__=[tc];xj.prototype={dispose:function(){this._entities=null;this._contactArbiter.dispose();this._contactArbiter=null},addEntity:function(a,b){this._entities.set(a,b)},removeEntity:function(a){this._entities.remove(a)},onPreContact:function(a){var b=a.zpp_inner.int1.outer_i.get_userData().actor,c=a.zpp_inner.int2.outer_i.get_userData().actor,d=null,e=a.zpp_inner.pre_arbiter.wrapper().get_collisionArbiter(),h=!0;if(null!=e&&(d=this.fixNormal(a.zpp_inner.int1.outer_i.get_castBody(),
a.zpp_inner.int2.outer_i.get_castBody(),function(){null==e.zpp_inner.colarb.wrap_normal&&e.zpp_inner.colarb.getnormal();return e.zpp_inner.colarb.wrap_normal}(this)),this._contactArbiter.init(e,d),d=this._contactArbiter,h=e.get_state(),null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=new db,f.internal=!1),!(h=h==f.PreFlag_ACCEPT)))h=e.get_state(),null==f.PreFlag_ACCEPT_ONCE&&(f.internal=!0,f.PreFlag_ACCEPT_ONCE=new db,f.internal=!1),h=h==f.PreFlag_ACCEPT_ONCE;var a=this.getCallback(b),n=this.getCallback(c),
g=!0,i=!0;null!=a&&null!=c&&(g=a(c,d));null!=n&&null!=b&&(i=n(b,d));if(h&&g&&i){if(this._acceptOnce)return null==f.PreFlag_ACCEPT_ONCE&&(f.internal=!0,f.PreFlag_ACCEPT_ONCE=new db,f.internal=!1),f.PreFlag_ACCEPT_ONCE;null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=new db,f.internal=!1);return f.PreFlag_ACCEPT}if(this._acceptOnce)return null==f.PreFlag_IGNORE_ONCE&&(f.internal=!0,f.PreFlag_IGNORE_ONCE=new db,f.internal=!1),f.PreFlag_IGNORE_ONCE;null==f.PreFlag_IGNORE&&(f.internal=!0,f.PreFlag_IGNORE=
new db,f.internal=!1);return f.PreFlag_IGNORE},onOngoingContact:function(a){var b=a.zpp_inner.int1.outer_i.get_userData().actor,a=a.zpp_inner.int2.outer_i.get_userData().actor,c=this.getCallback(b),d=this.getCallback(a);null!=c&&null!=a&&c(a,null);null!=d&&null!=b&&d(b,null)},onContactBegin:function(a){var b=a.zpp_inner.int1.outer_i.get_userData().actor,c=a.zpp_inner.int2.outer_i.get_userData().actor,d=this.getCallback(b),e=this.getCallback(c),h=null,n=a.zpp_inner.wrap_arbiters.at(0).get_collisionArbiter();
if(null!=n){h=n.get_state();null==f.PreFlag_IGNORE&&(f.internal=!0,f.PreFlag_IGNORE=new db,f.internal=!1);if(h==f.PreFlag_IGNORE)return;a=this.fixNormal(a.zpp_inner.int1.outer_i.get_castBody(),a.zpp_inner.int2.outer_i.get_castBody(),function(){null==n.zpp_inner.colarb.wrap_normal&&n.zpp_inner.colarb.getnormal();return n.zpp_inner.colarb.wrap_normal}(this));this._contactArbiter.init(n,a);h=this._contactArbiter}null!=d&&null!=c&&d(c,h);null!=e&&null!=b&&e(b,h)},onContactEnd:function(a){var b=a.zpp_inner.int1.outer_i.get_userData().actor,
a=a.zpp_inner.int2.outer_i.get_userData().actor,c=this.getCallback(b),d=this.getCallback(a);null!=c&&null!=a&&c(a,null);null!=d&&null!=b&&d(b,null)},getCallback:function(a){return null==a?null:this._entities.h[a.__id__]},fixNormal:function(a,b,c){var d=ha.get(function(){c.zpp_inner.validate();return c.zpp_inner.x}(this),function(){c.zpp_inner.validate();return c.zpp_inner.y}(this),!0);a.zpp_inner_i.id>b.zpp_inner_i.id&&(d.set_x(-1*function(){d.zpp_inner.validate();return d.zpp_inner.x}(this)),d.set_y(-1*
function(){d.zpp_inner.validate();return d.zpp_inner.y}(this)));return d},__class__:xj};var ja=function(){};g["stolo.ensys.physics.ContactMode"]=ja;ja.__name__=["stolo","ensys","physics","ContactMode"];var zc=function(){};g["stolo.ensys.physics.Materials"]=zc;zc.__name__=["stolo","ensys","physics","Materials"];zc.get=function(a){return zc._materialMap.exists(a)?zc._materialMap.get(a):B.getProperty(zc,a)};zc.add=function(a,b){zc._materialMap.set(a,b);return!0};var gg=function(){this._actorsToRemove=
[];this._actorsById=new K;this._actorsByTags=new K;this._actorsByTemplate=new K;this._actorsByComponents=new K;this._actors=[];this.onActorRemoved=new Y;this.onActorAdded=new Y;this.onActorSpawn=new ad;j.call(this)};g["stolo.ensys.system.ActorSystem"]=gg;gg.__name__=["stolo","ensys","system","ActorSystem"];gg.__super__=j;gg.prototype=k(j.prototype,{get_name:function(){return"ActorSystem_3"},onAdded:function(){this._renderer=this.owner._compMap.RendererSystem_6;for(var a=J.getComponentsIds(),b=0;b<
a.length;){var c=a[b];++b;this._actorsByComponents.set(c,[])}a=J.getTemplateIds();for(b=0;b<a.length;)c=a[b],++b,this._actorsByTemplate.set(c,[])},onRemoved:function(){j.prototype.onRemoved.call(this);this._actorsToRemove=this._actorsById=this._actorsByTags=this._actorsByTemplate=this._actorsByComponents=this._renderer=null},onUpdate:function(){for(;0<this._actorsToRemove.length;)this._removeActor(this._actorsToRemove.pop())},spawn:function(a,b){var c=J.create(a);if(null==c)return null;this.addActor(c);
this.onActorSpawn.emit(c,a);if(null!=b){var d=c._compMap.Sprite_4;if(null!=d)d.onInitComplete.connect(b).once();else b()}return c},addActor:function(a){this.registerActor(a);this._renderer.addActor(a);this.onActorAdded.emit(a);return a},removeActor:function(a){if(null==this._actorsToRemove)return null;this._actorsToRemove.push(a);return a},_removeActor:function(a){this.unregisterActor(a);this.onActorRemoved.emit(a);this._renderer.removeActor(a);a.dispose();return a},getAll:function(){return this._actors},
getActorsByComponent:function(a){return this._actorsByComponents.get(ra.getClassName(a))},getActorsByTags:function(a){return this._actorsByTags.get(a)},getActorById:function(a){return this._actorsById.get(a)},updateRegisteredActor:function(a){this.unregisterActor(a);this.registerActor(a)},registerActor:function(a){this._actors.push(a);for(var b=a.firstComponent;null!=b;){var c=ra.getClassName(ra.getClass(b)),d=this._actorsByComponents.get(c);null==d&&(d=[],this._actorsByComponents.set(c,d));d.push(a);
b=b.next}b=a._compMap.TemplateComponent_2;if(null!=b){c=this._actorsByTemplate.get(b.key);null==c&&(c=[],this._actorsByTemplate.set(b.key,c));c.push(a);c=0;for(d=b.tags;c<d.length;){var e=d[c];++c;var h=this._actorsByTags.get(e);null==h&&(h=[],this._actorsByTags.set(e,h));h.push(a)}""!=b.uuid&&null!=b.uuid&&this._actorsById.set(b.uuid,a)}},unregisterActor:function(a){S.remove(this._actors,a);for(var b=[this._actorsByComponents,this._actorsByTemplate,this._actorsByTags],c=0;c<b.length;){var d=b[c];
++c;for(d=d.iterator();d.hasNext();){var e=d.next();S.remove(e,a)}}a=a._compMap.TemplateComponent_2;null!=a&&this._actorsById.remove(a.uuid)},__class__:gg});var fg=function(a,b){this._actorMap=new Sb;this.enable=!1;j.call(this);this._dimensions=b;this._renderer=a};g["stolo.ensys.system.CullingSystem"]=fg;fg.__name__=["stolo","ensys","system","CullingSystem"];fg.__super__=j;fg.prototype=k(j.prototype,{get_name:function(){return"CullingSystem_5"},onAdded:function(){null==this._dimensions&&(this._dimensions=
this._renderer.dimensions)},addComponent:function(a,b){if(this.enable){var c=this._actorMap.h[b.__id__];if(null==c){var c=b._compMap.Sprite_4,d=this._renderer.getLayer(null==c?"default":c.layer);null==d&&(d=this._renderer.getLayer("default"));c={actor:b,position:b._compMap.TransformComponent_26.position,display:c,layer:d,components:[],culling:!0,start:!0};this._actorMap.set(b,c)}c.components.push(a)}else a.enableCulling(!1)},removeComponent:function(a,b){var c=this._actorMap.h[b.__id__];if(null!=
c){for(var c=c.components,d=0,e=c.length;d<e;){var h=d++;if(a==c[h]){c.splice(h,1);break}}0==c.length&&this._actorMap.remove(b)}},onUpdate:function(){if(this.enable){var a;a=null==this._camera?this._dimensions.width/2-100:this._camera.x-100;for(var b=a+this._dimensions.width+100,c=0,d=0,c=!1,e=this._actorMap.iterator();e.hasNext();){var h=e.next(),d=null==h.display?0:0.5*h.display.getNaturalWidth(),c=h.position.x+h.layer.x._value+(null==this._camera?this._dimensions.width/2:this._camera.x),c=c+d<
a||c-d>b;if(h.start||c!=h.culling){h.start=!1;h.culling=c;h=h.components;for(d=0;d<h.length;){var f=h[d];++d;f.enableCulling(c)}}}}},__class__:fg});var Mg=function(){this.onComplete=new ua};g["stolo.ensys.system.PhysicDebugSystem"]=Mg;Mg.__name__=["stolo","ensys","system","PhysicDebugSystem"];Mg.__super__=j;Mg.prototype=k(j.prototype,{get_name:function(){return"PhysicDebugSystem_21"},onAdded:function(){this.initActors(this.owner._compMap.ActorSystem_3)},onStart:function(){this._renderer=this.owner._compMap.RendererSystem_6;
this._space=this.owner._compMap.PhysicSystem_22.getSpace();null==this.dimensions&&(this.dimensions=this._renderer.dimensions);j.prototype.onStart.call(this);this.onComplete.emit()},onUpdate:function(){},dispose:function(){j.prototype.dispose.call(this)},initActors:function(){J.onActorData.connect(m(this,this.onActorData))},onActorData:function(a){null!=a&&Mg.enabled&&Object.prototype.hasOwnProperty.call(a,"physics")&&!Object.prototype.hasOwnProperty.call(a,"physicsDebug")&&(a.physicsDebug={})},__class__:Mg});
var yd=function(){this._bodiesToRemove=[];this._bodiesToAdd=[];this._contactsListenerHandler=new K;this._contactsListener=new K;this._contactTypes=new K;this._speed=1;this._fixedDt=0.025;this._currentDt=0;this._enabled=!0;this.stepMode=1;this.onPhysicUpdate=new Y;j.call(this);this._contactTypes.set("ANY_BODY",ic.ANY_BODY)};g["stolo.ensys.system.PhysicSystem"]=yd;yd.__name__=["stolo","ensys","system","PhysicSystem"];yd.getListenerId=function(a,b,c,d){return G.string(a)+"-"+G.string(b)+"-"+yd.getOptionId(c)+
"-"+yd.getOptionId(d)};yd.getOptionId=function(a){return ba.is(a,P.TClass(Array))?a.join(","):a};yd.__super__=j;yd.prototype=k(j.prototype,{get_name:function(){return"PhysicSystem_22"},getSpace:function(){return this._space},setGravity:function(a,b){this._space.set_gravity(ha.get(a,b,!0));return this._space.get_gravity()},setFixedDt:function(a){this._fixedDt=a},onAdded:function(){this._space=new Hk(ha.get(0,900,!0));this._speedAdjuster=this.owner._compMap.SpeedAdjuster_25},onRemoved:function(){this._space.clear();
if(null!=this._contactsListenerHandler)for(var a=this._contactsListenerHandler.iterator();a.hasNext();)a.next().dispose();this._speedAdjuster=this._contactTypes=this._contactsListener=this._bodiesToRemove=this._bodiesToAdd=this._space=null;j.prototype.onRemoved.call(this)},onUpdate:function(a){if(this._enabled){null!=this._speedAdjuster&&(this._speed=this._speedAdjuster.scale._value);if(0>=this._speed)return;switch(this.stepMode){case 1:this._fixedDiff=a/(this._fixedDt*this._speed);this._step=1.1<
this._fixedDiff?(this._fixedDt*this._fixedDiff+0.008)*this._speed:this._fixedDt*this._speed;0.009>=this._step&&(this._step=0.009);0.06<this._step&&(this._step=0.06);this._space.step(this._step);break;case 2:for(this._currentDt+=a;this._currentDt>=this._fixedDt;)this.onPhysicUpdate.emit(this._fixedDt),this._space.step(this._fixedDt),this._currentDt-=this._fixedDt;break;case 0:this._space.step(this._fixedDt)}this.onPhysicUpdate.emit(a)}for(;0<this._bodiesToAdd.length;)this._space.zpp_inner.wrap_bodies.add(this._bodiesToAdd.pop());
for(;0<this._bodiesToRemove.length;)this._space.zpp_inner.wrap_bodies.remove(this._bodiesToRemove.pop())},enable:function(a){this._enabled=a},addBody:function(a){null!=this._space&&null!=a&&this._bodiesToAdd.push(a)},removeBody:function(a){null!=this._space&&null!=a&&this._bodiesToRemove.push(a)},addContactListener:function(a,b,c,d,e,h,f){null==f&&(f=!1);if(null!=this._space){var g=this.getCbType(c),i=this.getCbType(d),c=yd.getListenerId(a,b,c,d);if(null==this._contactsListener.get(c)){f=new xj(f);
if(a==da.PRELISTENER)a=new zi(b,g,i,m(f,f.onPreContact));else if(a==da.ONGOING)a=new lf(a,b,g,i,m(f,f.onOngoingContact));else if(a==da.END)a=new lf(a,b,g,i,m(f,f.onContactEnd));else if(a==da.BEGIN)a=new lf(a,b,g,i,m(f,f.onContactBegin));else throw"PhysicSystem: Contact listener unsupported: "+G.string(a);this._space.zpp_inner.wrap_listeners.add(a);this._contactsListener.set(c,a);this._contactsListenerHandler.set(c,f)}this._contactsListenerHandler.get(c).addEntity(e,h)}},removeContactListener:function(a,
b,c,d,e){null!=this._space&&(this.getCbType(c),this.getCbType(d),a=this._contactsListenerHandler.get(yd.getListenerId(a,b,c,d)),null!=a&&a.removeEntity(e))},getCbType:function(a){if(null==this._space)return null;if(ba.is(a,P.TClass(Array))){if(1==a.length)return this.getCbType(a[0]);var b=a.join(","),c=this._contactTypes.get(b);if(null==c){for(var c=new nf,d=0;d<a.length;){var e=a[d];++d;e=this.getCbType(e);c.including(e)}this._contactTypes.set(b,c)}return c}if(ba.is(a,P.TClass(String)))return a=
a.toUpperCase(),b=this._contactTypes.get(a),null==b&&(b=new Nd,this._contactTypes.set(a,b)),b;throw"Unknown kind of contact type "+G.string(a);},__class__:yd});var eg=function(a,b){null==b&&(b=!1);this._layers=new K;this._container=new z;this.onLayerAdded=new Y;this.scale=1;this.displacement=new cb;this.dimensions=null!=a?a:new Nc(0,0,p._platform.getStage().get_width(),p._platform.getStage().get_height());this.dimensionsScaled=this.dimensions.clone();this._useScissor=b;j.call(this)};g["stolo.ensys.system.RendererSystem"]=
eg;eg.__name__=["stolo","ensys","system","RendererSystem"];eg.__super__=j;eg.prototype=k(j.prototype,{get_name:function(){return"RendererSystem_6"},onAdded:function(){this._sprite=new D;this._useScissor&&(this._sprite.scissor=new Nc(0,0,this.dimensions.width,this.dimensions.height));this._sprite.setXY(this.dimensions.x,this.dimensions.y);this._container.add(this._sprite);this.owner.addChild(this._container)},getContainer:function(){return this._container},addLayer:function(a){var b=a.name,c=this.getLayer(b);
null==c&&(c=fa.startsWith(b,"grid")&&4<b.length?new aj(a,Math.round(this.dimensions.width),Math.round(this.dimensions.height),G.parseInt(S.substr(b,4,null))):new Re(a),this._layers.set(b,c),this._container.addChild((new z).add(c)),this.onLayerAdded.emit(c),this.move(this.displacement.x,this.displacement.y));return c},getLayer:function(a){return this._layers.get(a)},getLayers:function(){for(var a=[],b=this._layers.iterator();b.hasNext();){var c=b.next();a.push(c)}return a},addActor:function(a){this.getActorLayer(a).addChild(a)},
removeActor:function(a){this.getActorLayer(a).removeChild(a)},getActorLayer:function(a,b){null==b&&(b=!0);var c=a._compMap.Sprite_4,c=null!=c&&null!=c.layer?c.layer:"default",d=this.getLayer(c);if(null==d&&b)throw"Layer not found:"+c;return d},move:function(a,b){this.displacement.set(a,b);for(var c=this._layers.iterator();c.hasNext();)c.next().move(a,b)},setScale:function(a){this.scale=a;this.dimensionsScaled.width=this.dimensions.width/a;this.dimensionsScaled.height=this.dimensions.height/a;this._sprite.setScale(a)},
__class__:eg});var Vc=g["stolo.ensys.system.SequencingAxis"]={__ename__:["stolo","ensys","system","SequencingAxis"],__constructs__:["Horizontal","Vertical"]};Vc.Horizontal=["Horizontal",0];Vc.Horizontal.toString=r;Vc.Horizontal.__enum__=Vc;Vc.Vertical=["Vertical",1];Vc.Vertical.toString=r;Vc.Vertical.__enum__=Vc;var Jk=function(){this.sequences=[];this.sequencesData=[];this.padding={top:0,right:0,bottom:0,left:0};this.onSequenceRemoved=new Y;this.onSequenceAdded=new Y;this.direction=1;this.position=
-1;this.autoAdd=this.autoRemove=!0;this.axis=Vc.Horizontal};g["stolo.ensys.system.SequencerSystem"]=Jk;Jk.__name__=["stolo","ensys","system","SequencerSystem"];Jk.__super__=j;Jk.prototype=k(j.prototype,{get_name:function(){return"SequencerSystem_64"},onAdded:function(){j.prototype.onAdded.call(this)},onStart:function(){j.prototype.onStart.call(this);this._renderer=this.owner._compMap.RendererSystem_6},onStop:function(){this._renderer=null;j.prototype.onStop.call(this)},onUpdate:function(a){if(0!=
this.sequences.length){var b=this.sequences[0];this.axis==Vc.Horizontal&&(this.autoAdd&&this._renderer.displacement.x<-this.position*this.direction+this._renderer.dimensions.width&&this.addSequence(),this.autoRemove&&null!=b&&0>this._renderer.displacement.x+b.size+b.position.x&&(this.removeSequence(b),this.sequences.shift()));j.prototype.onUpdate.call(this,a)}},addSequence:function(a){null==a&&(a=this.getNextSequenceData());this.lastSequenceData=a;var b=this.createSequence(a);b.parent=this;this.configureSequence(b,
a);this.owner.addChild((new z).add(b));this.sequences.push(b);this.onSequenceAdded.emit(b);this.position+=b.size;return b},removeSequence:function(a,b){null==b&&(b=!0);this.onSequenceRemoved.emit(a);null!=a.owner&&a.owner.parent.removeChild(a.owner);b&&a.dispose()},createSequence:function(a){return new Lg(a)},configureSequence:function(a){a.axis=this.axis;if(null!=this.sequenceDefaults)for(var b=0,c=B.fields(this.sequenceDefaults);b<c.length;){var d=c[b];++b;"comment"!=d&&B.setProperty(a,d,B.field(this.sequenceDefaults,
d))}else J.applyDefaults(a);this.axis==Vc.Horizontal&&(a.position.x=this.position,null!=this.padding&&0<this.padding.top&&(a.position.y=this.padding.top))},getNextSequenceData:function(){for(var a=this.sequencesData,b=[],c=0;c<a.length;){var d=a[c];++c;(null==d.min||d.min<=this.position)&&(null==d.max||d.max>this.position)&&b.push(d)}if(0>=b.length)throw"No sequence available";return b[Math.floor(Math.random()*b.length)]},__class__:Jk});var hg=function(){j.call(this)};g["stolo.ensys.system.SoundSystem"]=
hg;hg.__name__=["stolo","ensys","system","SoundSystem"];hg.__super__=j;hg.prototype=k(j.prototype,{get_name:function(){return"SoundSystem_23"},play:function(a,b,c,d,e,h,f){null==h&&(h=!1);null==e&&(e=!1);null==d&&(d=1);if(null==a||""==a)return null;if(null!=b){if(null==this._targetTransform)return null;b=b._compMap.TransformComponent_26;if(null==b||64E4<Math.pow(b.position.x-this._targetTransform.position.x,2)+Math.pow(b.position.y-this._targetTransform.position.y,2))return null}return u.play(a,c,
d,e,h,f)},__class__:hg});var w=function(){};g["stolo.managers.AssetManager"]=w;w.__name__=["stolo","managers","AssetManager"];w.loadPacks=function(a,b,c){null==c&&(c=!0);for(var d=[],e=0;e<a.length;){var h=a[e];++e;h=w.loadPack(h,function(){},c);null!=h&&d.push(h)}if(0==d.length)return null!=b&&b(),null;a=new Ah(d);if(null!=b)a.success.connect(function(){null!=b&&b()}).once();return a};w.getPack=function(a,b){null==b&&(b=!0);a=w.validatePackName(a);if(!w._cachedPacks.exists(a)){if(b)throw"Assetpack "+
a+" is not loaded: use AssetManager.loadPack";return null}return w._cachedPacks.get(a)};w.validatePackName=function(a){w._replacedPacks.exists(a)&&(a=w._replacedPacks.get(a));return a};w.loadPack=function(a,b,c,d,e){null==c&&(c=!0);null==d&&(d=w.locale);a=w.validatePackName(a);if(w._cachedPacks.exists(a))return b(w._cachedPacks.get(a)),null;if(w._loadingPacks.exists(a))return w._loadingPacks.get(a).callbacks.push(b),w._loadingPacks.get(a).loader;if(null==e){if(!Aa.exists(a)){if(-1<a.indexOf("/"))return w.createSubPack(a,
b);if(c)throw"Pack not found: '"+a+"'";return null}e=null==d?Aa.fromAssets(a):Aa.fromAssetsLocalized(a,d)}w.onManifestInit.emit(a,e);c=p._platform.loadAssetPack(e);d=[];d.push(b);b={name:a,manifest:e,loader:c,callbacks:d};w._loadingPacks.set(a,b);w._loadingPacksDict.set(e,b);c.get(w.onAssetsLoaded);return c};w.createSubPack=function(a,b){if(Aa.exists(a))throw"Manifest"+a+" already exist";var c=a.split("/"),d=a.substring(a.indexOf("/")+1,a.length),e=Aa.fromAssets(c[0]);if(null==e)throw"Unable to create the Manifest for the path "+
a;c=new Aa;c.set_localBase("assets");for(var h=0,f=S.iter(e._entries);f.hasNext();){var g=f.next();-1!=g.name.indexOf(d)&&(h++,e=g.name.substring(g.name.lastIndexOf("/")+1,g.name.length),c.add(e,g.url,g.bytes,g.format))}if(0==h)throw"The sub pack "+a+" is empty";return w.loadPack(a,b,!1,null,c)};w.onAssetsLoaded=function(a){var b,c=a.get_manifest();b=w._loadingPacksDict.h[c.__id__];w._loadingPacks.remove(b.name);c=a.get_manifest();w._loadingPacksDict.remove(c);w._cachedPacks.set(b.name,a);c=0;for(b=
b.callbacks;c<b.length;){var d=b[c];++c;d(a)}};w.disposePack=function(a){if(w._protectedPacks.exists(a))throw"AssetPack "+a+" was protected using AssetManager.protectPack(), Please make sure you do not attempt to dispose of it!";if(w._loadingPacks.exists(a))throw"Pack '"+a+"' is loading";if(!w._cachedPacks.exists(a))return null;var b=w._cachedPacks.get(a);b.dispose();w._cachedPacks.remove(a);return b};w.getJSON=function(a,b,c,d){null==d&&(d=!0);null==c&&(c=!0);null!=a&&0>a.indexOf(".")&&(a+=".json");
var e=w.getPack(b),h=null;if(d&&(h=b+"_"+a,w._jsonCache.exists(h)))return w._jsonCache.get(h);e=e.getFile(a,!1);if(null==e){if(c)throw"Cannot find JSON file '"+a+"' in pack "+b;return null}try{var f=JSON.parse(e.toString());d&&(w._jsonCache.set(h,f),f);e.dispose();return f}catch(g){throw"Error loading JSON '"+a+"', pack:"+b+"\n\t"+G.string(g);}};w.getXML=function(a,b,c,d){null==d&&(d=!0);null==c&&(c=!0);null!=a&&0>a.indexOf(".")&&(a+=".xml");var e=w.getPack(b),h=null;if(d&&(h=b+"_"+a,w._xmlCache.exists(h)))return w._xmlCache.get(h);
e=e.getFile(a,!1);if(null==e){if(c)throw"Cannot find XML file '"+a+"' in pack "+b;return null}try{var f=T.parse(e.toString());d&&(w._xmlCache.set(h,f),f);e.dispose();return f}catch(g){throw"Error loading XML '"+a+"', pack:"+b+"\n\t"+G.string(g);}};var Ka=function(){};g["stolo.managers.LocalizationManager"]=Ka;Ka.__name__=["stolo","managers","LocalizationManager"];Ka.getLocale=function(a){return Ka.localesMap.get(a)};Ka.localize=function(a,b){var c=Ka.getLocale(a);null!=c?(c.text=Ka.applyTemplate(c._text,
b),c.localized=!0):c={text:Ka.NOT_FOUND_PREFIX+a+Ka.NOT_FOUND_SUFFIX,localized:!1};return c};Ka.localizeTextField=function(a,b,c,d){c=Ka.localize(b,c);null!=c?(a.set_text(c.text),null!=c.fontStyle?U.applyFontStyle(a,c.fontStyle):a.set_font(d)):a.set_text(b);return c};Ka.applyTemplate=function(a,b){if(null==b)return a;for(var c=0,d=B.fields(b);c<d.length;){var e=d[c];++c;a=fa.replace(a,"{{"+e+"}}",B.field(b,e))}return a};Ka.loadXML=function(a,b,c){null==c&&(c=!0);null==b&&(b="text");null==a&&(a="localization.xml");
var d=w.getPack(b).getFile(a,!1);if(null==d)throw"Cannot find '"+a+"' in pack "+b;a=d.toString();a=Ka.processCharacters(a);a=T.parse(a);a=new kg(a.firstElement());a.hasNode.resolve("fonts")&&(b=a.node.resolve("fonts"),U.configureFromXML(b));if(a.hasNode.resolve("strings")){a.node.resolve("strings");for(a=a.node.resolve("strings").nodes.resolve("string").iterator();a.hasNext();)b=a.next(),Ka.addLocaleFormatFromXML(b)}c&&d.dispose()};Ka.addLocaleFormatFromXML=function(a){var b=a.att.resolve("id"),c=
{_text:a.get_innerData()},d=null;a.has.resolve("fontStyle")&&(d=U.getFontStyle(a.att.resolve("fontStyle")));a.has.resolve("fontScale")&&(d=U.extendFontStyle(d,"fontScale",G.parseFloat(a.att.resolve("fontScale"))));a.has.resolve("offsetX")&&(d=U.extendFontStyle(d,"offsetX",G.parseFloat(a.att.resolve("offsetX"))));a.has.resolve("offsetY")&&(d=U.extendFontStyle(d,"offsetY",G.parseFloat(a.att.resolve("offsetY"))));a.has.resolve("align")&&""!=a.att.resolve("align")&&(d=U.extendFontStyle(d,"align",a.att.resolve("align")));
if(a.has.resolve("fontName")){var e=U.getFont(a.att.resolve("fontName"));null==e?null:(d=U.extendFontStyle(d,"fontName",a.att.resolve("fontName")),d=U.extendFontStyle(d,"fontName",e))}null!=d&&(!0==d.generated&&(d.name=b+"_style"),c.fontStyle=d);Ka.localesMap.set(b,c)};Ka.processCharacters=function(a){a=(new Nb("\r\n","g")).replace(a,"\n");return a=(new Nb("\r","g")).replace(a,"\n")};var I=function(){};g["stolo.managers.SceneManager"]=I;I.__name__=["stolo","managers","SceneManager"];I.createInstantTransition=
function(){return new uh(0,q.quintOut)};I.change=function(a,b){null==b&&(b=I.createInstantTransition());if(null==I._director)throw"Director not set, was SceneManager.setScenes called?";I.onChange.emit();var c=I.getScene(a);I._director.unwindToScene((new z).add(c),b);return c};I.push=function(a,b){null==b&&(b=I.createInstantTransition());if(null==I._director)throw"Director not set, was SceneManager.setScenes called?";I.onPush.emit();var c=I.getScene(a);I._director.pushScene((new z).add(c),b);return c};
I.pop=function(a){null==a&&(a=I.createInstantTransition());if(1==I._director.scenes.length)throw"Scene will not be removed (last in stack!)";var b=I._director.scenes[I._director.scenes.length-1]._compMap.Scene_1;I.onPop.emit();I._director.popScene(a);return b};I.setScenes=function(a,b){null==b&&(b=!0);null==I._director&&(I._director=new th,b?p.root.addChild((new z).add(I._director)):p.root.add(I._director));I.addScenes(a)};I.addScenes=function(a){for(var b=a.keys();b.hasNext();){var c=b.next();I.addScene(c,
a.get(c))}};I.addScene=function(a,b){I.CaseSensitive||(a=a.toLowerCase());if(I._sceneMap.exists(a))throw"Illegal operation: scene '"+a+"' is already registered";I._sceneMap.set(a,b)};I.getScene=function(a){I.CaseSensitive||(a=a.toLowerCase());if(!I._sceneMap.exists(a))throw"Scene '"+a+"' is not registered or does not exists.";a=I._sceneMap.get(a);return ra.createInstance(a,[])};var u=function(){};g["stolo.managers.SoundManager"]=u;u.__name__=["stolo","managers","SoundManager"];u.__properties__={get_isMuted:"get_isMuted"};
u.playMusic=function(a,b,c){null==c&&(c=-1);null==b&&(b=!1);if(u._musicDisabled||null==u._soundPack)return null;u._unmuteMusic=a;if(0==u._volume)return null;0>c&&(c=u.defaultMusicVolume);if(u._currentMusic==a&&!b)return null;b=u.play(a,"MUSIC",c,!0,!1);if(null==b)return b;u._currentMusic=a;return u._currentMusicPlayback=b};u.play=function(a,b,c,d,e,h){null==e&&(e=!1);null==d&&(d=!1);null==c&&(c=1);if(u._soundsDisabled||null==u._soundPack||0==u._volume||null==a)return null;0<=a.indexOf("{")&&(a=u.getIdFromTemplate(a,
h));h=re.stamp();if(u.soundPollingMap.exists(a)){var f=u.soundPollingMap.get(a);if(h-f<u.soundPollingSeconds)return null}u.soundPollingMap.set(a,h);h=null;a=u._soundPack.getSound(a,!1);if(null==a||0>=a.get_duration())return null;null==b&&(b="OTHER");if(u.channels.exists(b)){h=u.channels.get(b);if(!(null==h||h.get_complete().get__())&&e)return null;h=u.__playSoundInChannel(a,c,d,b,h)}else h=u.__playSoundInChannel(a,c,d,b);b=h;null!=b._clonedElement&&(b._clonedElement.autoplay=!0);return h};u.getIdFromTemplate=
function(a,b){var c=a;if(0<=c.indexOf("{random("))var d=c.split("{random(")[1],d=G.parseInt(d.split(")}")[0]),e=Math.floor(Math.random()*d+1),c=fa.replace(c,"{random("+d+")}",""+e);if(null!=b){d=0;for(e=B.fields(b);d<e.length;){var h=e[d];++d;c=fa.replace(c,"{{"+h+"}}",B.field(b,h))}}return c};u.__playSoundInChannel=function(a,b,c,d,e){null!=e&&(e.set_paused(!0),e.dispose(),u.channels.set(d,null));e=c?a.loop(b):a.play(b);u.channels.set(d,e);return e};u.mute=function(){u.setVolume(0)};u.unmute=function(){u.setVolume(u._unmuteVolume);
null!=u._unmuteMusic&&u.playMusic(u._unmuteMusic)};u.setVolume=function(a,b,c){null==b&&(b=0.2);null==c&&(c=q.quadInOut);0==a?(u._unmuteVolume=0<u._volume?u._volume:u.defaultVolume,u._volume=0,na.set("soundMuted",!0)):(u._volume=a,0>u._volume&&(u._volume=u.defaultVolume),na.set("soundMuted",!1));p.volume.animateTo(u._volume,b,c);return p.volume};u.get_isMuted=function(){return-1<u._volume?0==u._volume:!1};u.loadSounds=function(a,b){w.loadPack(a,u.onAssetsLoaded);!0==na.get("soundMuted",!1)?u.mute():
u.setVolume(u.defaultVolume);u._callback=b};u.setSounds=function(a){u._soundPack=a};u.onAssetsLoaded=function(a){u.setSounds(a);null!=u._callback&&u._callback()};var bb=g["stolo.managers.SpritesheetType"]={__ename__:["stolo","managers","SpritesheetType"],__constructs__:["Auto","JsonArray","Grid","Flump","Zoe"]};bb.Auto=["Auto",0];bb.Auto.toString=r;bb.Auto.__enum__=bb;bb.JsonArray=["JsonArray",1];bb.JsonArray.toString=r;bb.JsonArray.__enum__=bb;bb.Grid=["Grid",2];bb.Grid.toString=r;bb.Grid.__enum__=
bb;bb.Flump=["Flump",3];bb.Flump.toString=r;bb.Flump.__enum__=bb;bb.Zoe=["Zoe",4];bb.Zoe.toString=r;bb.Zoe.__enum__=bb;var La=function(){};g["stolo.managers.SpritesheetManager"]=La;La.__name__=["stolo","managers","SpritesheetManager"];La.getSpritesheet=function(a,b,c,d){null==b&&(b=La.DefaultManifest);null==d&&(d=bb.Auto);var e=b+"_"+a;if(La._cachedSpritesheets.exists(e))c(La._cachedSpritesheets.get(e));else if(La._loadingSpritesheets.exists(e))La._loadingSpritesheets.get(e).callbacks.push(c);else{var h=
La.createRequest(e,a,b,c,d);La._loadingSpritesheets.set(e,h);h.loader=w.loadPack(b,function(a){La.onRequestComplete(h,a)})}};La.createRequest=function(a,b,c,d,e){for(var h=b.split(","),f=[],g=0;g<h.length;){var i=h[g];++g;switch(e[1]){case 3:i=Kk.getFileInfo(i,null);break;default:i=Kk.getFileInfo(i,La.DefaultFileName)}f.push(i)}h=[];h.push(d);return{id:a,pack:c,name:b,type:e,jsonFiles:f,callbacks:h}};La.clearCache=function(){La._cachedSpritesheets=new K};La.onRequestComplete=function(a,b){var c=null,
d=a.jsonFiles[0],e;if(a.type==bb.Flump)c=new yj(a.name,b),c.set_name(a.id);else for(var h=0,f=a.jsonFiles;h<f.length;){var g=f[h];++h;e=b.getFile(g.url,!1);if(null==e)for(var i=!1,j=0;!i;){e=fa.replace(g.url,".json",j+".json");e=b.getFile(e,!1);if(null==e){if(0==j)throw"Spritesheet not found: '"+g.url+"' on pack '"+a.pack+"'";i=!0}else e=JSON.parse(e.toString()),c=La.appendToSpriteSheet(c,e,b,g);j++}else e=JSON.parse(e.toString()),c=La.appendToSpriteSheet(c,e,b,g);c.set_name(a.id)}c.finalize();d=
fa.replace(d.url,".json","_meta.json");e=b.getFile(d,!1);null!=e&&(d=JSON.parse(e.toString()),c.applyOverrides(d));La._loadingSpritesheets.remove(a.id);La._cachedSpritesheets.set(a.id,c);if(null!=c){d=0;for(h=a.callbacks;d<h.length;)f=h[d],++d,f(c)}};La.appendToSpriteSheet=function(a,b,c,d){if(null!=b.frames&&b.frames.length)null==a&&(a=new Xb),a.parseData(c,b,d.path);else if(0<b.frameWidth)null==a&&(a=new uf),a.parseData(c,b,d.path);else throw"Unsupported JSON data: "+G.string(b);return a};var na=
function(){};g["stolo.managers.StorageManager"]=na;na.__name__=["stolo","managers","StorageManager"];na.get=function(a,b,c){null==c&&(c=!0);null==b&&null!=na.Defaults&&(b=na.getDefaultValue(a));c&&(a=na.Prefix+a);return p._platform.getStorage().get(a,b)};na.getDefaultValue=function(a){return!Object.prototype.hasOwnProperty.call(na.Defaults,a)?null:B.field(na.Defaults,a)};na.set=function(a,b,c){null==c&&(c=!0);if(c){if(null==na.Prefix)throw"StorageManager.Prefix was not set";a=na.Prefix+a}return p._platform.getStorage().set(a,
b)};var U=function(){};g["stolo.managers.TextManager"]=U;U.__name__=["stolo","managers","TextManager"];U.addFontPack=function(a){for(var b,c,d=a.get_manifest().iterator();d.hasNext();)b=d.next(),c=b.name.indexOf(".fnt"),-1<c&&(c=b.name.substring(0,c),b=new Ze(a,c),null==U.defaultFont&&(U.defaultFont=b),U._fontMap.set(c,b))};U.getFont=function(a,b){null==b&&(b=!0);if(b&&!U._fontMap.exists(a))throw"Font not found: '"+a+"'";return U._fontMap.get(a)};U.setDefaultFont=function(a){U.defaultFont=a;U._fontMap.set(U.defaultFontName,
a)};U.getFontStyle=function(a,b){null==b&&(b=!0);if(b&&!U._fontStylesMap.exists(a))throw"Font style not found: '"+a+"'";return U._fontStylesMap.get(a)};U.addFontStyle=function(a){if(null==a.font&&(a.font=U.getFont(a.fontName),null==a.font))throw"Font '"+a.fontName+"' not found to create font style '"+a.name+"'";U._fontStylesMap.set(a.name,a);return a};U.applyFontStyle=function(a,b){null!=b.font&&a.set_font(b.font);0<b.fontScale&&(a.setScale(b.fontScale),U.ChangePixelSnapping&&1!=b.fontScale&&a.set_pixelSnapping(!1));
if((0<b.offsetX||0>b.offsetX||0<b.offsetY||0>b.offsetY)&&!pa.__instanceof(a,ud)){if(0<b.offsetX||0>b.offsetX){var c=a.anchorX;c.set__(c._value-b.offsetX)}if(0<b.offsetY||0>b.offsetY)c=a.anchorY,c.set__(c._value-b.offsetY)}null!=b.align&&a.set_align(b.align);null!=b.letterSpacing&&a.letterSpacing.set__(b.letterSpacing);return a};U.getLocalizedTextSprite=function(a,b,c,d,e){a=new ud(a,b,e);null!=c&&null!=d&&a.setXY(c,d);return a};U.getTextSprite=function(a,b,c,d){null==b&&(b="");null==a&&(a=U.defaultFontName);
var e=U.getFontStyle(a,!1),a=null!=e?e.font:U.getFont(a),b=new cd(a,b);null!=c&&b.x.set__(c);null!=d&&b.y.set__(d);null!=e&&(U.applyFontStyle(b,e),null!=e.transform&&b.set_text(U.applyTransform(b._text,e.transform)));return b};U.applyTransform=function(a,b){return"uppercase"==b?a.toUpperCase():"lowercase"==b?a.toLowerCase():a};U.extendFontStyle=function(a,b,c){if(null==a||!0!=a.generated){var d={generated:!0};if(null!=a){d.parent=a;for(var e=0,h=B.fields(a);e<h.length;){var f=h[e];++e;B.setProperty(d,
f,B.field(a,f))}}a=d}B.setProperty(a,b,c);return a};U.configureFromXML=function(a){var b=null;if(a.has.resolve("defaultFont")&&(b=U.getFont(a.att.resolve("defaultFont")),null==b))throw"Default font '"+a.att.resolve("defaultFont")+"' not found";for(a=a.nodes.resolve("style").iterator();a.hasNext();){var c=a.next(),d=U.createFontStyle(c.att.resolve("name"));c.has.resolve("fontName")&&(d.fontName=c.att.resolve("fontName"));c.has.resolve("fontScale")&&(d.fontScale=G.parseFloat(c.att.resolve("fontScale")));
c.has.resolve("offsetX")&&(d.offsetX=G.parseFloat(c.att.resolve("offsetX")));c.has.resolve("offsetY")&&(d.offsetY=G.parseFloat(c.att.resolve("offsetY")));c.has.resolve("letterSpacing")&&(d.letterSpacing=G.parseFloat(c.att.resolve("letterSpacing")));c.has.resolve("align")&&("center"==c.att.resolve("align")&&(d.align=Ta.Center),"left"==c.att.resolve("align")&&(d.align=Ta.Left),"right"==c.att.resolve("align")&&(d.align=Ta.Right));c.has.resolve("transform")&&(d.transform=c.att.resolve("transform"));null==
b&&(b=d.font);U.addFontStyle(d)}null!=b?U.setDefaultFont(b):null};U.createFontStyle=function(a){return{name:a,fontName:U.defaultFontName,transform:U.defaultTransform}};var vf=function(a,b,c,d,e,h,f){null==f&&(f=!0);this.fps=-1;this.frames=[];this.name=b;this.prefix=c;this.spriteSheet=a;this.fps=d;this.width=e;this.height=h;this.loop=f};g["stolo.sprites.AnimationSymbol"]=vf;vf.__name__=["stolo","sprites","AnimationSymbol"];vf.prototype={addCuePoint:function(a){null==this.cues&&(this.cues=[]);this.cues.push(a)},
addFrame:function(a){this.frames.push(a)},get_duration:function(){return this.frames.length/(-1==this.fps?this.spriteSheet.fps:this.fps)},orderFramesByName:function(){this.frames.sort(function(a,b){return a.name==b.name?0:a.name>b.name?1:-1})},setFrames:function(a,b){for(var c=[],d=0;d<a.length;){var e=a[d];++d;var h=b[e-Xb.BaseIndex];if(null==h)throw"Frame "+e+" not found";c.push(h)}0<c.length&&(this.frames=c);return this.frames},setFrameData:function(a,b){null!=this.frames[a]&&(this.frames[a].data=
b)},__class__:vf,__properties__:{get_duration:"get_duration"}};var Na=function(a,b,c,d,e){null==e&&(e=!0);this.onInit=new ua;this.autoCenter=!0;ia.call(this,null);this.autoCenter=e;this.currentSymbolName=b;if(null!=d)this.onInit.connect(d).once();null!=a&&La.getSpritesheet(a,c,function(a){return function(b){return a(b)}}(m(this,this.onSpritesheetReady)))};g["stolo.sprites.BitmapSprite"]=Na;Na.__name__=["stolo","sprites","BitmapSprite"];Na.__super__=ia;Na.prototype=k(ia.prototype,{set_currentSymbol:function(a){this._currentSymbol=
a;null!=this._currentSymbol&&(this.currentSymbolName=this._currentSymbol.name);return this._currentSymbol},onStop:function(){ia.prototype.onStop.call(this);this.onInit=this.currentSymbolName=this._currentSymbol=this._spritesheet=null},onAdded:function(){ia.prototype.onAdded.call(this);null!=this._spritesheet&&this.onInit.emit()},onSpritesheetReady:function(a){this.initialize(a)},setSymbol:function(a,b){null==b&&(b=!0);var c=this._spritesheet.getBitmapSymbol(a);if(null==c){if(b)throw"Symbol not found: '"+
a+"' for spritesheet '"+this._spritesheet.get_name()+"'";return null}this.set_currentSymbol(c);return this._currentSymbol},initialize:function(a){this._spritesheet=a;null!=this.currentSymbolName&&this.setSymbol(this.currentSymbolName);this.autoCenter&&null!=this._currentSymbol&&0>=this._currentSymbol.width&&this.centerAnchor();null!=this.owner&&this.onInit.emit()},draw:function(a){null!=this._currentSymbol?0<this._currentSymbol.width&&0<this._currentSymbol.height&&a.drawSubTexture(this._currentSymbol.texture,
this._currentSymbol.offsetX,this._currentSymbol.offsetY,this._currentSymbol.x,this._currentSymbol.y,this._currentSymbol.width,this._currentSymbol.height):ia.prototype.draw.call(this,a)},getNaturalWidth:function(){return null==this._currentSymbol?0:this._currentSymbol.sourceWidth},getNaturalHeight:function(){return null==this._currentSymbol?0:this._currentSymbol.sourceHeight},__class__:Na,__properties__:k(ia.prototype.__properties__,{set_currentSymbol:"set_currentSymbol"})});var ya=function(a,b,c,
d,e){null==d&&(d=!0);this._isPlaying=!1;this._currentFrame=0;this.nextCuePointFrame=this._cuepointIndex=-1;this.isReady=!1;this.onCuePoint=new ad;this.onReady=new Y;this.onPlaylistComplete=new ua;this.animComplete=new ad;this.isReady=this.autoRestart=!1;this._position=this._currentFrame=0;this.speed=new O(1);this._overrides=e;Na.call(this,a,null,b,c,d)};g["stolo.sprites.BitmapAnimation"]=ya;ya.__name__=["stolo","sprites","BitmapAnimation"];ya.__super__=Na;ya.prototype=k(Na.prototype,{onSpritesheetReady:function(a){this.initialize(a)},
dispose:function(){Na.prototype.dispose.call(this);this.onReady=this.animComplete=null;this._isPlaying=!1;this._completeCallback=this._animation=this._currentSprite=this._spritesheet=this._frames=null},initialize:function(a){this._spritesheet=a;null!=this._overrides&&a.applyOverrides(this._overrides);null==this.animName&&(this.animName=this._spritesheet.defaultAnim);this.start();this.onInit.emit()},onAdded:function(){Na.prototype.onAdded.call(this);null!=this._spritesheet&&(this.isReady?this.onReady.emit(this):
this.start())},start:function(){if(!this.isReady){this.isReady=!0;this.gotoAndPlay(this.animName,this.animParams);if(null==this._frames)throw"Cannot start animation, animation '"+this.animName+"' did not find frames!";this.autoCenter&&null!=this._animation&&0<this._animation.width&&this.centerAnchor();null!=this.owner&&this.onReady.emit(this)}},onUpdate:function(a){this.isReady&&(this.updateAnim(a),Na.prototype.onUpdate.call(this,a))},updateAnim:function(a){0!=(this._flags&2)&&this._isPlaying&&(this.speed.update(a),
this._newPos=this._position+a*this._currentFPS*this.speed._value,this._newPos>this._frames.length?this.handleAnimComplete():(this._position=this._newPos,this.gotoFrame(Math.floor(this._position)+1)))},handleAnimComplete:function(){!this._animation.loop||null!=this._frames&&1>=this._frames.length?this.stop():this._position=0;if(null!=this._completeCallback){var a=this._completeCallback;this._completeCallback=null;a()}this.animComplete.emit(this._animation.name,this);this.nextAnim()},nextAnim:function(a){null!=
this._playlist&&(0>=this._playlist.length?(this._animCompletePlaylistCallback=this._playlist=null,this.onPlaylistComplete.emit()):(this.gotoAnim(this._playlist.shift(),a),null==a&&null!=this._animCompletePlaylistCallback&&(this._completeCallback=this._animCompletePlaylistCallback)))},getDuration:function(a){a=null==a?this._animation:this._spritesheet.getAnimation(a,this.prefix);return null==a?0:a.get_duration()},hasAnim:function(a){return null==this._spritesheet?!1:null!=this._spritesheet.getAnimation(a,
this.prefix)},stop:function(){this._isPlaying=!1},gotoAndStop:function(a,b){this.gotoAndPlay(a,b);this._isPlaying=!1;return this._animation},gotoAndPlay:function(a,b){this.isReady&&(this._playlist=null);if("string"==typeof a){if(!this.autoRestart&&null!=this._animation&&a==this._animation.name&&this._isPlaying)return this.gotoAnim(a,b),this._animation;this.gotoAnim(a,b)}else if((a|0)===a)this.gotoFrame(a,!0),this._position=this._currentFrame-1;else if(a instanceof Array&&null==a.__enum__){this._playlist=
a;if(0>=this._playlist.length)throw"Received empty playlist!";this.nextAnim(b)}this._isPlaying=!0;return this._animation},gotoAnim:function(a,b){if(null==this._spritesheet)this.animName=a,this.animParams=b;else{var c=this._spritesheet.getAnimation(a,this.prefix);if(null==c)ya.verbose&&null;else if(this.animName=a,this.animParams=b,this._completeCallback=null,null==b)this.setAnim(c);else if((b|0)===b&&0<b)this.setAnim(c),this.gotoAndPlay(b);else{null!=b.onComplete&&(this._completeCallback=b.onComplete);
Object.prototype.hasOwnProperty.call(b,"next")&&(null==this._playlist&&(this._playlist=[]),this._playlist.push(b.next));null!=this._playlist&&(null!=b.onPlaylistComplete?(this.onPlaylistComplete.connect(b.onPlaylistComplete).once(),this._animCompletePlaylistCallback=b.onComplete):null!=this._completeCallback&&(this.onPlaylistComplete.connect(this._completeCallback).once(),this._completeCallback=null));this.setAnim(c);if(Object.prototype.hasOwnProperty.call(b,"loop")&&null!=this.get_animation()&&(!0==
b.loop||!1==b.loop))this.get_animation().loop=b.loop;0<b.frame&&this.gotoAndPlay(b.frame)}}},setAnim:function(a){this._animation=a;this._frames=a.frames;this._currentFPS=0<this._animation.fps?this._animation.fps:this.get_spritesheet().fps;this.nextCuePointFrame=this._cuepointIndex=-1;this.gotoFrame(1,!0);this.getNextCuePoint();this._position=0;if(null==this._frames)throw"Animation '"+this._defaultAnimName+"' does not have frames!";this.autoCenter&&this.centerAnchor()},gotoFrame:function(a,b){null==
b&&(b=!1);1>a&&(a=1);a>this._frames.length&&(a=this._frames.length);if(this._currentFrame!=a||b)-1<this.nextCuePointFrame&&a>=this.nextCuePointFrame&&this._currentFrame!=a&&(this.onCuePoint.emit(this._animation.cues[this._cuepointIndex].name,this),this.nextCuePointFrame=-1,this.getNextCuePoint()),a<this._currentFrame&&(this._cuepointIndex=-1,this.getNextCuePoint()),this._currentFrame=a,this._currentSymbol=this._frames[a-1]},getNextCuePoint:function(){null==this._animation.cues?this.nextCuePointFrame=
-1:(this._cuepointIndex++,null==this._animation.cues[this._cuepointIndex]?this._cuepointIndex--:this.nextCuePointFrame=this._animation.cues[this._cuepointIndex].frame)},get_spritesheet:function(){return this._spritesheet},set_isPlaying:function(a){return this._isPlaying=a},get_animation:function(){return this._animation},get_currentFrame:function(){return this._currentFrame},__class__:ya,__properties__:k(Na.prototype.__properties__,{get_currentFrame:"get_currentFrame",get_animation:"get_animation",
set_isPlaying:"set_isPlaying",get_spritesheet:"get_spritesheet"})});var zj=function(){};g["stolo.sprites.BitmapFrameSymbol"]=zj;zj.__name__=["stolo","sprites","BitmapFrameSymbol"];zj.prototype={get_subTexture:function(){null==this._subTexture&&null!=this.texture&&(this._subTexture=this.texture.subTexture(this.x,this.y,this.width,this.height));return this._subTexture},__class__:zj,__properties__:{get_subTexture:"get_subTexture"}};var Uf=function(a,b,c,d,e){null==e&&(e=!0);this._root=new z;this._cache=
new K;this.onUpdateSignal=new Y;""==a&&(a=null);this.prefix=a;ya.call(this,null,null,d,e);null!=b&&La.getSpritesheet(b,c,function(a){return function(b){return a(b)}}(m(this,this.onSpritesheetReady)),bb.Flump)};g["stolo.sprites.FlumpAnimation"]=Uf;Uf.__name__=["stolo","sprites","FlumpAnimation"];Uf.__super__=ya;Uf.prototype=k(ya.prototype,{onAdded:function(){this.owner.addChild(this._root);ya.prototype.onAdded.call(this)},onUpdate:function(a){this.onUpdateSignal.emit(a);ya.prototype.onUpdate.call(this,
a)},initialize:function(a){this.flump=a;if(null==this.flump)throw"Missing or incompatible spritesheet: "+G.string(a);this._lib=this.flump.lib;ya.prototype.initialize.call(this,a)},setDecorator:function(a){this._decorator=a;return this},start:function(){this.isReady||(this.onReady.emit(this),this.isReady=!0,this.gotoAndPlay(this.animName,this.animParams))},updateAnim:function(a){0!=(this._flags&2)&&this._isPlaying&&this.speed.update(a)},setAnim:function(a){this._animation=a;this._currentFPS=0<this._animation.fps?
this._animation.fps:this.get_spritesheet().fps;this.playFromCache(a.name)},gotoFrame:function(a){null!=this.movie&&this.movie.set_position((a-1)/this.movie.symbol.frameRate)},playFromCache:function(a){var b;if(null!=this._cache)if(b=this._cache.get(a),null!=b)b.set_position(0);else{if(null==this._lib._symbols.get(a))return ya.verbose&&null,null;b=this.createMovie(a);this._cache.set(a,b)}else b=this.createMovie(a);return this.setCurrent(b)},createMovie:function(a){a=this._lib.createSprite(a,!0);null!=
this._decorator&&this._decorator(a);return a},setCurrent:function(a){this._root.add(a);this.movie=a;null!=this._animCompleteConnection&&this._animCompleteConnection.dispose();this._animCompleteConnection=a.get_looped().connect(m(this,this.handleAnimComplete));return a},__class__:Uf});var Xb=function(){this._animations=new K;this.nameSeparator="/";this.prefixSeparator="_";this.defaultAnim="idle";this.fps=Xb.DefaultFPS;this.type=bb.JsonArray};g["stolo.sprites.Spritesheet"]=Xb;Xb.__name__=["stolo","sprites",
"Spritesheet"];Xb.prototype={getAnimation:function(a,b,c){null==c&&(c=!1);null!=b&&(a=b+this.prefixSeparator+a);if(!this._animations.exists(a)){if(c)throw"Animation not found: '"+a+"' in spritesheet "+this._name;return null}return this._animations.get(a)},getTexture:function(a,b,c){null==c&&(c=!0);a=this.getBitmapSymbol(a,b,c);return null==a?null:a.get_subTexture()},getBitmapSymbol:function(a,b,c){null==c&&(c=!1);if(c&&!this._bitmapSymbols.exists(a))throw"Symbol '"+a+"' not found in spritesheet "+
this._name;return this._bitmapSymbols.get(a)},finalize:function(){this.orderFramesByName();null!=this._overrides&&this.applyOverrides(this._overrides)},parseData:function(a,b,c){for(var a=a.getTexture(c+Ra.removeFileExtension(b.meta.image)),d,e=c=0,h=b.frames;e<h.length;){var f=h[e];++e;d=null!=this.nameSeparator?f.filename.lastIndexOf(this.nameSeparator):-1;d=0>=d?null:S.substr(f.filename,0,d);f=this.createFrameSymbol(f,a,c);null!=d&&this.addToAnim(d,f,a,c);this.addBitmapSymbol(f);null==this._frames&&
(this._frames=[]);this._frames.push(f);c++}null==this._animations.get(this.defaultAnim)&&null!=this._firstSymbol&&(this.defaultAnim=this._firstSymbol.name);if(null==this._animations.get(this.defaultAnim)){c=0;for(e=this._frames;c<e.length;)h=e[c],++c,this.addToAnim(this.defaultAnim,h,a)}null!=b.spritesheet&&(this._overrides=b.spritesheet)},orderFramesByName:function(){for(var a=this._animations.iterator();a.hasNext();)a.next().orderFramesByName();null!=this._frames&&this._frames.sort(function(a,c){return a.name==
c.name?0:a.name>c.name?1:-1})},addToAnim:function(a,b){var c=this._animations.get(a);null==c&&(c=new vf(this,a,null,-1,b.sourceWidth,b.sourceHeight),this._animations.set(a,c),null==this._firstSymbol&&(this._firstSymbol=c));c.addFrame(b);return c},addBitmapSymbol:function(a,b){null==this._bitmapSymbols&&(this._bitmapSymbols=new K);null==b&&(b=a.name);this._bitmapSymbols.set(b,a)},createFrameSymbol:function(a,b,c){var d=new zj;d.index=c;d.name=a.filename;d.name.lastIndexOf(".")==d.name.length-4&&(c=
d.name.lastIndexOf("."),d.name=S.substr(d.name,0,c));d.texture=b;d.x=a.frame.x;d.y=a.frame.y;d.width=a.frame.w;d.height=a.frame.h;d.offsetX=a.spriteSourceSize.x;d.offsetY=a.spriteSourceSize.y;d.sourceWidth=a.sourceSize.w;d.sourceHeight=a.sourceSize.h;return d},applyOverrides:function(a){for(var b,c=0,d=B.fields(a);c<d.length;){var e=d[c];++c;b=B.field(a,e);if("animations"==e||"anims"==e)for(var e=0,h=B.fields(b);e<h.length;){var f=h[e];++e;this.modAnim(f,B.field(b,f),!0)}else this.applyOverride(e,
b)}},applyOverride:function(a,b){Object.prototype.hasOwnProperty.call(this,a)&&B.setProperty(this,a,b)},modAnim:function(a,b,c,d){null==c&&(c=!0);var e=this.getAnimation(a,d);if(null==e)if(c&&null!=b.frames)e=new vf(this,a,d,-1,0,0),this._animations.set(a,e);else throw"Anim '"+a+"' not found";a=0;for(c=B.fields(b);a<c.length;){var h=c[a];++a;d=B.field(b,h);if("frames"==h)if(0<d.length&&0<=d[0]&&e.setFrames(d,this._frames),0<d.length)for(var h=0,f=d.length;h<f;){var g=h++;e.setFrameData(g,d[g])}else throw"Unknown frames format: "+
G.string(d);else"cues"==h||"cuepoints"==h?(d=B.field(b,h),this.addCuePoints(e.name,d,null,e)):B.setProperty(e,h,d)}return e},addCuePoints:function(a,b,c,d){null==d&&(d=this.getAnimation(a,c,!0));for(var e=0;e<b.length;){var h=b[e];++e;this.addCuePoint(a,h,c,d)}},addCuePoint:function(a,b,c,d){null==d&&(d=this.getAnimation(a,c,!0));d.addCuePoint(b);return d},get_name:function(){return this._name},set_name:function(a){return this._name=a},__class__:Xb,__properties__:{set_name:"set_name",get_name:"get_name"}};
var yj=function(a,b){Xb.call(this);this.type=bb.Flump;this.loadLibrary(a,b)};g["stolo.sprites.FlumpSpritesheet"]=yj;yj.__name__=["stolo","sprites","FlumpSpritesheet"];yj.__super__=Xb;yj.prototype=k(Xb.prototype,{getAnimation:function(a,b){null!=b&&(a=b+this.prefixSeparator+a);return!this._animations.exists(a)?this.createAnimation(a,b):this._animations.get(a)},loadLibrary:function(a,b){this.lib=new fk(b,a)},createAnimation:function(a,b){if(null==this.lib._symbols.get(a))return null;var c=new vf(this,
a,b,-1,0,0);this._animations.set(a,c);return c},finalize:function(){},__class__:yj});var uf=function(){this._framesMap=new Ya;Xb.call(this);this.type=bb.Grid};g["stolo.sprites.GridSpritesheet"]=uf;uf.__name__=["stolo","sprites","GridSpritesheet"];uf.__super__=Xb;uf.prototype=k(Xb.prototype,{finalize:function(){},parseData:function(a,b,c){a=a.getTexture(c+Ra.removeFileExtension(b.image));null!=b.defaultAnim&&(this.defaultAnim=b.defaultAnim);for(var d=0,e=B.fields(b.animations);d<e.length;){var h=e[d];
++d;var f=B.field(b.animations,h),c=new vf(this,h,null,0<f.fps?f.fps:-1,b.frameWidth,b.frameHeight,f.loop),f=f.frames;if(null!=f)for(var g=0;g<f.length;){var i=f[g];++g;var i=i-uf.BaseIndex,j;if(this._framesMap.exists(i))j=this._framesMap.get(i);else{j=new zj;this._framesMap.set(i,j);for(var s=0,k=0,l=c.width*i;l>=a.get_width();)l-=a.get_width(),k+=c.height;s+=l;j.index=i;j.name=h+"_"+i;j.texture=a;j.x=s;j.y=k;j.width=b.frameWidth;j.height=b.frameHeight;j.offsetX=0;j.offsetY=0;j.sourceWidth=b.frameWidth;
j.sourceHeight=b.frameHeight}c.addFrame(j)}this._animations.set(h,c)}},__class__:uf});var Ha=g["stolo.ui.ButtonState"]={__ename__:["stolo","ui","ButtonState"],__constructs__:["up","pressed","selected","over","disabled"]};Ha.up=["up",0];Ha.up.toString=r;Ha.up.__enum__=Ha;Ha.pressed=["pressed",1];Ha.pressed.toString=r;Ha.pressed.__enum__=Ha;Ha.selected=["selected",2];Ha.selected.toString=r;Ha.selected.__enum__=Ha;Ha.over=["over",3];Ha.over.toString=r;Ha.over.__enum__=Ha;Ha.disabled=["disabled",4];Ha.disabled.toString=
r;Ha.disabled.__enum__=Ha;var Rb=function(a,b,c,d,e){null==e&&(e="buttons");null==d&&(d="");this._centered=this._hadDown=!1;this._textID=this._fontStyle="";this._state=Ha.up;this.onDownCallback=this.onUpCallback=null;this.onChange=new Y;this.onDown=new Y;this.onUp=new Y;this.onClick=new Y;this.pressAnimation=sl.bounceDownTemplate;this.clickNeedsDown=this.upClick=!0;this.index=-1;D.call(this);null==a&&(a=W.get_sharedAssets());this._pack=a;this._disposer=new uc;null!=b&&(this._texture=W.getTexture(b,
a),this._downTexture=W.getTexture(b+"_pressed",a,!1),this._disabledTexture=W.getTexture(b+"_disabled",a,!1),this._selectedTexture=W.getTexture(b+"_selected",a,!1));null!=c&&this._disposer.add(this.onClick.connect(c));this._textID=d;this._fontStyle=e};g["stolo.ui.Button"]=Rb;Rb.__name__=["stolo","ui","Button"];Rb.__super__=D;Rb.prototype=k(D.prototype,{onAdded:function(){this.owner.add(this._disposer);this.build();null==this.origin&&this.updateOrigin()},onRemoved:function(){x.kill(this);D.prototype.onRemoved.call(this);
this.pressAnimation=this.onChange=this.onDown=this.onUp=this.onClick=this.onUpCallback=this.onDownCallback=this._disposer=this.origin=this._pack=this._downTexture=this._texture=this.display=null},setXY:function(a,b){D.prototype.setXY.call(this,a,b);this.updateOrigin();return this},updateOrigin:function(){null==this.origin&&(this.origin=new cb(this.x._value,this.y._value));this.origin.x=this.x._value;this.origin.y=this.y._value},build:function(){if(null!=this.display)throw"This button was already added into an Entity.";
this.display=new ia(this._texture);this.owner.addChild((new z).add(this.display));this._centered&&this.display.centerAnchor();this._disposer.add(p._platform.getPointer().up.connect(m(this,this.onStageUp)));""!=this._textID&&this.createLabel()},createLabel:function(){this.label=new ud(this._textID,this._fontStyle);this.label.setAlign(Ta.Center);this.owner.addChild((new z).add(this.label));var a=D.getBounds(this.owner);this.label.centerAnchor().setXY(0.5*a.width+0.5*this.label.getNaturalWidth(),0.5*
a.height)},updateUpTexture:function(a){this._texture=a},updateState:function(a,b){switch(a[1]){case 1:b=this._downTexture;this.PressedAnimation();break;case 2:b=this._selectedTexture;break;case 4:b=this._disabledTexture;break;default:if(this.isDisabled)return this.updateState(Ha.disabled);if(this.isSelected)return this.updateState(Ha.selected);b=this._texture}null==b&&(b=this._texture);this.display.texture=b;this._state!=a&&this._state},PressedAnimation:function(){null!=this.pressAnimation&&x.runTemplate(this.pressAnimation,
this)},centerAnchor:function(){null!=this.display&&this.display.centerAnchor();this._centered=!0;return this},getNaturalWidth:function(){return this.owner.firstChild._compMap.Sprite_4.getNaturalWidth()},getNaturalHeight:function(){return this.owner.firstChild._compMap.Sprite_4.getNaturalHeight()},onStageUp:function(){this._hadDown&&this.updateState(Ha.up);this._hadDown=!1},disable:function(){this.isSelected||(this.isDisabled=!0,this.updateState(Ha.disabled),this.onChange.emit(this))},select:function(){this.isSelected||
(this.isSelected=!0,this.updateState(Ha.selected),this.onChange.emit(this))},deselect:function(){this.isSelected&&(this.isSelected=!1,this.updateState(Ha.up),this.onChange.emit(this))},onPointerDown:function(a){D.prototype.onPointerDown.call(this,a);this._hadDown=!0;a._stopped=!0;this.updateState(Ha.pressed);this.onDown.emit(this);if(null!=this.onDownCallback)this.onDownCallback(a);this.upClick||this.dispatchClick()},onPointerUp:function(a){D.prototype.onPointerUp.call(this,a);if(!this.clickNeedsDown||
this._hadDown){this.updateState(Ha.up);this.onUp.emit(this);if(null!=this.onUpCallback)this.onUpCallback(a);this.upClick&&this.dispatchClick();this._hadDown=!1}},dispatchClick:function(){this.onClick.emit(this)},__class__:Rb});var ud=function(a,b,c){this._x=this._y=this._offsetX=this._offsetY=0;this.localized=!1;null!=b&&(this.fontStyle=U.getFontStyle(b),this._defaultFont=null!=this.fontStyle?this.fontStyle.font:U.getFont(b));null==this._defaultFont&&(this._defaultFont=U.defaultFont);cd.call(this,
this._defaultFont);null!=a&&this.setText(a,c)};g["stolo.ui.LocalizedTextSprite"]=ud;ud.__name__=["stolo","ui","LocalizedTextSprite"];ud.__super__=cd;ud.prototype=k(cd.prototype,{applyFontStyle:function(a,b){null==b&&(b=!0);null==a&&(a=this.fontStyle);null!=a&&(b&&U.applyFontStyle(this,a),null!=a.offsetX&&(this._offsetX=a.offsetX),null!=a.offsetY&&(this._offsetY=a.offsetY),null!=a.transform&&cd.prototype.set_text.call(this,U.applyTransform(this._text,a.transform)),this.setXY(this._x,this._y))},onAdded:function(){cd.prototype.onAdded.call(this)},
setText:function(a,b,c){null==c&&(c=!0);this._id=a;this.localized=!1;a=Ka.localizeTextField(this,a,b,this._defaultFont);this.localized=a.localized;c&&(null!=this.fontStyle&&this.applyFontStyle(this.fontStyle),null!=a.fontStyle&&this.applyFontStyle(a.fontStyle))},set_text:function(a){if(this.localized)throw"Attempting to set text directly with '"+a+"', please use setText() send null as constructor id or use a TextSprite instead";this.localized=!1;return cd.prototype.set_text.call(this,a)},setXY:function(a,
b){this._x=a;this._y=b;return cd.prototype.setXY.call(this,this._x+this._offsetX,this._y+this._offsetY)},__class__:ud});var ri=function(a){this.sliderInactiveX=this.sliderInactiveY=0;this.hideSlider=!0;this.horizontalId=-1;this.value=0;this.screenZoneY=0.35;this.screenZoneX=0.75;this.textureName_handle="slider_handle";this.textureName_slider="slider";this.isActive=!1;this.enabled=!0;this.deadZone=0.25;j.call(this);this.pack=a};g["stolo.ui.Slider"]=ri;ri.__name__=["stolo","ui","Slider"];ri.__super__=
j;ri.prototype=k(j.prototype,{get_name:function(){return"Slider_60"},dispose:function(){this.pack=null;j.prototype.dispose.call(this)},onStart:function(){this._disposer=new uc;this.owner.addChild((new z).add(this._disposer));this.setupListeners();this.build()},build:function(){p._platform.getTouch().get_supported()&&(this.sliderBar=(new ia(W.getTexture(this.textureName_slider,this.pack))).disablePointer(),this.slider=(new ia(W.getTexture(this.textureName_handle,this.pack))).disablePointer(),this.hideSlider&&
this.sliderBar.centerAnchor().set_visible(this.slider.centerAnchor().set_visible(!1)),this.owner.addChild((new z).add(this.sliderBar)),this.owner.addChild((new z).add(this.slider)),this.resetSliderPosition())},setupListeners:function(){this._disposer.add(p._platform.getTouch().down.connect(m(this,this.onTouchDown)));this._disposer.add(p._platform.getTouch().move.connect(m(this,this.onTouchMove)));this._disposer.add(p._platform.getTouch().up.connect(m(this,this.onTouchUp)))},showWhenInactive:function(a,
b){this.hideSlider=!1;this.sliderInactiveX=a;this.sliderInactiveY=b},onTouchDown:function(a){this.onPointerDown(a.viewX,a.viewY,a.id)},onTouchMove:function(a){this.onPointerMove(a.viewX,a.viewY,a.id)},onTouchUp:function(a){this.onPointerUp(a.viewX,a.viewY,a.id)},onPointerDown:function(a,b,c){this.enabled&&(1!=o.scale&&(a/=o.scale,b/=o.scale),null==this.horizontalOrigin&&a<o.gameWidth*this.screenZoneX&&b>o.gameHeight*this.screenZoneY&&(this.hideSlider&&this.slider.set_visible(this.sliderBar.set_visible(!0)),
this.slider.setXY(a,b),this.sliderBar.setXY(a,b),this.horizontalOrigin=new cb(a,b),this.horizontalId=c,this.isActive=!0))},onPointerMove:function(a,b,c){if(this.enabled&&(1!=o.scale&&(a/=o.scale),null!=this.horizontalOrigin&&this.horizontalId==c)){this.slider.x.set__(a);b=this.sliderBar.getNaturalWidth()/2*this.sliderBar.scaleX._value;c=this.sliderBar.x._value;this.slider.x._value>c+b?this.slider.x.set__(c+b):this.slider.x._value<c-b&&this.slider.x.set__(c-b);this.value=(this.slider.x._value-c)/b;
Math.abs(this.value)<this.deadZone&&(this.value=0);var d=c+10+b;if(a>d){var d=a-d,e=this.sliderBar.x;e.set__(e._value+d);e=this.slider.x;e.set__(e._value+d)}b=c-10-b;a<b&&(a=b-a,b=this.sliderBar.x,b.set__(b._value-a),b=this.slider.x,b.set__(b._value-a));this.slider.x.set__(Math.max(this.slider.x._value,0));this.sliderBar.x.set__(Math.max(this.sliderBar.x._value,0));this.isActive=!0}},onPointerUp:function(a,b,c){null!=this.horizontalOrigin&&this.horizontalId==c&&(this.hideSlider&&this.slider.set_visible(this.sliderBar.set_visible(!1)),
this.resetSliderPosition(),this.horizontalOrigin=null,this.horizontalId=-1,this.value=0,this.isActive=!1)},resetSliderPosition:function(){var a=this.sliderInactiveY-this.slider.getNaturalHeight();this.sliderBar.setXY(this.sliderInactiveX,a);this.slider.setXY(this.sliderInactiveX,a)},__class__:ri});var Aj=function(a){this.onUpdateSound=new Y;Gb.call(this);this._pack=a;this._downOnTexture=W.getTexture("btn_sound_on_pressed",this._pack);this._downOffTexture=W.getTexture("btn_sound_off_pressed",this._pack)};
g["stolo.ui.SoundButton"]=Aj;Aj.__name__=["stolo","ui","SoundButton"];Aj.__super__=Gb;Aj.prototype=k(Gb.prototype,{dispose:function(){this.onUpdateSound=this._pack=null;Gb.prototype.dispose.call(this)},onAdded:function(){Gb.prototype.onAdded.call(this);this._soundButton=new Rb(this._pack,"btn_sound_off");this._soundButton.setXY(0,0);this._soundButton.get_pointerUp().connect(m(this,this.onUp));this._soundButton.get_pointerDown().connect(m(this,this.onDown));this.owner.addChild((new z).add(this._soundButton));
this.updateSoundState()},onUp:function(a){a._stopped=!0;u.get_isMuted()?u.unmute():u.mute();this.onUpdateSound.emit(u.get_isMuted());this.updateSoundState()},onDown:function(a){a._stopped=!0;u.get_isMuted()?null!=this._downOnTexture&&(this._soundButton.display.texture=this._downOnTexture):null!=this._downOffTexture&&(this._soundButton.display.texture=this._downOffTexture)},updateSoundState:function(){this._soundButton.display.texture=u.get_isMuted()?W.getTexture("btn_sound_off",this._pack):W.getTexture("btn_sound_on",
this._pack);this._soundButton.updateUpTexture(this._soundButton.display.texture)},__class__:Aj});var Ng=function(){this.shortLived=this.isDisposed=!1;this.maxY=580;this.spreadX=30;this.startX=0;j.call(this)};g["stolo.ui.fx.Confetti"]=Ng;Ng.__name__=["stolo","ui","fx","Confetti"];Ng.__super__=j;Ng.prototype=k(j.prototype,{get_name:function(){return"Confetti_74"},dispose:function(){this.isDisposed=!0;this.allWaveProps=this.flipHolderSprite=this.rotHolderSprite=this.confettiSprite=null;j.prototype.dispose.call(this)},
onAdded:function(){this.build();j.prototype.onAdded.call(this)},build:function(){var a=Math.round(10+5*Math.random());this.flipHolderSprite=new D;this.owner.add(this.flipHolderSprite);this.flipHolderSprite.disablePointer();var b=new z;this.owner.addChild(b);this.rotHolderSprite=new D;b.add(this.rotHolderSprite);this.rotHolderSprite.disablePointer();var c=new z;b.addChild(c);this.confettiSprite=new xb(this.color,a,a);c.add(this.confettiSprite);this.confettiSprite.x.set__(-a/2);this.confettiSprite.y.set__(-a/
2);this.confettiSprite.disablePointer();this.xProp=new Se(0.25,1);this.yProp=new Se(2,4);this.flipProp=new Se(4,8);this.rotProp=new Se(1,4);this.flipRotProp=new Se(0.25,1);this.allWaveProps=[this.xProp,this.yProp,this.flipProp,this.rotProp,this.flipRotProp];this.reset()},reset:function(){for(var a=0,b=this.allWaveProps.length;a<b;)this.allWaveProps[a++].randomizeSpeed();this.yProp.value=0},update:function(a){if(!this.isDisposed){for(var b=0,c=this.allWaveProps.length;b<c;)this.allWaveProps[b++].update(a);
this.yProp.value>2*Math.PI&&(this.shortLived?this.dispose():this.reset());this.flipHolderSprite.x.set__(this.startX+Math.sin(this.xProp.value)*this.spreadX);this.flipHolderSprite.y.set__(this.yProp.value/(2*Math.PI)*this.maxY);null!=this.flipRotProp&&this.flipHolderSprite.rotation.set__(360*this.flipRotProp.value);null!=this.flipProp&&this.flipHolderSprite.scaleX.set__(Math.cos(this.flipProp.value));null!=this.rotProp&&this.rotHolderSprite.rotation.set__(360*this.rotProp.value)}},__class__:Ng});var Se=
function(a,b){this.min=a;this.max=b;this.value=2*Math.random()*Math.PI};g["stolo.ui.fx.WaveProp"]=Se;Se.__name__=["stolo","ui","fx","WaveProp"];Se.prototype={randomizeSpeed:function(){this.speed=this.min+Math.random()*(this.min-this.max)},update:function(a){this.value+=a*this.speed},__class__:Se};var Ke=function(){this.confettiColors=[16711680,16746496,16776960,8978176,65280,65416,65535,35071,255,8913151,16711935];this.startSpreadY=1;this.shortLived=!1;this.height=p._platform.getStage().get_height();
this.width=p._platform.getStage().get_width();this.maxCount=50;this.spreadX=30;this.centerX=0;this.autoStart=!0;this.speed=new O(0.3);j.call(this)};g["stolo.ui.fx.Confettis"]=Ke;Ke.__name__=["stolo","ui","fx","Confettis"];Ke.__super__=j;Ke.prototype=k(j.prototype,{get_name:function(){return"Confettis_73"},dispose:function(){j.prototype.dispose.call(this)},onAdded:function(){0==this.centerX&&(this.centerX=0.5*this.width);this.autoStart&&this.start()},onRemoved:function(){},onUpdate:function(a){this.speed.update(a);
if(!(0==this.speed._value||null==this.items))for(var b=0,c=this.items.length;b<c;)this.items[b++].update(a*this.speed._value)},start:function(){this._container=new D;this.owner.addChild((new z).add(this._container));this._container.disablePointer();this.items=[];for(var a=0,b=this.maxCount;a<b;){var c=a++,d=this.getConfetti();this.setupConfetti(d,c);this.addConfetti(d,c)}},getConfetti:function(){return new Ng},setupConfetti:function(a,b){a.startX=this.centerX+(b/(this.maxCount-1)-0.5)*this.width;
a.color=this.confettiColors[Math.floor(0.999*b/(this.maxCount-1)*this.confettiColors.length)];a.spreadX=this.spreadX;a.maxY=this.height;a.shortLived=this.shortLived;return new Ng},addConfetti:function(a){this._container.owner.addChild((new z).add(a));a.yProp.value=2*Math.random()*Math.PI*this.startSpreadY;this.items.push(a);return a},__class__:Ke});var Kk=function(){};g["stolo.utils.AssetUtils"]=Kk;Kk.__name__=["stolo","utils","AssetUtils"];Kk.getFileInfo=function(a,b){var c,d=Ra.getFileExtension(a),
e;null==d&&null!=b?(a.lastIndexOf("/")==a.length-1&&(e=a.lastIndexOf("/"),a=S.substr(a,0,e)),e=a,c=a.substring(a.lastIndexOf("/")+1,a.length),b=fa.replace(b,"{{name}}",c),-1<c.indexOf(".")&&a.substring(0,a.lastIndexOf(".")),e.lastIndexOf("/")<e.length-1&&(e+="/"),a=b,d=Ra.getFileExtension(a)):(e=a.substring(0,a.lastIndexOf("/")+1),c=-1<a.indexOf("/")?a.substring(a.lastIndexOf("/")+1,a.lastIndexOf(".")):a.substring(0,a.lastIndexOf(".")));return{name:c,path:e,url:a,ext:d}};var Qb=function(){};g["stolo.utils.BrowserUtils"]=
Qb;Qb.__name__=["stolo","utils","BrowserUtils"];Qb.getCurrentURL=function(a){null==a&&(a=!1);var b=p._platform.getExternal().call("window.location.href.toString");a&&null!=b&&(b=b.split("?")[0]);return b};Qb.getUrlParams=function(){var a=Qb.getCurrentURL().split("?");if(1==a.length)return{};for(var b={},a=a[1].split("&"),c=0;c<a.length;){var d=a[c];++c;d=d.split("=");2==d.length&&(d[1]=fa.replace(d[1],"#",""),B.setProperty(b,d[0],d[1]))}return b};Qb.getURL=function(a,b){null==b&&(b="_blank");window.open(a,
b)};var Pa=function(){};g["stolo.utils.DataUtils"]=Pa;Pa.__name__=["stolo","utils","DataUtils"];Pa.isUnlocked=function(a,b){return!b.exists(a)?!1:b.get(a)};Pa.unlock=function(a,b){if(Pa.isUnlocked(a,b))return!1;b.set(a,!0);return!0};var o=function(){};g["stolo.utils.DeviceUtils"]=o;o.__name__=["stolo","utils","DeviceUtils"];o.init=function(a,b){null==o.UA&&(0<a&&0<b?o.setSize(a,b):o.setSize(p._platform.getStage().get_width(),p._platform.getStage().get_height()),o.touch=p._platform.getTouch().get_supported(),
o.mobile=o.touch,o.power=30,o.UA=o.getUA(),null!=o.UA&&(o.ua=o.UA.toLowerCase(),o.getScreenSize(),o.iphone=o.phone=-1<o.ua.indexOf("iphone")||-1<o.ua.indexOf("ipod"),o.ipad=o.tablet=-1<o.ua.indexOf("ipad"),o.ios=o.iphone||o.ipad,o.ie=-1<o.ua.indexOf("msie")||-1<=o.ua.indexOf("trident"),o.android=o.touch&&(-1<o.ua.indexOf("linux")||-1<o.ua.indexOf("android")),o.ios?o.setupIos():o.android&&o.setupAndroid()),o.slow=0>=o.power)};o.setupIos=function(){o.mobile=!0;var a=G.parseInt(p._platform.getExternal().call("window.devicePixelRatio.toString"));
0<a&&(o.ipadVersion=1+a);var b=eval("window"),c=b.ondevicemotion;b.ondevicemotion=function(a){null==a.acceleration&&(o.ipadVersion-=1);b.ondevicemotion=c};if(-1<o.ua.indexOf("ipod")||3>o.ipadVersion)o.power=0,o.lowPerformance=!0,o.lowMemory=!0};o.setupAndroid=function(){o.mobile=!0;if(-1<o.ua.indexOf("mobile")){if(o.phone=!0,o.tablet=o.detectTablet(),o.lowPerformance=o.detectLowPerformance(),o.lowMemory=o.detectLowMemory(),o.lowPerformance||o.lowMemory)o.power=0}else o.tablet=!0,-1<o.ua.indexOf("sgh-t")&&
(o.tablet=!1,o.phone=!0)};o.detectTablet=function(){return-1<o.ua.indexOf("nexus 5")||-1<o.ua.indexOf("tablet")||700<o.landscapeScreenWidth?!0:!1};o.detectLowPerformance=function(){for(var a=0,b=o.lowPerformanceDevices;a<b.length;){var c=b[a];++a;for(var d=0;d<c.length;){var e=c[d];++d;if(-1<o.UA.indexOf(e))return!0}}return!1};o.detectLowMemory=function(){for(var a=0,b=o.lowMemoryDevices;a<b.length;){var c=b[a];++a;for(var d=0;d<c.length;){var e=c[d];++d;if(-1<o.UA.indexOf(e))return!0}}return!1};
o.getScreenSize=function(){o.screenWidth=G.parseFloat(p._platform.getExternal().call("window.screen.width.toString"));o.screenHeight=G.parseFloat(p._platform.getExternal().call("window.screen.height.toString"));o.screenWidth>o.screenHeight?(o.landscapeScreenWidth=o.screenWidth,o.landscapeScreenHeight=o.screenHeight):(o.landscapeScreenWidth=o.screenHeight,o.landscapeScreenHeight=o.screenWidth)};o.setSize=function(a,b){o.gameWidth=Math.round(a);o.gameHeight=Math.round(b);o.stageWidth=a*o.scale;o.stageHeight=
b*o.scale};o.setScale=function(a){a!=o.scale&&(o.scale=a,o.stageWidth=o.gameWidth*a,o.stageHeight=o.gameHeight*a,o.onScaleChange.emit())};o.getUA=function(){if(null!=o.UA)return o.UA;o.UA=eval("navigator.userAgent");return o.UA};var W=function(){};g["stolo.utils.DisplayUtils"]=W;W.__name__=["stolo","utils","DisplayUtils"];W.__properties__={get_sharedAssets:"get_sharedAssets"};W.setSharedAssets=function(a){W._sharedPack=a;W._sharedAssets=w.getPack(a);return W._sharedAssets};W.get_sharedAssets=function(){return W._sharedAssets};
W.createButton=function(a,b,c,d,e){null==d&&(d="buttons");null==e&&(e=W._sharedAssets);return new Rb(e,b,a,c,d)};W.createImage=function(a,b){null==b&&(b=W._sharedAssets);return new ia(W.getTexture(a,b))};W.getTexture=function(a,b,c){null==c&&(c=!0);var d=null;null==b&&(b=W._sharedAssets);if(null==b)throw"Asset pack must be provided";d=b.getTexture(a,null==W._sharedAssets);null==d&&null!=W._spritesheets.h.__keys__[b.__id__]&&(d=W._spritesheets.h[b.__id__].getTexture(a,null,!1));null==d&&null!=W._sharedAssets&&
(null!=W._spritesheets.h.__keys__[W._sharedAssets.__id__]&&(d=W._spritesheets.h[W._sharedAssets.__id__].getTexture(a,null,!1)),null==d&&(d=W._sharedAssets.getTexture(a,c)));return d};W.addSprite=function(a,b){null!=a.owner?b.addChild(a.owner):b.addChild((new z).add(a));return a};W.createSoundButton=function(a){null==a&&(a=W._sharedAssets);return new Aj(a)};var ba=function(){};g["stolo.utils.DynamicUtils"]=ba;ba.__name__=["stolo","utils","DynamicUtils"];ba.is=function(a,b){var c=ra["typeof"](a);return ra.enumEq(c,
b)};ba.mod=function(a,b){if("string"==typeof b){var c=b.split("="),d;if(2<=c.length)switch(d=G.parseFloat(c[c.length-1]),c[0]){case "+":a+=d;break;case "-":a-=d;break;case "/":a/=d;break;case "*":a*=d;break;default:a=d}else a=G.parseFloat(b)}else return b;return a};ba.merge=function(a,b,c){null==c&&(c=!1);if(ba.is(b,P.TNull)||ba.is(b,P.TInt)||ba.is(b,P.TFloat)||ba.is(b,P.TBool)||ba.is(b,P.TClass(String))||ba.is(b,P.TFunction))return b;if(ba.is(b,P.TClass(Array)))return c?ba.clone(b):b;if(ba.is(b,
P.TObject)){if(ba.is(a,P.TObject)){var d;d=c?ba.clone(a):a;for(var e=0,h=B.fields(b);e<h.length;){var f=h[e];++e;var g=B.field(a,f),i=B.field(b,f);B.setField(d,f,ba.merge(g,i,c))}return d}return c?ba.clone(b):b}throw"Type not supported in the merge :"+G.string(b);};ba.clone=function(a){if(ba.is(a,P.TNull)||ba.is(a,P.TInt)||ba.is(a,P.TFloat)||ba.is(a,P.TBool)||ba.is(a,P.TClass(String))||ba.is(a,P.TFunction))return a;if(ba.is(a,P.TClass(Array))){for(var b=[],c=0,d=a.length;c<d;){var e=c++;b[e]=ba.clone(a[e])}return b}if(ba.is(a,
P.TObject)){b={};c=0;for(d=B.fields(a);c<d.length;)e=d[c],++c,B.setField(b,e,ba.clone(B.field(a,e)));return b}return null};var Ik=function(){};g["stolo.utils.MathUtils"]=Ik;Ik.__name__=["stolo","utils","MathUtils"];Ik.lerp=function(a,b,c){return a*(1-c)+b*c};var Xa=function(){};g["stolo.utils.SequenceUtils"]=Xa;Xa.__name__=["stolo","utils","SequenceUtils"];Xa.getMovementSequence=function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=!1);null==c&&(c=!0);var h=new fb;Xa.lastDest=null;Xa.appendMovementActions(a,
h,b);d&&(a=a.reverse(),a.shift(),Xa.appendMovementActions(a,h,b),Xa.appendMovementActions([{x:0,y:0}],h,b));(c||d)&&Xa.appendMovementActions([{x:0,y:0}],h,b);0<e&&h.add(new Z(e));return h};Xa.appendMovementActions=function(a,b,c){null==b&&(b=new fb);for(var d=0;d<a.length;){var e=a[d];++d;Object.prototype.hasOwnProperty.call(e,"delay")&&b.add(new Z(e.delay));var h=Object.prototype.hasOwnProperty.call(e,"x"),f=Object.prototype.hasOwnProperty.call(e,"y"),g;if(h||f)g=new cb,h&&(g.x=e.x+c.offsetX),f&&
(g.y=e.y+c.offsetY),b.add(Xa.getMovementAction(e,h?c.x:null,f?c.y:null,g,Xa.lastDest,c)),Xa.lastDest=g}return b};Xa.getMovementAction=function(a,b,c,d,e,h){var f=Xa.DefaultMoveSpeed,g=Xa.DefaultMovePPS,i=Xa.DefaultMoveEase,j=Xa.DefaultMoveTime,s=!1;0<a.time?j=a.time:s=!0;0<a.pps&&(g=a.pps);0<a.speed&&(f=a.speed);s&&(j=0,null!=e?(null!=b&&(j+=Math.abs(e.x-d.x)),null!=c&&(j+=Math.abs(e.y-d.y))):(null!=b&&(j+=Math.abs(b._value-d.x)),null!=c&&(j+=Math.abs(c._value-d.y))),j=j/g-0.1*(j/g)*f,0>=j&&(j=Xa.DefaultMoveTime));
null!=h&&null!=h.ease&&(i=h.ease);e=new gd;null!=b&&e.add(new fd(b,d.x,j,i));null!=c&&e.add(new fd(c,d.y,j,i));return e};Xa.__super__=j;Xa.prototype=k(j.prototype,{get_name:function(){return"SequenceUtils_50"},__class__:Xa});var y=function(){};g["stolo.web.DeltaDNA"]=y;y.__name__=["stolo","web","DeltaDNA"];y.init=function(a,b,c,d,e){if(null==a)throw"Missing gameURL";a=fa.replace(a,"http://","");a=fa.replace(a,"https://","");y.gameURL=a;y.collectURL=d;y.engageURL=e;y.debug&&null;y.setLiveStatus();
y.getPlatform();y.getDeviceType();y.key=y.isLive?c:b;a=na.get("UserId",null);y.isValidUserID(a)?y.setUserID(a):y.getNewUserID()};y.setLiveStatus=function(){if(y.allowLiveKey){y.isLive=!0;var a=y.getCurrentURL();if(null!=a&&null!=y.staging)for(var a=a.toLowerCase(),b=0,c=y.staging;b<c.length;){var d=c[b];++b;if(-1<a.indexOf(d)){y.isLive=!1;break}}y.isLive&&y.debug&&null}};y.setReady=function(){if(!y.isReady&&(y.isReady=!0,y.onReady.emit(),null!=y._trackRequestsQueue)){for(var a=0,b=y._trackRequestsQueue;a<
b.length;){var c=b[a];++a;y.track(c.eventName,c.eventParams)}y._trackRequestsQueue=null}};y.setUserID=function(a){y.userID=a;na.set(y.userIDStorageField,a);null==y.sessionID?y.createSession():y.setReady()};y.getNewUserID=function(){y.isNewPlayer=!0;var a=new ig(y.collectURL+"/uuid");a.onData=function(a){var c=JSON.parse(a);y.isValidUserID(c.userID)?y.setUserID(c.userID):(y.logError("Invalid or missing userID:"),y.logError(a))};a.request()};y.isValidUserID=function(a){return null==a||""==a||"NULL"==
a.toUpperCase()?!1:!0};y.createSession=function(){var a=new ig(y.collectURL+"/uuid");a.onData=function(a){var c=JSON.parse(a);y.isValidUserID(c.userID)?(y.sessionID=c.userID,y.setReady()):(y.logError("Invalid or missing uuid for sessionID:"),y.logError(a))};a.request()};y.track=function(a,b){y.isReady?y.collectRequest(a,b):(null==y._trackRequestsQueue&&(y._trackRequestsQueue=[]),y._trackRequestsQueue.push({eventName:a,eventParams:b}))};y.collectRequest=function(a,b,c,d,e){null==e&&(e=y.collectURL+
"/"+y.key);e=new ig(e);b||(b={});b.sdkVersion=y.sdkVersion;b.platform=y.getPlatform();y.useTimezoneOffset&&(b.timezoneOffset=y.getTimeZoneOffset());null!=y.clientVersion&&(b.clientVersion=y.clientVersion);a={eventName:a,userID:y.userID,sessionID:y.sessionID,eventParams:b};e.addHeader("Content-Type","application/json");e.setPostData(JSON.stringify(a));e.onData=function(a){y.debug&&null;a=null!=a&&""!=a&&" "!=a?JSON.parse(a):null;null!=c&&c(a)};e.onStatus=function(a){204!=a&&y.logError("status: "+a)};
e.onError=function(a){y.logError(a);null!=d&&d(a)};y.debug&&null;e.request(!0);return e};y.getCurrentURL=function(){if(null!=y._currentURL)return y._currentURL;y._currentURL=eval("window.location.href");return null==y._currentURL?"invalid url":y._currentURL};y.getPlatform=function(){if(null!=y.platform)return y.platform;var a=y.getCurrentURL();if(null!=a){if(null==y.gameURL)throw"DeltaDNA.gameURL must be set!";null!=a&&-1<a.indexOf(y.gameURL)?-1<a.indexOf("apiKey")?y.platform=o.android?y.platforms.app.android:
y.platforms.app.ios:(y.platform=y.platforms.web.desktop,o.mobile&&(y.platform=y.platforms.web.mobile),o.tablet&&(y.platform=y.platforms.web.tablet)):y.platform="PIRACY_UNKNOWN"}else y.platform="PIRACY_UNKNOWN";y.debug&&null;return y.platform};y.setPlatforms=function(a){for(var b=0,c=B.fields(a);b<c.length;){var d=c[b];++b;for(var e=B.field(a,d),h=0,f=B.fields(e);h<f.length;){var g=f[h];++h;var i=B.field(e,g),j=B.field(y.platforms,d);if(null==j)throw"Invalid platform type '"+d+"'";y.debug&&null;j[g]=
i}}};y.getDeviceType=function(){if(null!=y.deviceType)return y.deviceType;y.deviceType=o.tablet?"TABLET":o.phone?"MOBILE_PHONE":"DESKTOP";y.debug&&null;return y.deviceType};y.trackClientDevice=function(){var a="DESKTOP";o.ipad&&(a="IPAD");o.iphone&&(a="IPHONE");o.android&&(a=o.tablet?"ANDROID_TABLET":"ANDROID_PHONE");var b="PC";o.mobile&&(b="MOBILE_PHONE");o.tablet&&(b="TABLET");var c="UNKNOWN";if(null!=o.UA){-1<o.UA.indexOf("WebKit")&&(c="UNKNOWN_WEBKIT");-1<o.UA.indexOf("Safari")&&(c="SAFARI");
-1<o.UA.indexOf("Chrome")&&(c="CHROME");-1<o.UA.indexOf("Firefox")&&(c="FIREFOX");-1<o.UA.indexOf("Opera")&&(c="Opera");-1<o.UA.indexOf("Tizen")&&(c="TIZEN");if(-1<o.UA.indexOf("MSIE")||-1<o.UA.indexOf("Trident"))c="IE";if(-1<o.UA.indexOf("IEMobile")||-1<o.UA.indexOf("MSIEMobile"))c="IE_MOBILE"}var d="UNKNOWN";if(null!=o.UA){-1<o.UA.indexOf("Windows")&&(d="WINDOWS");if(-1<o.UA.indexOf("MacOS")||-1<o.UA.indexOf("Macintosh")||-1<o.UA.indexOf("OS X"))d="OSX";-1<o.UA.indexOf("Linux")&&(d="LINUX");o.ios&&
(d="IOS");o.android&&(d="ANDROID");if(-1<o.UA.indexOf("Kindle")||-1<o.UA.indexOf("Silk"))d="FIREOS";-1<o.UA.indexOf("BlackBerry")&&(d="BLACKBERRY")}var e=o.UA;null==e&&(e="UNKNOWN");y.track("clientDevice",{deviceName:a,deviceType:b,browserName:c,operatingSystem:d,operatingSystemVersion:e})};y.getTimeZoneOffset=function(){var a=y.getTimeZoneOffsetSeconds(),a=Math.round(-1*(a/60)),b=a+":00";0>a&&-10<a&&(b=fa.replace(b,"-","-0"));0<a&&(b="+"+b,10>a&&(b=fa.replace(b,"+","+0")));return b};y.getTimeZoneOffsetSeconds=
function(){return S.strDate("1970-01-01").getTime()/1E3/60};y.logError=function(a){p._platform.getExternal().call("window.console.error",[a])};var dg=function(){this._zoom=1;this._minX=this._maxX=this._minY=this._maxY=-1;this.limitTarget=this._limitX=this._limitY=!1;this.checkLimit=!0;this.x=this.y=this._x=this._y=0;this.followTarget=!0;this.velocityY=0;this.massY=40;this.dampingY=20;this.stiffnessY=0.7;this.springY=!1;this.velocityX=0;this.massX=40;this.dampingX=10;this.stiffnessX=0.8;this.springX=
!1;this.linearDampingX=this.linearDampingY=0.2};g["stolo.world.Camera"]=dg;dg.__name__=["stolo","world","Camera"];dg.prototype={update:function(a){null!=this.zoom&&(this.zoom.update(a),this._zoom=this.zoom._value);this.followTarget&&(null!=this.target?(this.target.update(a),this._targetX=this.target.x._value,this._targetY=this.target.y._value):(this._targetX=this._x,this._targetY=this._y),this._targetX!=this._x&&(this._diff=this._targetX-this._x,this.springX?(this.velocityX+=(this.stiffnessX*this._diff-
this.dampingX*this.velocityX)/this.massX,this._x+=this.velocityX):this._x+=this._diff*this.linearDampingX,0.5>Math.abs(this._diff)&&(this._x=this._targetX)),this._targetY!=this._y&&(this._diff=this._targetY-this._y,this.springY?(this.velocityY+=(this.stiffnessY*this._diff-this.dampingY*this.velocityY)/this.massY,this._y+=this.velocityY):this._y+=this._diff*this.linearDampingY,0.5>Math.abs(this._diff)&&(this._y=this._targetY)),this.x=this._x,this.y=this._y,null!=this.offset&&(this.offset.update(a),
this.x+=this.offset.x._value,this.y+=this.offset.y._value),null!=this.fx&&(this.fx.update(a),this.x+=this.fx.x._value,this.y+=this.fx.y._value));this.checkLimit&&(this._limitX&&(-1!=this._minX&&(this.x=Math.max(this._minX,this.x)),-1!=this._maxX&&(this.x=Math.min(this.x,this._maxX))),this._limitY&&(-1!=this._minY&&(this.y=Math.max(this._minY,this.y)),-1!=this._maxY&&(this.y=Math.min(this.y,this._maxY))),this.limitTarget&&null!=this.target&&(this.target.x.set__(this.x),this.target.y.set__(this.y),
null!=this.offset&&(a=this.target.y,a.set__(a._value-this.offset.x._value),a=this.target.y,a.set__(a._value-this.offset.y._value)),null!=this.fx&&(a=this.target.y,a.set__(a._value-this.fx.x._value),a=this.target.y,a.set__(a._value-this.fx.y._value))))},zoomTo:function(a,b,c){null==b&&(b=0);null==this.zoom&&(this.zoom=new O(1));0<b?(null==c&&(c=q.quintOut),this.zoom.animateTo(a,b,c)):(this.zoom.set__(a),this.zoom.set_behavior(null))},setXY:function(a,b,c){null==c&&(c=!0);this.x=a;this.y=b;c&&(this._x=
this.x,this._y=this.y,this.velocityY=this.velocityX=0,null!=this.offset&&(this.x+=this.offset.x._value,this.y+=this.offset.y._value),null!=this.fx&&(this.x+=this.fx.x._value,this.y+=this.fx.y._value))},moveToTarget:function(){var a=this._x,b=this._y;null!=this.target&&(a=this.target.x._value,b=this.target.y._value);this.setXY(a,b,!0)},setTarget:function(a,b,c){null==c&&(c=!1);null!=this.target&&this.target.dispose();this.target=new Jd(a,b);c&&this.moveToTarget();return this.target},animateTo:function(a,
b,c,d){null==d&&(d=dg.DEFAULT_EASING);this.setTarget(this._x,this._y,!1);this.target.x.animateTo(a,c,d);this.target.y.animateTo(b,c,d)},setAnimatedTarget:function(a,b,c){null==c&&(c=!1);null!=this.target&&this.target.dispose();this.setTarget(a._value,b._value,c);this.target.x=a;this.target.y=b;return this.target},followSprite:function(a,b){null==b&&(b=!1);return this.setAnimatedTarget(a.x,a.y,b)},setOffset:function(a,b,c,d,e,h){null==e&&(e=-1);null==c&&(c=0);null==this.offset&&(this.offset=new Jd(a,
b));this.setOffsetX(a,c,d);this.setOffsetY(b,0<=e?e:c,null!=h?h:d)},setOffsetX:function(a,b,c){null==b&&(b=0);0<b?(null==c&&(c=q.quintInOut),this.offset.x.animateTo(a,b,c)):(this.offset.x.set_behavior(null),this.offset.x.set__(a))},setOffsetY:function(a,b,c){null==b&&(b=0);0<b?(null==c&&(c=q.quintInOut),this.offset.y.animateTo(a,b,c)):(this.offset.y.set_behavior(null),this.offset.y.set__(a))},setLimits:function(a,b,c,d){null==d&&(d=-1);null==c&&(c=-1);null==b&&(b=-1);null==a&&(a=-1);this.setLimitsX(a,
b);this.setLimitsY(c,d)},setLimitsX:function(a,b){null==b&&(b=-1);null==a&&(a=-1);this._minX=a;this._maxX=b;if(-1!=this._minX||-1!=this._maxX)this._limitX=!0},setLimitsY:function(a,b){null==b&&(b=-1);null==a&&(a=-1);this._minY=a;this._maxY=b;if(-1!=this._minY||-1!=this._maxY)this._limitY=!0},startFX:function(){null!=this._fxScript&&this._fxScript.dispose();null==this.fxEntity&&(this.fxEntity=new z,p.root.addChild(this.fxEntity));this._fxScript=new Eb;this.fxEntity.add(this._fxScript);null!=this.fx&&
this.fx.dispose();this.fx=new Jd(0,0)},endFX:function(){this.fx=null;null!=this._fxScript&&(this._fxScript.dispose(),null!=this._fxScript.owner&&this._fxScript.owner.remove(this._fxScript),this._fxScript=null)},shake:function(a,b,c){null==c&&(c=0);null==b&&(b=30);null==a&&(a=0.5);this.startFX();0<b&&Qe.shake(this._fxScript.owner,this.fx.y,a,b,m(this,this.endFX));0<c&&Qe.shake(this._fxScript.owner,this.fx.x,a,c,m(this,this.endFX))},__class__:dg};var Ab=function(){};g["zpp_nape.ZPP_ID"]=Ab;Ab.__name__=
["zpp_nape","ZPP_ID"];Ab.Interactor=function(){return Ab._Interactor++};Ab.CbType=function(){return Ab._CbType++};Ab.CbSet=function(){return Ab._CbSet++};Ab.Listener=function(){return Ab._Listener++};var nc=function(){this.body=this.constraint=null;this.pre_swapped=!1;this.int1=this.int2=this.set=this.wrap_arbiters=this.pre_arbiter=null;this.length=0;this.listener=this.next=this.prev=null;this.event=0;this.outer_body=this.outer_con=this.outer_int=null;this.length=0};g["zpp_nape.callbacks.ZPP_Callback"]=
nc;nc.__name__=["zpp_nape","callbacks","ZPP_Callback"];nc.prototype={wrapper_body:function(){null==this.outer_body&&(this.outer_body=new ui,this.outer_body.zpp_inner=this);return this.outer_body},wrapper_con:function(){null==this.outer_con&&(this.outer_con=new wi,this.outer_con.zpp_inner=this);return this.outer_con},wrapper_int:function(){null==this.outer_int&&(this.outer_int=new xi,this.outer_int.zpp_inner=this);null==this.wrap_arbiters?this.wrap_arbiters=je.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=
this.set.arbiters;this.wrap_arbiters.zpp_inner.zip_length=!0;this.wrap_arbiters.zpp_inner.at_ite=null;return this.outer_int},push:function(a){null!=this.prev?this.prev.next=a:this.next=a;a.prev=this.prev;a.next=null;this.prev=a;this.length++},pop:function(){var a=this.next;this.next=a.next;null==this.next?this.prev=null:this.next.prev=null;this.length--;return a},empty:function(){return null==this.next},__class__:nc};var Ia=function(){this.interactors=this.constraints=null;this.zip_conlisteners=!1;
this.conlisteners=null;this.zip_bodylisteners=!1;this.bodylisteners=null;this.zip_listeners=!1;this.manager=this.cbpairs=this.listeners=null;this.id=0;this.next=null;this.count=0;this.cbTypes=null;this.cbTypes=new Ec;this.listeners=new wf;this.zip_listeners=!0;this.bodylisteners=new Bj;this.zip_bodylisteners=!0;this.conlisteners=new Cj;this.zip_conlisteners=!0;this.constraints=new Fd;this.interactors=new we;this.id=Ab.CbSet();this.cbpairs=new Lk};g["zpp_nape.callbacks.ZPP_CbSet"]=Ia;Ia.__name__=["zpp_nape",
"callbacks","ZPP_CbSet"];Ia.setlt=function(a,b){for(var c=a.cbTypes.head,d=b.cbTypes.head;null!=c&&null!=d;){var e=c.elt,h=d.elt;if(e.id<h.id)return!0;if(h.id<e.id)return!1;c=c.next;d=d.next}return null!=d&&null==c};Ia.get=function(a){var b;null==Ia.zpp_pool?b=new Ia:(b=Ia.zpp_pool,Ia.zpp_pool=b.next,b.next=null);null;for(var c=null,a=a.head;null!=a;){var d=a.elt,c=b.cbTypes.insert(c,d);d.cbsets.add(b);a=a.next}return b};Ia.single_intersection=function(a,b,c){return a.manager.pair(a,b).single_intersection(c)};
Ia.find_all=function(a,b,c,d){a.manager.pair(a,b).forall(c,d)};Ia.prototype={invalidate_pairs:function(){for(var a=this.cbpairs.head;null!=a;)a.elt.zip_listeners=!0,a=a.next},realvalidate_listeners:function(){this.listeners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,c=this.listeners.head,d=a.elt.listeners.head;null!=d;){var e=d.elt;null!=c&&c.elt==e?(d=d.next,b=c,c=c.next):null==c||oc.setlt(e,c.elt)?(e.space==this.manager.space&&(b=this.listeners.inlined_insert(b,e)),d=d.next):(b=
c,c=c.next)}a=a.next}},realvalidate_bodylisteners:function(){this.bodylisteners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,c=this.bodylisteners.head,d=a.elt.bodylisteners.head;null!=d;){var e=d.elt;null!=c&&c.elt==e?(d=d.next,b=c,c=c.next):null==c||oc.setlt(e,c.elt)?(!e.options.excluded(this.cbTypes)&&e.space==this.manager.space&&(b=this.bodylisteners.inlined_insert(b,e)),d=d.next):(b=c,c=c.next)}a=a.next}},realvalidate_conlisteners:function(){this.conlisteners.clear();for(var a=
this.cbTypes.head;null!=a;){for(var b=null,c=this.conlisteners.head,d=a.elt.conlisteners.head;null!=d;){var e=d.elt;null!=c&&c.elt==e?(d=d.next,b=c,c=c.next):null==c||oc.setlt(e,c.elt)?(!e.options.excluded(this.cbTypes)&&e.space==this.manager.space&&(b=this.conlisteners.inlined_insert(b,e)),d=d.next):(b=c,c=c.next)}a=a.next}},validate:function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners());this.zip_bodylisteners&&(this.zip_bodylisteners=!1,this.realvalidate_bodylisteners());
this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},free:function(){this.listeners.clear();this.zip_listeners=!0;this.bodylisteners.clear();this.zip_bodylisteners=!0;this.conlisteners.clear();for(this.zip_conlisteners=!0;null!=this.cbTypes.head;)this.cbTypes.pop_unsafe().cbsets.remove(this)},__class__:Ia};var Lb=function(){this.listeners=null;this.zip_listeners=!1;this.a=this.b=this.next=null;this.listeners=new wf};g["zpp_nape.callbacks.ZPP_CbSetPair"]=Lb;Lb.__name__=
["zpp_nape","callbacks","ZPP_CbSetPair"];Lb.get=function(a,b){var c;null==Lb.zpp_pool?c=new Lb:(c=Lb.zpp_pool,Lb.zpp_pool=c.next,c.next=null);c.zip_listeners=!0;Ia.setlt(a,b)?(c.a=a,c.b=b):(c.a=b,c.b=a);return c};Lb.setlt=function(a,b){return Ia.setlt(a.a,b.a)||a.a==b.a&&Ia.setlt(a.b,b.b)};Lb.prototype={__validate:function(){this.listeners.clear();for(var a=this.a.listeners.head,b=this.b.listeners.head;null!=a&&null!=b;){var c=a.elt,d=b.elt;c==d?((c.options1.compatible(this.a.cbTypes)&&c.options2.compatible(this.b.cbTypes)||
c.options2.compatible(this.a.cbTypes)&&c.options1.compatible(this.b.cbTypes))&&this.listeners.add(c),a=a.next,b=b.next):c.precedence>d.precedence||c.precedence==d.precedence&&c.id>d.id?a=a.next:b=b.next}},empty_intersection:function(){return null==this.listeners.head},single_intersection:function(a){var b=this.listeners.head;return null!=b&&b.elt==a&&null==b.next},forall:function(a,b){for(var c=this.listeners.head;null!=c;){var d=c.elt;d.event==a&&b(d);c=c.next}},__class__:Lb};var wf=function(){this.length=
0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_InteractionListener"]=wf;wf.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionListener"];wf.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Yb.zpp_pool?b=new Yb:(b=Yb.zpp_pool,Yb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_insert:function(a,b){var c;null==Yb.zpp_pool?c=new Yb:(c=Yb.zpp_pool,Yb.zpp_pool=
c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Yb.zpp_pool;Yb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},
inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Yb.zpp_pool;Yb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:wf};var Bj=function(){this.length=0;this.modified=this.pushmod=
!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_BodyListener"]=Bj;Bj.__name__=["zpp_nape","util","ZNPList_ZPP_BodyListener"];Bj.prototype={inlined_insert:function(a,b){var c;null==pb.zpp_pool?c=new pb:(c=pb.zpp_pool,pb.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=pb.zpp_pool;pb.zpp_pool=a;null==this.head&&(this.pushmod=
!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=pb.zpp_pool;pb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=
this.head;)this.inlined_pop();this.pushmod=!0},__class__:Bj};var Cj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_ConstraintListener"]=Cj;Cj.__name__=["zpp_nape","util","ZNPList_ZPP_ConstraintListener"];Cj.prototype={inlined_insert:function(a,b){var c;null==Bb.zpp_pool?c=new Bb:(c=Bb.zpp_pool,Bb.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;
return c},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Bb.zpp_pool;Bb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=
c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Bb.zpp_pool;Bb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:Cj};var Fd=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Constraint"]=Fd;Fd.__name__=["zpp_nape","util","ZNPList_ZPP_Constraint"];Fd.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Cb.zpp_pool?
b=new Cb:(b=Cb.zpp_pool,Cb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Cb.zpp_pool;Cb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},
inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Cb.zpp_pool;Cb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();
this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Fd};var we=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Interactor"]=we;we.__name__=["zpp_nape","util","ZNPList_ZPP_Interactor"];we.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Wc.zpp_pool?b=new Wc:(b=Wc.zpp_pool,Wc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=
!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Wc.zpp_pool;Wc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);
d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Wc.zpp_pool;Wc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<
a--&&null!=b;)b=b.next;return b},__class__:we};var xf=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_CbSet"]=xf;xf.__name__=["zpp_nape","util","ZNPList_ZPP_CbSet"];xf.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Fc.zpp_pool?b=new Fc:(b=Fc.zpp_pool,Fc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=
this.head;this.head=a.next;a.elt=null;a.next=Fc.zpp_pool;Fc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,
this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Fc.zpp_pool;Fc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:xf};var ic=function(){this.cbsets=this.listeners=this.bodylisteners=this.conlisteners=null;this.id=0;this.outer=null;this.id=Ab.CbType();this.listeners=new wf;this.bodylisteners=new Bj;this.conlisteners=new Cj;this.constraints=new Fd;this.interactors=new we;this.cbsets=new xf};
g["zpp_nape.callbacks.ZPP_CbType"]=ic;ic.__name__=["zpp_nape","callbacks","ZPP_CbType"];ic.prototype={addint:function(a){for(var b=null,c=this.listeners.head;null!=c;){var d=c.elt;if(a.precedence>d.precedence||a.precedence==d.precedence&&a.id>d.id)break;b=c;c=c.next}this.listeners.inlined_insert(b,a);this.invalidateint()},invalidateint:function(){for(var a=this.cbsets.head;null!=a;){var b=a.elt;b.zip_listeners=!0;b.invalidate_pairs();a=a.next}},addbody:function(a){for(var b=null,c=this.bodylisteners.head;null!=
c;){var d=c.elt;if(a.precedence>d.precedence||a.precedence==d.precedence&&a.id>d.id)break;b=c;c=c.next}this.bodylisteners.inlined_insert(b,a);this.invalidatebody()},invalidatebody:function(){for(var a=this.cbsets.head;null!=a;)a.elt.zip_bodylisteners=!0,a=a.next},addconstraint:function(a){for(var b=null,c=this.conlisteners.head;null!=c;){var d=c.elt;if(a.precedence>d.precedence||a.precedence==d.precedence&&a.id>d.id)break;b=c;c=c.next}this.conlisteners.inlined_insert(b,a);this.invalidateconstraint()},
invalidateconstraint:function(){for(var a=this.cbsets.head;null!=a;)a.elt.zip_conlisteners=!0,a=a.next},__class__:ic};var oc=function(){this.body=this.constraint=this.interaction=this.space=null;this.id=this.type=this.event=this.precedence=0;this.outer=null;this.id=Ab.Listener()};g["zpp_nape.callbacks.ZPP_Listener"]=oc;oc.__name__=["zpp_nape","callbacks","ZPP_Listener"];oc.setlt=function(a,b){return a.precedence>b.precedence||a.precedence==b.precedence&&a.id>b.id};oc.prototype={addedToSpace:function(){},
removedFromSpace:function(){},__class__:oc};var Mk=function(){this.outer_zn=this.options=this.handler=null};g["zpp_nape.callbacks.ZPP_BodyListener"]=Mk;Mk.__name__=["zpp_nape","callbacks","ZPP_BodyListener"];Mk.__super__=oc;Mk.prototype=k(oc.prototype,{addedToSpace:function(){this.options.handler=m(this,this.cbtype_change);for(var a=this.options.includes.head;null!=a;)a.elt.addbody(this),a=a.next},removedFromSpace:function(){for(var a=this.options.includes.head;null!=a;){var b=a.elt;b.bodylisteners.remove(this);
b.invalidatebody();a=a.next}this.options.handler=null},cbtype_change:function(a,b,c){this.removedFromSpace();this.options.effect_change(a,b,c);this.addedToSpace()},__class__:Mk});var Nk=function(){this.outer_zn=this.options=this.handler=null};g["zpp_nape.callbacks.ZPP_ConstraintListener"]=Nk;Nk.__name__=["zpp_nape","callbacks","ZPP_ConstraintListener"];Nk.__super__=oc;Nk.prototype=k(oc.prototype,{addedToSpace:function(){this.options.handler=m(this,this.cbtype_change);for(var a=this.options.includes.head;null!=
a;)a.elt.addconstraint(this),a=a.next},removedFromSpace:function(){for(var a=this.options.includes.head;null!=a;){var b=a.elt;b.conlisteners.remove(this);b.invalidateconstraint();a=a.next}this.options.handler=null},cbtype_change:function(a,b,c){this.removedFromSpace();this.options.effect_change(a,b,c);this.addedToSpace()},__class__:Nk});var Ec=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_CbType"]=Ec;Ec.__name__=["zpp_nape","util","ZNPList_ZPP_CbType"];
Ec.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Zb.zpp_pool?b=new Zb:(b=Zb.zpp_pool,Zb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==Zb.zpp_pool?c=new Zb:(c=Zb.zpp_pool,Zb.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=
!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Zb.zpp_pool;Zb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);
d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Zb.zpp_pool;Zb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},has:function(a){return this.inlined_has(a)},inlined_has:function(a){var b;b=!1;for(var c=this.head;null!=c;){if(c.elt==a){b=
!0;break}c=c.next}return b},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Ec};var mb=function(a,b,c,d){this.handlerp=null;this.allowSleepingCallbacks=this.pure=!1;this.options1=this.options2=this.handleri=null;this.itype=0;this.outer_zni=this.outer_znp=null;oc.call(this);this.type=d;this.interaction=this;this.event=c;this.options1=a.zpp_inner;this.options2=b.zpp_inner;this.allowSleepingCallbacks=!1};g["zpp_nape.callbacks.ZPP_InteractionListener"]=mb;mb.__name__=
["zpp_nape","callbacks","ZPP_InteractionListener"];mb.__super__=oc;mb.prototype=k(oc.prototype,{CbSetset:function(a,b,c){for(var d=mb.UCbSet,e=mb.VCbSet,h=mb.WCbSet,a=a.head,f=b.head;null!=a&&null!=f;){var g=a.elt,i=f.elt;g==i?(h.inlined_add(g),a=a.next,f=f.next):Ia.setlt(g,i)?(d.inlined_add(g),a=a.next):(e.inlined_add(i),f=f.next)}for(;null!=a;)d.inlined_add(a.elt),a=a.next;for(;null!=f;)e.inlined_add(f.elt),f=f.next;for(;null!=d.head;){a=d.pop_unsafe();for(f=b.head;null!=f;)c(a,f.elt),f=f.next}for(;null!=
e.head;){b=e.pop_unsafe();for(d=h.head;null!=d;)c(b,d.elt),d=d.next}for(;null!=h.head;){e=h.pop_unsafe();c(e,e);for(b=h.head;null!=b;)c(e,b.elt),b=b.next}},CbTypeset:function(a,b,c){for(var d=mb.UCbType,e=mb.VCbType,h=mb.WCbType,a=a.head,f=b.head;null!=a&&null!=f;){var g=a.elt,i=f.elt;g==i?(h.inlined_add(g),a=a.next,f=f.next):g.id<i.id?(d.inlined_add(g),a=a.next):(e.inlined_add(i),f=f.next)}for(;null!=a;)d.inlined_add(a.elt),a=a.next;for(;null!=f;)e.inlined_add(f.elt),f=f.next;for(;null!=d.head;){a=
d.pop_unsafe();for(f=b.head;null!=f;)c(a,f.elt),f=f.next}for(;null!=e.head;){b=e.pop_unsafe();for(d=h.head;null!=d;)c(b,d.elt),d=d.next}for(;null!=h.head;){e=h.pop_unsafe();c(e,e);for(b=h.head;null!=b;)c(e,b.elt),b=b.next}},with_uniquesets:function(a){var b=this,c;null==ib.zpp_pool?c=new ib:(c=ib.zpp_pool,ib.zpp_pool=c.next,c.next=null);null;c.lt=Lb.setlt;this.CbTypeset(this.options1.includes,this.options2.includes,function(a,d){b.CbSetset(a.cbsets,d.cbsets,function(a,d){a.validate();d.validate();
Ia.single_intersection(a,d,b)&&c.try_insert(Lb.get(a,d))})});c.clear_with(function(c){a?b.space.freshListenerType(c.a,c.b):b.space.nullListenerType(c.a,c.b);c.a=c.b=null;c.listeners.clear();c.next=Lb.zpp_pool;Lb.zpp_pool=c});var d=c;d.data=null;d.lt=null;d.swapped=null;d.next=ib.zpp_pool;ib.zpp_pool=d},with_union:function(a){for(var b=this.options1.includes.head,c=this.options2.includes.head;null!=b&&null!=c;){var d=b.elt,e=c.elt;d==e?(a(d),b=b.next,c=c.next):d.id<e.id?(a(d),b=b.next):(a(e),c=c.next)}for(;null!=
b;)a(b.elt),b=b.next;for(;null!=c;)a(c.elt),c=c.next},addedToSpace:function(){var a=this,b=this.type==f.id_ListenerType_PRE;this.with_union(function(c){c.addint(a);if(b)for(c=c.interactors.head;null!=c;)c.elt.wake(),c=c.next});this.options1.handler=m(this,this.cbtype_change1);this.options2.handler=m(this,this.cbtype_change2);this.with_uniquesets(!0)},removedFromSpace:function(){var a=this;this.with_uniquesets(!1);var b=this.type==f.id_ListenerType_PRE;this.with_union(function(c){c.listeners.remove(a);
c.invalidateint();if(b)for(c=c.interactors.head;null!=c;)c.elt.wake(),c=c.next});this.options1.handler=null;this.options2.handler=null},cbtype_change1:function(a,b,c){this.cbtype_change(this.options1,a,b,c)},cbtype_change2:function(a,b,c){this.cbtype_change(this.options2,a,b,c)},cbtype_change:function(a,b,c,d){this.removedFromSpace();a.effect_change(b,c,d);this.addedToSpace();null},__class__:mb});var he=function(){this.outer=this.handler=this.includes=this.excludes=this.wrap_includes=this.wrap_excludes=
null;this.includes=new Ec;this.excludes=new Ec};g["zpp_nape.callbacks.ZPP_OptionType"]=he;he.__name__=["zpp_nape","callbacks","ZPP_OptionType"];he.argument=function(a){return null==a?new nf:pa.__instanceof(a,nf)?a:(new nf).including(a)};he.prototype={setup_includes:function(){this.wrap_includes=hd.get(this.includes,!0)},setup_excludes:function(){this.wrap_excludes=hd.get(this.excludes,!0)},excluded:function(a){return this.nonemptyintersection(a,this.excludes)},compatible:function(a){return this.nonemptyintersection(a,
this.includes)&&!this.nonemptyintersection(a,this.excludes)},nonemptyintersection:function(a,b){for(var c=!1,d=a.head,e=b.head;null!=e&&null!=d;){var h=e.elt,f=d.elt;if(h==f){c=!0;break}else h.id<f.id?e=e.next:d=d.next}return c},effect_change:function(a,b,c){if(b)if(c){b=null;for(c=this.includes.head;null!=c&&!(a.id<c.elt.id);){b=c;c=c.next}this.includes.inlined_insert(b,a)}else this.includes.remove(a);else if(c){b=null;for(c=this.excludes.head;null!=c&&!(a.id<c.elt.id);){b=c;c=c.next}this.excludes.inlined_insert(b,
a)}else this.excludes.remove(a)},append_type:function(a,b){a==this.includes?this.includes.has(b)||(this.excludes.has(b)?null!=this.handler?this.handler(b,!1,!1):this.effect_change(b,!1,!1):null!=this.handler?this.handler(b,!0,!0):this.effect_change(b,!0,!0)):this.excludes.has(b)||(this.includes.has(b)?null!=this.handler?this.handler(b,!0,!1):this.effect_change(b,!0,!1):null!=this.handler?this.handler(b,!1,!0):this.effect_change(b,!1,!0))},append:function(a,b){if(pa.__instanceof(b,Nd))this.append_type(a,
b.zpp_inner);else if(pa.__instanceof(b,vi)){var c;b.zpp_inner.valmod();for(c=ob.get(b);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);this.append_type(a,d.zpp_inner)}}else if(b instanceof Array&&null==b.__enum__)for(c=0;c<b.length;)d=b[c],++c,this.append_type(a,d.zpp_inner)},__class__:he};var wl=function(){this.cbTypes=this.cbSet=null;this.ignore=this.__velocity=!1;this.component=null;this.active=this.stiff=this.removeOnBreak=!1;this.outer=this.compound=this.space=null};g["zpp_nape.constraint.ZPP_Constraint"]=
wl;wl.__name__=["zpp_nape","constraint","ZPP_Constraint"];wl.prototype={alloc_cbSet:function(){if(null!=(this.cbSet=this.space.cbsets.get(this.cbTypes)))this.cbSet.count++,this.cbSet.constraints.add(this)},dealloc_cbSet:function(){if(null!=this.cbSet){this.cbSet.constraints.remove(this);if(0==--this.cbSet.count){this.space.cbsets.remove(this.cbSet);var a=this.cbSet;a.free();a.next=Ia.zpp_pool;Ia.zpp_pool=a}this.cbSet=null}},addedToSpace:function(){this.active&&this.activeInSpace();this.activeBodies();
for(var a=this.cbTypes.head;null!=a;)a.elt.constraints.add(this),a=a.next},removedFromSpace:function(){this.active&&this.inactiveOrOutSpace();this.inactiveBodies();for(var a=this.cbTypes.head;null!=a;)a.elt.constraints.remove(this),a=a.next},activeInSpace:function(){this.alloc_cbSet();null==Mb.zpp_pool?this.component=new Mb:(this.component=Mb.zpp_pool,Mb.zpp_pool=this.component.next,this.component.next=null);null;this.component.isBody=!1;this.component.constraint=this},inactiveOrOutSpace:function(){this.dealloc_cbSet();
var a=this.component;a.body=null;a.constraint=null;null;a.next=Mb.zpp_pool;Mb.zpp_pool=a;this.component=null},activeBodies:function(){},inactiveBodies:function(){},clearcache:function(){},wake_connected:function(){},forest:function(){},pair_exists:function(){return!1},broken:function(){},warmStart:function(){},preStep:function(){return!1},applyImpulseVel:function(){return!1},applyImpulsePos:function(){return!1},__class__:wl};var xa=function(){this.colarb=this.fluidarb=this.sensorarb=null;this.type=
0;this.b1=this.b2=this.ws1=this.ws2=this.pair=null;this.invalidated=!1;this.immState=0;this.intchange=this.presentable=this.continuous=this.fresh=!1;this.present=0;this.active=this.cleared=this.sleeping=!1;this.id=this.di=this.stamp=this.up_stamp=this.sleep_stamp=this.endGenerated=0;this.outer=null};g["zpp_nape.dynamics.ZPP_Arbiter"]=xa;xa.__name__=["zpp_nape","dynamics","ZPP_Arbiter"];xa.prototype={wrapper:function(){null==this.outer&&(xa.internal=!0,this.type==xa.COL?(this.colarb.outer_zn=new Ai,
this.outer=this.colarb.outer_zn):this.type==xa.FLUID?(this.fluidarb.outer_zn=new Bi,this.outer=this.fluidarb.outer_zn):this.outer=new te,this.outer.zpp_inner=this,xa.internal=!1);return this.outer},__class__:xa};var $b=function(){this.next=null;xa.call(this);this.type=xa.SENSOR;this.sensorarb=this};g["zpp_nape.dynamics.ZPP_SensorArbiter"]=$b;$b.__name__=["zpp_nape","dynamics","ZPP_SensorArbiter"];$b.__super__=xa;$b.prototype=k(xa.prototype,{retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),
this.b2.arbiters.inlined_try_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;this.intchange=this.active=!1;this.next=$b.zpp_pool;$b.zpp_pool=this},__class__:$b});var pc=function(){this.wMass=this.adamp=this.agamma=this.vMassa=this.vMassb=this.vMassc=this.dampx=this.dampy=this.lgamma=this.nx=this.ny=this.buoyx=this.buoyy=this.pre_dt=0;this.nodrag=!1;this.centroidx=this.centroidy=this.overlap=this.r1x=this.r1y=this.r2x=this.r2y=0;this.outer_zn=this.next=null;xa.call(this);
this.type=xa.FLUID;this.fluidarb=this;this.buoyy=this.buoyx=0;this.pre_dt=-1};g["zpp_nape.dynamics.ZPP_FluidArbiter"]=pc;pc.__name__=["zpp_nape","dynamics","ZPP_FluidArbiter"];pc.__super__=xa;pc.prototype=k(xa.prototype,{retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;this.intchange=this.active=!1;this.next=pc.zpp_pool;pc.zpp_pool=this;this.pre_dt=-1},preStep:function(a,
b){-1==this.pre_dt&&(this.pre_dt=b);var c=b/this.pre_dt;this.pre_dt=b;this.r1x=this.centroidx-this.b1.posx;this.r1y=this.centroidy-this.b1.posy;this.r2x=this.centroidx-this.b2.posx;this.r2y=this.centroidy-this.b2.posy;var d=0,e=0;this.ws1.fluidEnabled&&null!=this.ws1.fluidProperties.wrap_gravity?(d=this.ws1.fluidProperties.gravityx,e=this.ws1.fluidProperties.gravityy):(d=a.gravityx,e=a.gravityy);var h=0,n=0;this.ws2.fluidEnabled&&null!=this.ws2.fluidProperties.wrap_gravity?(h=this.ws2.fluidProperties.gravityx,
n=this.ws2.fluidProperties.gravityy):(h=a.gravityx,n=a.gravityy);var g=0,i=0;if(this.ws1.fluidEnabled&&this.ws2.fluidEnabled){var j=this.overlap*this.ws1.fluidProperties.density,s=this.overlap*this.ws2.fluidProperties.density;if(j>s)h=j+s,g-=d*h,i-=e*h;else if(j<s)d=j+s,g+=h*d,i+=n*d;else{var k=0,l=0,k=0.5*(d+h),l=0.5*(e+n);this.ws1.worldCOMx*k+this.ws1.worldCOMy*l>this.ws2.worldCOMx*k+this.ws2.worldCOMy*l?(d=j+s,g-=k*d,i-=l*d):(d=j+s,g+=k*d,i+=l*d)}}else this.ws1.fluidEnabled?(h=this.overlap*this.ws1.fluidProperties.density,
g-=d*h,i-=e*h):this.ws2.fluidEnabled&&(d=this.overlap*this.ws2.fluidProperties.density,g+=h*d,i+=n*d);g*=b;i*=b;this.buoyx=g;this.buoyy=i;this.b1.type==f.id_BodyType_DYNAMIC&&(d=this.b1.imass,this.b1.velx-=g*d,this.b1.vely-=i*d,this.b1.angvel-=(i*this.r1x-g*this.r1y)*this.b1.iinertia);this.b2.type==f.id_BodyType_DYNAMIC&&(d=this.b2.imass,this.b2.velx+=g*d,this.b2.vely+=i*d,this.b2.angvel+=(i*this.r2x-g*this.r2y)*this.b2.iinertia);if((!this.ws1.fluidEnabled||0==this.ws1.fluidProperties.viscosity)&&
(!this.ws2.fluidEnabled||0==this.ws2.fluidProperties.viscosity))this.nodrag=!0,this.adamp=this.dampy=this.dampx=0;else{this.nodrag=!1;g=0;this.ws1.fluidEnabled&&(this.ws2.validate_angDrag(),g+=this.ws1.fluidProperties.viscosity*this.ws2.angDrag*this.overlap/this.ws2.area);this.ws2.fluidEnabled&&(this.ws1.validate_angDrag(),g+=this.ws2.fluidProperties.viscosity*this.ws1.angDrag*this.overlap/this.ws1.area);0!=g?(i=this.b1.sinertia+this.b2.sinertia,this.wMass=0!=i?1/i:0,g=2*Math.PI*4.0E-4*g,this.agamma=
1/(b*g*(2+g*b)),g=1/(1+this.agamma),this.agamma*=g,this.wMass*=g):this.agamma=this.wMass=0;g=this.b2.velx+this.b2.kinvelx-this.r2y*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.r1y*(this.b2.angvel+this.b2.kinangvel));i=this.b2.vely+this.b2.kinvely+this.r2x*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.r1x*(this.b1.angvel+this.b1.kinangvel));g*g+i*i<t.epsilon*t.epsilon||(d=1/Math.sqrt(g*g+i*i),this.nx=g*d,this.ny=i*d);g=0;if(this.ws1.fluidEnabled)if(i=
-this.ws1.fluidProperties.viscosity*this.overlap/this.ws2.area,this.ws2.type==f.id_ShapeType_CIRCLE)g-=i*this.ws2.circle.radius*t.fluidLinearDrag/(2*this.ws2.circle.radius*Math.PI);else{e=d=0;for(h=this.ws2.polygon.edges.head;null!=h;)n=h.elt,d+=n.length,n=i*n.length*(n.gnormx*this.nx+n.gnormy*this.ny),0<n&&(n=n*=-t.fluidVacuumDrag),e-=0.5*n*t.fluidLinearDrag,h=h.next;g+=e/d}if(this.ws2.fluidEnabled)if(i=-this.ws2.fluidProperties.viscosity*this.overlap/this.ws1.area,this.ws1.type==f.id_ShapeType_CIRCLE)g-=
i*this.ws1.circle.radius*t.fluidLinearDrag/(2*this.ws1.circle.radius*Math.PI);else{e=d=0;for(h=this.ws1.polygon.edges.head;null!=h;)n=h.elt,d+=n.length,n=i*n.length*(n.gnormx*this.nx+n.gnormy*this.ny),0<n&&(n=n*=-t.fluidVacuumDrag),e-=0.5*n*t.fluidLinearDrag,h=h.next;g+=e/d}0!=g?(h=this.b1.smass+this.b2.smass,e=d=i=0,i=h,d=0,e=h,0!=this.b1.sinertia&&(h=this.r1x*this.b1.sinertia,n=this.r1y*this.b1.sinertia,i+=n*this.r1y,d+=-n*this.r1x,e+=h*this.r1x),0!=this.b2.sinertia&&(h=this.r2x*this.b2.sinertia,
n=this.r2y*this.b2.sinertia,i+=n*this.r2y,d+=-n*this.r2x,e+=h*this.r2x),h=i*e-d*d,h!=h?(i=d=e=0,3):0==h?(h=0,0!=i?i=1/i:(i=0,h|=1),0!=e?e=1/e:(e=0,h|=2),d=0,h):(h=1/h,n=e*h,e=i*h,i=n,d*=-h,0),this.vMassa=i,this.vMassb=d,this.vMassc=e,g*=2*Math.PI,this.lgamma=1/(b*g*(2+g*b)),g=1/(1+this.lgamma),this.lgamma*=g,this.vMassa*=g,this.vMassb*=g,this.vMassc*=g):this.lgamma=this.vMassc=this.vMassb=this.vMassa=0}this.dampx*=c;this.dampy*=c;this.adamp*=c},warmStart:function(){var a=this.b1.imass;this.b1.velx-=
this.dampx*a;this.b1.vely-=this.dampy*a;a=this.b2.imass;this.b2.velx+=this.dampx*a;this.b2.vely+=this.dampy*a;this.b1.angvel-=this.b1.iinertia*(this.dampy*this.r1x-this.dampx*this.r1y);this.b2.angvel+=this.b2.iinertia*(this.dampy*this.r2x-this.dampx*this.r2y);this.b1.angvel-=this.adamp*this.b1.iinertia;this.b2.angvel+=this.adamp*this.b2.iinertia},applyImpulseVel:function(){if(!this.nodrag){var a=this.b1.angvel+this.b1.kinangvel,b=this.b2.angvel+this.b2.kinangvel,c=this.b1.velx+this.b1.kinvelx-this.r1y*
a-(this.b2.velx+this.b2.kinvelx-this.r2y*b),d=this.b1.vely+this.b1.kinvely+this.r1x*a-(this.b2.vely+this.b2.kinvely+this.r2x*b),e=this.vMassa*c+this.vMassb*d,d=this.vMassb*c+this.vMassc*d,h=this.lgamma,c=e-this.dampx*h,d=d-this.dampy*h;this.dampx+=1*c;this.dampy+=1*d;e=this.b1.imass;this.b1.velx-=c*e;this.b1.vely-=d*e;e=this.b2.imass;this.b2.velx+=c*e;this.b2.vely+=d*e;this.b1.angvel-=this.b1.iinertia*(d*this.r1x-c*this.r1y);this.b2.angvel+=this.b2.iinertia*(d*this.r2x-c*this.r2y);a=(a-b)*this.wMass-
this.adamp*this.agamma;this.adamp+=a;this.b1.angvel-=a*this.b1.iinertia;this.b2.angvel+=a*this.b2.iinertia}},__class__:pc});var Oa=function(){this.pre_dt=0;this.stat=!1;this.next=null;this.hc2=this.hpc2=!1;this.c1=this.oc1=this.c2=this.oc2=null;this.__ref_vertex=0;this.__ref_edge1=this.__ref_edge2=null;this.biasCoef=0;this.rev=!1;this.kMassa=this.kMassb=this.kMassc=this.Ka=this.Kb=this.Kc=this.rMass=this.jrAcc=this.rn1a=this.rt1a=this.rn1b=this.rt1b=this.rn2a=this.rt2a=this.rn2b=this.rt2b=this.k1x=
this.k1y=this.k2x=this.k2y=this.surfacex=this.surfacey=this.lnormx=this.lnormy=this.lproj=this.radius=0;this.wrap_normal=null;this.nx=this.ny=0;this.s1=this.s2=this.contacts=this.innards=null;this.userdef_dyn_fric=this.userdef_stat_fric=this.userdef_restitution=this.userdef_rfric=!1;this.dyn_fric=this.stat_fric=this.restitution=this.rfric=0;this.outer_zn=null;xa.call(this);this.pre_dt=-1;this.contacts=new ac;this.innards=new Dj;this.type=xa.COL;this.colarb=this};g["zpp_nape.dynamics.ZPP_ColArbiter"]=
Oa;Oa.__name__=["zpp_nape","dynamics","ZPP_ColArbiter"];Oa.__super__=xa;Oa.prototype=k(xa.prototype,{normal_validate:function(){if(this.cleared)throw"Error: Arbiter not currently in use";this.wrap_normal.zpp_inner.x=this.nx;this.wrap_normal.zpp_inner.y=this.ny;this.ws1.id>this.ws2.id&&(this.wrap_normal.zpp_inner.x=-this.wrap_normal.zpp_inner.x,this.wrap_normal.zpp_inner.y=-this.wrap_normal.zpp_inner.y)},getnormal:function(){this.wrap_normal=ha.get(0,0,null);this.wrap_normal.zpp_inner._immutable=!0;
this.wrap_normal.zpp_inner._inuse=!0;this.wrap_normal.zpp_inner._validate=m(this,this.normal_validate)},injectContact:function(a,b,c,d,e,h,f){null==f&&(f=!1);for(var g=null,i=this.contacts.next;null!=i;){var j=i;if(h==j.hash){g=j;break}i=i.next}null==g?(null==ac.zpp_pool?g=new ac:(g=ac.zpp_pool,ac.zpp_pool=g.next,g.next=null),null,i=g.inner,i.jnAcc=i.jtAcc=0,g.hash=h,g.fresh=!0,g.arbiter=this,this.jrAcc=0,this.contacts.inlined_add(g),this.innards.add(i)):g.fresh=!1;g.px=a;g.py=b;this.nx=c;this.ny=
d;g.dist=e;g.stamp=this.stamp;g.posOnly=f;return g},retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;for(this.intchange=this.active=!1;null!=this.contacts.next;){var a=this.contacts.inlined_pop_unsafe();a.arbiter=null;a.next=ac.zpp_pool;ac.zpp_pool=a;this.innards.inlined_pop()}this.userdef_rfric=this.userdef_restitution=this.userdef_stat_fric=this.userdef_dyn_fric=
!1;this.__ref_edge1=this.__ref_edge2=null;this.next=Oa.zpp_pool;Oa.zpp_pool=this;this.pre_dt=-1},cleanupContacts:function(){var a=!0,b=null,c=null,d=this.innards.next;this.hc2=!1;for(var e=this.contacts.next;null!=e;){var h=e;h.stamp+t.arbiterExpirationDelay<this.stamp?(e=this.contacts.inlined_erase(b),d=this.innards.inlined_erase(c),h.arbiter=null,h.next=ac.zpp_pool,ac.zpp_pool=h):(b=h.inner,c=h.active,h.active=h.stamp==this.stamp,h.active&&(a?(a=!1,this.c1=b,this.oc1=h):(this.hc2=!0,this.c2=b,this.oc2=
h)),c!=h.active&&(this.contacts.modified=!0),b=e,c=d,d=d.next,e=e.next)}this.hc2?(this.hpc2=!0,this.oc1.posOnly?(d=this.c1,this.c1=this.c2,this.c2=d,d=this.oc1,this.oc1=this.oc2,this.oc2=d,this.hc2=!1):this.oc2.posOnly&&(this.hc2=!1),this.oc1.posOnly&&(a=!0)):this.hpc2=!1;return a},preStep:function(a){this.invalidated&&(this.invalidated=!1,this.userdef_restitution||(this.restitution=this.s1.material.elasticity<=Math.NEGATIVE_INFINITY||this.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:this.s1.material.elasticity>=
Math.POSITIVE_INFINITY||this.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(this.s1.material.elasticity+this.s2.material.elasticity)/2,0>this.restitution&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*
this.s2.material.rollingFriction)));-1==this.pre_dt&&(this.pre_dt=a);var b=a/this.pre_dt;this.pre_dt=a;var c=this.b1.smass+this.b2.smass;this.hc2=!1;a=!0;this.biasCoef=this.b1.type!=f.id_BodyType_DYNAMIC||this.b2.type!=f.id_BodyType_DYNAMIC?this.continuous?t.contactContinuousStaticBiasCoef:t.contactStaticBiasCoef:this.continuous?t.contactContinuousBiasCoef:t.contactBiasCoef;this.continuous=!1;for(var d=null,e=null,h=this.innards.next,g=this.contacts.next;null!=g;){var i=g;if(i.stamp+t.arbiterExpirationDelay<
this.stamp)g=this.contacts.inlined_erase(d),h=this.innards.inlined_erase(e),i.arbiter=null,i.next=ac.zpp_pool,ac.zpp_pool=i;else{d=i.inner;e=i.active;i.active=i.stamp==this.stamp;if(i.active){a?(a=!1,this.c1=d,this.oc1=i):(this.hc2=!0,this.c2=d,this.oc2=i);d.r2x=i.px-this.b2.posx;d.r2y=i.py-this.b2.posy;d.r1x=i.px-this.b1.posx;d.r1y=i.py-this.b1.posy;var j=c+this.b2.sinertia*Og.sqr(d.r2x*this.nx+d.r2y*this.ny),j=j+this.b1.sinertia*Og.sqr(d.r1x*this.nx+d.r1y*this.ny);d.tMass=j<t.epsilon*t.epsilon?
0:1/j;j=c+this.b2.sinertia*Og.sqr(this.ny*d.r2x-this.nx*d.r2y);j+=this.b1.sinertia*Og.sqr(this.ny*d.r1x-this.nx*d.r1y);d.nMass=j<t.epsilon*t.epsilon?0:1/j;var k=j=0,s=this.b2.angvel+this.b2.kinangvel,j=this.b2.velx+this.b2.kinvelx-d.r2y*s,k=this.b2.vely+this.b2.kinvely+d.r2x*s,s=this.b1.angvel+this.b1.kinangvel,j=j-(this.b1.velx+this.b1.kinvelx-d.r1y*s),k=k-(this.b1.vely+this.b1.kinvely+d.r1x*s),s=this.nx*j+this.ny*k;i.elasticity=this.restitution;d.bounce=s*i.elasticity;d.bounce>-t.elasticThreshold&&
(d.bounce=0);s=k*this.nx-j*this.ny;j=t.staticFrictionThreshold;d.friction=s*s>j*j?this.dyn_fric:this.stat_fric;d.jnAcc*=b;d.jtAcc*=b}e!=i.active&&(this.contacts.modified=!0);d=g;e=h;h=h.next;g=g.next}}this.hc2?(this.hpc2=!0,this.oc1.posOnly?(h=this.c1,this.c1=this.c2,this.c2=h,h=this.oc1,this.oc1=this.oc2,this.oc2=h,this.hc2=!1):this.oc2.posOnly&&(this.hc2=!1),this.oc1.posOnly&&(a=!0)):this.hpc2=!1;this.jrAcc*=b;a||(this.rn1a=this.ny*this.c1.r1x-this.nx*this.c1.r1y,this.rt1a=this.c1.r1x*this.nx+this.c1.r1y*
this.ny,this.rn1b=this.ny*this.c1.r2x-this.nx*this.c1.r2y,this.rt1b=this.c1.r2x*this.nx+this.c1.r2y*this.ny,this.k1x=this.b2.kinvelx-this.c1.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c1.r1y*this.b1.kinangvel),this.k1y=this.b2.kinvely+this.c1.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c1.r1x*this.b1.kinangvel));this.hc2&&(this.rn2a=this.ny*this.c2.r1x-this.nx*this.c2.r1y,this.rt2a=this.c2.r1x*this.nx+this.c2.r1y*this.ny,this.rn2b=this.ny*this.c2.r2x-this.nx*this.c2.r2y,this.rt2b=this.c2.r2x*this.nx+
this.c2.r2y*this.ny,this.k2x=this.b2.kinvelx-this.c2.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c2.r1y*this.b1.kinangvel),this.k2y=this.b2.kinvely+this.c2.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c2.r1x*this.b1.kinangvel),this.kMassa=c+this.b1.sinertia*this.rn1a*this.rn1a+this.b2.sinertia*this.rn1b*this.rn1b,this.kMassb=c+this.b1.sinertia*this.rn1a*this.rn2a+this.b2.sinertia*this.rn1b*this.rn2b,this.kMassc=c+this.b1.sinertia*this.rn2a*this.rn2a+this.b2.sinertia*this.rn2b*this.rn2b,this.kMassa*
this.kMassa+2*this.kMassb*this.kMassb+this.kMassc*this.kMassc<t.illConditionedThreshold*(this.kMassa*this.kMassc-this.kMassb*this.kMassb)?(this.Ka=this.kMassa,this.Kb=this.kMassb,this.Kc=this.kMassc,b=this.kMassa*this.kMassc-this.kMassb*this.kMassb,b!=b?(this.kMassa=this.kMassb=this.kMassc=0,3):0==b?(b=0,0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,b|=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,b|=2),this.kMassb=0,b):(b=1/b,c=this.kMassc*b,this.kMassc=this.kMassa*b,this.kMassa=
c,this.kMassb*=-b,0)):(this.hc2=!1,this.oc2.dist<this.oc1.dist&&(b=this.c1,this.c1=this.c2,this.c2=b),this.oc2.active=!1,this.contacts.modified=!0));this.surfacex=this.b2.svelx;this.surfacey=this.b2.svely;this.surfacex+=1*this.b1.svelx;this.surfacey+=1*this.b1.svely;this.surfacex=-this.surfacex;this.surfacey=-this.surfacey;this.rMass=this.b1.sinertia+this.b2.sinertia;0!=this.rMass&&(this.rMass=1/this.rMass);return a},warmStart:function(){var a=this.nx*this.c1.jnAcc-this.ny*this.c1.jtAcc,b=this.ny*
this.c1.jnAcc+this.nx*this.c1.jtAcc,c=this.b1.imass;this.b1.velx-=a*c;this.b1.vely-=b*c;this.b1.angvel-=this.b1.iinertia*(b*this.c1.r1x-a*this.c1.r1y);c=this.b2.imass;this.b2.velx+=a*c;this.b2.vely+=b*c;this.b2.angvel+=this.b2.iinertia*(b*this.c1.r2x-a*this.c1.r2y);this.hc2&&(a=this.nx*this.c2.jnAcc-this.ny*this.c2.jtAcc,b=this.ny*this.c2.jnAcc+this.nx*this.c2.jtAcc,c=this.b1.imass,this.b1.velx-=a*c,this.b1.vely-=b*c,this.b1.angvel-=this.b1.iinertia*(b*this.c2.r1x-a*this.c2.r1y),c=this.b2.imass,this.b2.velx+=
a*c,this.b2.vely+=b*c,this.b2.angvel+=this.b2.iinertia*(b*this.c2.r2x-a*this.c2.r2y));this.b2.angvel+=this.jrAcc*this.b2.iinertia;this.b1.angvel-=this.jrAcc*this.b1.iinertia},applyImpulseVel:function(){var a,b,c,d,e;d=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel);var h=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel);c=(h*this.nx-d*this.ny+this.surfacex)*this.c1.tMass;d=this.c1.friction*this.c1.jnAcc;a=this.c1.jtAcc;
e=a-c;e>d?e=d:e<-d&&(e=-d);c=e-a;this.c1.jtAcc=e;a=-this.ny*c;b=this.nx*c;this.b2.velx+=a*this.b2.imass;this.b2.vely+=b*this.b2.imass;this.b1.velx-=a*this.b1.imass;this.b1.vely-=b*this.b1.imass;this.b2.angvel+=this.rt1b*c*this.b2.iinertia;this.b1.angvel-=this.rt1a*c*this.b1.iinertia;this.hc2?(e=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),b=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel),c=(b*this.nx-e*this.ny+
this.surfacex)*this.c2.tMass,d=this.c2.friction*this.c2.jnAcc,a=this.c2.jtAcc,e=a-c,e>d?e=d:e<-d&&(e=-d),c=e-a,this.c2.jtAcc=e,a=-this.ny*c,b=this.nx*c,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=this.rt2b*c*this.b2.iinertia,this.b1.angvel-=this.rt2a*c*this.b1.iinertia,d=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),h=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-
(this.b1.vely+this.c1.r1x*this.b1.angvel),e=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),b=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel),c=this.c1.jnAcc,a=this.c2.jnAcc,d=d*this.nx+h*this.ny+this.surfacey+this.c1.bounce-(this.Ka*c+this.Kb*a),e=e*this.nx+b*this.ny+this.surfacey+this.c2.bounce-(this.Kb*c+this.Kc*a),b=-(this.kMassa*d+this.kMassb*e),h=-(this.kMassb*d+this.kMassc*e),0<=b&&0<=h?(d=b-c,e=h-a,this.c1.jnAcc=
b,this.c2.jnAcc=h):(b=-this.c1.nMass*d,0<=b&&0<=this.Kb*b+e?(d=b-c,e=-a,this.c1.jnAcc=b,this.c2.jnAcc=0):(h=-this.c2.nMass*e,0<=h&&0<=this.Kb*h+d?(d=-c,e=h-a,this.c1.jnAcc=0,this.c2.jnAcc=h):0<=d&&0<=e?(d=-c,e=-a,this.c1.jnAcc=this.c2.jnAcc=0):e=d=0)),c=d+e,a=this.nx*c,b=this.ny*c,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=(this.rn1b*d+this.rn2b*e)*this.b2.iinertia,this.b1.angvel-=(this.rn1a*d+this.rn2a*e)*
this.b1.iinertia):(0!=this.radius&&(c=(this.b2.angvel-this.b1.angvel)*this.rMass,d=this.rfric*this.c1.jnAcc,a=this.jrAcc,this.jrAcc-=c,this.jrAcc>d?this.jrAcc=d:this.jrAcc<-d&&(this.jrAcc=-d),c=this.jrAcc-a,this.b2.angvel+=c*this.b2.iinertia,this.b1.angvel-=c*this.b1.iinertia),d=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),h=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),c=(this.c1.bounce+(this.nx*d+this.ny*
h)+this.surfacey)*this.c1.nMass,a=this.c1.jnAcc,e=a-c,0>e&&(e=0),c=e-a,this.c1.jnAcc=e,a=this.nx*c,b=this.ny*c,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=this.rn1b*c*this.b2.iinertia,this.b1.angvel-=this.rn1a*c*this.b1.iinertia)},applyImpulsePos:function(){if(2==this.ptype){var a=this.c1,b=0,c=0,b=this.b2.axisy*a.lr2x-this.b2.axisx*a.lr2y,c=a.lr2x*this.b2.axisx+a.lr2y*this.b2.axisy,b=b+1*this.b2.posx,c=c+
1*this.b2.posy,d=0,e=0,d=this.b1.axisy*a.lr1x-this.b1.axisx*a.lr1y,e=a.lr1x*this.b1.axisx+a.lr1y*this.b1.axisy,d=d+1*this.b1.posx,e=e+1*this.b1.posy,h=a=0,a=b-d,h=c-e,f=Math.sqrt(a*a+h*h),g=this.radius-t.collisionSlop,i=f-g;0>a*this.nx+h*this.ny&&(a=-a,h=-h,i-=this.radius);0>i&&(f<t.epsilon?0!=this.b1.smass?this.b1.posx+=10*t.epsilon:this.b2.posx+=10*t.epsilon:(i=1/f,a*=i,h*=i,b=0.5*(d+b),c=0.5*(e+c),d=b-this.b1.posx,e=c-this.b1.posy,b-=this.b2.posx,c-=this.b2.posy,d=h*d-a*e,b=h*b-a*c,c=this.b2.smass+
b*b*this.b2.sinertia+this.b1.smass+d*d*this.b1.sinertia,0!=c&&(f=-this.biasCoef*(f-g)/c,c=g=0,g=a*f,c=h*f,a=this.b1.imass,this.b1.posx-=g*a,this.b1.posy-=c*a,this.b1.delta_rot(-d*this.b1.iinertia*f),a=this.b2.imass,this.b2.posx+=g*a,this.b2.posy+=c*a,this.b2.delta_rot(b*this.b2.iinertia*f))))}else{var j=i=h=a=0,e=b=0;0==this.ptype?(a=this.b1.axisy*this.lnormx-this.b1.axisx*this.lnormy,h=this.lnormx*this.b1.axisx+this.lnormy*this.b1.axisy,g=this.lproj+(a*this.b1.posx+h*this.b1.posy),i=this.b2.axisy*
this.c1.lr1x-this.b2.axisx*this.c1.lr1y,j=this.c1.lr1x*this.b2.axisx+this.c1.lr1y*this.b2.axisy,i+=1*this.b2.posx,j+=1*this.b2.posy,this.hpc2&&(b=this.b2.axisy*this.c2.lr1x-this.b2.axisx*this.c2.lr1y,e=this.c2.lr1x*this.b2.axisx+this.c2.lr1y*this.b2.axisy,b+=1*this.b2.posx,e+=1*this.b2.posy)):(a=this.b2.axisy*this.lnormx-this.b2.axisx*this.lnormy,h=this.lnormx*this.b2.axisx+this.lnormy*this.b2.axisy,g=this.lproj+(a*this.b2.posx+h*this.b2.posy),i=this.b1.axisy*this.c1.lr1x-this.b1.axisx*this.c1.lr1y,
j=this.c1.lr1x*this.b1.axisx+this.c1.lr1y*this.b1.axisy,i+=1*this.b1.posx,j+=1*this.b1.posy,this.hpc2&&(b=this.b1.axisy*this.c2.lr1x-this.b1.axisx*this.c2.lr1y,e=this.c2.lr1x*this.b1.axisx+this.c2.lr1y*this.b1.axisy,b+=1*this.b1.posx,e+=1*this.b1.posy));f=i*a+j*h-g-this.radius;f+=t.collisionSlop;c=0;this.hpc2&&(c=b*a+e*h-g-this.radius,c+=t.collisionSlop);if(0>f||0>c){this.rev&&(a=-a,h=-h);var s=0,k=0,s=i-this.b1.posx,k=j-this.b1.posy,d=g=0,g=i-this.b2.posx,d=j-this.b2.posy,l=0,m=0,j=i=0;if(this.hpc2){l=
b-this.b1.posx;m=e-this.b1.posy;i=b-this.b2.posx;j=e-this.b2.posy;b=h*s-a*k;g=h*g-a*d;e=h*l-a*m;d=h*i-a*j;i=this.b1.smass+this.b2.smass;this.kMassa=i+this.b1.sinertia*b*b+this.b2.sinertia*g*g;this.kMassb=i+this.b1.sinertia*b*e+this.b2.sinertia*g*d;this.kMassc=i+this.b1.sinertia*e*e+this.b2.sinertia*d*d;s=j=i=0;i=this.kMassa;j=this.kMassb;s=this.kMassc;k=f*this.biasCoef;l=c*this.biasCoef;c=f=0;f=-k;c=-l;m=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(m!=m)f=c=0;else if(0==m)f=0!=this.kMassa?f/
this.kMassa:0,c=0!=this.kMassc?c/this.kMassc:0;else var m=1/m,o=m*(this.kMassc*f-this.kMassb*c),c=m*(this.kMassa*c-this.kMassb*f),f=o;0<=f&&0<=c?(i=(f+c)*this.b1.imass,this.b1.posx-=a*i,this.b1.posy-=h*i,this.b1.delta_rot(-this.b1.iinertia*(b*f+e*c)),b=(f+c)*this.b2.imass,this.b2.posx+=a*b,this.b2.posy+=h*b,this.b2.delta_rot(this.b2.iinertia*(g*f+d*c))):(f=-k/i,c=0,0<=f&&0<=j*f+l?(i=(f+c)*this.b1.imass,this.b1.posx-=a*i,this.b1.posy-=h*i,this.b1.delta_rot(-this.b1.iinertia*(b*f+e*c)),b=(f+c)*this.b2.imass,
this.b2.posx+=a*b,this.b2.posy+=h*b,this.b2.delta_rot(this.b2.iinertia*(g*f+d*c))):(f=0,c=-l/s,0<=c&&0<=j*c+k&&(i=(f+c)*this.b1.imass,this.b1.posx-=a*i,this.b1.posy-=h*i,this.b1.delta_rot(-this.b1.iinertia*(b*f+e*c)),b=(f+c)*this.b2.imass,this.b2.posx+=a*b,this.b2.posy+=h*b,this.b2.delta_rot(this.b2.iinertia*(g*f+d*c)))))}else b=h*s-a*k,g=h*g-a*d,c=this.b2.smass+g*g*this.b2.sinertia+this.b1.smass+b*b*this.b1.sinertia,0!=c&&(f=-this.biasCoef*f/c,d=c=0,c=a*f,d=h*f,a=this.b1.imass,this.b1.posx-=c*a,
this.b1.posy-=d*a,this.b1.delta_rot(-b*this.b1.iinertia*f),a=this.b2.imass,this.b2.posx+=c*a,this.b2.posy+=d*a,this.b2.delta_rot(g*this.b2.iinertia*f))}}},__class__:Oa});var ac=function(){this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.dist=this.elasticity=0;this.fresh=!1;this.stamp=this.hash=0;this.active=this.posOnly=!1;this.arbiter=this.inner=null;this.px=this.py=0;this.outer=null;this.inner=new Dj};g["zpp_nape.dynamics.ZPP_Contact"]=ac;ac.__name__=["zpp_nape","dynamics",
"ZPP_Contact"];ac.prototype={wrapper:function(){null==this.outer&&(ac.internal=!0,this.outer=new vk,ac.internal=!1,this.outer.zpp_inner=this);return this.outer},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.next;this.pop();return a},
inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:ac};var Dj=function(){this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.r1x=this.r1y=this.r2x=this.r2y=this.nMass=this.tMass=this.bounce=this.friction=this.jnAcc=this.jtAcc=this.lr1x=this.lr1y=this.lr2x=this.lr2y=0};g["zpp_nape.dynamics.ZPP_IContact"]=
Dj;Dj.__name__=["zpp_nape","dynamics","ZPP_IContact"];Dj.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=
!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Dj};var Ub=function(){this.collisionGroup=this.collisionMask=this.sensorGroup=this.sensorMask=this.fluidGroup=this.fluidMask=0;this.next=this.outer=this.shapes=null;this.shapes=new Me;this.collisionGroup=this.sensorGroup=this.fluidGroup=1;this.collisionMask=this.sensorMask=this.fluidMask=-1};g["zpp_nape.dynamics.ZPP_InteractionFilter"]=Ub;Ub.__name__=["zpp_nape","dynamics","ZPP_InteractionFilter"];Ub.prototype={wrapper:function(){if(null==
this.outer){this.outer=new wk;var a=this.outer.zpp_inner;a.outer=null;a.next=Ub.zpp_pool;Ub.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},shouldCollide:function(a){return 0!=(this.collisionMask&a.collisionGroup)&&0!=(a.collisionMask&this.collisionGroup)},shouldSense:function(a){return 0!=(this.sensorMask&a.sensorGroup)&&0!=(a.sensorMask&this.sensorGroup)},shouldFlow:function(a){return 0!=(this.fluidMask&a.fluidGroup)&&0!=(a.fluidMask&this.fluidGroup)},invalidate:function(){for(var a=this.shapes.head;null!=
a;)a.elt.invalidate_filter(),a=a.next},__class__:Ub};var xl=function(){this.depth=0;this.group=this.interactors=null;this.ignore=!1;this.outer=null};g["zpp_nape.dynamics.ZPP_InteractionGroup"]=xl;xl.__name__=["zpp_nape","dynamics","ZPP_InteractionGroup"];xl.prototype={__class__:xl};var oa=function(){this.wrap_max=null;this.maxx=this.maxy=0;this.wrap_min=null;this.minx=this.miny=0;this.outer=this.next=null;this._immutable=!1;this._invalidate=this._validate=null};g["zpp_nape.geom.ZPP_AABB"]=oa;oa.__name__=
["zpp_nape","geom","ZPP_AABB"];oa.get=function(a,b,c,d){var e;null==oa.zpp_pool?e=new oa:(e=oa.zpp_pool,oa.zpp_pool=e.next,e.next=null);null;e.minx=a;e.miny=b;e.maxx=c;e.maxy=d;return e};oa.prototype={validate:function(){null!=this._validate&&this._validate()},perimeter:function(){return 2*(this.maxx-this.minx+(this.maxy-this.miny))},intersectY:function(a){return!(a.miny>this.maxy||this.miny>a.maxy)},intersect:function(a){return a.miny<=this.maxy&&this.miny<=a.maxy&&a.minx<=this.maxx&&this.minx<=
a.maxx},combine:function(a){a.minx<this.minx&&(this.minx=a.minx);a.maxx>this.maxx&&(this.maxx=a.maxx);a.miny<this.miny&&(this.miny=a.miny);a.maxy>this.maxy&&(this.maxy=a.maxy)},contains:function(a){return a.minx>=this.minx&&a.miny>=this.miny&&a.maxx<=this.maxx&&a.maxy<=this.maxy},setCombine:function(a,b){this.minx=a.minx<b.minx?a.minx:b.minx;this.miny=a.miny<b.miny?a.miny:b.miny;this.maxx=a.maxx>b.maxx?a.maxx:b.maxx;this.maxy=a.maxy>b.maxy?a.maxy:b.maxy},setExpand:function(a,b){this.minx=a.minx-b;
this.miny=a.miny-b;this.maxx=a.maxx+b;this.maxy=a.maxy+b},toString:function(){return"{ x: "+this.minx+" y: "+this.miny+" w: "+(this.maxx-this.minx)+" h: "+(this.maxy-this.miny)+" }"},__class__:oa};var Pg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Vec2"]=Pg;Pg.__name__=["zpp_nape","util","ZNPList_ZPP_Vec2"];Pg.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==bc.zpp_pool?b=new bc:(b=bc.zpp_pool,bc.zpp_pool=
b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==bc.zpp_pool?c=new bc:(c=bc.zpp_pool,bc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=
bc.zpp_pool;bc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=bc.zpp_pool;bc.zpp_pool=a;this.modified=!0;this.length--;
this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Pg};var R=function(){};g["zpp_nape.geom.ZPP_Collide"]=R;R.__name__=["zpp_nape","geom","ZPP_Collide"];R.contactCollide=function(a,b,c,d){if(b.type==f.id_ShapeType_POLYGON)if(a.type==f.id_ShapeType_POLYGON){for(var e=!0,h=-1.0E100,g=-1,i=null,j=null,k=a.polygon.edges.head;null!=k;){for(var s=k.elt,l=1.0E100,m=b.polygon.gverts.next;null!=
m;){var o=m,o=s.gnormx*o.x+s.gnormy*o.y;o<l&&(l=o);if(l-s.gprojection<=h)break;m=m.next}l-=s.gprojection;if(0<=l){e=!1;break}l>h&&(h=l,i=s,g=1);k=k.next}if(e){for(k=b.polygon.edges.head;null!=k;){s=k.elt;l=1.0E100;for(m=a.polygon.gverts.next;null!=m;){o=m;o=s.gnormx*o.x+s.gnormy*o.y;o<l&&(l=o);if(l-s.gprojection<=h)break;m=m.next}l-=s.gprojection;if(0<=l){e=!1;break}l>h&&(h=l,j=s,g=2);k=k.next}if(e){1==g?(a=b.polygon,b=i,j=1):(a=a.polygon,b=j,j=-1);i=null;e=1.0E100;for(h=a.edges.head;null!=h;)k=h.elt,
s=b.gnormx*k.gnormx+b.gnormy*k.gnormy,s<e&&(e=s,i=k),h=h.next;var h=e=0,e=i.gp0.x,h=i.gp0.y,s=k=0,k=i.gp1.x,s=i.gp1.y,m=l=0,l=k-e,m=s-h,q=b.gnormy*e-b.gnormx*h,o=b.gnormy*k-b.gnormx*s,r=1/(o-q),q=(-b.tp1-q)*r;q>t.epsilon&&(e+=l*q,h+=m*q);o=(-b.tp0-o)*r;o<-t.epsilon&&(k+=l*o,s+=m*o);m=l=0;m=j;l=b.gnormx*m;m*=b.gnormy;c.lnormx=b.lnormx;c.lnormy=b.lnormy;c.lproj=b.lprojection;c.radius=0;c.rev=d!=(-1==j);c.ptype=c.rev?1:0;o=e*b.gnormx+h*b.gnormy-b.gprojection;j=k*b.gnormx+s*b.gnormy-b.gprojection;if(0<
o&&0<j)return!1;d&&(l=-l,m=-m);d=c.injectContact(e-0.5*b.gnormx*o,h-0.5*b.gnormy*o,l,m,o,c.rev?1:0,0<o);e-=1*a.body.posx;h-=1*a.body.posy;d.inner.lr1x=e*a.body.axisy+h*a.body.axisx;d.inner.lr1y=h*a.body.axisy-e*a.body.axisx;d=c.injectContact(k-0.5*b.gnormx*j,s-0.5*b.gnormy*j,l,m,j,c.rev?0:1,0<j);k-=1*a.body.posx;s-=1*a.body.posy;d.inner.lr1x=k*a.body.axisy+s*a.body.axisx;d.inner.lr1y=s*a.body.axisy-k*a.body.axisx;1==g?(c.__ref_edge1=b,c.__ref_edge2=i):(c.__ref_edge2=b,c.__ref_edge1=i);return!0}}}else{j=
-1.0E100;i=!0;e=g=null;h=b.polygon.gverts.next;for(k=b.polygon.edges.head;null!=k;){s=k.elt;l=s.gnormx*a.circle.worldCOMx+s.gnormy*a.circle.worldCOMy-s.gprojection-a.circle.radius;if(0<l){i=!1;break}l>j&&(j=l,g=s,e=h);h=h.next;k=k.next}if(i){i=e;e=null==e.next?b.polygon.gverts.next:e.next;h=a.circle.worldCOMy*g.gnormx-a.circle.worldCOMx*g.gnormy;if(h<=i.y*g.gnormx-i.x*g.gnormy)return j=a.circle.radius,h=e=0,e=i.x-a.circle.worldCOMx,h=i.y-a.circle.worldCOMy,k=e*e+h*h,k>j*j?j=null:k<t.epsilon*t.epsilon?
j=c.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-j,0,null):(k=1/Math.sqrt(k),s=k<t.epsilon?1.0E100:1/k,l=0.5+(a.circle.radius-0.5*j)*k,j=d?c.injectContact(a.circle.worldCOMx+e*l,a.circle.worldCOMy+h*l,-e*k,-h*k,s-j,0,null):c.injectContact(a.circle.worldCOMx+e*l,a.circle.worldCOMy+h*l,e*k,h*k,s-j,0,null)),null!=j&&(e=j.inner,c.ptype=2,k=h=0,h=i.x-b.polygon.body.posx,k=i.y-b.polygon.body.posy,c.__ref_edge1=g,c.__ref_vertex=-1,d?(e.lr1x=h*b.polygon.body.axisy+k*b.polygon.body.axisx,e.lr1y=
k*b.polygon.body.axisy-h*b.polygon.body.axisx,e.lr2x=a.circle.localCOMx,e.lr2y=a.circle.localCOMy):(e.lr2x=h*b.polygon.body.axisy+k*b.polygon.body.axisx,e.lr2y=k*b.polygon.body.axisy-h*b.polygon.body.axisx,e.lr1x=a.circle.localCOMx,e.lr1y=a.circle.localCOMy),c.radius=a.circle.radius),null!=j;if(h>=e.y*g.gnormx-e.x*g.gnormy)return i=a.circle.radius,h=j=0,j=e.x-a.circle.worldCOMx,h=e.y-a.circle.worldCOMy,k=j*j+h*h,k>i*i?i=null:k<t.epsilon*t.epsilon?i=c.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,
1,0,-i,0,null):(k=1/Math.sqrt(k),s=k<t.epsilon?1.0E100:1/k,l=0.5+(a.circle.radius-0.5*i)*k,i=d?c.injectContact(a.circle.worldCOMx+j*l,a.circle.worldCOMy+h*l,-j*k,-h*k,s-i,0,null):c.injectContact(a.circle.worldCOMx+j*l,a.circle.worldCOMy+h*l,j*k,h*k,s-i,0,null)),null!=i&&(j=i.inner,c.ptype=2,k=h=0,h=e.x-b.polygon.body.posx,k=e.y-b.polygon.body.posy,c.__ref_edge1=g,c.__ref_vertex=1,d?(j.lr1x=h*b.polygon.body.axisy+k*b.polygon.body.axisx,j.lr1y=k*b.polygon.body.axisy-h*b.polygon.body.axisx,j.lr2x=a.circle.localCOMx,
j.lr2y=a.circle.localCOMy):(j.lr2x=h*b.polygon.body.axisy+k*b.polygon.body.axisx,j.lr2y=k*b.polygon.body.axisy-h*b.polygon.body.axisx,j.lr1x=a.circle.localCOMx,j.lr1y=a.circle.localCOMy),c.radius=a.circle.radius),null!=i;i=b=0;i=a.circle.radius+0.5*j;b=g.gnormx*i;i*=g.gnormy;h=e=0;e=a.circle.worldCOMx-b;h=a.circle.worldCOMy-i;b=d?c.injectContact(e,h,g.gnormx,g.gnormy,j,0,null):c.injectContact(e,h,-g.gnormx,-g.gnormy,j,0,null);c.ptype=d?0:1;c.lnormx=g.lnormx;c.lnormy=g.lnormy;c.rev=!d;c.lproj=g.lprojection;
c.radius=a.circle.radius;b.inner.lr1x=a.circle.localCOMx;b.inner.lr1y=a.circle.localCOMy;c.__ref_edge1=g;c.__ref_vertex=0;return!0}}else if(g=a.circle.radius+b.circle.radius,j=i=0,i=b.circle.worldCOMx-a.circle.worldCOMx,j=b.circle.worldCOMy-a.circle.worldCOMy,e=i*i+j*j,e>g*g?g=null:e<t.epsilon*t.epsilon?g=c.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-g,0,null):(e=1/Math.sqrt(e),h=e<t.epsilon?1.0E100:1/e,k=0.5+(a.circle.radius-0.5*g)*e,g=d?c.injectContact(a.circle.worldCOMx+i*k,a.circle.worldCOMy+
j*k,-i*e,-j*e,h-g,0,null):c.injectContact(a.circle.worldCOMx+i*k,a.circle.worldCOMy+j*k,i*e,j*e,h-g,0,null)),null!=g)return g=g.inner,d?(g.lr1x=b.circle.localCOMx,g.lr1y=b.circle.localCOMy,g.lr2x=a.circle.localCOMx,g.lr2y=a.circle.localCOMy):(g.lr1x=a.circle.localCOMx,g.lr1y=a.circle.localCOMy,g.lr2x=b.circle.localCOMx,g.lr2y=b.circle.localCOMy),c.radius=a.circle.radius+b.circle.radius,c.ptype=2,!0;return!1};R.testCollide_safe=function(a,b){if(b.type==f.id_ShapeType_CIRCLE)var c=a,a=b,b=c;return R.testCollide(a,
b)};R.testCollide=function(a,b){if(b.type==f.id_ShapeType_POLYGON){if(a.type==f.id_ShapeType_POLYGON){for(var c=!0,d=a.polygon.edges.head;null!=d;){for(var e=d.elt,h=1.0E100,g=b.polygon.gverts.next;null!=g;){var i=g,i=e.gnormx*i.x+e.gnormy*i.y;i<h&&(h=i);g=g.next}h-=e.gprojection;if(0<h){c=!1;break}d=d.next}if(c){for(d=b.polygon.edges.head;null!=d;){e=d.elt;h=1.0E100;for(g=a.polygon.gverts.next;null!=g;)i=g,i=e.gnormx*i.x+e.gnormy*i.y,i<h&&(h=i),g=g.next;h-=e.gprojection;if(0<h){c=!1;break}d=d.next}return c}}else{d=
c=null;e=!0;h=-1.0E100;g=b.polygon.gverts.next;for(i=b.polygon.edges.head;null!=i;){var j=i.elt,k=j.gnormx*a.circle.worldCOMx+j.gnormy*a.circle.worldCOMy-j.gprojection-a.circle.radius;if(0<k){e=!1;break}k>h&&(h=k,c=j,d=g);g=g.next;i=i.next}if(e){e=d;d=null==d.next?b.polygon.gverts.next:d.next;h=a.circle.worldCOMy*c.gnormx-a.circle.worldCOMx*c.gnormy;if(h<=e.y*c.gnormx-e.x*c.gnormy)return c=a.circle.radius,h=d=0,d=e.x-a.circle.worldCOMx,h=e.y-a.circle.worldCOMy,d*d+h*h<=c*c;return h>=d.y*c.gnormx-
d.x*c.gnormy?(c=a.circle.radius,h=e=0,e=d.x-a.circle.worldCOMx,h=d.y-a.circle.worldCOMy,e*e+h*h<=c*c):!0}}return!1}c=a.circle.radius+b.circle.radius;e=d=0;d=b.circle.worldCOMx-a.circle.worldCOMx;e=b.circle.worldCOMy-a.circle.worldCOMy;return d*d+e*e<=c*c};R.flowCollide=function(a,b,c){if(b.type==f.id_ShapeType_POLYGON){if(a.type==f.id_ShapeType_POLYGON){for(var d=[],e=[],h=!0,g=!0,i=a.polygon.edges.head;null!=i;){for(var j=i.elt,k=1.0E100,s=0,l=b.polygon.gverts.next;null!=l;){var m=l,o=j.gnormx*m.x+
j.gnormy*m.y;o<k&&(k=o);o>=j.gprojection+t.epsilon&&(e[s]=!0,g=!1);s++;l=l.next}k-=j.gprojection;if(0<k){h=!1;break}i=i.next}if(g)return b.polygon.validate_worldCOM(),c.overlap=b.polygon.area,c.centroidx=b.polygon.worldCOMx,c.centroidy=b.polygon.worldCOMy,null,!0;if(h){for(var g=!0,q=b.polygon.edges.head;null!=q;){for(var r=q.elt,v=1.0E100,x=0,u=a.polygon.gverts.next;null!=u;){var y=u,p=r.gnormx*y.x+r.gnormy*y.y;p<v&&(v=p);p>=r.gprojection+t.epsilon&&(d[x]=!0,g=!1);x++;u=u.next}v-=r.gprojection;if(0<
v){h=!1;break}q=q.next}if(g)return a.polygon.validate_worldCOM(),c.overlap=a.polygon.area,c.centroidx=a.polygon.worldCOMx,c.centroidy=a.polygon.worldCOMy,null,!0;if(h){for(;null!=R.flowpoly.head;){var z=R.flowpoly.pop_unsafe();if(!z._inuse){var C=z;null!=C.outer&&(C.outer.zpp_inner=null,C.outer=null);C._isimmutable=null;C._validate=null;C._invalidate=null;C.next=ta.zpp_pool;ta.zpp_pool=C}}for(var w=null,D=!1,A=a.polygon.gverts.next,H=0,B=b.polygon.gverts.next,E=0,G=0,I=b.polygon.edgeCnt;G<I;){var L=
G++;if(e[L])B=B.next;else{E=L;break}}if(null==B){for(var B=b.polygon.gverts.next,D=!0,K=0,N=a.polygon.edgeCnt;K<N;){var O=K++;if(d[O])A=A.next;else{H=O;break}}null==A?A=a.polygon.gverts.next:(R.flowpoly.add(A),w=R.flowpoly.head.elt)}else R.flowpoly.add(B),w=R.flowpoly.head.elt;var P=1;if(null==R.flowpoly.head){for(var S=!0,T=a.polygon.gverts.next,J=T,M=T.next;null!=M;){for(var U=M,X=2,W=b.polygon.gverts.next,V=W,Y=W.next;null!=Y;){var ba=Y,Z=0;(function(){var a=0,b=0,a=J.x-V.x,b=J.y-V.y,c=0,d=0,c=
U.x-J.x,d=U.y-J.y,e=0,h=0,e=ba.x-V.x,h=ba.y-V.y,f=d*e-c*h;f*f>t.epsilon*t.epsilon?(f=1/f,e=(h*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(Z=e,a=!0):a=!1):a=!1):a=!1;return a})(this)&&Z<X&&(X=Z,B=W);W=Y;V=ba;Y=Y.next}var da=Y=b.polygon.gverts.next,ha=0;(function(){var a=0,b=0,a=J.x-V.x,b=J.y-V.y,c=0,d=0,c=U.x-J.x,d=U.y-J.y,e=0,h=0,e=da.x-V.x,h=da.y-V.y,f=d*e-c*h;f*f>t.epsilon*t.epsilon?(f=1/f,e=(h*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<
1-t.epsilon?(ha=e,a=!0):a=!1):a=!1):a=!1;return a})(this)&&ha<X&&(X=ha,B=W);if(2!=X){var ga=0,ma=0,la=X,ga=J.x+(U.x-J.x)*la,ma=J.y+(U.y-J.y)*la,w=ta.get(ga,ma,null);R.flowpoly.add(w);D=!0;A=T;S=!1;break}T=M;J=U;M=M.next}if(S){for(var fa=M=a.polygon.gverts.next,F=2,ka=b.polygon.gverts.next,ia=ka,ja=ka.next;null!=ja;){var ra=ja,na=0;(function(){var a=0,b=0,a=J.x-ia.x,b=J.y-ia.y,c=0,d=0,c=fa.x-J.x,d=fa.y-J.y,e=0,h=0,e=ra.x-ia.x,h=ra.y-ia.y,f=d*e-c*h;f*f>t.epsilon*t.epsilon?(f=1/f,e=(h*a-e*b)*f,e>t.epsilon&&
e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(na=e,a=!0):a=!1):a=!1):a=!1;return a})(this)&&na<F&&(F=na,B=ka);ka=ja;ia=ra;ja=ja.next}var xa=ja=b.polygon.gverts.next,sa=0;(function(){var a=0,b=0,a=J.x-ia.x,b=J.y-ia.y,c=0,d=0,c=fa.x-J.x,d=fa.y-J.y,e=0,h=0,e=xa.x-ia.x,h=xa.y-ia.y,f=d*e-c*h;f*f>t.epsilon*t.epsilon?(f=1/f,e=(h*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(sa=e,a=!0):a=!1):a=!1):a=!1;return a})(this)&&sa<F&&(F=sa,B=ka);if(2!=F){var ea=0,pa=0,
ua=F,ea=J.x+(fa.x-J.x)*ua,pa=J.y+(fa.y-J.y)*ua,w=ta.get(ea,pa,null);R.flowpoly.add(w);D=!0;A=T}}P=2}for(;;)if(D)if(A=A.next,H++,null==A&&(A=a.polygon.gverts.next,H=0),d[H]){var qa=R.flowpoly.head.elt,za=A,ca=B,Ga=B.next;null==Ga&&(Ga=b.polygon.gverts.next);var wa=-1,ya=null,Ba=0,Qa=0,Ia=Ga,$=Ga;do{var Ha=$,La=0;if(function(){var a=0,b=0,a=ca.x-qa.x,b=ca.y-qa.y,c=0,d=0,c=Ha.x-ca.x,d=Ha.y-ca.y,e=0,h=0,e=za.x-qa.x,h=za.y-qa.y,f=d*e-c*h;f*f>t.epsilon*t.epsilon?(f=1/f,e=(h*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?
(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(La=e,a=!0):a=!1):a=!1):a=!1;return a}(this)&&La>=wa)if(ya=B,Ba=E,++Qa==P){wa=La;$=Ia;break}else wa=La;ca=Ha;B=$;E++;E>=b.polygon.edgeCnt&&(E=0);$=$.next;null==$&&($=b.polygon.gverts.next)}while(0);for(;$!=Ia;){var db=$,Ca=0;if(function(){var a=0,b=0,a=ca.x-qa.x,b=ca.y-qa.y,c=0,d=0,c=db.x-ca.x,d=db.y-ca.y,e=0,h=0,e=za.x-qa.x,h=za.y-qa.y,f=d*e-c*h;f*f>t.epsilon*t.epsilon?(f=1/f,e=(h*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?
(Ca=e,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Ca>=wa)if(ya=B,Ba=E,++Qa==P){wa=Ca;$=Ia;break}else wa=Ca;ca=db;B=$;E++;E>=b.polygon.edgeCnt&&(E=0);$=$.next;null==$&&($=b.polygon.gverts.next)}if(null==ya)break;var Da=ya,Sa=ya.next;null==Sa&&(Sa=b.polygon.gverts.next);var Ta=Sa,Wa=0,Xa=0,bb=wa,Wa=Da.x+(Ta.x-Da.x)*bb,Xa=Da.y+(Ta.y-Da.y)*bb;if(null!=w&&qc.vec_dsq(Wa,Xa,w.x,w.y)<t.epsilon)break;R.flowpoly.add(ta.get(Wa,Xa,null));null==w&&(w=R.flowpoly.head.elt);B=ya;E=Ba;D=!D;P=2}else{var Ra=A;if(null!=
w&&qc.vec_dsq(Ra.x,Ra.y,w.x,w.y)<t.epsilon)break;R.flowpoly.add(Ra);null==w&&(w=R.flowpoly.head.elt);P=1}else if(B=B.next,E++,null==B&&(B=b.polygon.gverts.next,E=0),e[E]){var Ka=R.flowpoly.head.elt,Na=B,Q=A,oa=A.next;null==oa&&(oa=a.polygon.gverts.next);var Ea=-1,Aa=null,Za=0,ab=0,ib=oa,aa=oa;do{var cb=aa,va=0;if(function(){var a=0,b=0,a=Q.x-Ka.x,b=Q.y-Ka.y,c=0,d=0,c=cb.x-Q.x,d=cb.y-Q.y,e=0,h=0,e=Na.x-Ka.x,h=Na.y-Ka.y,f=d*e-c*h;f*f>t.epsilon*t.epsilon?(f=1/f,e=(h*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?
(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(va=e,a=!0):a=!1):a=!1):a=!1;return a}(this)&&va>=Ea)if(Aa=A,Za=H,++ab==P){Ea=va;aa=ib;break}else Ea=va;Q=cb;A=aa;H++;H>=a.polygon.edgeCnt&&(H=0);aa=aa.next;null==aa&&(aa=a.polygon.gverts.next)}while(0);for(;aa!=ib;){var Ll=aa,Ua=0;if(function(){var a=0,b=0,a=Q.x-Ka.x,b=Q.y-Ka.y,c=0,d=0,c=Ll.x-Q.x,d=Ll.y-Q.y,e=0,h=0,e=Na.x-Ka.x,h=Na.y-Ka.y,f=d*e-c*h;f*f>t.epsilon*t.epsilon?(f=1/f,e=(h*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?
(Ua=e,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Ua>=Ea)if(Aa=A,Za=H,++ab==P){Ea=Ua;aa=ib;break}else Ea=Ua;Q=Ll;A=aa;H++;H>=a.polygon.edgeCnt&&(H=0);aa=aa.next;null==aa&&(aa=a.polygon.gverts.next)}if(null==Aa)break;var Ma=Aa,lb=Aa.next;null==lb&&(lb=a.polygon.gverts.next);var wb=lb,kb=0,sb=0,xb=Ea,kb=Ma.x+(wb.x-Ma.x)*xb,sb=Ma.y+(wb.y-Ma.y)*xb;if(null!=w&&qc.vec_dsq(kb,sb,w.x,w.y)<t.epsilon)break;R.flowpoly.add(ta.get(kb,sb,null));null==w&&(w=R.flowpoly.head.elt);A=Aa;H=Za;D=!D;P=2}else{var vb=B;if(null!=
w&&qc.vec_dsq(vb.x,vb.y,w.x,w.y)<t.epsilon)break;R.flowpoly.add(vb);null==w&&(w=R.flowpoly.head.elt);P=1}if(null!=R.flowpoly.head&&null!=R.flowpoly.head.next&&null!=R.flowpoly.head.next.next){for(var Fa=0,eb=0,$a=0,Fa=$a=eb=0,Xd=R.flowpoly.head,gb=Xd.elt,Xd=Xd.next,qb=Xd.elt,Xd=Xd.next;null!=Xd;)var fb=Xd.elt,Fa=Fa+qb.x*(fb.y-gb.y),Gb=fb.y*qb.x-fb.x*qb.y,eb=eb+(qb.x+fb.x)*Gb,$a=$a+(qb.y+fb.y)*Gb,gb=qb,qb=fb,Xd=Xd.next;var Xd=R.flowpoly.head,mb=Xd.elt,Fa=Fa+qb.x*(mb.y-gb.y),Jb=mb.y*qb.x-mb.x*qb.y,
eb=eb+(qb.x+mb.x)*Jb,$a=$a+(qb.y+mb.y)*Jb,gb=qb,qb=mb,Xd=Xd.next,rb=Xd.elt,Fa=Fa+qb.x*(rb.y-gb.y),Pb=rb.y*qb.x-rb.x*qb.y,eb=eb+(qb.x+rb.x)*Pb,$a=$a+(qb.y+rb.y)*Pb,Fa=0.5*Fa,Sb=1/(6*Fa),eb=eb*Sb,$a=$a*Sb;c.overlap=-Fa;c.centroidx=eb;c.centroidy=$a;null;return!0}}}return!1}for(var Hb=[],Ub=!0,nb=null,Ab=null,ac=-1.0E100,cc=!0,Ob=b.polygon.gverts.next,fc=0,Eb=b.polygon.edges.head;null!=Eb;){var tb=Eb.elt,ub=tb.gnormx*a.circle.worldCOMx+tb.gnormy*a.circle.worldCOMy;if(ub>tb.gprojection+a.circle.radius){cc=
!1;break}else ub+a.circle.radius>tb.gprojection+t.epsilon&&(Ub=!1,Hb[fc]=!0);ub-=tb.gprojection+a.circle.radius;ub>ac&&(ac=ub,nb=tb,Ab=Ob);Ob=Ob.next;fc++;Eb=Eb.next}if(cc){if(Ub)return c.overlap=a.circle.area,c.centroidx=a.circle.worldCOMx,c.centroidy=a.circle.worldCOMy,null,!0;var Fb=Ab,zb;zb=null==Ab.next?b.polygon.gverts.next:Ab.next;var ic=a.circle.worldCOMy*nb.gnormx-a.circle.worldCOMx*nb.gnormy;if(ic<=Fb.y*nb.gnormx-Fb.x*nb.gnormy?function(){var b=a.circle.radius,c=0,d=0,c=Fb.x-a.circle.worldCOMx,
d=Fb.y-a.circle.worldCOMy;return c*c+d*d<=b*b}(this):ic>=zb.y*nb.gnormx-zb.x*nb.gnormy?function(){var b=a.circle.radius,c=0,d=0,c=zb.x-a.circle.worldCOMx,d=zb.y-a.circle.worldCOMy;return c*c+d*d<=b*b}(this):1){for(var Lb=[],$b=0,pc=!0,Oa=null,Ya=0,Db=b.polygon.gverts.next;null!=Db;){var vc=Db,Sc=qc.vec_dsq(vc.x,vc.y,a.circle.worldCOMx,a.circle.worldCOMy);(Lb[$b]=Sc<=a.circle.radius*a.circle.radius)?(Ya=$b,Oa=Db):pc=!1;$b++;Db=Db.next}if(pc)return b.polygon.validate_worldCOM(),c.overlap=b.polygon.area,
c.centroidx=b.polygon.worldCOMx,c.centroidy=b.polygon.worldCOMy,null,!0;for(;null!=R.flowpoly.head;){var yc=R.flowpoly.pop_unsafe();if(!yc._inuse){var hb=yc;null!=hb.outer&&(hb.outer.zpp_inner=null,hb.outer=null);hb._isimmutable=null;hb._validate=null;hb._invalidate=null;hb.next=ta.zpp_pool;ta.zpp_pool=hb}}R.flowsegs.clear();var Gc=null,Va=1;null==Oa?(Oa=b.polygon.gverts.next,Va=2):R.flowpoly.add(Gc=Oa);for(;0!=Va;)if(1==Va)if(Oa=Oa.next,null==Oa&&(Oa=b.polygon.gverts.next),Ya++,Ya>=b.polygon.edgeCnt&&
(Ya=0),Lb[Ya]){if(qc.vec_dsq(Gc.x,Gc.y,Oa.x,Oa.y)<t.epsilon)break;R.flowpoly.add(Oa)}else{var jb=R.flowpoly.head.elt,Tb=Oa,Vb=0,Xb=0,Vb=Tb.x-jb.x,Xb=Tb.y-jb.y,Yb=0,Zb=0,Yb=jb.x-a.circle.worldCOMx,Zb=jb.y-a.circle.worldCOMy,Mb=Vb*Vb+Xb*Xb,bc=2*(Yb*Vb+Zb*Xb),Kc=Math.sqrt(bc*bc-4*Mb*(Yb*Yb+Zb*Zb-a.circle.radius*a.circle.radius)),Mb=1/(2*Mb),Mc=(-bc-Kc)*Mb,sc=0,uc=0,Nc=Mc<t.epsilon?(-bc+Kc)*Mb:Mc,sc=jb.x+(Tb.x-jb.x)*Nc,uc=jb.y+(Tb.y-jb.y)*Nc;if(qc.vec_dsq(Gc.x,Gc.y,sc,uc)<t.epsilon)break;R.flowpoly.add(ta.get(sc,
uc,null));Va=2}else if(2==Va){var ec=Oa.next;null==ec&&(ec=b.polygon.gverts.next);var Ja=Oa,Va=0,yb=ec,Hc=ec;do{var Pa=Hc,gc=Ya+1;gc==b.polygon.edgeCnt&&(gc=0);if(Hb[Ya])if(Lb[gc]){var hc=0,kc=0,hc=Pa.x-Ja.x,kc=Pa.y-Ja.y,lc=0,oc=0,lc=Ja.x-a.circle.worldCOMx,oc=Ja.y-a.circle.worldCOMy,dc=hc*hc+kc*kc,tc=2*(lc*hc+oc*kc),bd=Math.sqrt(tc*tc-4*dc*(lc*lc+oc*oc-a.circle.radius*a.circle.radius)),dc=1/(2*dc),cd=(-tc-bd)*dc,Oc=0,Qc=0,ed=cd<t.epsilon?(-tc+bd)*dc:cd,Oc=Ja.x+(Pa.x-Ja.x)*ed,Qc=Ja.y+(Pa.y-Ja.y)*
ed;if(qc.vec_dsq(Gc.x,Gc.y,Oc,Qc)<t.epsilon){Va=0;Hc=yb;break}var fd=ta.get(Oc,Qc,null);R.flowsegs.add(R.flowpoly.head.elt);R.flowsegs.add(fd);R.flowpoly.add(fd);Va=1;Hc=yb;break}else{var wc=0,xc=0,Rc,zc=0,Bc=0,zc=Pa.x-Ja.x,Bc=Pa.y-Ja.y,Cc=0,Dc=0,Cc=Ja.x-a.circle.worldCOMx,Dc=Ja.y-a.circle.worldCOMy,Wb=zc*zc+Bc*Bc,rc=2*(Cc*zc+Dc*Bc),Nb=rc*rc-4*Wb*(Cc*Cc+Dc*Dc-a.circle.radius*a.circle.radius);Nb*Nb<t.epsilon?(wc=0>Nb?10:xc=-rc/(2*Wb),Rc=!1):(Nb=Math.sqrt(Nb),Wb=1/(2*Wb),wc=(-rc-Nb)*Wb,xc=(-rc+Nb)*
Wb,Rc=!0);if(wc<1-t.epsilon&&xc>t.epsilon){var $c=0,dd=0,sd=wc,$c=Ja.x+(Pa.x-Ja.x)*sd,dd=Ja.y+(Pa.y-Ja.y)*sd;if(null!=Gc&&qc.vec_dsq(Gc.x,Gc.y,$c,dd)<t.epsilon){Va=0;Hc=yb;break}var td=ta.get($c,dd,null);null!=R.flowpoly.head&&(R.flowsegs.add(R.flowpoly.head.elt),R.flowsegs.add(td));R.flowpoly.add(td);null==Gc&&(Gc=R.flowpoly.head.elt);if(Rc){var ud=0,vd=0,yd=xc,ud=Ja.x+(Pa.x-Ja.x)*yd,vd=Ja.y+(Pa.y-Ja.y)*yd;R.flowpoly.add(ta.get(ud,vd,null))}}}Ja=Pa;Oa=Hc;Ya=gc;Hc=Hc.next;null==Hc&&(Hc=b.polygon.gverts.next)}while(0);
for(;Hc!=yb;){var ob=Hc,Uc=Ya+1;Uc==b.polygon.edgeCnt&&(Uc=0);if(Hb[Ya])if(Lb[Uc]){var Vc=0,Xc=0,Vc=ob.x-Ja.x,Xc=ob.y-Ja.y,Zc=0,ad=0,Zc=Ja.x-a.circle.worldCOMx,ad=Ja.y-a.circle.worldCOMy,Pc=Vc*Vc+Xc*Xc,gd=2*(Zc*Vc+ad*Xc),Id=Math.sqrt(gd*gd-4*Pc*(Zc*Zc+ad*ad-a.circle.radius*a.circle.radius)),Pc=1/(2*Pc),Jd=(-gd-Id)*Pc,wd=0,xd=0,Ld=Jd<t.epsilon?(-gd+Id)*Pc:Jd,wd=Ja.x+(ob.x-Ja.x)*Ld,xd=Ja.y+(ob.y-Ja.y)*Ld;if(qc.vec_dsq(Gc.x,Gc.y,wd,xd)<t.epsilon){Va=0;Hc=yb;break}var Md=ta.get(wd,xd,null);R.flowsegs.add(R.flowpoly.head.elt);
R.flowsegs.add(Md);R.flowpoly.add(Md);Va=1;Hc=yb;break}else{var hd=0,id=0,zd,jd=0,kd=0,jd=ob.x-Ja.x,kd=ob.y-Ja.y,ld=0,md=0,ld=Ja.x-a.circle.worldCOMx,md=Ja.y-a.circle.worldCOMy,Ac=jd*jd+kd*kd,Tc=2*(ld*jd+md*kd),jc=Tc*Tc-4*Ac*(ld*ld+md*md-a.circle.radius*a.circle.radius);jc*jc<t.epsilon?(hd=0>jc?10:id=-Tc/(2*Ac),zd=!1):(jc=Math.sqrt(jc),Ac=1/(2*Ac),hd=(-Tc-jc)*Ac,id=(-Tc+jc)*Ac,zd=!0);if(hd<1-t.epsilon&&id>t.epsilon){var Ad=0,Bd=0,Od=hd,Ad=Ja.x+(ob.x-Ja.x)*Od,Bd=Ja.y+(ob.y-Ja.y)*Od;if(null!=Gc&&qc.vec_dsq(Gc.x,
Gc.y,Ad,Bd)<t.epsilon){Va=0;Hc=yb;break}var Qd=ta.get(Ad,Bd,null);null!=R.flowpoly.head&&(R.flowsegs.add(R.flowpoly.head.elt),R.flowsegs.add(Qd));R.flowpoly.add(Qd);null==Gc&&(Gc=R.flowpoly.head.elt);if(zd){var Sd=0,Td=0,Ud=id,Sd=Ja.x+(ob.x-Ja.x)*Ud,Td=Ja.y+(ob.y-Ja.y)*Ud;R.flowpoly.add(ta.get(Sd,Td,null))}}}Ja=ob;Oa=Hc;Ya=Uc;Hc=Hc.next;null==Hc&&(Hc=b.polygon.gverts.next)}}if(null==R.flowpoly.head)return!1;if(null==R.flowpoly.head.next){for(var Vd=!0,nd=b.polygon.edges.head;null!=nd;){var Ed=nd.elt;
if(Ed.gnormx*a.circle.worldCOMx+Ed.gnormy*a.circle.worldCOMy>Ed.gprojection){Vd=!1;break}nd=nd.next}return Vd?(c.overlap=a.circle.area,c.centroidx=a.circle.worldCOMx,c.centroidy=a.circle.worldCOMy,null,!0):!1}var mc=0,nc=0,Ec=0;if(null!=R.flowpoly.head.next.next){for(var pb=0,Bb=0,Cb=0,pb=Cb=Bb=0,Yd=R.flowpoly.head,Wc=Yd.elt,Yd=Yd.next,Ic=Yd.elt,Yd=Yd.next;null!=Yd;)var Fc=Yd.elt,pb=pb+Ic.x*(Fc.y-Wc.y),Zd=Fc.y*Ic.x-Fc.x*Ic.y,Bb=Bb+(Ic.x+Fc.x)*Zd,Cb=Cb+(Ic.y+Fc.y)*Zd,Wc=Ic,Ic=Fc,Yd=Yd.next;var Yd=
R.flowpoly.head,Lc=Yd.elt,pb=pb+Ic.x*(Lc.y-Wc.y),$d=Lc.y*Ic.x-Lc.x*Ic.y,Bb=Bb+(Ic.x+Lc.x)*$d,Cb=Cb+(Ic.y+Lc.y)*$d,Wc=Ic,Ic=Lc,Yd=Yd.next,Yc=Yd.elt,pb=pb+Ic.x*(Yc.y-Wc.y),ae=Yc.y*Ic.x-Yc.x*Ic.y,Bb=Bb+(Ic.x+Yc.x)*ae,Cb=Cb+(Ic.y+Yc.y)*ae,pb=0.5*pb,be=1/(6*pb),Bb=Bb*be,Cb=Cb*be,ce=-pb,mc=mc+Bb*ce,nc=nc+Cb*ce,Ec=Ec-pb}else R.flowsegs.add(R.flowpoly.head.elt),R.flowsegs.add(R.flowpoly.head.next.elt);for(;null!=R.flowsegs.head;)var qd=R.flowsegs.pop_unsafe(),rd=R.flowsegs.pop_unsafe(),ee=0,fe=0,ee=rd.x-
qd.x,fe=rd.y-qd.y,Qb=0,Rb=0,Qb=ee,Rb=fe,ge=1/Math.sqrt(Qb*Qb+Rb*Rb),Qb=Qb*ge,Rb=Rb*ge,se=Qb,Qb=-Rb,Rb=se,Ib=0,Kb=0,Ib=qd.x+rd.x,Kb=qd.y+rd.y,Ib=0.5*Ib,Kb=0.5*Kb,Ib=Ib-1*a.circle.worldCOMx,Kb=Kb-1*a.circle.worldCOMy,Rd=0,ke=0,le=Qb*Ib+Rb*Kb,Dd=le/a.circle.radius,pd=Math.sqrt(1-Dd*Dd),me=Math.acos(Dd),Rd=a.circle.radius*(a.circle.radius*me-le*pd),ke=0.6666666666666666*a.circle.radius*pd*pd*pd/(me-Dd*pd),Ib=a.circle.worldCOMx,Kb=a.circle.worldCOMy,ne=ke,Ib=Ib+Qb*ne,Kb=Kb+Rb*ne,oe=Rd,mc=mc+Ib*oe,nc=nc+
Kb*oe,Ec=Ec+Rd;var pe=1/Ec,mc=mc*pe,nc=nc*pe;c.overlap=Ec;c.centroidx=mc;c.centroidy=nc;null;return!0}}return!1}var Jc=a.circle,od=b.circle,Gd=0,Hd=0,Gd=od.worldCOMx-Jc.worldCOMx,Hd=od.worldCOMy-Jc.worldCOMy,qe=Jc.radius+od.radius,de=Gd*Gd+Hd*Hd;if(de>qe*qe)return!1;if(de<t.epsilon*t.epsilon)Jc.radius<od.radius?(c.overlap=Jc.area,c.centroidx=Jc.worldCOMx,c.centroidy=Jc.worldCOMy):(c.overlap=od.area,c.centroidx=od.worldCOMx,c.centroidy=od.worldCOMy);else{var Kd=Math.sqrt(de),re=1/Kd,Nd=0.5*(Kd-(od.radius*
od.radius-Jc.radius*Jc.radius)*re);if(Nd<=-Jc.radius)c.overlap=Jc.area,c.centroidx=Jc.worldCOMx,c.centroidy=Jc.worldCOMy;else{var he=Kd-Nd;if(he<=-od.radius)c.overlap=od.area,c.centroidx=od.worldCOMx,c.centroidy=od.worldCOMy;else{var ie=0,te=0,je=0,ue=0,Pd=Nd/Jc.radius,Cd=Math.sqrt(1-Pd*Pd),ve=Math.acos(Pd),ie=Jc.radius*(Jc.radius*ve-Nd*Cd),te=0.6666666666666666*Jc.radius*Cd*Cd*Cd/(ve-Pd*Cd),Wd=he/od.radius,Fd=Math.sqrt(1-Wd*Wd),we=Math.acos(Wd),je=od.radius*(od.radius*we-he*Fd),ue=0.6666666666666666*
od.radius*Fd*Fd*Fd/(we-Wd*Fd),xe=ie+je,ye=(te*ie+(Kd-ue)*je)/xe*re;c.overlap=xe;c.centroidx=Jc.worldCOMx+Gd*ye;c.centroidy=Jc.worldCOMy+Hd*ye}}}null;return!0};var wb=function(){this.toiDistance=0;this.next=null;this.inner=!1;this.normal=this.shape=this.convex=this.position=this.ray=null};g["zpp_nape.geom.ZPP_ConvexRayResult"]=wb;wb.__name__=["zpp_nape","geom","ZPP_ConvexRayResult"];wb.getRay=function(a,b,c,d){var e;null==wb.rayPool?(wb.internal=!0,e=new Ak,e.zpp_inner=new wb,e.zpp_inner.ray=e,wb.internal=
!1):(e=wb.rayPool.ray,wb.rayPool=wb.rayPool.next,e.zpp_inner.next=null);var h=e.zpp_inner;h.normal=a;a.zpp_inner._immutable=!0;h.toiDistance=b;h.inner=c;h.shape=d;return e};wb.prototype={free:function(){this.normal.zpp_inner._immutable=!1;this.normal.dispose();null!=this.position&&(this.position.zpp_inner._immutable=!1,this.position.dispose());this.shape=null;this.toiDistance=0;null!=this.convex?(this.next=wb.convexPool,wb.convexPool=this):(this.next=wb.rayPool,wb.rayPool=this)},__class__:wb};var yl=
function(){this.next=null;this.x=this.y=0};g["zpp_nape.geom.ZPP_GeomVert"]=yl;yl.__name__=["zpp_nape","geom","ZPP_GeomVert"];yl.prototype={__class__:yl};var zl=function(){this.outer=this.vertices=null};g["zpp_nape.geom.ZPP_GeomPoly"]=zl;zl.__name__=["zpp_nape","geom","ZPP_GeomPoly"];zl.prototype={__class__:zl};var Al=function(){this.a=this.b=this.c=this.d=this.tx=this.ty=0};g["zpp_nape.geom.ZPP_Mat23"]=Al;Al.__name__=["zpp_nape","geom","ZPP_Mat23"];Al.prototype={__class__:Al};var Bl=function(){this.x=
null;this.m=this.n=0};g["zpp_nape.geom.ZPP_MatMN"]=Bl;Bl.__name__=["zpp_nape","geom","ZPP_MatMN"];Bl.prototype={__class__:Bl};var yk=function(){this.zip_dir=!1;this.maxdist=this.originx=this.originy=this.dirx=this.diry=this.idirx=this.idiry=this.normalx=this.normaly=this.absnormalx=this.absnormaly=0;this.origin=this.direction=null;this.origin=ha.get(null,null,null);this.origin.zpp_inner._invalidate=m(this,this.origin_invalidate);this.direction=ha.get(null,null,null);this.direction.zpp_inner._invalidate=
m(this,this.direction_invalidate);this.diry=this.dirx=this.originy=this.originx=0;this.zip_dir=!1};g["zpp_nape.geom.ZPP_Ray"]=yk;yk.__name__=["zpp_nape","geom","ZPP_Ray"];yk.prototype={origin_invalidate:function(a){this.originx=a.x;this.originy=a.y},direction_invalidate:function(a){this.dirx=a.x;this.diry=a.y;this.zip_dir=!0},validate_dir:function(){if(this.zip_dir){this.zip_dir=!1;var a=1/Math.sqrt(this.dirx*this.dirx+this.diry*this.diry);this.dirx*=a;this.diry*=a;this.idirx=1/this.dirx;this.idiry=
1/this.diry;this.normalx=-this.diry;this.normaly=this.dirx;a=this.normalx;this.absnormalx=0>a?-a:a;a=this.normaly;this.absnormaly=0>a?-a:a}},rayAABB:function(){var a=this.originx,b=a,c=this.originy,d=c;this.maxdist>=Math.POSITIVE_INFINITY?(0<this.dirx?b=Math.POSITIVE_INFINITY:0>this.dirx&&(b=Math.NEGATIVE_INFINITY),0<this.diry?d=Math.POSITIVE_INFINITY:0>this.diry&&(d=Math.NEGATIVE_INFINITY)):(b+=this.maxdist*this.dirx,d+=this.maxdist*this.diry);if(b<a)var e=a,a=b,b=e;d<c&&(e=c,c=d,d=e);return oa.get(a,
c,b,d)},aabbtest:function(a){var b=this.normalx*(this.originx-0.5*(a.minx+a.maxx))+this.normaly*(this.originy-0.5*(a.miny+a.maxy));return(0>b?-b:b)<0.5*this.absnormalx*(a.maxx-a.minx)+0.5*this.absnormaly*(a.maxy-a.miny)},aabbsect:function(a){var b=this.originy>=a.miny&&this.originy<=a.maxy;if(this.originx>=a.minx&&this.originx<=a.maxx&&b)return 0;b=-1;do if(!(0<=this.dirx&&this.originx>=a.maxx)&&!(0>=this.dirx&&this.originx<=a.minx)&&!(0<=this.diry&&this.originy>=a.maxy)&&!(0>=this.diry&&this.originy<=
a.miny)){if(0<this.dirx){var c=(a.minx-this.originx)*this.idirx;if(0<=c&&c<=this.maxdist){var d=this.originy+c*this.diry;if(d>=a.miny&&d<=a.maxy){b=c;break}}}else if(0>this.dirx&&(c=(a.maxx-this.originx)*this.idirx,0<=c&&c<=this.maxdist&&(d=this.originy+c*this.diry,d>=a.miny&&d<=a.maxy))){b=c;break}0<this.diry?(c=(a.miny-this.originy)*this.idiry,0<=c&&c<=this.maxdist&&(d=this.originx+c*this.dirx,d>=a.minx&&d<=a.maxx&&(b=c))):0>this.diry&&(c=(a.maxy-this.originy)*this.idiry,0<=c&&c<=this.maxdist&&
(d=this.originx+c*this.dirx,d>=a.minx&&d<=a.maxx&&(b=c)))}while(0);return b},circlesect:function(a,b,c){a.zip_worldCOM&&null!=a.body&&(a.zip_worldCOM=!1,a.zip_localCOM&&(a.zip_localCOM=!1,a.type==f.id_ShapeType_POLYGON&&a.polygon.__validate_localCOM(),null!=a.wrap_localCOM&&(a.wrap_localCOM.zpp_inner.x=a.localCOMx,a.wrap_localCOM.zpp_inner.y=a.localCOMy)),a.body.validate_axis(),a.worldCOMx=a.body.posx+(a.body.axisy*a.localCOMx-a.body.axisx*a.localCOMy),a.worldCOMy=a.body.posy+(a.localCOMx*a.body.axisx+
a.localCOMy*a.body.axisy));var d=0,e=0,d=this.originx-a.worldCOMx,e=this.originy-a.worldCOMy,h=this.dirx*this.dirx+this.diry*this.diry,g=2*(d*this.dirx+e*this.diry),d=d*d+e*e-a.radius*a.radius,e=g*g-4*h*d;if(0==e){if(h*=-g/2,(!b||0<d)&&0<h&&h<c&&h<=this.maxdist)return c=b=0,b=this.originx,c=this.originy,b+=this.dirx*h,c+=this.diry*h,b-=1*a.worldCOMx,c-=1*a.worldCOMy,g=1/Math.sqrt(b*b+c*c),b*=g,c*=g,0>=d&&(b=-b,c=-c),wb.getRay(ha.get(b,c,null),h,0>=d,a.outer)}else if(e=Math.sqrt(e),h=1/(2*h),d=(-g-
e)*h,h*=-g+e,0<d){if(d<c&&d<=this.maxdist)return c=b=0,b=this.originx,c=this.originy,b+=this.dirx*d,c+=this.diry*d,b-=1*a.worldCOMx,c-=1*a.worldCOMy,h=1/Math.sqrt(b*b+c*c),wb.getRay(ha.get(b*h,c*h,null),d,!1,a.outer)}else if(0<h&&b&&h<c&&h<=this.maxdist)return c=b=0,b=this.originx,c=this.originy,b+=this.dirx*h,c+=this.diry*h,b-=1*a.worldCOMx,c-=1*a.worldCOMy,d=1/Math.sqrt(b*b+c*c),wb.getRay(ha.get(-(b*d),-(c*d),null),h,!0,a.outer);return null},polysect:function(a,b,c){for(var d=null,e=a.edges.head,
h=a.gverts.next,f=h,h=h.next;null!=h;){var g=h,i=e.elt;if(b||0>i.gnormx*this.dirx+i.gnormy*this.diry){var j=0,k=0,j=g.x-f.x,k=g.y-f.y,l=i=0,i=f.x-this.originx,l=f.y-this.originy,f=k*this.dirx-j*this.diry;f*f>t.epsilon&&(f=1/f,j=(k*i-j*l)*f,0<j&&j<c&&j<=this.maxdist&&(f*=this.diry*i-this.dirx*l,f>-t.epsilon&&f<1+t.epsilon&&(c=j,d=e.elt)))}e=e.next;f=g;h=h.next}g=h=a.gverts.next;h=e.elt;if(b||0>h.gnormx*this.dirx+h.gnormy*this.diry)h=b=0,b=g.x-f.x,h=g.y-f.y,i=g=0,g=f.x-this.originx,i=f.y-this.originy,
f=h*this.dirx-b*this.diry,f*f>t.epsilon&&(f=1/f,b=(h*g-b*i)*f,0<b&&b<c&&b<=this.maxdist&&(f*=this.diry*g-this.dirx*i,f>-t.epsilon&&f<1+t.epsilon&&(c=b,d=e.elt)));if(null!=d){b=e=0;e=d.gnormx;b=d.gnormy;if(d=0<e*this.dirx+b*this.diry)e=-e,b=-b;return wb.getRay(ha.get(e,b,null),c,d,a.outer)}return null},__class__:yk};var cc=function(){this.slipped=this.failed=this.kinematic=!1;this.c1=this.c2=this.axis=null;this.frozen1=this.frozen2=!1;this.s1=this.s2=this.arbiter=null;this.toi=0;this.next=null;this.c1=
new ta;this.c2=new ta;this.axis=new ta};g["zpp_nape.geom.ZPP_ToiEvent"]=cc;cc.__name__=["zpp_nape","geom","ZPP_ToiEvent"];cc.prototype={__class__:cc};var Xc=function(){};g["zpp_nape.geom.ZPP_SweepDistance"]=Xc;Xc.__name__=["zpp_nape","geom","ZPP_SweepDistance"];Xc.dynamicSweep=function(a,b,c,d,e){null==e&&(e=!1);var h=a.s1,f=a.s2,g=h.body,i=f.body,j=0,k=0,j=i.velx-g.velx,k=i.vely-g.vely,l=g.angvel;0>l&&(l=-l);var m=i.angvel;0>m&&(m=-m);var o=h.sweepCoef*l+f.sweepCoef*m;if(!e&&!a.kinematic&&j*j+k*
k<t.dynamicSweepLinearThreshold*t.dynamicSweepLinearThreshold&&o<t.dynamicSweepAngularThreshold)a.toi=-1,a.failed=!0;else{for(var q=a.c1,l=a.c2,m=a.axis,r=0;;){g.sweepIntegrate(c*b);g.sweepValidate(h);i.sweepIntegrate(c*b);i.sweepValidate(f);var v=Xc.distance(h,f,q,l,m,null)+d,w=j*m.x+k*m.y;if(v<t.distanceThresholdCCD){if(e)break;var u=0,x=0,u=q.x-g.posx,x=q.y-g.posy,p=0,y=0,p=l.x-i.posx,y=l.y-i.posy,u=w-g.sweep_angvel*(m.y*u-m.x*x)+i.sweep_angvel*(m.y*p-m.x*y);0<u&&(a.slipped=!0);if(0>=u||v<0.5*
t.distanceThresholdCCD)break}w=(o-w)*b;if(0>=w){c=-1;break}w=v/w;1.0E-6>w&&(w=1.0E-6);c+=w;if(1<=c){c=1;g.sweepIntegrate(c*b);g.sweepValidate(h);i.sweepIntegrate(c*b);i.sweepValidate(f);b=Xc.distance(h,f,q,l,m,null)+d;j=j*m.x+k*m.y;if(b<t.distanceThresholdCCD){if(e)break;k=e=0;e=q.x-g.posx;k=q.y-g.posy;d=q=0;q=l.x-i.posx;d=l.y-i.posy;g=j-g.sweep_angvel*(m.y*e-m.x*k)+i.sweep_angvel*(m.y*q-m.x*d);0<g&&(a.slipped=!0);if(0>=g||b<0.5*t.distanceThresholdCCD)break}c=-1;break}if(40<=++r){v>d&&(a.failed=!0);
break}}a.toi=c}};Xc.staticSweep=function(a,b,c,d){var e=a.s1,h=a.s2,f=e.body,g=0,i=0,g=-f.velx,i=-f.vely,j=f.sweep_angvel;0>j&&(j=-j);for(var k=e.sweepCoef*j,j=a.c1,l=a.c2,m=a.axis,o=0;;){f.sweepIntegrate(c*b);f.sweepValidate(e);var q=Xc.distance(e,h,j,l,m,null)+d,r=g*m.x+i*m.y;if(q<t.distanceThresholdCCD){var v=0,w=0,v=j.x-f.posx,w=j.y-f.posy,v=r-f.sweep_angvel*(m.y*v-m.x*w);0<v&&(a.slipped=!0);if(0>=v||q<0.5*t.distanceThresholdCCD)break}r=(k-r)*b;if(0>=r){c=-1;break}r=q/r;1.0E-6>r&&(r=1.0E-6);c+=
r;if(1<=c){c=1;f.sweepIntegrate(c*b);f.sweepValidate(e);b=Xc.distance(e,h,j,l,m,null)+d;g=g*m.x+i*m.y;if(b<t.distanceThresholdCCD&&(d=i=0,i=j.x-f.posx,d=j.y-f.posy,f=g-f.sweep_angvel*(m.y*i-m.x*d),0<f&&(a.slipped=!0),0>=f||b<0.5*t.distanceThresholdCCD))break;c=-1;break}if(40<=++o){q>d&&(a.failed=!0);break}}a.toi=c};Xc.distance=function(a,b,c,d,e,h){null==h&&(h=1.0E100);if(a.type==f.id_ShapeType_CIRCLE&&b.type==f.id_ShapeType_CIRCLE){var g=a.circle,i=b.circle,j,k=0,s=0,k=i.worldCOMx-g.worldCOMx,s=
i.worldCOMy-g.worldCOMy,l=Math.sqrt(k*k+s*s);j=l-(g.radius+i.radius);if(j<h){if(0==l)k=1,s=0;else var m=1/l,k=k*m,s=s*m;var o=g.radius;c.x=g.worldCOMx+k*o;c.y=g.worldCOMy+s*o;var q=-i.radius;d.x=i.worldCOMx+k*q;d.y=i.worldCOMy+s*q;e.x=k;e.y=s}return j}var r=!1;if(a.type==f.id_ShapeType_CIRCLE&&b.type==f.id_ShapeType_POLYGON)var v=a,a=b,b=v,w=c,c=d,d=w,r=!0;if(a.type==f.id_ShapeType_POLYGON&&b.type==f.id_ShapeType_CIRCLE){for(var u=b.circle,x=-1.0E100,p=null,y=a.polygon.edges.head;null!=y;){var z=
y.elt,A=z.gnormx*u.worldCOMx+z.gnormy*u.worldCOMy-z.gprojection-u.radius;if(A>h){x=A;break}0<A?A>x&&(x=A,p=z):0>x&&A>x&&(x=A,p=z);y=y.next}if(x<h){var B=p.gp0,C=p.gp1,H=u.worldCOMy*p.gnormx-u.worldCOMx*p.gnormy;if(H<=B.y*p.gnormx-B.x*p.gnormy){var D=0,E=0,D=u.worldCOMx-B.x,E=u.worldCOMy-B.y,G=Math.sqrt(D*D+E*E),x=G-u.radius;if(x<h){if(0==G)D=1,E=0;else var I=1/G,D=D*I,E=E*I;c.x=B.x+0*D;c.y=B.y+0*E;var J=-u.radius;d.x=u.worldCOMx+D*J;d.y=u.worldCOMy+E*J;e.x=D;e.y=E}}else if(H>=C.y*p.gnormx-C.x*p.gnormy){var L=
0,K=0,L=u.worldCOMx-C.x,K=u.worldCOMy-C.y,N=Math.sqrt(L*L+K*K),x=N-u.radius;if(x<h){if(0==N)L=1,K=0;else var P=1/N,L=L*P,K=K*P;c.x=C.x+0*L;c.y=C.y+0*K;var O=-u.radius;d.x=u.worldCOMx+L*O;d.y=u.worldCOMy+K*O;e.x=L;e.y=K}}else{var R=-u.radius;d.x=u.worldCOMx+p.gnormx*R;d.y=u.worldCOMy+p.gnormy*R;var T=-x;c.x=d.x+p.gnormx*T;c.y=d.y+p.gnormy*T;e.x=p.gnormx;e.y=p.gnormy}}r&&(e.x=-e.x,e.y=-e.y);return x}for(var U=a.polygon,S=b.polygon,M=-1.0E100,X=null,V=null,W=0,Y=U.edges.head;null!=Y;){for(var ba=Y.elt,
Z=1.0E100,da=S.gverts.next;null!=da;){var ia=da,ha=ba.gnormx*ia.x+ba.gnormy*ia.y;ha<Z&&(Z=ha);da=da.next}Z-=ba.gprojection;if(Z>h){M=Z;break}0<Z?Z>M&&(M=Z,X=ba,W=1):0>M&&Z>M&&(M=Z,X=ba,W=1);Y=Y.next}if(M<h){for(var fa=S.edges.head;null!=fa;){for(var ga=fa.elt,F=1.0E100,ja=U.gverts.next;null!=ja;){var ma=ja,ka=ga.gnormx*ma.x+ga.gnormy*ma.y;ka<F&&(F=ka);ja=ja.next}F-=ga.gprojection;if(F>h){M=F;break}0<F?F>M&&(M=F,V=ga,W=2):0>M&&F>M&&(M=F,V=ga,W=2);fa=fa.next}if(M<h){var la,$;if(1==W)la=S,$=X;else{la=
U;$=V;var ra=c,c=d,d=ra,r=!r}for(var na=null,ca=1.0E100,qa=la.edges.head;null!=qa;){var sa=qa.elt,xa=$.gnormx*sa.gnormx+$.gnormy*sa.gnormy;xa<ca&&(ca=xa,na=sa);qa=qa.next}r?(e.x=-$.gnormx,e.y=-$.gnormy):(e.x=$.gnormx,e.y=$.gnormy);if(0<=M){var ea=$.gp0,pa=$.gp1,aa=na.gp0,wa=na.gp1,ta=0,za=0,ua=0,ya=0,ta=pa.x-ea.x,za=pa.y-ea.y,ua=wa.x-aa.x,ya=wa.y-aa.y,Ga=1/(ta*ta+za*za),Ka=1/(ua*ua+ya*ya),Ba=-(ta*(ea.x-aa.x)+za*(ea.y-aa.y))*Ga,Ia=-(ta*(ea.x-wa.x)+za*(ea.y-wa.y))*Ga,Oa=-(ua*(aa.x-ea.x)+ya*(aa.y-ea.y))*
Ka,La=-(ua*(aa.x-pa.x)+ya*(aa.y-pa.y))*Ka;0>Ba?Ba=0:1<Ba&&(Ba=1);0>Ia?Ia=0:1<Ia&&(Ia=1);0>Oa?Oa=0:1<Oa&&(Oa=1);0>La?La=0:1<La&&(La=1);var Qa=0,Ha=0,Ea=Ba,Qa=ea.x+ta*Ea,Ha=ea.y+za*Ea,Ca=0,Da=0,db=Ia,Ca=ea.x+ta*db,Da=ea.y+za*db,Fa=0,Aa=0,Q=Oa,Fa=aa.x+ua*Q,Aa=aa.y+ya*Q,eb=0,$a=0,Sa=La,eb=aa.x+ua*Sa,$a=aa.y+ya*Sa,Na=qc.vec_dsq(Qa,Ha,aa.x,aa.y),Wa=qc.vec_dsq(Ca,Da,wa.x,wa.y),Xa=qc.vec_dsq(Fa,Aa,ea.x,ea.y),oa=qc.vec_dsq(eb,$a,pa.x,pa.y),Ra=0,Ta=0,Va=null;Na<Wa?(Ra=Qa,Ta=Ha,Va=aa):(Ra=Ca,Ta=Da,Va=wa,Na=
Wa);var bb=0,Ya=0,Za=null;Xa<oa?(bb=Fa,Ya=Aa,Za=ea):(bb=eb,Ya=$a,Za=pa,Xa=oa);Na<Xa?(c.x=Ra,c.y=Ta,d.x=Va.x,d.y=Va.y,M=Math.sqrt(Na)):(d.x=bb,d.y=Ya,c.x=Za.x,c.y=Za.y,M=Math.sqrt(Xa));if(0!=M){e.x=d.x-c.x;e.y=d.y-c.y;var ib=1/M;e.x*=ib;e.y*=ib;r&&(e.x=-e.x,e.y=-e.y)}return M}var va=0,Ua=0,va=na.gp0.x,Ua=na.gp0.y,Pa=0,Ma=0,Pa=na.gp1.x,Ma=na.gp1.y,ab=0,cb=0,ab=Pa-va,cb=Ma-Ua,fb=$.gnormy*va-$.gnormx*Ua,mb=$.gnormy*Pa-$.gnormx*Ma,nb=1/(mb-fb),qb=(-$.tp1-fb)*nb;qb>t.epsilon&&(va+=ab*qb,Ua+=cb*qb);var gb=
(-$.tp0-mb)*nb;gb<-t.epsilon&&(Pa+=ab*gb,Ma+=cb*gb);var lb=va*$.gnormx+Ua*$.gnormy-$.gprojection,hb=Pa*$.gnormx+Ma*$.gnormy-$.gprojection;if(lb<hb){d.x=va;d.y=Ua;var jb=-lb;c.x=d.x+$.gnormx*jb;c.y=d.y+$.gnormy*jb;return lb}d.x=Pa;d.y=Ma;var ob=-hb;c.x=d.x+$.gnormx*ob;c.y=d.y+$.gnormy*ob;return hb}}return h};var ta=function(){this.length=this.x=this.y=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.weak=!1;this._isimmutable=this.outer=null;this._immutable=!1;this._invalidate=this._validate=
null};g["zpp_nape.geom.ZPP_Vec2"]=ta;ta.__name__=["zpp_nape","geom","ZPP_Vec2"];ta.get=function(a,b,c){null==c&&(c=!1);var d;null==ta.zpp_pool?d=new ta:(d=ta.zpp_pool,ta.zpp_pool=d.next,d.next=null);d.weak=!1;d._immutable=c;d.x=a;d.y=b;return d};ta.prototype={validate:function(){null!=this._validate&&this._validate()},invalidate:function(){null!=this._invalidate&&this._invalidate(this)},wrapper:function(){if(null==this.outer){this.outer=new ha;var a=this.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=
null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=ta.zpp_pool;ta.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},add:function(a){return this.inlined_add(a)},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){b._inuse=!0;null==a?(b.next=this.next,this.next=b):(b.next=a.next,a.next=b);this.pushmod=this.modified=!0;this.length++;
return b},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},reverse:function(){for(var a=this.next,b=null;null!=a;){var c=a.next;a.next=b;b=this.next=a;a=c}this.pushmod=this.modified=!0},iterator_at:function(a){for(var b=this.next;0<a--&&null!=b;)b=b.next;return b},toString:function(){return"{ x: "+
this.x+" y: "+this.y+" }"},__class__:ta};var Cl=function(){this._validate=null;this.x=this.y=this.z=0};g["zpp_nape.geom.ZPP_Vec3"]=Cl;Cl.__name__=["zpp_nape","geom","ZPP_Vec3"];Cl.prototype={validate:function(){null!=this._validate&&this._validate()},__class__:Cl};var qc=function(){};g["zpp_nape.geom.ZPP_VecMath"]=qc;qc.__name__=["zpp_nape","geom","ZPP_VecMath"];qc.vec_dsq=function(a,b,c,d){var e=0,h=0,e=a-c,h=b-d;return e*e+h*h};var $=function(){this.userData=this.ishape=this.ibody=this.icompound=
this.cbsets=this.group=this.cbTypes=this.cbSet=this.wrap_cbTypes=null;this.id=0;this.outer_i=null;this.id=Ab.Interactor();this.cbsets=new Ok;this.cbTypes=new Ec};g["zpp_nape.phys.ZPP_Interactor"]=$;$.__name__=["zpp_nape","phys","ZPP_Interactor"];$.get=function(a,b){var c;c=a.id<b.id?a.id:b.id;var d;d=a.id<b.id?b.id:a.id;for(var e=null,h=(a.cbsets.length<b.cbsets.length?a.cbsets:b.cbsets).head;null!=h;){var f=h.elt;if(f.id==c&&f.di==d){e=f;break}h=h.next}return e};$.int_callback=function(a,b,c){var d=
a.int1,a=a.int2;b.options1.compatible(d.cbTypes)&&b.options2.compatible(a.cbTypes)?(c.int1=d,c.int2=a):(c.int1=a,c.int2=d)};$.prototype={__iaddedToSpace:function(){null!=this.group&&this.group.interactors.add(this);for(var a=this.cbTypes.head;null!=a;)a.elt.interactors.add(this),a=a.next;this.alloc_cbSet()},__iremovedFromSpace:function(){null!=this.group&&this.group.interactors.remove(this);for(var a=this.cbTypes.head;null!=a;)a.elt.interactors.remove(this),a=a.next;this.dealloc_cbSet()},wake:function(){if(null!=
this.ishape){var a=this.ishape.body;null!=a&&null!=a.space&&a.space.non_inlined_wake(a);!0}else null!=this.ibody?null!=this.ibody.space?this.ibody.space.non_inlined_wake(this.ibody):!1:(null!=this.icompound.space&&this.icompound.space.wakeCompound(this.icompound),!0)},setupcbTypes:function(){this.wrap_cbTypes=hd.get(this.cbTypes);this.wrap_cbTypes.zpp_inner.adder=m(this,this.wrap_cbTypes_adder);this.wrap_cbTypes.zpp_inner.subber=m(this,this.wrap_cbTypes_subber);this.wrap_cbTypes.zpp_inner.dontremove=
!0},wrap_cbTypes_subber:function(a){a=a.zpp_inner;if(this.cbTypes.has(a)){var b;b=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=b&&(this.dealloc_cbSet(),a.interactors.remove(this));this.cbTypes.remove(a);null!=b&&(this.alloc_cbSet(),this.wake())}},wrap_cbTypes_adder:function(a){this.insert_cbtype(a.zpp_inner);return!1},insert_cbtype:function(a){if(!this.cbTypes.has(a)){var b;b=null!=this.ishape?null==this.ishape.body?
null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=b&&(this.dealloc_cbSet(),a.interactors.add(this));for(var c=null,d=this.cbTypes.head;null!=d&&!(a.id<d.elt.id);){c=d;d=d.next}this.cbTypes.inlined_insert(c,a);null!=b&&(this.alloc_cbSet(),this.wake())}},alloc_cbSet:function(){var a;a=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;if(null!=(this.cbSet=a.cbsets.get(this.cbTypes)))this.cbSet.count++,
this.cbSet.interactors.add(this),this.cbSet.validate(),a.freshInteractorType(this)},dealloc_cbSet:function(){var a;a=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=this.cbSet&&(this.cbSet.interactors.remove(this),a.nullInteractorType(this),0==--this.cbSet.count&&(a.cbsets.remove(this.cbSet),a=this.cbSet,a.free(),a.next=Ia.zpp_pool,Ia.zpp_pool=a),this.cbSet=null)},immutable_midstep:function(a){null!=this.ibody?null:
null!=this.ishape?this.ishape.__immutable_midstep(a):this.icompound.__imutable_midstep(a)},lookup_group:function(){for(var a=this;null!=a&&null==a.group;)a=null!=a.ishape?a.ishape.body:null!=a.icompound?a.icompound.compound:a.ibody.compound;return null==a?null:a.group},__class__:$};var Ib=function(){this.wrap_localCOM=this.wrap_worldCOM=null;this.zip_worldCOM=!1;this.worldCOMx=this.worldCOMy=0;this.zip_localCOM=!1;this.localCOMx=this.localCOMy=0;this.zip_aabb=!1;this.aabb=null;this.norotate=!1;this.cinertia=
this.iinertia=this.sinertia=0;this.zip_inertia=!1;this.inertiaMode=this.inertia=0;this.zip_gravMassScale=!1;this.gravMassMode=this.gravMassScale=0;this.zip_gravMass=!1;this.gravMass=0;this.nomove=!1;this.massMode=this.imass=this.smass=this.cmass=0;this.zip_mass=!1;this.mass=0;this.zip_axis=!1;this.kinvelx=this.kinvely=this.svelx=this.svely=this.angvel=this.torque=this.kinangvel=this.pre_rot=this.rot=this.axisx=this.axisy=0;this.wrap_force=null;this.forcex=this.forcey=0;this.wrap_vel=null;this.velx=
this.vely=0;this.wrap_pos=null;this.pre_posx=this.pre_posy=this.posx=this.posy=0;this.bullet=this.bulletEnabled=this.disableCCD=!1;this.sweepRadius=0;this.sweepFrozen=!1;this.sweepTime=this.sweep_angvel=0;this.compound=this.shapes=this.wrap_shapes=this.space=this.arbiters=this.constraints=this.component=null;this.type=0;this.world=!1;this.outer=null;$.call(this);this.ibody=this;this.bulletEnabled=this.world=!1;this.sweep_angvel=this.sweepTime=0;this.disableCCD=this.norotate=this.nomove=!1;this.axisx=
this.rot=this.posy=this.posx=0;this.axisy=1;this.torque=this.angvel=this.kinangvel=this.forcey=this.forcex=this.kinvely=this.kinvelx=this.vely=this.velx=this.svely=this.svelx=0;this.pre_rot=this.pre_posy=this.pre_posx=Math.POSITIVE_INFINITY;this.worldCOMy=this.worldCOMx=this.localCOMy=this.localCOMx=0;this.zip_aabb=!0;this.aabb=oa.get(0,0,0,0);this.aabb._immutable=!0;this.aabb._validate=m(this,this.aabb_validate);this.massMode=f.id_MassMode_DEFAULT;this.gravMassMode=f.id_GravMassMode_DEFAULT;this.gravMassScale=
1;this.inertiaMode=f.id_InertiaMode_DEFAULT;this.arbiters=new Qg;this.constraints=new Fd;this.shapes=new Me;this.wrap_shapes=Cd.get(this.shapes);this.wrap_shapes.zpp_inner.adder=m(this,this.shapes_adder);this.wrap_shapes.zpp_inner.subber=m(this,this.shapes_subber);this.wrap_shapes.zpp_inner._invalidate=m(this,this.shapes_invalidate);this.kinematicDelaySleep=!1};g["zpp_nape.phys.ZPP_Body"]=Ib;Ib.__name__=["zpp_nape","phys","ZPP_Body"];Ib.__static=function(){null==f.BodyType_STATIC&&(f.internal=!0,
f.BodyType_STATIC=new Jb,f.internal=!1);var a=new tg(f.BodyType_STATIC),b=a.zpp_inner;b.world=!0;b.wrap_shapes.zpp_inner.immutable=!0;b.smass=b.imass=b.cmass=b.mass=b.gravMass=0;b.sinertia=b.iinertia=b.cinertia=b.inertia=0;b.cbTypes.clear();return a};Ib.__super__=$;Ib.prototype=k($.prototype,{invalidate_type:function(){this.invalidate_mass();this.invalidate_inertia()},invalidate_shapes:function(){this.zip_worldCOM=this.zip_localCOM=this.zip_aabb=!0;this.invalidate_mass();this.invalidate_inertia()},
atRest:function(a){if(this.type!=f.id_BodyType_DYNAMIC)return this.component.sleeping;var b=t.linearSleepThreshold,b=b*b;if(this.velx*this.velx+this.vely*this.vely>b)a=!1;else if(qc.vec_dsq(this.posx,this.posy,this.pre_posx,this.pre_posy)>0.25*b*a*a)a=!1;else{var c=b=0,b=this.aabb.maxx-this.aabb.minx,c=this.aabb.maxy-this.aabb.miny,b=b*b+c*c,c=t.angularSleepThreshold,c=c*c;if(4*this.angvel*this.angvel*b>c)a=!1;else var d=this.rot-this.pre_rot,a=d*d*b>c*a*a?!1:!0}a||(this.component.waket=this.space.stamp);
return this.component.waket+t.sleepDelay<this.space.stamp},refreshArbiters:function(){for(var a=this.arbiters.head;null!=a;)a.elt.invalidated=!0,a=a.next},sweepIntegrate:function(a){var b=a-this.sweepTime;0!=b&&(this.sweepTime=a,this.posx+=this.velx*b,this.posy+=this.vely*b,0!=this.angvel&&this.delta_rot(this.sweep_angvel*b))},sweepValidate:function(a){if(a.type==f.id_ShapeType_CIRCLE)a.worldCOMx=this.posx+(this.axisy*a.localCOMx-this.axisx*a.localCOMy),a.worldCOMy=this.posy+(a.localCOMx*this.axisx+
a.localCOMy*this.axisy);else{for(var a=a.polygon,b=a.lverts.next,c=a.gverts.next;null!=c;){var d=c,e=b,b=b.next;d.x=this.posx+(this.axisy*e.x-this.axisx*e.y);d.y=this.posy+(e.x*this.axisx+e.y*this.axisy);c=c.next}c=a.edges.head;b=d=a.gverts.next;for(d=d.next;null!=d;){var e=d,h=c.elt,c=c.next;h.gnormx=this.axisy*h.lnormx-this.axisx*h.lnormy;h.gnormy=h.lnormx*this.axisx+h.lnormy*this.axisy;h.gprojection=this.posx*h.gnormx+this.posy*h.gnormy+h.lprojection;h.tp0=b.y*h.gnormx-b.x*h.gnormy;h.tp1=e.y*h.gnormx-
e.x*h.gnormy;b=e;d=d.next}a=a.gverts.next;c=c.elt;c.gnormx=this.axisy*c.lnormx-this.axisx*c.lnormy;c.gnormy=c.lnormx*this.axisx+c.lnormy*this.axisy;c.gprojection=this.posx*c.gnormx+this.posy*c.gnormy+c.lprojection;c.tp0=b.y*c.gnormx-b.x*c.gnormy;c.tp1=a.y*c.gnormx-a.x*c.gnormy}},invalidate_pos:function(){for(var a=this.shapes.head;null!=a;){var b=a.elt;b.type==f.id_ShapeType_POLYGON&&(b.polygon.invalidate_gverts(),b.polygon.invalidate_gaxi());b.invalidate_worldCOM();a=a.next}this.zip_worldCOM=!0},
pos_invalidate:function(a){this.immutable_midstep("Body::position");this.posx==a.x&&this.posy==a.y||(this.posx=a.x,this.posy=a.y,this.invalidate_pos(),this.wake())},pos_validate:function(){this.wrap_pos.zpp_inner.x=this.posx;this.wrap_pos.zpp_inner.y=this.posy},vel_invalidate:function(a){this.velx=a.x;this.vely=a.y;this.wake()},vel_validate:function(){this.wrap_vel.zpp_inner.x=this.velx;this.wrap_vel.zpp_inner.y=this.vely},force_invalidate:function(a){this.forcex=a.x;this.forcey=a.y;this.wake()},
force_validate:function(){this.wrap_force.zpp_inner.x=this.forcex;this.wrap_force.zpp_inner.y=this.forcey},setupPosition:function(){this.wrap_pos=ha.get(this.posx,this.posy,null);this.wrap_pos.zpp_inner._inuse=!0;this.world?this.wrap_pos.zpp_inner._immutable=!0:(this.wrap_pos.zpp_inner._invalidate=m(this,this.pos_invalidate),this.wrap_pos.zpp_inner._validate=m(this,this.pos_validate))},setupVelocity:function(){this.wrap_vel=ha.get(this.velx,this.vely,null);this.wrap_vel.zpp_inner._inuse=!0;this.world?
this.wrap_vel.zpp_inner._immutable=!0:(this.wrap_vel.zpp_inner._invalidate=m(this,this.vel_invalidate),this.wrap_vel.zpp_inner._validate=m(this,this.vel_validate))},setupForce:function(){this.wrap_force=ha.get(this.forcex,this.forcey,null);this.wrap_force.zpp_inner._inuse=!0;this.world?this.wrap_force.zpp_inner._immutable=!0:(this.wrap_force.zpp_inner._invalidate=m(this,this.force_invalidate),this.wrap_force.zpp_inner._validate=m(this,this.force_validate))},invalidate_rot:function(){this.zip_axis=
!0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.type==f.id_ShapeType_POLYGON&&(b.polygon.invalidate_gverts(),b.polygon.invalidate_gaxi());b.invalidate_worldCOM();a=a.next}this.zip_worldCOM=!0},validate_axis:function(){this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null)},delta_rot:function(a){this.rot+=a;if(1.0E-4<a*a)this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null;else{var b=a*a,c=1-0.5*b,b=1-b*b/8,d=(c*this.axisx+a*this.axisy)*
b;this.axisy=(c*this.axisy-a*this.axisx)*b;this.axisx=d}},invalidate_mass:function(){this.zip_mass=!0;this.invalidate_gravMass()},validate_mass:function(){if(this.zip_mass){this.zip_mass=!1;if(this.massMode==f.id_MassMode_DEFAULT){this.cmass=0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.refmaterial.density=b.material.density;b.validate_area_inertia();this.cmass+=b.area*b.material.density;a=a.next}}this.type==f.id_BodyType_DYNAMIC&&!this.nomove?(this.mass=this.cmass,this.imass=this.smass=1/
this.mass):(this.mass=Math.POSITIVE_INFINITY,this.imass=this.smass=0)}},invalidate_gravMass:function(){this.gravMassMode!=f.id_GravMassMode_FIXED&&(this.zip_gravMass=!0);this.gravMassMode!=f.id_GravMassMode_SCALED&&(this.zip_gravMassScale=!0);this.wake()},validate_gravMass:function(){this.zip_gravMass&&(this.zip_gravMass=!1,this.validate_mass(),this.gravMassMode==f.id_GravMassMode_DEFAULT?(this.validate_mass(),this.gravMass=this.cmass):this.gravMassMode==f.id_GravMassMode_SCALED&&(this.validate_mass(),
this.gravMass=this.cmass*this.gravMassScale))},invalidate_gravMassScale:function(){this.gravMassMode!=f.id_GravMassMode_SCALED?this.zip_gravMassScale=!0:this.invalidate_gravMass()},validate_gravMassScale:function(){this.zip_gravMassScale&&(this.zip_gravMassScale=!1,this.gravMassMode==f.id_GravMassMode_DEFAULT?this.gravMassScale=1:this.gravMassMode==f.id_GravMassMode_FIXED&&(this.validate_mass(),this.gravMassScale=this.gravMass/this.cmass))},invalidate_inertia:function(){this.zip_inertia=!0;this.wake()},
validate_inertia:function(){if(this.zip_inertia){this.zip_inertia=!1;if(this.inertiaMode==f.id_InertiaMode_DEFAULT){this.cinertia=0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.refmaterial.density=b.material.density;b.validate_area_inertia();this.cinertia+=b.inertia*b.area*b.material.density;a=a.next}}this.type==f.id_BodyType_DYNAMIC&&!this.norotate?(this.inertia=this.cinertia,this.sinertia=this.iinertia=1/this.inertia):(this.inertia=Math.POSITIVE_INFINITY,this.sinertia=this.iinertia=0)}},validate_aabb:function(){if(this.zip_aabb){this.zip_aabb=
!1;this.aabb.minx=Math.POSITIVE_INFINITY;this.aabb.miny=Math.POSITIVE_INFINITY;this.aabb.maxx=Math.NEGATIVE_INFINITY;this.aabb.maxy=Math.NEGATIVE_INFINITY;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.zip_aabb&&null!=b.body&&(b.zip_aabb=!1,b.type==f.id_ShapeType_CIRCLE?b.circle.__validate_aabb():b.polygon.__validate_aabb());this.aabb.combine(b.aabb);a=a.next}}},invalidate_localCOM:function(){this.zip_worldCOM=this.zip_localCOM=!0},validate_localCOM:function(){if(this.zip_localCOM){this.zip_localCOM=
!1;for(var a=0,b=0,c=0,d=this.shapes.head;null!=d;){var e=d.elt;e.zip_localCOM&&(e.zip_localCOM=!1,e.type==f.id_ShapeType_POLYGON&&e.polygon.__validate_localCOM(),null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy));e.validate_area_inertia();var h=e.area*e.material.density,a=a+e.localCOMx*h,b=b+e.localCOMy*h,c=c+e.area*e.material.density,d=d.next}0!=c&&(d=1/c,this.localCOMx=a*d,this.localCOMy=b*d);null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=
this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy);this.zip_mass&&this.massMode==f.id_MassMode_DEFAULT&&(this.zip_mass=!1,this.cmass=c,this.type==f.id_BodyType_DYNAMIC?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=Math.POSITIVE_INFINITY,this.imass=this.smass=0))}},validate_worldCOM:function(){this.zip_worldCOM&&(this.zip_worldCOM=!1,this.validate_localCOM(),this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null),this.worldCOMx=
this.posx+(this.axisy*this.localCOMx-this.axisx*this.localCOMy),this.worldCOMy=this.posy+(this.localCOMx*this.axisx+this.localCOMy*this.axisy),null!=this.wrap_worldCOM&&(this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy))},aabb_validate:function(){this.validate_aabb()},shapes_adder:function(a){return a.zpp_inner.body!=this?(null!=a.zpp_inner.body&&a.zpp_inner.body.wrap_shapes.remove(a),a.zpp_inner.body=this,a.zpp_inner.addedToBody(),null!=this.space&&this.space.added_shape(a.zpp_inner,
null),a.zpp_inner.type==f.id_ShapeType_POLYGON&&(a.zpp_inner.polygon.invalidate_gaxi(),a.zpp_inner.polygon.invalidate_gverts()),!0):!1},shapes_subber:function(a){null!=this.space&&this.space.removed_shape(a.zpp_inner);a.zpp_inner.body=null;a.zpp_inner.removedFromBody()},shapes_invalidate:function(){this.invalidate_shapes()},addedToSpace:function(){null==Mb.zpp_pool?this.component=new Mb:(this.component=Mb.zpp_pool,Mb.zpp_pool=this.component.next,this.component.next=null);null;this.component.isBody=
!0;this.component.body=this;this.__iaddedToSpace()},removedFromSpace:function(){for(;null!=this.arbiters.head;){var a=this.arbiters.pop_unsafe();a.cleared=!0;a.b2==this&&a.b1.arbiters.inlined_try_remove(a);a.b1==this&&a.b2.arbiters.inlined_try_remove(a);null!=a.pair&&(a.pair.arb=null,a.pair=null);a.active=!1;this.space.f_arbiters.modified=!0}a=this.component;a.body=null;a.constraint=null;null;a.next=Mb.zpp_pool;Mb.zpp_pool=a;this.component=null;this.__iremovedFromSpace()},__class__:Ib});var Pk=function(){this.compound=
this.space=null;this.depth=0;this.outer=this.bodies=this.constraints=this.compounds=this.wrap_constraints=null};g["zpp_nape.phys.ZPP_Compound"]=Pk;Pk.__name__=["zpp_nape","phys","ZPP_Compound"];Pk.__super__=$;Pk.prototype=k($.prototype,{__imutable_midstep:function(){},addedToSpace:function(){this.__iaddedToSpace()},removedFromSpace:function(){this.__iremovedFromSpace()},__class__:Pk});var Pd=function(){this.wrap_gravity=null;this.viscosity=this.density=this.gravityx=this.gravityy=0;this.next=this.outer=
this.shapes=null;this.shapes=new Me;this.density=this.viscosity=1;this.wrap_gravity=null;this.gravityy=this.gravityx=0};g["zpp_nape.phys.ZPP_FluidProperties"]=Pd;Pd.__name__=["zpp_nape","phys","ZPP_FluidProperties"];Pd.prototype={wrapper:function(){if(null==this.outer){this.outer=new Pe;var a=this.outer.zpp_inner;a.outer=null;a.next=Pd.zpp_pool;Pd.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},invalidate:function(){for(var a=this.shapes.head;null!=a;)a.elt.invalidate_fluidprops(),a=a.next},
__class__:Pd};var pd=function(a){this.zip_aabb=!1;this.sweep=this.node=this.pairs=this.aabb=null;this.fluidEnabled=this.sensorEnabled=!1;this.circle=this.polygon=this.refmaterial=this.material=this.filter=this.fluidProperties=null;this.sweepCoef=0;this.zip_sweepRadius=!1;this.sweepRadius=0;this.wrap_localCOM=null;this.zip_worldCOM=!1;this.worldCOMx=this.worldCOMy=0;this.zip_localCOM=!1;this.localCOMx=this.localCOMy=0;this.zip_angDrag=!1;this.inertia=this.angDrag=0;this.zip_area_inertia=!1;this.type=
this.area=0;this.outer=this.body=null;$.call(this);this.pairs=new Qk;this.ishape=this;this.type=a;this.aabb=oa.get(0,0,0,0);this.aabb._immutable=!0;this.aabb._validate=m(this,this.aabb_validate);this.zip_area_inertia=this.zip_angDrag=this.zip_localCOM=this.zip_sweepRadius=!0;this.worldCOMy=this.worldCOMx=this.localCOMy=this.localCOMx=0;this.sensorEnabled=this.fluidEnabled=!1;this.body=this.fluidProperties=null;this.refmaterial=new sa;this.sweepRadius=this.sweepCoef=0};g["zpp_nape.shape.ZPP_Shape"]=
pd;pd.__name__=["zpp_nape","shape","ZPP_Shape"];pd.__super__=$;pd.prototype=k($.prototype,{validate_sweepRadius:function(){this.zip_sweepRadius&&(this.zip_sweepRadius=!1,this.type==f.id_ShapeType_CIRCLE?this.circle.__validate_sweepRadius():this.polygon.__validate_sweepRadius())},validate_area_inertia:function(){this.zip_area_inertia&&(this.zip_area_inertia=!1,this.type==f.id_ShapeType_CIRCLE?this.circle.__validate_area_inertia():this.polygon.__validate_area_inertia())},validate_angDrag:function(){if(this.zip_angDrag||
this.refmaterial.dynamicFriction!=this.material.dynamicFriction)this.zip_angDrag=!1,this.refmaterial.dynamicFriction=this.material.dynamicFriction,this.type==f.id_ShapeType_CIRCLE?this.circle.__validate_angDrag():this.polygon.__validate_angDrag()},validate_worldCOM:function(){this.zip_worldCOM&&null!=this.body&&(this.zip_worldCOM=!1,this.zip_localCOM&&(this.zip_localCOM=!1,this.type==f.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=
this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)),this.body.validate_axis(),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy))},invalidate_area_inertia:function(){this.zip_area_inertia=!0;null!=this.body&&(this.body.invalidate_localCOM(),this.body.invalidate_mass(),this.body.invalidate_inertia())},invalidate_angDrag:function(){this.zip_angDrag=!0},
invalidate_localCOM:function(){this.zip_localCOM=!0;this.invalidate_area_inertia();this.type==f.id_ShapeType_CIRCLE&&(this.zip_sweepRadius=!0);this.invalidate_angDrag();this.invalidate_worldCOM();null!=this.body&&this.body.invalidate_localCOM()},invalidate_worldCOM:function(){this.zip_aabb=this.zip_worldCOM=!0;null!=this.body&&(this.body.zip_aabb=!0)},invalidate_material:function(a){0!=(a&sa.WAKE)&&this.wake();0!=(a&sa.ARBITERS)&&null!=this.body&&this.body.refreshArbiters();0!=(a&sa.PROPS)&&null!=
this.body&&(this.body.invalidate_localCOM(),this.body.invalidate_mass(),this.body.invalidate_inertia());0!=(a&sa.ANGDRAG)&&this.invalidate_angDrag();this.refmaterial.set(this.material)},invalidate_filter:function(){this.wake()},invalidate_fluidprops:function(){this.fluidEnabled&&this.wake()},aabb_validate:function(){this.zip_aabb&&null!=this.body&&(this.zip_aabb=!1,this.type==f.id_ShapeType_CIRCLE?this.circle.__validate_aabb():this.polygon.__validate_aabb())},setMaterial:function(a){this.material!=
a&&(null!=this.body&&null!=this.body.space&&null!=this.material&&this.material.shapes.remove(this),this.material=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),this.wake(),null!=this.body&&this.body.refreshArbiters())},setFilter:function(a){this.filter!=a&&(null!=this.body&&null!=this.body.space&&null!=this.filter&&this.filter.shapes.remove(this),this.filter=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),this.wake())},setFluid:function(a){this.fluidProperties!=a&&(null!=
this.body&&null!=this.body.space&&null!=this.fluidProperties&&this.fluidProperties.shapes.remove(this),this.fluidProperties=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),this.fluidEnabled&&this.wake())},__immutable_midstep:function(){},addedToBody:function(){this.invalidate_worldCOM();this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0)},removedFromBody:function(){},addedToSpace:function(){this.__iaddedToSpace();this.material.shapes.add(this);this.filter.shapes.add(this);null!=
this.fluidProperties&&this.fluidProperties.shapes.add(this)},removedFromSpace:function(){this.__iremovedFromSpace();this.material.shapes.remove(this);this.filter.shapes.remove(this);null!=this.fluidProperties&&this.fluidProperties.shapes.remove(this)},__class__:pd});var Ei=function(){this.radius=0;this.outer_zn=null;pd.call(this,f.id_ShapeType_CIRCLE);this.circle=this;this.zip_localCOM=!1};g["zpp_nape.shape.ZPP_Circle"]=Ei;Ei.__name__=["zpp_nape","shape","ZPP_Circle"];Ei.__super__=pd;Ei.prototype=
k(pd.prototype,{invalidate_radius:function(){this.invalidate_area_inertia();this.invalidate_angDrag();this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0);null!=this.body&&this.body.wake()},localCOM_validate:function(){this.wrap_localCOM.zpp_inner.x=this.localCOMx;this.wrap_localCOM.zpp_inner.y=this.localCOMy},localCOM_invalidate:function(a){this.localCOMx=a.x;this.localCOMy=a.y;this.invalidate_localCOM();null!=this.body&&this.body.wake()},setupLocalCOM:function(){this.wrap_localCOM=ha.get(this.localCOMx,
this.localCOMy,null);this.wrap_localCOM.zpp_inner._inuse=!0;this.wrap_localCOM.zpp_inner._validate=m(this,this.localCOM_validate);this.wrap_localCOM.zpp_inner._invalidate=m(this,this.localCOM_invalidate)},__validate_aabb:function(){this.zip_worldCOM&&null!=this.body&&(this.zip_worldCOM=!1,this.zip_localCOM&&(this.zip_localCOM=!1,this.type==f.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=
this.localCOMy)),this.body.validate_axis(),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy));var a=this.radius,b=this.radius;this.aabb.minx=this.worldCOMx-a;this.aabb.miny=this.worldCOMy-b;this.aabb.maxx=this.worldCOMx+a;this.aabb.maxy=this.worldCOMy+b},_force_validate_aabb:function(){this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*
this.localCOMy);this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy);this.aabb.minx=this.worldCOMx-this.radius;this.aabb.miny=this.worldCOMy-this.radius;this.aabb.maxx=this.worldCOMx+this.radius;this.aabb.maxy=this.worldCOMy+this.radius},__validate_sweepRadius:function(){this.sweepCoef=Math.sqrt(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy);this.sweepRadius=this.sweepCoef+this.radius},__validate_area_inertia:function(){var a=this.radius*this.radius;
this.area=a*Math.PI;this.inertia=0.5*a+(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy)},__validate_angDrag:function(){var a=this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy,b=this.radius*this.radius;this.angDrag=(a+2*b)*this.material.dynamicFriction*t.fluidAngularDragFriction+0.5*t.fluidAngularDrag*(1+t.fluidVacuumDrag)*a;this.angDrag/=2*(a+0.5*b)},__class__:Ei});var Ea=function(){this.tp0=this.tp1=0;this.lp0=this.gp0=this.lp1=this.gp1=null;this.length=this.lprojection=this.gprojection=
0;this.wrap_gnorm=null;this.gnormx=this.gnormy=0;this.wrap_lnorm=null;this.lnormx=this.lnormy=0;this.next=this.polygon=this.outer=null;this.gprojection=this.lprojection=this.length=this.gnormy=this.gnormx=this.lnormy=this.lnormx=0};g["zpp_nape.shape.ZPP_Edge"]=Ea;Ea.__name__=["zpp_nape","shape","ZPP_Edge"];Ea.prototype={wrapper:function(){null==this.outer&&(Ea.internal=!0,this.outer=new Ek,Ea.internal=!1,this.outer.zpp_inner=this);return this.outer},__class__:Ea};var Gi=function(){this.reverse_flag=
this.zip_lverts=this.zip_laxi=this.zip_gverts=this.zip_gaxi=this.zip_valid=this.zip_sanitation=!1;this.edgeCnt=0;this.outer_zn=this.lverts=this.wrap_lverts=this.gverts=this.wrap_gverts=this.edges=this.wrap_edges=null;pd.call(this,f.id_ShapeType_POLYGON);this.polygon=this;this.lverts=new ta;this.gverts=new ta;this.edges=new Rk;this.edgeCnt=0};g["zpp_nape.shape.ZPP_Polygon"]=Gi;Gi.__name__=["zpp_nape","shape","ZPP_Polygon"];Gi.__super__=pd;Gi.prototype=k(pd.prototype,{lverts_pa_invalidate:function(){this.invalidate_lverts()},
gverts_pa_validate:function(){this.validate_gverts()},lverts_post_adder:function(a){a.zpp_inner._invalidate=m(this,this.lverts_pa_invalidate);for(var b=null,c=null,d=this.lverts.next;null!=d&&!(d==a.zpp_inner);){b=null==b?this.gverts.next:b.next,c=null==c?this.edges.head:c.next;d=d.next}a=ta.get(0,0,!0);this.gverts.insert(b,a);null!=this.lverts.next.next&&(null==this.lverts.next.next.next?(null==Ea.zpp_pool?c=new Ea:(c=Ea.zpp_pool,Ea.zpp_pool=c.next,c.next=null),null,c.polygon=this,this.edges.add(c),
null==Ea.zpp_pool?c=new Ea:(c=Ea.zpp_pool,Ea.zpp_pool=c.next,c.next=null),null,c.polygon=this,this.edges.add(c),this.edgeCnt+=2):(null==Ea.zpp_pool?b=new Ea:(b=Ea.zpp_pool,Ea.zpp_pool=b.next,b.next=null),null,b.polygon=this,this.edges.insert(c,b),this.edgeCnt++));a._validate=m(this,this.gverts_pa_validate)},lverts_subber:function(a){this.cleanup_lvert(a.zpp_inner)},lverts_invalidate:function(){this.invalidate_lverts()},lverts_validate:function(){this.validate_lverts()},getlverts:function(){this.wrap_lverts=
yf.get(this.lverts);this.wrap_lverts.zpp_inner.post_adder=m(this,this.lverts_post_adder);this.wrap_lverts.zpp_inner.subber=m(this,this.lverts_subber);this.wrap_lverts.zpp_inner._invalidate=m(this,this.lverts_invalidate);this.wrap_lverts.zpp_inner._validate=m(this,this.lverts_validate);this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag},invalidate_lverts:function(){this.invalidate_laxi();this.invalidate_area_inertia();this.invalidate_angDrag();this.invalidate_localCOM();this.invalidate_gverts();
this.zip_sanitation=this.zip_valid=this.zip_lverts=!0;null!=this.body&&this.body.wake()},invalidate_laxi:function(){this.invalidate_gaxi();this.zip_laxi=this.zip_sweepRadius=!0},invalidate_gverts:function(){this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0);this.zip_gverts=!0},invalidate_gaxi:function(){this.zip_gaxi=!0},validate_lverts:function(){this.zip_lverts&&(this.zip_lverts=!1,2<this.lverts.length&&(this.validate_area_inertia(),0>this.area&&(this.reverse_vertices(),this.area=-this.area)))},
cleanup_lvert:function(a){for(var b=null,c=null,d=this.lverts.next;null!=d&&!(d==a);){b=null==b?this.gverts.next:b.next,c=null==c?this.edges.head:c.next;d=d.next}a=null==b?this.gverts.next:b.next;this.gverts.erase(b);null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=ta.zpp_pool;ta.zpp_pool=a;2==this.edgeCnt?(c=this.edges.pop_unsafe(),c.polygon=null,c.next=Ea.zpp_pool,Ea.zpp_pool=c,c=this.edges.pop_unsafe(),c.polygon=null,c.next=Ea.zpp_pool,
Ea.zpp_pool=c,this.edgeCnt=0):0!=this.edgeCnt&&(b=null==c?this.edges.head.elt:c.next.elt,this.edges.erase(c),b.polygon=null,b.next=Ea.zpp_pool,Ea.zpp_pool=b,this.edgeCnt--)},splice_collinear:function(){this.zip_sanitation&&(this.zip_sanitation=!1,this.splice_collinear_real())},splice_collinear_real:function(){if(!(null==this.lverts.next||null==this.lverts.next.next)&&null!=this.lverts.next.next.next){for(var a=null,b=this.lverts.next;null!=b;){var c=b,d=null==b.next?this.lverts.next:b.next;qc.vec_dsq(c.x,
c.y,d.x,d.y)<t.epsilon*t.epsilon?(this.cleanup_lvert(b),b=this.lverts.erase(a)):(a=b,b=b.next)}if(null!=this.lverts.next){do{a=!1;for(b=this.lverts.next;null!=b;){var c=null==b.next?this.lverts.next:b.next,e=b,d=c,h=null==c.next?this.lverts.next:c.next,f=0,g=0,f=d.x-e.x,g=d.y-e.y,i=e=0,e=h.x-d.x,i=h.y-d.y,d=i*f-e*g;d*d>=t.epsilon*t.epsilon||(this.cleanup_lvert(c),this.lverts.erase(null==b.next?null:b),a=!0);b=b.next}}while(a)}}},reverse_vertices:function(){this.lverts.reverse();this.gverts.reverse();
this.edges.reverse();var a=this.edges.iterator_at(this.edgeCnt-1),b=this.edges.pop_unsafe();this.edges.insert(a,b);this.reverse_flag=!this.reverse_flag;null!=this.wrap_lverts&&(this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag);null!=this.wrap_gverts&&(this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag);null!=this.wrap_edges&&(this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag)},validate_laxi:function(){if(this.zip_laxi){this.zip_laxi=!1;this.validate_lverts();for(var a=this.edges.head,
b=this.lverts.next,c=b,b=b.next;null!=b;){var d=b,e=a.elt,a=a.next;e.lp0=c;e.lp1=d;var h=0,f=0,h=c.x-d.x,f=c.y-d.y,g=Math.sqrt(h*h+f*f);e.length=g;g=1/g;h*=g;f*=g;g=h;h=-f;f=g;e.lprojection=h*c.x+f*c.y;e.lnormx=h;e.lnormy=f;null!=e.wrap_lnorm&&(e.wrap_lnorm.zpp_inner.x=h,e.wrap_lnorm.zpp_inner.y=f);c=d;b=b.next}e=this.lverts.next;a=a.elt;a.lp0=c;a.lp1=e;d=b=0;b=c.x-e.x;d=c.y-e.y;e=Math.sqrt(b*b+d*d);a.length=e;e=1/e;h=b*e;b=-(d*e);d=h;a.lprojection=b*c.x+d*c.y;a.lnormx=b;a.lnormy=d;null!=a.wrap_lnorm&&
(a.wrap_lnorm.zpp_inner.x=b,a.wrap_lnorm.zpp_inner.y=d)}},validate_gverts:function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1;this.validate_lverts();this.body.validate_axis();for(var a=this.lverts.next,b=this.gverts.next;null!=b;){var c=b,d=a,a=a.next;c.x=this.body.posx+(this.body.axisy*d.x-this.body.axisx*d.y);c.y=this.body.posy+(d.x*this.body.axisx+d.y*this.body.axisy);b=b.next}}},validate_gaxi:function(){if(this.zip_gaxi&&null!=this.body){this.zip_gaxi=!1;this.validate_laxi();this.body.validate_axis();
this.validate_gverts();for(var a=this.edges.head,b=this.gverts.next,c=b,b=b.next;null!=b;){var d=b,e=a.elt,a=a.next;e.gp0=c;e.gp1=d;e.gnormx=this.body.axisy*e.lnormx-this.body.axisx*e.lnormy;e.gnormy=e.lnormx*this.body.axisx+e.lnormy*this.body.axisy;e.gprojection=this.body.posx*e.gnormx+this.body.posy*e.gnormy+e.lprojection;null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy);e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy;e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy;c=d;b=
b.next}b=this.gverts.next;a=a.elt;a.gp0=c;a.gp1=b;a.gnormx=this.body.axisy*a.lnormx-this.body.axisx*a.lnormy;a.gnormy=a.lnormx*this.body.axisx+a.lnormy*this.body.axisy;a.gprojection=this.body.posx*a.gnormx+this.body.posy*a.gnormy+a.lprojection;null!=a.wrap_gnorm&&(a.wrap_gnorm.zpp_inner.x=a.gnormx,a.wrap_gnorm.zpp_inner.y=a.gnormy);a.tp0=a.gp0.y*a.gnormx-a.gp0.x*a.gnormy;a.tp1=a.gp1.y*a.gnormx-a.gp1.x*a.gnormy}},__validate_aabb:function(){this.validate_gverts();var a=this.gverts.next;this.aabb.minx=
a.x;this.aabb.miny=a.y;this.aabb.maxx=a.x;this.aabb.maxy=a.y;for(a=this.gverts.next.next;null!=a;){var b=a;b.x<this.aabb.minx&&(this.aabb.minx=b.x);b.x>this.aabb.maxx&&(this.aabb.maxx=b.x);b.y<this.aabb.miny&&(this.aabb.miny=b.y);b.y>this.aabb.maxy&&(this.aabb.maxy=b.y);a=a.next}},_force_validate_aabb:function(){var a=this.lverts.next,b=this.gverts.next,c=a,a=a.next;b.x=this.body.posx+(this.body.axisy*c.x-this.body.axisx*c.y);b.y=this.body.posy+(c.x*this.body.axisx+c.y*this.body.axisy);this.aabb.minx=
b.x;this.aabb.miny=b.y;this.aabb.maxx=b.x;this.aabb.maxy=b.y;for(b=this.gverts.next.next;null!=b;){var c=b,d=a,a=a.next;c.x=this.body.posx+(this.body.axisy*d.x-this.body.axisx*d.y);c.y=this.body.posy+(d.x*this.body.axisx+d.y*this.body.axisy);c.x<this.aabb.minx&&(this.aabb.minx=c.x);c.x>this.aabb.maxx&&(this.aabb.maxx=c.x);c.y<this.aabb.miny&&(this.aabb.miny=c.y);c.y>this.aabb.maxy&&(this.aabb.maxy=c.y);b=b.next}},__validate_sweepRadius:function(){var a=0,b=0;this.validate_laxi();for(var c=this.lverts.next;null!=
c;){var d=c,d=d.x*d.x+d.y*d.y;d>a&&(a=d);c=c.next}for(c=this.edges.head;null!=c;){d=c.elt;if(d.lprojection<b&&(b=d.lprojection,0>b))break;c=c.next}0>b&&(b=0);this.sweepRadius=Math.sqrt(a);this.sweepCoef=this.sweepRadius-b},__validate_area_inertia:function(){if(null==this.lverts.next||null==this.lverts.next.next||null==this.lverts.next.next.next)this.inertia=this.area=0;else{for(var a=this.area=0,b=0,c=this.lverts.next,d=c,e=c=c.next,c=c.next;null!=c;){var h=c,f=e.y*d.x-e.x*d.y,a=a+f*(e.x*e.x+e.y*
e.y+(e.x*d.x+e.y*d.y)+(d.x*d.x+d.y*d.y)),b=b+f;this.area+=e.x*(h.y-d.y);d=e;e=h;c=c.next}f=c=this.lverts.next;h=e.y*d.x-e.x*d.y;a+=h*(e.x*e.x+e.y*e.y+(e.x*d.x+e.y*d.y)+(d.x*d.x+d.y*d.y));this.area+=e.x*(f.y-d.y);d=e;e=f;c=c.next;f=e.y*d.x-e.x*d.y;a+=f*(e.x*e.x+e.y*e.y+(e.x*d.x+e.y*d.y)+(d.x*d.x+d.y*d.y));this.area+=e.x*(c.y-d.y);this.inertia=a/(6*(b+h+f));this.area*=0.5;0>this.area&&(this.area=-this.area,this.reverse_vertices())}},__validate_angDrag:function(){this.validate_area_inertia();this.validate_laxi();
for(var a=0,b=this.edges.head,c=0,d=this.lverts.next,e=d,d=d.next;null!=d;){var h=d,f=b.elt,b=b.next,c=c+f.length,g=0,i=0,g=h.x-e.x,i=h.y-e.y,a=a+f.length*t.fluidAngularDragFriction*this.material.dynamicFriction*f.lprojection*f.lprojection,j=-(e.y*f.lnormx-e.x*f.lnormy)/(i*f.lnormx-g*f.lnormy);if(0<j){var k;k=1<j?1:j;var l=0,m=0,l=e.x,m=e.y,o=k,l=l+g*o,m=m+i*o,o=f.lnormy*e.x-f.lnormx*e.y,l=f.lnormy*l-f.lnormx*m,a=a+(l*l*l-o*o*o)/(3*(l-o))*k*f.length*t.fluidAngularDrag}1>j&&(j=0>j?0:j,l=k=0,k=e.x,
l=e.y,e=j,k+=g*e,l+=i*e,e=f.lnormy*k-f.lnormx*l,g=f.lnormy*h.x-f.lnormx*h.y,a+=(g*g*g-e*e*e)/(3*(g-e))*t.fluidVacuumDrag*(1-j)*f.length*t.fluidAngularDrag);e=h;d=d.next}d=this.lverts.next;b=b.elt;c+=b.length;f=h=0;h=d.x-e.x;f=d.y-e.y;a+=b.length*t.fluidAngularDragFriction*this.material.dynamicFriction*b.lprojection*b.lprojection;g=-(e.y*b.lnormx-e.x*b.lnormy)/(f*b.lnormx-h*b.lnormy);0<g&&(i=1<g?1:g,l=k=0,k=e.x,l=e.y,j=b.lnormy*e.x-b.lnormx*e.y,k=b.lnormy*(k+h*i)-b.lnormx*(l+f*i),a+=(k*k*k-j*j*j)/
(3*(k-j))*i*b.length*t.fluidAngularDrag);1>g&&(g=0>g?0:g,j=i=0,i=e.x,j=e.y,e=b.lnormy*(i+h*g)-b.lnormx*(j+f*g),d=b.lnormy*d.x-b.lnormx*d.y,a+=(d*d*d-e*e*e)/(3*(d-e))*t.fluidVacuumDrag*(1-g)*b.length*t.fluidAngularDrag);this.angDrag=a/(this.inertia*c)},__validate_localCOM:function(){if(null==this.lverts.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y;else if(null==this.lverts.next.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y,this.localCOMx+=
1*this.lverts.next.next.x,this.localCOMy+=1*this.lverts.next.next.y,this.localCOMx*=0.5,this.localCOMy*=0.5;else{for(var a=this.localCOMy=this.localCOMx=0,b=this.lverts.next,c=b,d=b=b.next,b=b.next;null!=b;){var e=b,a=a+d.x*(e.y-c.y),c=e.y*d.x-e.x*d.y;this.localCOMx+=(d.x+e.x)*c;this.localCOMy+=(d.y+e.y)*c;c=d;d=e;b=b.next}e=b=this.lverts.next;a+=d.x*(e.y-c.y);c=e.y*d.x-e.x*d.y;this.localCOMx+=(d.x+e.x)*c;this.localCOMy+=(d.y+e.y)*c;c=d;d=e;b=b.next;a+=d.x*(b.y-c.y);c=b.y*d.x-b.x*d.y;this.localCOMx+=
(d.x+b.x)*c;this.localCOMy+=(d.y+b.y)*c;a=1/(3*a);this.localCOMx*=a;this.localCOMy*=a}},localCOM_validate:function(){this.zip_localCOM&&(this.zip_localCOM=!1,this.type==f.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy))},localCOM_invalidate:function(a){this.zip_localCOM&&(this.zip_localCOM=!1,this.type==f.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=this.wrap_localCOM&&
(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy));for(var b=0,c=0,b=a.x-this.localCOMx,c=a.y-this.localCOMy,a=this.lverts.next;null!=a;){var d=a;d.x+=1*b;d.y+=1*c;a=a.next}this.invalidate_lverts()},setupLocalCOM:function(){this.wrap_localCOM=ha.get(this.localCOMx,this.localCOMy,null);this.wrap_localCOM.zpp_inner._inuse=!0;this.wrap_localCOM.zpp_inner._validate=m(this,this.localCOM_validate);this.wrap_localCOM.zpp_inner._invalidate=m(this,this.localCOM_invalidate)},
__class__:Gi});var xe=function(){this.sweep=this.dynab=null;this.is_sweep=!1;this.space=null};g["zpp_nape.space.ZPP_Broadphase"]=xe;xe.__name__=["zpp_nape","space","ZPP_Broadphase"];xe.prototype={insert:function(a){this.is_sweep?this.sweep.__insert(a):this.dynab.__insert(a)},remove:function(a){this.is_sweep?this.sweep.__remove(a):this.dynab.__remove(a)},sync:function(a){this.is_sweep?!this.sweep.space.continuous&&a.zip_aabb&&null!=a.body&&(a.zip_aabb=!1,a.type==f.id_ShapeType_CIRCLE?a.circle.__validate_aabb():
a.polygon.__validate_aabb()):this.dynab.__sync(a)},broadphase:function(){},clear:function(){},rayCast:function(){return null},__class__:xe};var Fa=function(){this.synced=this.first_sync=!1;this.snext=null;this.moved=!1;this.next=this.mnext=null;this.height=this.rayt=0;this.parent=this.child1=this.child2=null;this.dyn=!1;this.aabb=this.shape=null;this.height=-1};g["zpp_nape.space.ZPP_AABBNode"]=Fa;Fa.__name__=["zpp_nape","space","ZPP_AABBNode"];Fa.prototype={free:function(){this.height=-1;var a=this.aabb;
null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a.wrap_min=a.wrap_max=null;a._invalidate=null;a._validate=null;a.next=oa.zpp_pool;oa.zpp_pool=a;this.mnext=this.snext=this.next=this.child1=this.child2=this.parent=null},__class__:Fa};var Ca=function(){this.arb=this.next=null;this.id=this.di=0;this.first=this.sleeping=!1;this.n1=this.n2=null};g["zpp_nape.space.ZPP_AABBPair"]=Ca;Ca.__name__=["zpp_nape","space","ZPP_AABBPair"];Ca.prototype={__class__:Ca};var dc=function(){this.root=null};g["zpp_nape.space.ZPP_AABBTree"]=
dc;dc.__name__=["zpp_nape","space","ZPP_AABBTree"];dc.prototype={clear:function(){if(null!=this.root){var a;this.root.next=null;for(a=this.root;null!=a;){var b;b=a;a=b.next;b.next=null;null==b.child1?(b.shape.node=null,b.shape.removedFromSpace(),b.shape=null):(null!=b.child1&&(b.child1.next=a,a=b.child1),null!=b.child2&&(b.child2.next=a,a=b.child2));b.free();b.next=Fa.zpp_pool;Fa.zpp_pool=b}this.root=null}},inlined_insertLeaf:function(a){if(null==this.root)this.root=a,this.root.parent=null;else{for(var b=
a.aabb,c=this.root;null!=c.child1;){var d=c.child1,e=c.child2,f=c.aabb.perimeter();dc.tmpaabb.setCombine(c.aabb,b);var g=dc.tmpaabb.perimeter(),i=2*g,f=2*(g-f);dc.tmpaabb.setCombine(b,d.aabb);null==d.child1?g=dc.tmpaabb.perimeter()+f:(g=d.aabb.perimeter(),g=dc.tmpaabb.perimeter()-g+f);dc.tmpaabb.setCombine(b,e.aabb);if(null==e.child1)f=dc.tmpaabb.perimeter()+f;else var j=e.aabb.perimeter(),f=dc.tmpaabb.perimeter()-j+f;if(i<g&&i<f)break;else c=g<f?d:e}d=c.parent;null==Fa.zpp_pool?e=new Fa:(e=Fa.zpp_pool,
Fa.zpp_pool=e.next,e.next=null);null==oa.zpp_pool?e.aabb=new oa:(e.aabb=oa.zpp_pool,oa.zpp_pool=e.aabb.next,e.aabb.next=null);null;e.moved=!1;e.synced=!1;e.first_sync=!1;e.parent=d;e.aabb.setCombine(b,c.aabb);e.height=c.height+1;null!=d?(d.child1==c?d.child1=e:d.child2=e,e.child1=c,e.child2=a,c.parent=e,a.parent=e):(e.child1=c,e.child2=a,c.parent=e,this.root=a.parent=e);for(c=a.parent;null!=c;)c=this.balance(c),a=c.child1,b=c.child2,d=a.height,e=b.height,c.height=1+(d>e?d:e),c.aabb.setCombine(a.aabb,
b.aabb),c=c.parent}},removeLeaf:function(a){this.inlined_removeLeaf(a)},inlined_removeLeaf:function(a){if(a==this.root)this.root=null;else{var b=a.parent,c=b.parent,a=b.child1==a?b.child2:b.child1;if(null!=c){c.child1==b?c.child1=a:c.child2=a;a.parent=c;b.free();b.next=Fa.zpp_pool;Fa.zpp_pool=b;for(b=c;null!=b;)b=this.balance(b),a=b.child1,c=b.child2,b.aabb.setCombine(a.aabb,c.aabb),a=a.height,c=c.height,b.height=1+(a>c?a:c),b=b.parent}else this.root=a,a.parent=null,b.free(),b.next=Fa.zpp_pool,Fa.zpp_pool=
b}},balance:function(a){if(null==a.child1||2>a.height)return a;var b=a.child1,c=a.child2,d=c.height-b.height;if(1<d){var e=c.child1,f=c.child2;c.child1=a;c.parent=a.parent;a.parent=c;null!=c.parent?c.parent.child1==a?c.parent.child1=c:c.parent.child2=c:this.root=c;e.height>f.height?(c.child2=e,a.child2=f,f.parent=a,a.aabb.setCombine(b.aabb,f.aabb),c.aabb.setCombine(a.aabb,e.aabb),a.height=1+function(){var a=b.height,c=f.height;return a>c?a:c}(this),c.height=1+function(){var b=a.height,c=e.height;
return b>c?b:c}(this)):(c.child2=f,a.child2=e,e.parent=a,a.aabb.setCombine(b.aabb,e.aabb),c.aabb.setCombine(a.aabb,f.aabb),a.height=1+function(){var a=b.height,c=e.height;return a>c?a:c}(this),c.height=1+function(){var b=a.height,c=f.height;return b>c?b:c}(this));return c}if(-1>d){var g=b.child1,i=b.child2;b.child1=a;b.parent=a.parent;a.parent=b;null!=b.parent?b.parent.child1==a?b.parent.child1=b:b.parent.child2=b:this.root=b;g.height>i.height?(b.child2=g,a.child1=i,i.parent=a,a.aabb.setCombine(c.aabb,
i.aabb),b.aabb.setCombine(a.aabb,g.aabb),a.height=1+function(){var a=c.height,b=i.height;return a>b?a:b}(this),b.height=1+function(){var b=a.height,c=g.height;return b>c?b:c}(this)):(b.child2=i,a.child1=g,g.parent=a,a.aabb.setCombine(c.aabb,g.aabb),b.aabb.setCombine(a.aabb,i.aabb),a.height=1+function(){var a=c.height,b=g.height;return a>b?a:b}(this),b.height=1+function(){var b=a.height,c=i.height;return b>c?b:c}(this));return b}return a},__class__:dc};var Ej=function(a){this.stree=this.dtree=this.pairs=
this.syncs=this.moves=this.openlist=null;xe.call(this);this.space=a;this.is_sweep=!1;this.dynab=this;this.stree=new dc;this.dtree=new dc};g["zpp_nape.space.ZPP_DynAABBPhase"]=Ej;Ej.__name__=["zpp_nape","space","ZPP_DynAABBPhase"];Ej.__super__=xe;Ej.prototype=k(xe.prototype,{__insert:function(a){var b;null==Fa.zpp_pool?b=new Fa:(b=Fa.zpp_pool,Fa.zpp_pool=b.next,b.next=null);null==oa.zpp_pool?b.aabb=new oa:(b.aabb=oa.zpp_pool,oa.zpp_pool=b.aabb.next,b.aabb.next=null);null;b.moved=!1;b.synced=!1;b.first_sync=
!1;b.shape=a;a.node=b;b.synced=!0;b.first_sync=!0;b.snext=this.syncs;this.syncs=b},__remove:function(a){var b=a.node;b.first_sync||(b.dyn?this.dtree.removeLeaf(b):this.stree.removeLeaf(b));a.node=null;if(b.synced){for(var c=null,d=this.syncs;null!=d&&!(d==b);){c=d;d=d.snext}null==c?this.syncs=d.snext:c.snext=d.snext;d.snext=null;b.synced=!1}if(b.moved){c=null;for(d=this.moves;null!=d&&!(d==b);){c=d;d=d.mnext}null==c?this.moves=d.mnext:c.mnext=d.mnext;d.mnext=null;b.moved=!1}for(var c=null,e=this.pairs;null!=
e;)d=e.next,e.n1==b||e.n2==b?(null==c?this.pairs=d:c.next=d,null!=e.arb&&(e.arb.pair=null),e.arb=null,e.n1.shape.pairs.remove(e),e.n2.shape.pairs.remove(e),e.n1=e.n2=null,e.sleeping=!1,e.next=Ca.zpp_pool,Ca.zpp_pool=e):c=e,e=d;for(;null!=a.pairs.head;)c=a.pairs.pop_unsafe(),c.n1==b?c.n2.shape.pairs.remove(c):c.n1.shape.pairs.remove(c),null!=c.arb&&(c.arb.pair=null),c.arb=null,c.n1=c.n2=null,c.sleeping=!1,c.next=Ca.zpp_pool,Ca.zpp_pool=c;b.free();b.next=Fa.zpp_pool;Fa.zpp_pool=b},__sync:function(a){var b=
a.node;if(!b.synced&&(!this.space.continuous&&a.zip_aabb&&null!=a.body&&(a.zip_aabb=!1,a.type==f.id_ShapeType_CIRCLE?a.circle.__validate_aabb():a.polygon.__validate_aabb()),b.dyn!=(a.body.type==f.id_BodyType_STATIC?!1:!a.body.component.sleeping)||!b.aabb.contains(a.aabb)))b.synced=!0,b.snext=this.syncs,this.syncs=b},sync_broadphase:function(){this.space.validation();if(null!=this.syncs)if(null==this.moves){for(var a=this.syncs;null!=a;){var b=a.shape;a.first_sync?a.first_sync=!1:(a.dyn?this.dtree:
this.stree).inlined_removeLeaf(a);var c=a.aabb;!this.space.continuous&&b.zip_aabb&&null!=b.body&&(b.zip_aabb=!1,b.type==f.id_ShapeType_CIRCLE?b.circle.__validate_aabb():b.polygon.__validate_aabb());c.setExpand(b.aabb,3);((b.body.type==f.id_BodyType_STATIC?a.dyn=!1:a.dyn=!b.body.component.sleeping)?this.dtree:this.stree).inlined_insertLeaf(a);a.synced=!1;a.moved=!0;a.mnext=a.snext;a.snext=null;a=a.mnext}a=this.syncs;this.syncs=this.moves;this.moves=a}else for(;null!=this.syncs;)a=this.syncs,this.syncs=
a.snext,a.snext=null,b=a.shape,a.first_sync?a.first_sync=!1:(a.dyn?this.dtree:this.stree).inlined_removeLeaf(a),c=a.aabb,!this.space.continuous&&b.zip_aabb&&null!=b.body&&(b.zip_aabb=!1,b.type==f.id_ShapeType_CIRCLE?b.circle.__validate_aabb():b.polygon.__validate_aabb()),c.setExpand(b.aabb,3),((b.body.type==f.id_BodyType_STATIC?a.dyn=!1:a.dyn=!b.body.component.sleeping)?this.dtree:this.stree).inlined_insertLeaf(a),a.synced=!1,a.moved||(a.moved=!0,a.mnext=this.moves,this.moves=a)},broadphase:function(a,
b){for(var c=this.syncs;null!=c;){var d=c.shape;c.first_sync?c.first_sync=!1:(c.dyn?this.dtree:this.stree).inlined_removeLeaf(c);var e=c.aabb;!a.continuous&&d.zip_aabb&&null!=d.body&&(d.zip_aabb=!1,d.type==f.id_ShapeType_CIRCLE?d.circle.__validate_aabb():d.polygon.__validate_aabb());e.setExpand(d.aabb,3);((d.body.type==f.id_BodyType_STATIC?c.dyn=!1:c.dyn=!d.body.component.sleeping)?this.dtree:this.stree).inlined_insertLeaf(c);c.synced=!1;c=c.snext}for(;null!=this.syncs;)if(c=this.syncs,this.syncs=
c.snext,c.snext=null,!c.moved&&(c.moved=!1,d=c.shape,!d.body.component.sleeping)){var e=c.aabb,h=null;null!=this.dtree.root&&(this.dtree.root.next=h,h=this.dtree.root);for(;null!=h;){var g;g=h;h=g.next;g.next=null;if(g!=c)if(null==g.child1){var i=g.shape;if(i.body!=d.body&&!(i.body.type==f.id_BodyType_STATIC&&d.body.type==f.id_BodyType_STATIC)&&e.intersect(g.aabb)){var j,k;d.id<i.id?(j=d.id,k=i.id):(j=i.id,k=d.id);for(var l=null,m=(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=m;){var o=m.elt;
if(o.id==j&&o.di==k){l=o;break}m=m.next}null!=l?l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==Ca.zpp_pool?l=new Ca:(l=Ca.zpp_pool,Ca.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=g,l.id=j,l.di=k,l.next=this.pairs,this.pairs=l,l.first=!0,d.pairs.inlined_add(l),i.pairs.inlined_add(l))}}else e.intersect(g.aabb)&&(null!=g.child1&&(g.child1.next=h,h=g.child1),null!=g.child2&&(g.child2.next=h,h=g.child2))}null!=this.stree.root&&(this.stree.root.next=h,h=this.stree.root);for(;null!=
h;)if(g=h,h=g.next,g.next=null,g!=c)if(null==g.child1){if(i=g.shape,i.body!=d.body&&!(i.body.type==f.id_BodyType_STATIC&&d.body.type==f.id_BodyType_STATIC)&&e.intersect(g.aabb)){d.id<i.id?(j=d.id,k=i.id):(j=i.id,k=d.id);l=null;for(m=(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=m;){o=m.elt;if(o.id==j&&o.di==k){l=o;break}m=m.next}null!=l?l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==Ca.zpp_pool?l=new Ca:(l=Ca.zpp_pool,Ca.zpp_pool=l.next,l.next=null),null,l.n1=
c,l.n2=g,l.id=j,l.di=k,l.next=this.pairs,this.pairs=l,l.first=!0,d.pairs.inlined_add(l),i.pairs.inlined_add(l))}}else e.intersect(g.aabb)&&(null!=g.child1&&(g.child1.next=h,h=g.child1),null!=g.child2&&(g.child2.next=h,h=g.child2))}for(;null!=this.moves;)if(c=this.moves,this.moves=c.mnext,c.mnext=null,c.moved=!1,d=c.shape,!d.body.component.sleeping){e=c.aabb;h=null;null!=this.dtree.root&&(this.dtree.root.next=h,h=this.dtree.root);for(;null!=h;)if(g=h,h=g.next,g.next=null,g!=c)if(null==g.child1){if(i=
g.shape,i.body!=d.body&&!(i.body.type==f.id_BodyType_STATIC&&d.body.type==f.id_BodyType_STATIC)&&e.intersect(g.aabb)){d.id<i.id?(j=d.id,k=i.id):(j=i.id,k=d.id);l=null;for(m=(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=m;){o=m.elt;if(o.id==j&&o.di==k){l=o;break}m=m.next}null!=l?l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==Ca.zpp_pool?l=new Ca:(l=Ca.zpp_pool,Ca.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=g,l.id=j,l.di=k,l.next=this.pairs,this.pairs=l,l.first=
!0,d.pairs.inlined_add(l),i.pairs.inlined_add(l))}}else e.intersect(g.aabb)&&(null!=g.child1&&(g.child1.next=h,h=g.child1),null!=g.child2&&(g.child2.next=h,h=g.child2));null!=this.stree.root&&(this.stree.root.next=h,h=this.stree.root);for(;null!=h;)if(g=h,h=g.next,g.next=null,g!=c)if(null==g.child1){if(i=g.shape,i.body!=d.body&&!(i.body.type==f.id_BodyType_STATIC&&d.body.type==f.id_BodyType_STATIC)&&e.intersect(g.aabb)){d.id<i.id?(j=d.id,k=i.id):(j=i.id,k=d.id);l=null;for(m=(d.pairs.length<i.pairs.length?
d:i).pairs.head;null!=m;){o=m.elt;if(o.id==j&&o.di==k){l=o;break}m=m.next}null!=l?l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==Ca.zpp_pool?l=new Ca:(l=Ca.zpp_pool,Ca.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=g,l.id=j,l.di=k,l.next=this.pairs,this.pairs=l,l.first=!0,d.pairs.inlined_add(l),i.pairs.inlined_add(l))}}else e.intersect(g.aabb)&&(null!=g.child1&&(g.child1.next=h,h=g.child1),null!=g.child2&&(g.child2.next=h,h=g.child2))}c=null;for(d=this.pairs;null!=d;)!d.first&&
!d.n1.aabb.intersect(d.n2.aabb)?(null==c?this.pairs=d.next:c.next=d.next,d.n1.shape.pairs.inlined_try_remove(d),d.n2.shape.pairs.inlined_try_remove(d),e=d.next,null!=d.arb&&(d.arb.pair=null),d.arb=null,d.n1=d.n2=null,d.sleeping=!1,d.next=Ca.zpp_pool,Ca.zpp_pool=d,d=e):(e=d.n1.shape,h=e.body,g=d.n2.shape,i=g.body,!d.first&&(h.component.sleeping||h.type==f.id_BodyType_STATIC)&&(i.component.sleeping||i.type==f.id_BodyType_STATIC)?(d.sleeping=!0,null==c?this.pairs=d.next:c.next=d.next):(d.first=!1,e.aabb.intersect(g.aabb)&&
(c=d.arb,d.arb=b?a.narrowPhase(e,g,h.type!=f.id_BodyType_DYNAMIC||i.type!=f.id_BodyType_DYNAMIC,d.arb,!1):a.continuousEvent(e,g,h.type!=f.id_BodyType_DYNAMIC||i.type!=f.id_BodyType_DYNAMIC,d.arb,!1),null==d.arb?null!=c&&(c.pair=null):d.arb.pair=d),c=d),d=d.next)},clear:function(){for(;null!=this.syncs;){var a=this.syncs.snext;this.syncs.snext=null;this.syncs.first_sync&&(this.syncs.shape.node=null,this.syncs.shape.removedFromSpace(),this.syncs.shape=null);this.syncs=a}for(;null!=this.moves;)a=this.moves.mnext,
this.moves.mnext=null,this.moves.first_sync&&(this.moves.shape.node=null,this.moves.shape.removedFromSpace(),this.moves.shape=null),this.moves=a;for(;null!=this.pairs;){a=this.pairs.next;null!=this.pairs.arb&&(this.pairs.arb.pair=null);this.pairs.arb=null;this.pairs.n1.shape.pairs.inlined_try_remove(this.pairs);this.pairs.n2.shape.pairs.inlined_try_remove(this.pairs);var b=this.pairs;b.n1=b.n2=null;b.sleeping=!1;b.next=Ca.zpp_pool;Ca.zpp_pool=b;this.pairs=a}this.dtree.clear();this.stree.clear()},
rayCast:function(a,b,c){null==this.openlist&&(this.openlist=new Sk);this.sync_broadphase();a.validate_dir();var d=a.maxdist;if(null!=this.dtree.root&&a.aabbtest(this.dtree.root.aabb)){var e=a.aabbsect(this.dtree.root.aabb);if(0<=e&&e<d){this.dtree.root.rayt=e;for(var e=null,h=this.openlist.head;null!=h&&!(this.dtree.root.rayt<h.elt.rayt);){e=h;h=h.next}this.openlist.inlined_insert(e,this.dtree.root)}}if(null!=this.stree.root&&a.aabbtest(this.stree.root.aabb)&&(e=a.aabbsect(this.stree.root.aabb),0<=
e&&e<d)){this.stree.root.rayt=e;e=null;for(h=this.openlist.head;null!=h&&!(this.stree.root.rayt<h.elt.rayt);){e=h;h=h.next}this.openlist.inlined_insert(e,this.stree.root)}for(e=null;null!=this.openlist.head;){h=this.openlist.pop_unsafe();if(h.rayt>=d)break;if(null==h.child1){if(h=h.shape,null==c||h.filter.shouldCollide(c))h=h.type==f.id_ShapeType_CIRCLE?a.circlesect(h.circle,b,d):a.aabbtest(h.aabb)?a.polysect(h.polygon,b,d):null,null!=h&&(d=h.zpp_inner.toiDistance,null!=e&&e.zpp_inner.free(),e=h)}else{if(null!=
h.child1&&a.aabbtest(h.child1.aabb)){var g=a.aabbsect(h.child1.aabb);if(0<=g&&g<d){h.child1.rayt=g;for(var g=null,i=this.openlist.head;null!=i&&!(h.child1.rayt<i.elt.rayt);){g=i;i=i.next}this.openlist.inlined_insert(g,h.child1)}}if(null!=h.child2&&a.aabbtest(h.child2.aabb)&&(g=a.aabbsect(h.child2.aabb),0<=g&&g<d)){h.child2.rayt=g;g=null;for(i=this.openlist.head;null!=i&&!(h.child2.rayt<i.elt.rayt);){g=i;i=i.next}this.openlist.inlined_insert(g,h.child2)}}}this.openlist.clear();return e},__class__:Ej});
var kb=function(){this.waket=0;this.sleep=!1;this.comps=null;this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.comps=new Tk};g["zpp_nape.space.ZPP_Island"]=kb;kb.__name__=["zpp_nape","space","ZPP_Island"];kb.prototype={inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=
!0;this.length--},inlined_pop_unsafe:function(){var a=this.next;this.pop();return a},__class__:kb};var Mb=function(){this.woken=!1;this.waket=0;this.sleeping=!1;this.body=this.constraint=this.island=null;this.isBody=!1;this.rank=0;this.next=this.parent=null;this.sleeping=!1;this.island=null;this.parent=this;this.rank=0;this.woken=!1};g["zpp_nape.space.ZPP_Component"]=Mb;Mb.__name__=["zpp_nape","space","ZPP_Component"];Mb.prototype={__class__:Mb};var eb=function(){this.freed=this.lazydel=!1;this.length=
0;this._inuse=this.modified=this.pushmod=!1;this.int1=this.int2=this.next=null;this.id=this.di=0;this.arbiters=new Qg};g["zpp_nape.space.ZPP_CallbackSet"]=eb;eb.__name__=["zpp_nape","space","ZPP_CallbackSet"];eb.get=function(a,b){var c;null==eb.zpp_pool?c=new eb:(c=eb.zpp_pool,eb.zpp_pool=c.next,c.next=null);c.freed=!1;c.lazydel=!1;c.COLLISIONstate=f.id_PreFlag_ACCEPT;c.COLLISIONstamp=0;c.SENSORstate=f.id_PreFlag_ACCEPT;c.SENSORstamp=0;c.FLUIDstate=f.id_PreFlag_ACCEPT;c.FLUIDstamp=0;a.id<b.id?(c.int1=
a,c.int2=b):(c.int1=b,c.int2=a);c.id=c.int1.id;c.di=c.int2.id;return c};eb.prototype={inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.next;this.pop();return a},inlined_erase:function(a){var b,
c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},remove_arb:function(a){this.arbiters.inlined_try_remove(a)},empty_arb:function(a){var b;b=!0;for(var c=this.arbiters.head;null!=c;)if(0==(c.elt.type&a))c=c.next;else{b=!1;break}return b},sleeping:function(){var a;a=!0;for(var b=this.arbiters.head;null!=b;)if(b.elt.sleeping)b=b.next;else{a=!1;break}return a},
__class__:eb};var Uk=function(a){this.cbsets=this.space=null;null==rc.zpp_pool?this.cbsets=new rc:(this.cbsets=rc.zpp_pool,rc.zpp_pool=this.cbsets.next,this.cbsets.next=null);null;this.cbsets.lt=Ia.setlt;this.space=a};g["zpp_nape.space.ZPP_CbSetManager"]=Uk;Uk.__name__=["zpp_nape","space","ZPP_CbSetManager"];Uk.prototype={get:function(a){if(null==a.head)return null;var b;null==Ia.zpp_pool?b=new Ia:(b=Ia.zpp_pool,Ia.zpp_pool=b.next,b.next=null);null;var c=b.cbTypes;b.cbTypes=a;var d=this.cbsets.find_weak(b);
null!=d?a=d.data:(a=Ia.get(a),this.cbsets.insert(a),a.manager=this);b.cbTypes=c;b.free();b.next=Ia.zpp_pool;Ia.zpp_pool=b;return a},remove:function(a){for(this.cbsets.remove(a);null!=a.cbpairs.head;){var b=a.cbpairs.pop_unsafe();b.a!=b.b&&(a==b.a?b.b.cbpairs.remove(b):b.a.cbpairs.remove(b));b.a=b.b=null;b.listeners.clear();b.next=Lb.zpp_pool;Lb.zpp_pool=b}a.manager=null},clear:function(){},validate:function(){if(!this.cbsets.empty()){for(var a=this.cbsets.parent;null!=a.prev;)a=a.prev;for(;null!=
a;)if(a.data.validate(),null!=a.next)for(a=a.next;null!=a.prev;)a=a.prev;else{for(;null!=a.parent&&a==a.parent.next;)a=a.parent;a=a.parent}}},pair:function(a,b){for(var c=null,d=(a.cbpairs.length<b.cbpairs.length?a.cbpairs:b.cbpairs).head;null!=d;){var e=d.elt;if(e.a==a&&e.b==b||e.a==b&&e.b==a){c=e;break}d=d.next}null==c&&(c=Lb.get(a,b),a.cbpairs.add(c),b!=a&&b.cbpairs.add(c));c.zip_listeners&&(c.zip_listeners=!1,c.__validate());return c},__class__:Uk};var Gk=function(a,b){this.precb=this.prelisteners=
null;this.continuous=!1;this.toiEvents=null;this.pre_dt=0;this.c_arbiters_true=this.c_arbiters_false=this.f_arbiters=this.s_arbiters=this.live=this.wrap_live=this.live_constraints=this.wrap_livecon=this.staticsleep=this.islands=this.listeners=this.wrap_listeners=this.callbacks=this.callbackset_list=this.cbsets=null;this.sortcontacts=!1;this.time=0;this.midstep=!1;this.global_lin_drag=this.global_ang_drag=this.stamp=0;this.wrap_gravity=this.bodies=this.wrap_bodies=this.compounds=this.wrap_compounds=
this.constraints=this.wrap_constraints=this.kinematics=this.bphase=this.__static=null;this.gravityx=this.gravityy=0;this.outer=null;this.toiEvents=new Vk;this.global_ang_drag=this.global_lin_drag=0.015;this.precb=new yi;this.precb.zpp_inner=new nc;this.sortcontacts=!0;this.pre_dt=0;var c;if(!(c=null==b))null==f.Broadphase_DYNAMIC_AABB_TREE&&(f.internal=!0,f.Broadphase_DYNAMIC_AABB_TREE=new qf,f.internal=!1),c=b==f.Broadphase_DYNAMIC_AABB_TREE;c?this.bphase=new Ej(this):(null==f.Broadphase_SWEEP_AND_PRUNE&&
(f.internal=!0,f.Broadphase_SWEEP_AND_PRUNE=new qf,f.internal=!1),b==f.Broadphase_SWEEP_AND_PRUNE&&(this.bphase=new Fj(this)));this.time=0;null!=a?(this.gravityx=a.x,this.gravityy=a.y):this.gravityy=this.gravityx=0;this.bodies=new Te;this.wrap_bodies=Kb.get(this.bodies);this.wrap_bodies.zpp_inner.adder=m(this,this.bodies_adder);this.wrap_bodies.zpp_inner.subber=m(this,this.bodies_subber);this.compounds=new zf;this.wrap_compounds=ue.get(this.compounds);this.wrap_compounds.zpp_inner.adder=m(this,this.compounds_adder);
this.wrap_compounds.zpp_inner.subber=m(this,this.compounds_subber);this.kinematics=new Te;this.c_arbiters_true=new Gj;this.c_arbiters_false=new Gj;this.f_arbiters=new Wk;this.s_arbiters=new Xk;this.islands=new kb;this.live=new Te;this.wrap_live=Kb.get(this.live,!0);this.staticsleep=new Te;this.constraints=new Fd;this.wrap_constraints=se.get(this.constraints);this.wrap_constraints.zpp_inner.adder=m(this,this.constraints_adder);this.wrap_constraints.zpp_inner.subber=m(this,this.constraints_subber);
this.live_constraints=new Fd;this.wrap_livecon=se.get(this.live_constraints,!0);this.__static=Ib.__static();this.__static.zpp_inner.space=this;this.callbacks=new nc;this.midstep=!1;this.listeners=new Hj;this.wrap_listeners=ie.get(this.listeners);this.wrap_listeners.zpp_inner.adder=m(this,this.listeners_adder);this.wrap_listeners.zpp_inner.subber=m(this,this.listeners_subber);this.callbackset_list=new eb;this.mrca1=new we;this.mrca2=new we;this.prelisteners=new wf;this.cbsets=new Uk(this)};g["zpp_nape.space.ZPP_Space"]=
Gk;Gk.__name__=["zpp_nape","space","ZPP_Space"];Gk.prototype={getgravity:function(){this.wrap_gravity=ha.get(this.gravityx,this.gravityy,null);this.wrap_gravity.zpp_inner._inuse=!0;this.wrap_gravity.zpp_inner._invalidate=m(this,this.gravity_invalidate);this.wrap_gravity.zpp_inner._validate=m(this,this.gravity_validate)},gravity_invalidate:function(a){this.gravityx=a.x;this.gravityy=a.y;for(var a=new zf,b=this.bodies.head;null!=b;){var c=b.elt;c.world||(c.component.waket=this.stamp+(this.midstep?0:
1),c.type==f.id_BodyType_KINEMATIC&&(c.kinematicDelaySleep=!0),c.component.sleeping&&this.really_wake(c,!1));b=b.next}for(b=this.compounds.head;null!=b;)a.add(b.elt),b=b.next;for(;null!=a.head;){b=a.pop_unsafe();for(c=b.bodies.head;null!=c;){var d=c.elt;d.world||(d.component.waket=this.stamp+(this.midstep?0:1),d.type==f.id_BodyType_KINEMATIC&&(d.kinematicDelaySleep=!0),d.component.sleeping&&this.really_wake(d,!1));c=c.next}for(b=b.compounds.head;null!=b;)a.add(b.elt),b=b.next}},gravity_validate:function(){this.wrap_gravity.zpp_inner.x=
this.gravityx;this.wrap_gravity.zpp_inner.y=this.gravityy},clear:function(){for(;null!=this.listeners.head;)this.remListener(this.listeners.pop_unsafe());for(;null!=this.callbackset_list.next;){var a=this.callbackset_list.pop_unsafe();a.arbiters.clear();a.int1=a.int2=null;a.id=a.di=-1;a.freed=!0;null;a.next=eb.zpp_pool;eb.zpp_pool=a}for(;null!=this.c_arbiters_true.head;)this.c_arbiters_true.pop_unsafe().retire();for(;null!=this.c_arbiters_false.head;)this.c_arbiters_false.pop_unsafe().retire();for(;null!=
this.s_arbiters.head;)this.s_arbiters.pop_unsafe().retire();for(;null!=this.f_arbiters.head;)this.f_arbiters.pop_unsafe().retire();for(this.bphase.clear();null!=this.bodies.head;){a=this.bodies.pop_unsafe();if(null!=a.component){var b=a.component.island;if(null!=b){for(;null!=b.comps.head;){var c=b.comps.pop_unsafe();c.sleeping=!1;c.island=null;c.parent=c;c.rank=0}b.next=kb.zpp_pool;kb.zpp_pool=b}}a.removedFromSpace();a.space=null}for(;null!=this.constraints.head;){a=this.constraints.pop_unsafe();
if(null!=a.component&&(b=a.component.island,null!=b)){for(;null!=b.comps.head;)c=b.comps.pop_unsafe(),c.sleeping=!1,c.island=null,c.parent=c,c.rank=0;b.next=kb.zpp_pool;kb.zpp_pool=b}a.removedFromSpace();a.space=null}this.kinematics.clear();for(a=new zf;null!=this.compounds.head;)b=this.compounds.pop_unsafe(),a.add(b);for(;null!=a.head;){b=a.pop_unsafe();b.removedFromSpace();b.space=null;for(c=b.bodies.head;null!=c;){var d=c.elt;if(null!=d.component){var e=d.component.island;if(null!=e){for(;null!=
e.comps.head;){var f=e.comps.pop_unsafe();f.sleeping=!1;f.island=null;f.parent=f;f.rank=0}e.next=kb.zpp_pool;kb.zpp_pool=e}}d.removedFromSpace();d.space=null;c=c.next}for(c=b.constraints.head;null!=c;){d=c.elt;if(null!=d.component&&(e=d.component.island,null!=e)){for(;null!=e.comps.head;)f=e.comps.pop_unsafe(),f.sleeping=!1,f.island=null,f.parent=f,f.rank=0;e.next=kb.zpp_pool;kb.zpp_pool=e}d.removedFromSpace();d.space=null;c=c.next}for(b=b.compounds.head;null!=b;)a.add(b.elt),b=b.next}this.staticsleep.clear();
this.live.clear();this.live_constraints.clear();this.time=this.stamp=0;this.mrca1.clear();this.mrca2.clear();this.prelisteners.clear();this.cbsets.clear()},bodies_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_bodies.remove(a),this.addBody(a.zpp_inner),!0):!1},bodies_subber:function(a){this.remBody(a.zpp_inner)},compounds_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.wrap_compounds.remove(a),
this.addCompound(a.zpp_inner),!0):!1},compounds_subber:function(a){this.remCompound(a.zpp_inner)},constraints_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(a),this.addConstraint(a.zpp_inner),!0):!1},constraints_subber:function(a){this.remConstraint(a.zpp_inner)},listeners_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(a),this.addListener(a.zpp_inner),
!0):!1},listeners_subber:function(a){this.remListener(a.zpp_inner)},addListener:function(a){a.space=this;a.addedToSpace();null!=a.interaction&&null},remListener:function(a){null!=a.interaction&&null;a.removedFromSpace();a.space=null},add_callbackset:function(a){a.int1.cbsets.inlined_add(a);a.int2.cbsets.inlined_add(a);this.callbackset_list.inlined_add(a)},remove_callbackset:function(a){a.lazydel=!0;a.int1.cbsets.inlined_try_remove(a);a.int2.cbsets.inlined_try_remove(a)},transmitType:function(a,b){a.world||
(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!1));a.type==f.id_BodyType_DYNAMIC?this.live.remove(a):a.type==f.id_BodyType_KINEMATIC?(this.kinematics.remove(a),this.staticsleep.remove(a)):a.type==f.id_BodyType_STATIC&&this.staticsleep.remove(a);a.type=b;a.type==f.id_BodyType_KINEMATIC&&this.kinematics.add(a);a.type==f.id_BodyType_STATIC&&this.static_validation(a);a.component.sleeping=!0;a.world||
(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0))},added_shape:function(a,b){null==b&&(b=!1);if(!b){var c=a.body;c.world||(c.component.waket=this.stamp+(this.midstep?0:1),c.type==f.id_BodyType_KINEMATIC&&(c.kinematicDelaySleep=!0),c.component.sleeping&&this.really_wake(c,!1))}this.bphase.insert(a);a.addedToSpace()},removed_shape:function(a,b){null==b&&(b=!1);var c=this,d=a.body;b||d.wake();for(var e=
null,h=d.arbiters.head;null!=h;){var g=[h.elt];if(g[0].ws1==a||g[0].ws2==a){if(0!=g[0].present){this.MRCA_chains(g[0].ws1,g[0].ws2);for(h=this.mrca1.head;null!=h;){for(var i=h.elt,j=this.mrca2.head;null!=j;){var k=j.elt,l=i.cbSet,m=k.cbSet;l.validate();m.validate();l.manager.pair(l,m).empty_intersection()||(k=[$.get(i,k)],k[0].remove_arb(g[0]),g[0].present--,l.manager.pair(l,m).forall(f.id_CbEvent_END,function(a,b){return function(d){if(0!=(d.itype&b[0].type)&&a[0].empty_arb(d.itype)){var e=c.push_callback(d);
e.event=f.id_CbEvent_END;$.int_callback(a[0],d,e);e.set=a[0]}}}(k,g)),null==k[0].arbiters.head&&this.remove_callbackset(k[0]));j=j.next}h=h.next}}g[0].b1!=d&&g[0].b1.type==f.id_BodyType_DYNAMIC&&(h=g[0].b1,h.world||(h.component.waket=this.stamp+(this.midstep?0:1),h.type==f.id_BodyType_KINEMATIC&&(h.kinematicDelaySleep=!0),h.component.sleeping&&this.really_wake(h,!1)));g[0].b2!=d&&g[0].b2.type==f.id_BodyType_DYNAMIC&&(h=g[0].b2,h.world||(h.component.waket=this.stamp+(this.midstep?0:1),h.type==f.id_BodyType_KINEMATIC&&
(h.kinematicDelaySleep=!0),h.component.sleeping&&this.really_wake(h,!1)));g[0].cleared=!0;(null==d||g[0].b2==d)&&g[0].b1.arbiters.inlined_try_remove(g[0]);(null==d||g[0].b1==d)&&g[0].b2.arbiters.inlined_try_remove(g[0]);null!=g[0].pair&&(g[0].pair.arb=null,g[0].pair=null);g[0].active=!1;this.f_arbiters.modified=!0;h=d.arbiters.erase(e)}else e=h,h=h.next}this.bphase.remove(a);a.removedFromSpace()},addConstraint:function(a){a.space=this;a.addedToSpace();a.active&&(a.component.sleeping=!0,this.wake_constraint(a,
!0))},remConstraint:function(a){a.active&&(this.wake_constraint(a,!0),this.live_constraints.remove(a));a.removedFromSpace();a.space=null},addCompound:function(a){a.space=this;a.addedToSpace();for(var b=a.bodies.head;null!=b;)this.addBody(b.elt),b=b.next;for(b=a.constraints.head;null!=b;)this.addConstraint(b.elt),b=b.next;for(a=a.compounds.head;null!=a;)this.addCompound(a.elt),a=a.next},remCompound:function(a){for(var b=a.bodies.head;null!=b;)this.remBody(b.elt),b=b.next;for(b=a.constraints.head;null!=
b;)this.remConstraint(b.elt),b=b.next;for(b=a.compounds.head;null!=b;)this.remCompound(b.elt),b=b.next;a.removedFromSpace();a.space=null},addBody:function(a,b){null==b&&(b=-1);a.space=this;a.addedToSpace();a.component.sleeping=!0;a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0));for(var c=a.shapes.head;null!=c;)this.added_shape(c.elt,!0),c=c.next;a.type==f.id_BodyType_STATIC?this.static_validation(a):
a.type!=f.id_BodyType_DYNAMIC&&b!=f.id_BodyType_KINEMATIC&&this.kinematics.add(a)},remBody:function(a,b){null==b&&(b=-1);a.type==f.id_BodyType_STATIC?(a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.staticsleep.remove(a)):a.type==f.id_BodyType_DYNAMIC?(a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&
this.really_wake(a,!0)),this.live.remove(a)):(b!=f.id_BodyType_KINEMATIC&&this.kinematics.remove(a),a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.staticsleep.remove(a));for(var c=a.shapes.head;null!=c;)this.removed_shape(c.elt,!0),c=c.next;a.removedFromSpace();a.space=null},rayCast:function(a,b,c){return this.bphase.rayCast(a.zpp_inner,b,null==c?null:c.zpp_inner)},push_callback:function(a){var b;
null==nc.zpp_pool?b=new nc:(b=nc.zpp_pool,nc.zpp_pool=b.next,b.next=null);null;this.callbacks.push(b);b.listener=a;return b},step:function(a,b,c){var d=this;this.time+=a;this.pre_dt=a;this.midstep=!0;this.stamp++;this.validation();this.bphase.broadphase(this,!0);this.prestep(a);if(this.sortcontacts){var e=this.c_arbiters_false;if(null!=e.head&&null!=e.head.next){var h=e.head,g=null,i=null,j=null,k=null,l=1,m,o,q;do{m=0;i=h;for(g=h=null;null!=i;){m++;j=i;o=0;for(q=l;null!=j&&o<l;)o++,j=j.next;for(;0<
o||0<q&&null!=j;)0==o?(k=j,j=j.next,q--):0==q||null==j?(k=i,i=i.next,o--):(i.elt.active&&j.elt.active?i.elt.oc1.dist<j.elt.oc1.dist:1)?(k=i,i=i.next,o--):(k=j,j=j.next,q--),null!=g?g.next=k:h=k,g=k;i=j}g.next=null;l<<=1}while(1<m);e.head=h;e.modified=!0;e.pushmod=!0}}this.updateVel(a);this.warmStart();this.iterateVel(b);for(b=this.kinematics.head;null!=b;)e=b.elt,e.pre_posx=e.posx,e.pre_posy=e.posy,e.pre_rot=e.rot,b=b.next;for(b=this.live.head;null!=b;)e=b.elt,e.pre_posx=e.posx,e.pre_posy=e.posy,
e.pre_rot=e.rot,b=b.next;this.updatePos(a);this.continuous=!0;this.continuousCollisions(a);this.continuous=!1;this.iteratePos(c);for(c=this.kinematics.head;null!=c;)b=c.elt,e=b.pre_rot!=b.rot,!(b.posx==b.pre_posx&&b.posy==b.pre_posy)&&b.invalidate_pos(),e&&b.invalidate_rot(),c=c.next;for(c=this.live.head;null!=c;)b=c.elt,e=b.pre_rot!=b.rot,!(b.posx==b.pre_posx&&b.posy==b.pre_posy)&&b.invalidate_pos(),e&&b.invalidate_rot(),c=c.next;c=null;for(b=this.staticsleep.head;null!=b;)e=b.elt,e.type!=f.id_BodyType_KINEMATIC||
0==e.velx&&0==e.vely&&0==e.angvel?e.kinematicDelaySleep?(e.kinematicDelaySleep=!1,b=b.next):(e.component.sleeping=!0,b=this.staticsleep.inlined_erase(c)):(c=b,b=b.next);this.doForests(a);this.sleepArbiters();this.midstep=!1;c=null;for(a=this.callbackset_list.next;null!=a;)b=[a],null==b[0].arbiters.head?(a=this.callbackset_list.inlined_erase(c),b=b[0],b.int1=b.int2=null,b.id=b.di=-1,b.freed=!0,null,b.next=eb.zpp_pool,eb.zpp_pool=b):(c=[b[0].sleeping()],Ia.find_all(b[0].int1.cbSet,b[0].int2.cbSet,f.id_CbEvent_ONGOING,
function(a,b){return function(c){if((!a[0]||c.allowSleepingCallbacks)&&!b[0].empty_arb(c.itype)){var e=d.push_callback(c);e.event=f.id_CbEvent_ONGOING;$.int_callback(b[0],c,e);e.set=b[0]}}}(c,b)),c=a,a=a.next);for(;!this.callbacks.empty();)a=this.callbacks.pop(),a.listener.type==f.id_ListenerType_BODY?a.listener.body.handler(a.wrapper_body()):a.listener.type==f.id_ListenerType_CONSTRAINT?a.listener.constraint.handler(a.wrapper_con()):a.listener.type==f.id_ListenerType_INTERACTION&&a.listener.interaction.handleri(a.wrapper_int()),
a.int1=a.int2=null,a.body=null,a.constraint=null,a.listener=null,null!=a.wrap_arbiters&&(a.wrap_arbiters.zpp_inner.inner=null),a.set=null,a.next=nc.zpp_pool,nc.zpp_pool=a},continuousCollisions:function(a){var b=2*Math.PI/a;this.bphase.broadphase(this,!1);for(var c=0;1>c&&null!=this.toiEvents.head;){for(var d=null,c=2,e=!1,h=null,g=null,i=this.toiEvents.head;null!=i;){var j=i.elt,k=j.s1.body,l=j.s2.body;if(k.sweepFrozen&&l.sweepFrozen)if(0!=j.toi&&R.testCollide_safe(j.s1,j.s2))j.toi=0;else{i=this.toiEvents.erase(g);
j.next=cc.zpp_pool;cc.zpp_pool=j;continue}if(j.frozen1!=k.sweepFrozen||j.frozen2!=l.sweepFrozen)if(j.kinematic){i=this.toiEvents.erase(g);j.next=cc.zpp_pool;cc.zpp_pool=j;continue}else if(j.frozen1=k.sweepFrozen,j.frozen2=l.sweepFrozen,j.frozen1&&(k=j.s1,j.s1=j.s2,j.s2=k,j.frozen1=!1,j.frozen2=!0),Xc.staticSweep(j,a,0,t.collisionSlopCCD),0>j.toi){i=this.toiEvents.erase(g);j.next=cc.zpp_pool;cc.zpp_pool=j;continue}if(0<=j.toi&&(j.toi<c||!e&&j.kinematic))d=j,c=j.toi,e=j.kinematic,h=g;g=i;i=i.next}if(null==
d)break;this.toiEvents.erase(h);c=d.toi;e=d.s1.body;h=d.s2.body;e.sweepFrozen||(e.sweepIntegrate(c*a),e.sweepValidate(d.s1));h.sweepFrozen||(h.sweepIntegrate(c*a),h.sweepValidate(d.s2));g=this.narrowPhase(d.s1,d.s2,!0,d.arbiter,!0);null==g?null!=d.arbiter&&null!=d.arbiter.pair&&(d.arbiter.pair.arb=null,d.arbiter.pair=null):!this.presteparb(g,a,!0)&&g.type==xa.COL&&g.active&&0!=(g.immState&f.id_ImmState_ACCEPT)&&(g.colarb.warmStart(),g.colarb.applyImpulseVel(),g.colarb.applyImpulseVel(),g.colarb.applyImpulseVel(),
g.colarb.applyImpulseVel(),e.sweep_angvel=e.angvel%b,h.sweep_angvel=h.angvel%b);null!=g&&g.active&&0!=(g.immState&f.id_ImmState_ACCEPT)&&g.type==xa.COL&&(!e.sweepFrozen&&e.type!=f.id_BodyType_KINEMATIC&&(e.sweepFrozen=!0,e.angvel=d.failed?e.sweep_angvel=0:d.slipped?e.sweep_angvel*=t.angularCCDSlipScale:e.sweep_angvel),!h.sweepFrozen&&h.type!=f.id_BodyType_KINEMATIC&&(h.sweepFrozen=!0,h.angvel=d.failed?h.sweep_angvel=0:d.slipped?h.sweep_angvel*=t.angularCCDSlipScale:h.sweep_angvel))}for(;null!=this.toiEvents.head;)b=
this.toiEvents.pop_unsafe(),b.next=cc.zpp_pool,cc.zpp_pool=b;for(b=this.kinematics.head;null!=b;)d=b.elt,d.sweepIntegrate(a),d.sweepTime=0,b=b.next;for(b=this.live.head;null!=b;)d=b.elt,d.sweepFrozen||d.sweepIntegrate(a),d.sweepTime=0,b=b.next},continuousEvent:function(a,b,c,d){if(a.body.sweepFrozen&&b.body.sweepFrozen||a.body.disableCCD||b.body.disableCCD||null!=d&&null==d.colarb||0>=this.interactionType(a,b,a.body,b.body))return d;var e=a.body,h=b.body;if(c||e.bullet||h.bullet){var g;null==cc.zpp_pool?
g=new cc:(g=cc.zpp_pool,cc.zpp_pool=g.next,g.next=null);g.failed=!1;g.s1=g.s2=null;g.arbiter=null;e=e.type==f.id_BodyType_KINEMATIC||h.type==f.id_BodyType_KINEMATIC;c&&!e?(a.body.type!=f.id_BodyType_DYNAMIC?(g.s2=a,g.s1=b):(g.s1=a,g.s2=b),g.kinematic=!1,Xc.staticSweep(g,this.pre_dt,0,t.collisionSlopCCD)):(g.s1=a,g.s2=b,g.kinematic=e,g.s1.body.sweepFrozen||g.s2.body.sweepFrozen?(g.s1.body.sweepFrozen&&(a=g.s1,g.s1=g.s2,g.s2=a,g.frozen1=!1,g.frozen2=!0),Xc.staticSweep(g,this.pre_dt,0,t.collisionSlopCCD)):
Xc.dynamicSweep(g,this.pre_dt,0,t.collisionSlopCCD));c&&0>g.toi||g.failed?(c=g,c.next=cc.zpp_pool,cc.zpp_pool=c):(this.toiEvents.add(g),g.frozen1=g.s1.body.sweepFrozen,g.frozen2=g.s2.body.sweepFrozen,g.arbiter=null!=d?d.colarb:null)}return d},bodyCbWake:function(a){if(a.type==f.id_BodyType_DYNAMIC&&null!=a.cbSet)if(this.midstep)for(var b=a.cbSet.bodylisteners.head;null!=b;){var c=b.elt;c.event==f.id_CbEvent_WAKE&&(c=this.push_callback(c),c.event=f.id_CbEvent_WAKE,c.body=a);b=b.next}else a.component.woken=
!0},bodyCbSleep:function(a){if(a.type==f.id_BodyType_DYNAMIC&&null!=a.cbSet)for(var b=a.cbSet.bodylisteners.head;null!=b;){var c=b.elt;c.event==f.id_CbEvent_SLEEP&&(c=this.push_callback(c),c.event=f.id_CbEvent_SLEEP,c.body=a);b=b.next}},constraintCbWake:function(a){if(null!=a.cbSet)if(this.midstep)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;c.event==f.id_CbEvent_WAKE&&(c=this.push_callback(c),c.event=f.id_CbEvent_WAKE,c.constraint=a);b=b.next}else a.component.woken=!0},constraintCbSleep:function(a){if(null!=
a.cbSet)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;c.event==f.id_CbEvent_SLEEP&&(c=this.push_callback(c),c.event=f.id_CbEvent_SLEEP,c.constraint=a);b=b.next}},constraintCbBreak:function(a){if(null!=a.cbSet)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;c.event==f.id_CbEvent_BREAK&&(c=this.push_callback(c),c.event=f.id_CbEvent_BREAK,c.constraint=a);b=b.next}},nullListenerType:function(a,b){for(var c=new we,d=a.interactors.head;null!=d;)c.add(d.elt),d=d.next;if(a!=b)for(d=
b.interactors.head;null!=d;)c.add(d.elt),d=d.next;for(;null!=c.head;)if(d=c.pop_unsafe(),null!=d.icompound){for(var d=d.icompound,e=d.bodies.head;null!=e;)c.add(e.elt),e=e.next;for(d=d.compounds.head;null!=d;)c.add(d.elt),d=d.next}else{e=null!=d.ibody?d.ibody:d.ishape.body;d=null!=d.ishape?d.ishape:null;for(e=e.arbiters.head;null!=e;){var f=e.elt;if(0!=f.present&&(null==d||f.ws1==d||f.ws2==d)){this.MRCA_chains(f.ws1,f.ws2);for(f=this.mrca1.head;null!=f;){var g=f.elt;if(!(g.cbSet!=a&&g.cbSet!=b))for(var i=
this.mrca2.head;null!=i;){var j=i.elt;if(!(g.cbSet==a&&j.cbSet!=b||g.cbSet==b&&j.cbSet!=a))if(j=$.get(g,j),null!=j){for(;null!=j.arbiters.head;)j.arbiters.pop_unsafe().present--;this.remove_callbackset(j)}i=i.next}f=f.next}}e=e.next}}},nullInteractorType:function(a,b){null==b&&(b=a);if(null!=a.icompound){for(var c=a.icompound,d=c.bodies.head;null!=d;)this.nullInteractorType(d.elt,b),d=d.next;for(c=c.compounds.head;null!=c;)this.nullInteractorType(c.elt,b),c=c.next}else{d=null!=a.ibody?a.ibody:a.ishape.body;
c=null!=a.ishape?a.ishape:null;for(d=d.arbiters.head;null!=d;){var e=d.elt;if(0!=e.present&&(null==c||e.ws1==c||e.ws2==c)){this.MRCA_chains(e.ws1,e.ws2);for(var f=this.mrca1.head;null!=f;){for(var g=f.elt,i=this.mrca2.head;null!=i;){var j=i.elt;g!=b&&j!=b||(j=$.get(g,j),null!=j&&(e.present--,j.remove_arb(e),null==j.arbiters.head&&this.remove_callbackset(j)));i=i.next}f=f.next}}d=d.next}}},freshListenerType:function(a,b){for(var c=new we,d=a.interactors.head;null!=d;)c.add(d.elt),d=d.next;if(a!=b)for(d=
b.interactors.head;null!=d;)c.add(d.elt),d=d.next;for(;null!=c.head;)if(d=c.pop_unsafe(),null!=d.icompound){for(var d=d.icompound,e=d.bodies.head;null!=e;)c.add(e.elt),e=e.next;for(d=d.compounds.head;null!=d;)c.add(d.elt),d=d.next}else{e=null!=d.ibody?d.ibody:d.ishape.body;d=null!=d.ishape?d.ishape:null;for(e=e.arbiters.head;null!=e;){var f=e.elt;if(f.presentable&&(null==d||f.ws1==d||f.ws2==d)){this.MRCA_chains(f.ws1,f.ws2);for(var g=this.mrca1.head;null!=g;){var i=g.elt;if(!(i.cbSet!=a&&i.cbSet!=
b))for(var j=this.mrca2.head;null!=j;){var k=j.elt;if(!(i.cbSet==a&&k.cbSet!=b||i.cbSet==b&&k.cbSet!=a)){var l=$.get(i,k);null==l&&(l=eb.get(i,k),this.add_callbackset(l));if(k=!l.arbiters.inlined_has(f))l.arbiters.inlined_add(f),k=!0;k&&f.present++}j=j.next}g=g.next}}e=e.next}}},freshInteractorType:function(a,b){null==b&&(b=a);if(null!=a.icompound){for(var c=a.icompound,d=c.bodies.head;null!=d;)this.freshInteractorType(d.elt,b),d=d.next;for(c=c.compounds.head;null!=c;)this.freshInteractorType(c.elt,
b),c=c.next}else{d=null!=a.ibody?a.ibody:a.ishape.body;c=null!=a.ishape?a.ishape:null;for(d=d.arbiters.head;null!=d;){var e=d.elt;if(e.presentable&&(null==c||e.ws1==c||e.ws2==c)){this.MRCA_chains(e.ws1,e.ws2);for(var f=this.mrca1.head;null!=f;){for(var g=f.elt,i=this.mrca2.head;null!=i;){var j=i.elt;if(!(g!=b&&j!=b)){var k=g.cbSet,l=j.cbSet;k.validate();l.validate();if(!k.manager.pair(k,l).empty_intersection()){k=$.get(g,j);null==k&&(k=eb.get(g,j),this.add_callbackset(k));if(j=!k.arbiters.inlined_has(e))k.arbiters.inlined_add(e),
j=!0;j&&e.present++}}i=i.next}f=f.next}}d=d.next}}},wakeCompound:function(a){for(var b=a.bodies.head;null!=b;){var c=b.elt;c.world||(c.component.waket=this.stamp+(this.midstep?0:1),c.type==f.id_BodyType_KINEMATIC&&(c.kinematicDelaySleep=!0),c.component.sleeping&&this.really_wake(c,!1));b=b.next}for(b=a.constraints.head;null!=b;)this.wake_constraint(b.elt),b=b.next;for(a=a.compounds.head;null!=a;)this.wakeCompound(a.elt),a=a.next},wakeIsland:function(a){for(;null!=a.comps.head;){var b=a.comps.pop_unsafe();
b.waket=this.stamp+(this.midstep?0:1);if(b.isBody){var c=b.body;this.live.add(c);for(var d=c.arbiters.head;null!=d;){var e=d.elt;e.sleeping&&(e.sleeping=!1,e.up_stamp+=this.stamp-e.sleep_stamp,e.type==xa.COL?(e=e.colarb,e.stat?this.c_arbiters_true.inlined_add(e):this.c_arbiters_false.inlined_add(e)):e.type==xa.FLUID?this.f_arbiters.inlined_add(e.fluidarb):this.s_arbiters.inlined_add(e.sensorarb));d=d.next}this.bodyCbWake(c);b.sleeping=!1;b.island=null;b.parent=b;b.rank=0;if(c.type!=f.id_BodyType_STATIC)for(b=
c.shapes.head;null!=b;)c=b.elt,null!=c.node&&this.bphase.sync(c),b=b.next}else c=b.constraint,this.live_constraints.inlined_add(c),this.constraintCbWake(c),b.sleeping=!1,b.island=null,b.parent=b,b.rank=0}a.next=kb.zpp_pool;kb.zpp_pool=a},non_inlined_wake:function(a,b){null==b&&(b=!1);a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,b))},really_wake:function(a,b){null==b&&(b=!1);if(null==a.component.island){a.component.sleeping=
!1;a.type==f.id_BodyType_KINEMATIC||a.type==f.id_BodyType_STATIC?this.staticsleep.inlined_add(a):this.live.inlined_add(a);for(var c=a.constraints.head;null!=c;){var d=c.elt;d.space==this&&this.wake_constraint(d);c=c.next}for(c=a.arbiters.head;null!=c;){d=c.elt;if(d.sleeping)if(d.sleeping=!1,d.up_stamp+=this.stamp+(this.midstep?0:1)-d.sleep_stamp,d.type==xa.COL){var e=d.colarb;e.stat?this.c_arbiters_true.inlined_add(e):this.c_arbiters_false.inlined_add(e)}else d.type==xa.FLUID?this.f_arbiters.inlined_add(d.fluidarb):
this.s_arbiters.inlined_add(d.sensorarb);d.type!=xa.SENSOR&&!d.cleared&&d.up_stamp>=this.stamp&&0!=(d.immState&f.id_ImmState_ACCEPT)&&(d.b1.type==f.id_BodyType_DYNAMIC&&d.b1.component.sleeping&&(e=d.b1,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.type==f.id_BodyType_KINEMATIC&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1))),d.b2.type==f.id_BodyType_DYNAMIC&&d.b2.component.sleeping&&(d=d.b2,d.world||(d.component.waket=this.stamp+(this.midstep?0:1),d.type==f.id_BodyType_KINEMATIC&&
(d.kinematicDelaySleep=!0),d.component.sleeping&&this.really_wake(d,!1))));c=c.next}!b&&a.type==f.id_BodyType_DYNAMIC&&this.bodyCbWake(a);if(!b&&!this.bphase.is_sweep&&a.type!=f.id_BodyType_STATIC)for(c=a.shapes.head;null!=c;)d=c.elt,null!=d.node&&this.bphase.sync(d),c=c.next}else this.wakeIsland(a.component.island)},wake_constraint:function(a,b){null==b&&(b=!1);return a.active&&(a.component.waket=this.stamp+(this.midstep?0:1),a.component.sleeping)?(null==a.component.island?(a.component.sleeping=
!1,this.live_constraints.inlined_add(a),a.wake_connected(),b||this.constraintCbWake(a)):this.wakeIsland(a.component.island),!0):!1},doForests:function(a){for(var b=this.c_arbiters_false.head;null!=b;){var c=b.elt;if(!c.cleared&&c.up_stamp==this.stamp&&0!=(c.immState&f.id_ImmState_ACCEPT)&&c.b1.type==f.id_BodyType_DYNAMIC&&c.b2.type==f.id_BodyType_DYNAMIC){var d;if(c.b1.component==c.b1.component.parent)d=c.b1.component;else{d=c.b1.component;for(var e=null;d!=d.parent;){var g=d.parent;d.parent=e;e=
d;d=g}for(;null!=e;)g=e.parent,e.parent=d,e=g}if(c.b2.component==c.b2.component.parent)c=c.b2.component;else{c=c.b2.component;for(e=null;c!=c.parent;)g=c.parent,c.parent=e,e=c,c=g;for(;null!=e;)g=e.parent,e.parent=c,e=g}d!=c&&(d.rank<c.rank?d.parent=c:d.rank>c.rank?c.parent=d:(c.parent=d,d.rank++))}b=b.next}for(b=this.f_arbiters.head;null!=b;){c=b.elt;if(!c.cleared&&c.up_stamp==this.stamp&&0!=(c.immState&f.id_ImmState_ACCEPT)&&c.b1.type==f.id_BodyType_DYNAMIC&&c.b2.type==f.id_BodyType_DYNAMIC){if(c.b1.component==
c.b1.component.parent)d=c.b1.component;else{d=c.b1.component;for(e=null;d!=d.parent;)g=d.parent,d.parent=e,e=d,d=g;for(;null!=e;)g=e.parent,e.parent=d,e=g}if(c.b2.component==c.b2.component.parent)c=c.b2.component;else{c=c.b2.component;for(e=null;c!=c.parent;)g=c.parent,c.parent=e,e=c,c=g;for(;null!=e;)g=e.parent,e.parent=c,e=g}d!=c&&(d.rank<c.rank?d.parent=c:d.rank>c.rank?c.parent=d:(c.parent=d,d.rank++))}b=b.next}for(b=this.live_constraints.head;null!=b;)b.elt.forest(),b=b.next;for(;null!=this.live.head;){d=
this.live.inlined_pop_unsafe();b=d.component;if(b==b.parent)c=b;else{c=b;for(e=null;c!=c.parent;)g=c.parent,c.parent=e,e=c,c=g;for(;null!=e;)g=e.parent,e.parent=c,e=g}null==c.island&&(null==kb.zpp_pool?c.island=new kb:(c.island=kb.zpp_pool,kb.zpp_pool=c.island.next,c.island.next=null),c.island.waket=0,this.islands.inlined_add(c.island),c.island.sleep=!0);b.island=c.island;b.island.comps.inlined_add(b);d=d.atRest(a);b.island.sleep=b.island.sleep&&d;b.waket>b.island.waket&&(b.island.waket=b.waket)}for(;null!=
this.live_constraints.head;){a=this.live_constraints.inlined_pop_unsafe().component;if(a==a.parent)b=a;else{b=a;for(d=null;b!=b.parent;)c=b.parent,b.parent=d,d=b,b=c;for(;null!=d;)c=d.parent,d.parent=b,d=c}a.island=b.island;a.island.comps.inlined_add(a);a.waket>a.island.waket&&(a.island.waket=a.waket)}for(;null!=this.islands.next;)if(a=this.islands.inlined_pop_unsafe(),a.sleep)for(a=a.comps.head;null!=a;){d=a.elt;if(d.isBody){b=d.body;b.velx=0;b.vely=0;b.angvel=0;d.sleeping=!0;for(d=b.shapes.head;null!=
d;)this.bphase.sync(d.elt),d=d.next;this.bodyCbSleep(b)}else this.constraintCbSleep(d.constraint),d.sleeping=!0;a=a.next}else{for(;null!=a.comps.head;)b=a.comps.inlined_pop_unsafe(),b.waket=a.waket,b.isBody?this.live.inlined_add(b.body):this.live_constraints.inlined_add(b.constraint),b.sleeping=!1,b.island=null,b.parent=b,b.rank=0;a.next=kb.zpp_pool;kb.zpp_pool=a}},sleepArbiters:function(){var a=null,b=this.c_arbiters_true,c=b.head,d=null!=this.c_arbiters_false;d&&null==c&&(d=!1,c=this.c_arbiters_false.head,
b=this.c_arbiters_false,a=null);for(;null!=c;){var e=c.elt;e.b1.component.sleeping&&e.b2.component.sleeping?(e.sleep_stamp=this.stamp,e.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next);d&&null==c&&(d=!1,c=this.c_arbiters_false.head,b=this.c_arbiters_false,a=null)}a=null;b=this.f_arbiters;c=b.head;d=!1;for(;null!=c;)e=c.elt,e.b1.component.sleeping&&e.b2.component.sleeping?(e.sleep_stamp=this.stamp,e.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next),d&&null==c&&(d=!1,a=b=null);a=null;b=this.s_arbiters;
c=b.head;d=!1;for(;null!=c;)e=c.elt,e.b1.component.sleeping&&e.b2.component.sleeping?(e.sleep_stamp=this.stamp,e.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next),d&&null==c&&(d=!1,a=b=null)},static_validation:function(a){null!=a.shapes.head&&a.validate_aabb();a.validate_mass();a.validate_inertia();for(var b=a.shapes.head;null!=b;){var c=b.elt;c.type==f.id_ShapeType_POLYGON&&(c.polygon.splice_collinear(),c.polygon.validate_gaxi());b=b.next}a.sweepFrozen=!0},validation:function(){this.cbsets.validate();
for(var a=this.live.head;null!=a;){var b=a.elt;b.sweepRadius=0;for(var c=b.shapes.head;null!=c;){var d=c.elt;d.type==f.id_ShapeType_POLYGON&&(d.polygon.splice_collinear(),d.polygon.validate_gaxi());d.validate_sweepRadius();d.sweepRadius>b.sweepRadius&&(b.sweepRadius=d.sweepRadius);c=c.next}b.validate_mass();b.validate_inertia();null!=b.shapes.head&&(b.validate_aabb(),b.validate_worldCOM());b.validate_gravMass();b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot),null);if(b.component.woken&&
null!=b.cbSet)for(c=b.cbSet.bodylisteners.head;null!=c;)d=c.elt,d.event==f.id_CbEvent_WAKE&&(d=this.push_callback(d),d.event=f.id_CbEvent_WAKE,d.body=b),c=c.next;b.component.woken=!1;for(b=b.shapes.head;null!=b;)this.bphase.sync(b.elt),b=b.next;a=a.next}for(a=this.kinematics.head;null!=a;){b=a.elt;b.sweepRadius=0;for(c=b.shapes.head;null!=c;)d=c.elt,d.type==f.id_ShapeType_POLYGON&&(d.polygon.splice_collinear(),d.polygon.validate_gaxi()),d.validate_sweepRadius(),d.sweepRadius>b.sweepRadius&&(b.sweepRadius=
d.sweepRadius),c=c.next;b.validate_mass();b.validate_inertia();null!=b.shapes.head&&(b.validate_aabb(),b.validate_worldCOM());b.validate_gravMass();b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot),null);for(b=b.shapes.head;null!=b;)this.bphase.sync(b.elt),b=b.next;a=a.next}for(a=this.live_constraints.head;null!=a;){b=a.elt;if(b.active){if(b.component.woken&&null!=b.cbSet)for(c=b.cbSet.conlisteners.head;null!=c;)d=c.elt,d.event==f.id_CbEvent_WAKE&&(d=this.push_callback(d),
d.event=f.id_CbEvent_WAKE,d.constraint=b),c=c.next;b.component.woken=!1}a=a.next}},updateVel:function(a){for(var b=1-a*this.global_lin_drag,c=1-a*this.global_ang_drag,d=this.live.head;null!=d;){var e=d.elt;if(0!=e.smass){var f=a*e.imass;e.velx=b*e.velx+(e.forcex+this.gravityx*e.gravMass)*f;e.vely=b*e.vely+(e.forcey+this.gravityy*e.gravMass)*f}if(0!=e.sinertia){var g=f=0,f=e.worldCOMx-e.posx,g=e.worldCOMy-e.posy;e.angvel=c*e.angvel+(e.torque+(this.gravityy*f-this.gravityx*g)*e.gravMass)*a*e.iinertia}d=
d.next}},updatePos:function(a){for(var b=2*Math.PI/a,c=this.live.head;null!=c;){var d=c.elt;d.pre_posx=d.posx;d.pre_posy=d.posy;d.pre_rot=d.rot;d.sweepTime=0;d.sweep_angvel=d.angvel%b;d.sweepIntegrate(a);if(d.disableCCD)d.sweepFrozen=!0,d.bullet=!1;else{var e=t.staticCCDLinearThreshold*d.sweepRadius,g=t.staticCCDAngularThreshold;if((d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*a*a>g*g||d.type==f.id_BodyType_KINEMATIC){e=d.sweep_angvel;0>e&&(e=-e);for(var g=1/e,i=d.shapes.head;null!=i;){var j=
i.elt,k=j.aabb,l=k.minx,m=k.miny,o=k.maxx,q=k.maxy,r=0.008333333333333333*e*a*j.sweepCoef|0;8<r&&(r=8);var u=e*a/r;d.sweepIntegrate(a);j.type==f.id_ShapeType_CIRCLE?j.circle._force_validate_aabb():j.polygon._force_validate_aabb();l<k.minx?k.minx=l:l=k.minx;m<k.miny?k.miny=m:m=k.miny;o>k.maxx?k.maxx=o:o=k.maxx;q>k.maxy?k.maxy=q:q=k.maxy;for(var v=1;v<r;){var w=v++;d.sweepIntegrate(u*w*g);j.type==f.id_ShapeType_CIRCLE?j.circle._force_validate_aabb():j.polygon._force_validate_aabb();l<k.minx?k.minx=
l:l=k.minx;m<k.miny?k.miny=m:m=k.miny;o>k.maxx?k.maxx=o:o=k.maxx;q>k.maxy?k.maxy=q:q=k.maxy}this.bphase.sync(j);i=i.next}d.sweepFrozen=!1;if(d.type==f.id_BodyType_DYNAMIC&&d.bulletEnabled&&(e=t.bulletCCDLinearThreshold*d.sweepRadius,g=t.bulletCCDAngularThreshold,(d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*a*a>g*g))d.bullet=!0}else d.sweepFrozen=!0,d.bullet=!1}c=c.next}for(c=this.kinematics.head;null!=c;){d=c.elt;d.pre_posx=d.posx;d.pre_posy=d.posy;d.pre_rot=d.rot;d.sweepTime=0;d.sweep_angvel=
d.angvel%b;d.sweepIntegrate(a);if(d.disableCCD)d.sweepFrozen=!0,d.bullet=!1;else if(e=t.staticCCDLinearThreshold*d.sweepRadius,g=t.staticCCDAngularThreshold,(d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*a*a>g*g||d.type==f.id_BodyType_KINEMATIC){e=d.sweep_angvel;0>e&&(e=-e);g=1/e;for(i=d.shapes.head;null!=i;){j=i.elt;k=j.aabb;l=k.minx;m=k.miny;o=k.maxx;q=k.maxy;r=0.008333333333333333*e*a*j.sweepCoef|0;8<r&&(r=8);u=e*a/r;d.sweepIntegrate(a);j.type==f.id_ShapeType_CIRCLE?j.circle._force_validate_aabb():
j.polygon._force_validate_aabb();l<k.minx?k.minx=l:l=k.minx;m<k.miny?k.miny=m:m=k.miny;o>k.maxx?k.maxx=o:o=k.maxx;q>k.maxy?k.maxy=q:q=k.maxy;for(v=1;v<r;)w=v++,d.sweepIntegrate(u*w*g),j.type==f.id_ShapeType_CIRCLE?j.circle._force_validate_aabb():j.polygon._force_validate_aabb(),l<k.minx?k.minx=l:l=k.minx,m<k.miny?k.miny=m:m=k.miny,o>k.maxx?k.maxx=o:o=k.maxx,q>k.maxy?k.maxy=q:q=k.maxy;this.bphase.sync(j);i=i.next}d.sweepFrozen=!1;if(d.type==f.id_BodyType_DYNAMIC&&d.bulletEnabled&&(e=t.bulletCCDLinearThreshold*
d.sweepRadius,g=t.bulletCCDAngularThreshold,(d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*a*a>g*g))d.bullet=!0}else d.sweepFrozen=!0,d.bullet=!1;c=c.next}},presteparb:function(a,b,c){null==c&&(c=!1);var d=this;if(!a.cleared&&a.b1.component.sleeping&&a.b2.component.sleeping)return a.sleep_stamp=this.stamp,a.sleeping=!0;if(!a.cleared||0!=a.present||a.intchange){var e=!c&&a.up_stamp==this.stamp-1&&!a.cleared&&!a.intchange,c=a.fresh&&!a.cleared&&!a.intchange;e&&(a.endGenerated=this.stamp);
if(c||e||a.cleared||a.intchange){this.inlined_MRCA_chains(a.ws1,a.ws2);for(e=this.mrca1.head;null!=e;){for(var g=e.elt,i=this.mrca2.head;null!=i;){var j=i.elt,k=g.cbSet,l=j.cbSet;if(!k.manager.pair(k,l).empty_intersection()){var m=[$.get(g,j)];if(c||a.intchange){null==m[0]&&(m[0]=eb.get(g,j),this.add_callbackset(m[0]));k.manager.pair(k,l).forall(f.id_CbEvent_BEGIN,function(b){return function(c){if(0!=(c.itype&a.type)&&b[0].empty_arb(c.itype)){var e=d.push_callback(c);e.event=f.id_CbEvent_BEGIN;$.int_callback(b[0],
c,e);e.set=b[0]}}}(m));if(j=!m[0].arbiters.inlined_has(a))m[0].arbiters.inlined_add(a),j=!0;j&&a.present++}else a.present--,m[0].remove_arb(a),k.manager.pair(k,l).forall(f.id_CbEvent_END,function(b){return function(c){if(0!=(c.itype&a.type)&&b[0].empty_arb(c.itype)){var e=d.push_callback(c);e.event=f.id_CbEvent_END;$.int_callback(b[0],c,e);e.set=b[0]}}}(m)),null==m[0].arbiters.head&&this.remove_callbackset(m[0])}i=i.next}e=e.next}}a.fresh=!1;a.intchange=!1}if(a.cleared||a.up_stamp+(a.type==xa.COL?
t.arbiterExpirationDelay:0)<this.stamp)return a.type==xa.SENSOR?a.sensorarb.retire():a.type==xa.FLUID?a.fluidarb.retire():a.colarb.retire(),!0;c=a.active;a.active=a.presentable=a.up_stamp==this.stamp;0!=(a.immState&f.id_ImmState_ACCEPT)?a.active&&a.type!=xa.SENSOR&&(null!=a.colarb?a.colarb.preStep(b)&&(a.active=!1):a.fluidarb.preStep(this,b)):null!=a.colarb&&a.colarb.cleanupContacts()&&(a.active=!1);c!=a.active&&(a.b1.arbiters.modified=!0,a.b2.arbiters.modified=!0,this.c_arbiters_true.modified=this.c_arbiters_false.modified=
!0,this.s_arbiters.modified=this.f_arbiters.modified=!0);return!1},prestep:function(a){for(var b=null,c=this.live_constraints.head;null!=c;){var d=c.elt;d.preStep(a)?(c=this.live_constraints.erase(b),d.broken(),this.constraintCbBreak(d),d.removeOnBreak?(d.component.sleeping=!0,this.midstep=!1,null!=d.compound?d.compound.wrap_constraints.remove(d.outer):this.wrap_constraints.remove(d.outer),this.midstep=!0):d.active=!1,d.clearcache()):(b=c,c=c.next)}var b=null,c=this.c_arbiters_true,d=c.head,e=null!=
this.c_arbiters_false;e&&null==d&&(e=!1,d=this.c_arbiters_false.head,c=this.c_arbiters_false,b=null);for(;null!=d;)this.presteparb(d.elt,a)?d=c.inlined_erase(b):(b=d,d=d.next),e&&null==d&&(e=!1,d=this.c_arbiters_false.head,c=this.c_arbiters_false,b=null);b=null;c=this.f_arbiters;d=c.head;e=!1;for(;null!=d;)this.presteparb(d.elt,a)?d=c.inlined_erase(b):(b=d,d=d.next),e&&null==d&&(e=!1,b=c=null);b=null;c=this.s_arbiters;d=c.head;e=!1;for(;null!=d;)this.presteparb(d.elt,a)?d=c.inlined_erase(b):(b=d,
d=d.next),e&&null==d&&(e=!1,b=c=null)},warmStart:function(){for(var a=this.f_arbiters.head;null!=a;){var b=a.elt;b.active&&0!=(b.immState&f.id_ImmState_ACCEPT)&&b.warmStart();a=a.next}a=this.c_arbiters_false.head;b=!0;null==a&&(a=this.c_arbiters_true.head,b=!1);for(;null!=a;){var c=a.elt;c.active&&0!=(c.immState&f.id_ImmState_ACCEPT)&&c.warmStart();a=a.next;b&&null==a&&(a=this.c_arbiters_true.head,b=!1)}for(a=this.live_constraints.head;null!=a;)a.elt.warmStart(),a=a.next},iterateVel:function(a){for(var b=
0;b<a;){b++;for(var c=this.f_arbiters.head;null!=c;){var d=c.elt;d.active&&0!=(d.immState&f.id_ImmState_ACCEPT)&&d.applyImpulseVel();c=c.next}c=null;for(d=this.live_constraints.head;null!=d;){var e=d.elt;e.applyImpulseVel()?(d=this.live_constraints.erase(c),e.broken(),this.constraintCbBreak(e),e.removeOnBreak?(e.component.sleeping=!0,this.midstep=!1,null!=e.compound?e.compound.wrap_constraints.remove(e.outer):this.wrap_constraints.remove(e.outer),this.midstep=!0):e.active=!1,e.clearcache()):(c=d,
d=d.next)}c=this.c_arbiters_false.head;d=!0;null==c&&(c=this.c_arbiters_true.head,d=!1);for(;null!=c;)e=c.elt,e.active&&0!=(e.immState&f.id_ImmState_ACCEPT)&&e.applyImpulseVel(),c=c.next,d&&null==c&&(c=this.c_arbiters_true.head,d=!1)}},iteratePos:function(a){for(var b=0;b<a;){b++;for(var c=null,d=this.live_constraints.head;null!=d;){var e=d.elt;!e.__velocity&&e.stiff&&e.applyImpulsePos()?(d=this.live_constraints.erase(c),e.broken(),this.constraintCbBreak(e),e.removeOnBreak?(e.component.sleeping=!0,
this.midstep=!1,null!=e.compound?e.compound.wrap_constraints.remove(e.outer):this.wrap_constraints.remove(e.outer),this.midstep=!0):e.active=!1,e.clearcache()):(c=d,d=d.next)}c=this.c_arbiters_false.head;d=!0;null==c&&(c=this.c_arbiters_true.head,d=!1);for(;null!=c;)e=c.elt,e.active&&0!=(e.immState&f.id_ImmState_ACCEPT)&&e.applyImpulsePos(),c=c.next,d&&null==c&&(c=this.c_arbiters_true.head,d=!1)}},group_ignore:function(a,b){var c=a.lookup_group();if(null==c)return!1;var d=b.lookup_group();if(null==
d)return!1;for(var e=!1;null!=c&&null!=d;){if(c==d){e=c.ignore;break}c.depth<d.depth?d=d.group:c=c.group}return e},interactionType:function(a,b,c,d){var e;e=!1;for(var f=c.constraints.head;null!=f;){var g=f.elt;if(g.ignore&&g.pair_exists(c.id,d.id)){e=!0;break}f=f.next}return!e&&!this.group_ignore(a,b)?(a.sensorEnabled||b.sensorEnabled)&&a.filter.shouldSense(b.filter)?2:(a.fluidEnabled||b.fluidEnabled)&&a.filter.shouldFlow(b.filter)&&!(0==c.imass&&0==d.imass&&0==c.iinertia&&0==d.iinertia)?0:a.filter.shouldCollide(b.filter)&&
!(0==c.imass&&0==d.imass&&0==c.iinertia&&0==d.iinertia)?1:-1:-1},narrowPhase:function(a,b,c,d,e){var g=this,i=null,j=a.body,k=b.body,l=this.interactionType(a,b,j,k);if(-1!=l){var m,o;a.type>b.type?(m=b,o=a):a.type==b.type?a.id<b.id?(m=a,o=b):(o=a,m=b):(m=a,o=b);var q=m==b;if(0==l){var r;if(null==d){for(var t=null,u=(j.arbiters.length<k.arbiters.length?j:k).arbiters.head;null!=u;){var v=u.elt;if(v.id==m.id&&v.di==o.id){t=v;break}u=u.next}r=t}else r=d;var w=null==r,p,x=!1;w?(null==pc.zpp_pool?p=new pc:
(p=pc.zpp_pool,pc.zpp_pool=p.next,p.next=null),null):null==r.fluidarb?(r.cleared=!0,r.b1.arbiters.inlined_try_remove(r),r.b2.arbiters.inlined_try_remove(r),null!=r.pair&&(r.pair.arb=null,r.pair=null),r.active=!1,this.f_arbiters.modified=!0,null==pc.zpp_pool?p=new pc:(p=pc.zpp_pool,pc.zpp_pool=p.next,p.next=null),null,x=w=p.intchange=!0):p=r.fluidarb;var y=f.id_InteractionType_FLUID;if(w||p.stamp!=this.stamp||e)if(p.stamp=this.stamp,R.flowCollide(m,o,p)){w?(p.b1=a.body,p.ws1=a,p.b2=b.body,p.ws2=b,
p.id=m.id,p.di=o.id,p.b1.arbiters.inlined_add(p),p.b2.arbiters.inlined_add(p),p.active=!0,p.present=0,p.cleared=!1,p.sleeping=!1,p.fresh=!1,p.presentable=!1,p.nx=0,p.ny=1,p.dampx=0,p.dampy=0,p.adamp=0,this.f_arbiters.inlined_add(p),p.fresh=!x):p.fresh=p.up_stamp<this.stamp-1||p.endGenerated==this.stamp&&e;p.up_stamp=p.stamp;if(p.fresh||0==(p.immState&f.id_ImmState_ALWAYS)){p.immState=f.id_ImmState_ACCEPT;var z=!1;this.inlined_MRCA_chains(p.ws1.id>p.ws2.id?p.ws2:p.ws1,p.ws1.id>p.ws2.id?p.ws1:p.ws2);
for(var A=this.mrca1.head;null!=A;){for(var B=A.elt,C=this.mrca2.head;null!=C;){var D=C.elt,E=B.cbSet,H=D.cbSet;if(!E.manager.pair(E,H).empty_intersection()){var G=null,I=null;this.prelisteners.inlined_clear();E.manager.pair(E,H).forall(f.id_CbEvent_PRE,function(a){return function(b){0!=(b.itype&y)&&(a[0]=g.prelisteners.inlined_insert(a[0],b),z=z||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(G=$.get(B,D),null==G&&(I=eb.get(B,D),this.add_callbackset(I)),null==G||(G.FLUIDstamp!=this.stamp||
e)&&0==(G.FLUIDstate&f.id_ImmState_ALWAYS)){null!=I&&(G=I);if(null!=G)for(var J=this.prelisteners.head;null!=J;)J.elt.itype==f.id_InteractionType_ANY&&(G.COLLISIONstamp=this.stamp,G.SENSORstamp=this.stamp),G.FLUIDstamp=this.stamp,J=J.next;var L=p.active;p.active=!0;this.precb.zpp_inner.pre_arbiter=p;this.precb.zpp_inner.set=G;for(var K=this.prelisteners.head;null!=K;){var M=K.elt;this.precb.zpp_inner.listener=M;$.int_callback(G,M,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=B!=this.precb.zpp_inner.int1;
var N=M.handlerp(this.precb);if(null!=N){var P=p,O,T=N;null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=new db,f.internal=!1);if(T==f.PreFlag_ACCEPT)O=f.id_ImmState_ACCEPT|f.id_ImmState_ALWAYS;else{var U=N,S;null==f.PreFlag_ACCEPT_ONCE&&(f.internal=!0,f.PreFlag_ACCEPT_ONCE=new db,f.internal=!1);if(U==f.PreFlag_ACCEPT_ONCE)S=f.id_ImmState_ACCEPT;else{var X=N;null==f.PreFlag_IGNORE&&(f.internal=!0,f.PreFlag_IGNORE=new db,f.internal=!1);S=X==f.PreFlag_IGNORE?f.id_ImmState_IGNORE|f.id_ImmState_ALWAYS:
f.id_ImmState_IGNORE}O=S}P.immState=O}K=K.next}p.active=L;if(null!=G)for(var W=this.prelisteners.head;null!=W;)W.elt.itype==f.id_InteractionType_ANY&&(G.COLLISIONstate=p.immState,G.SENSORstate=p.immState),G.FLUIDstate=p.immState,W=W.next}else null==G?0==(p.immState&f.id_ImmState_ALWAYS)&&(p.immState=f.id_ImmState_ACCEPT):p.immState=G.FLUIDstate}C=C.next}A=A.next}if(z&&0==(p.immState&f.id_ImmState_ALWAYS)){if(p.b1.type==f.id_BodyType_DYNAMIC){var V=p.b1;V.world||(V.component.waket=this.stamp+(this.midstep?
0:1),V.type==f.id_BodyType_KINEMATIC&&(V.kinematicDelaySleep=!0),V.component.sleeping&&this.really_wake(V,!1))}if(p.b1.type==f.id_BodyType_DYNAMIC){var Y=p.b2;Y.world||(Y.component.waket=this.stamp+(this.midstep?0:1),Y.type==f.id_BodyType_KINEMATIC&&(Y.kinematicDelaySleep=!0),Y.component.sleeping&&this.really_wake(Y,!1))}}}if(0!=(p.immState&f.id_ImmState_ACCEPT)){if(p.b1.type==f.id_BodyType_DYNAMIC&&p.b1.component.sleeping){var Z=p.b1;Z.world||(Z.component.waket=this.stamp+(this.midstep?0:1),Z.type==
f.id_BodyType_KINEMATIC&&(Z.kinematicDelaySleep=!0),Z.component.sleeping&&this.really_wake(Z,!1))}if(p.b2.type==f.id_BodyType_DYNAMIC&&p.b2.component.sleeping){var ba=p.b2;ba.world||(ba.component.waket=this.stamp+(this.midstep?0:1),ba.type==f.id_BodyType_KINEMATIC&&(ba.kinematicDelaySleep=!0),ba.component.sleeping&&this.really_wake(ba,!1))}}p.sleeping&&(p.sleeping=!1,this.f_arbiters.inlined_add(p));i=p}else if(w){var da=p;da.next=pc.zpp_pool;pc.zpp_pool=da;i=null}else i=p;else i=p}else if(1==l){var ea;
ea=c?this.c_arbiters_true:this.c_arbiters_false;var aa;if(null==d){for(var ia=null,ga=(j.arbiters.length<k.arbiters.length?j:k).arbiters.head;null!=ga;){var ha=ga.elt;if(ha.id==m.id&&ha.di==o.id){ia=ha;break}ga=ga.next}aa=ia}else aa=d;var fa=null==aa,F,ja=!1;fa?(null==Oa.zpp_pool?F=new Oa:(F=Oa.zpp_pool,Oa.zpp_pool=F.next,F.next=null),null,F.stat=c):null==aa.colarb?(aa.cleared=!0,aa.b1.arbiters.inlined_try_remove(aa),aa.b2.arbiters.inlined_try_remove(aa),null!=aa.pair&&(aa.pair.arb=null,aa.pair=null),
aa.active=!1,this.f_arbiters.modified=!0,null==Oa.zpp_pool?F=new Oa:(F=Oa.zpp_pool,Oa.zpp_pool=F.next,F.next=null),null,F.intchange=!0,F.stat=c,ja=fa=!0):(F=aa.colarb,q=m!=F.s1,F.stat!=c&&(F.stat=c,F.sleeping||((c?this.c_arbiters_false:this.c_arbiters_true).remove(F),ea.add(F))));var na=f.id_InteractionType_COLLISION;if(fa||F.stamp!=this.stamp||e)if(F.stamp=this.stamp,R.contactCollide(m,o,F,q)){fa?(F.b1=a.body,F.ws1=a,F.b2=b.body,F.ws2=b,F.id=m.id,F.di=o.id,F.b1.arbiters.inlined_add(F),F.b2.arbiters.inlined_add(F),
F.active=!0,F.present=0,F.cleared=!1,F.sleeping=!1,F.fresh=!1,F.presentable=!1,F.s1=a,F.s2=b,F.userdef_restitution||(F.restitution=F.s1.material.elasticity<=Math.NEGATIVE_INFINITY||F.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:F.s1.material.elasticity>=Math.POSITIVE_INFINITY||F.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(F.s1.material.elasticity+F.s2.material.elasticity)/2,0>F.restitution&&(F.restitution=0),1<F.restitution&&(F.restitution=1)),F.userdef_dyn_fric||(F.dyn_fric=Math.sqrt(F.s1.material.dynamicFriction*
F.s2.material.dynamicFriction)),F.userdef_stat_fric||(F.stat_fric=Math.sqrt(F.s1.material.staticFriction*F.s2.material.staticFriction)),F.userdef_rfric||(F.rfric=Math.sqrt(F.s1.material.rollingFriction*F.s2.material.rollingFriction)),ea.inlined_add(F),F.fresh=!ja):F.fresh=F.up_stamp<this.stamp-1||F.endGenerated==this.stamp&&e;F.up_stamp=F.stamp;if(F.fresh||0==(F.immState&f.id_ImmState_ALWAYS)){F.immState=f.id_ImmState_ACCEPT;var ma=!1;this.inlined_MRCA_chains(F.ws1.id>F.ws2.id?F.ws2:F.ws1,F.ws1.id>
F.ws2.id?F.ws1:F.ws2);for(var ka=this.mrca1.head;null!=ka;){for(var la=ka.elt,pa=this.mrca2.head;null!=pa;){var ra=pa.elt,qa=la.cbSet,wa=ra.cbSet;if(!qa.manager.pair(qa,wa).empty_intersection()){var ca=null,sa=null;this.prelisteners.inlined_clear();qa.manager.pair(qa,wa).forall(f.id_CbEvent_PRE,function(a){return function(b){0!=(b.itype&na)&&(a[0]=g.prelisteners.inlined_insert(a[0],b),ma=ma||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(ca=$.get(la,ra),null==ca&&(sa=eb.get(la,ra),this.add_callbackset(sa)),
null==ca||(ca.COLLISIONstamp!=this.stamp||e)&&0==(ca.COLLISIONstate&f.id_ImmState_ALWAYS)){null!=sa&&(ca=sa);if(null!=ca)for(var ta=this.prelisteners.head;null!=ta;)ta.elt.itype==f.id_InteractionType_ANY?(ca.COLLISIONstamp=this.stamp,ca.SENSORstamp=this.stamp,ca.FLUIDstamp=this.stamp):ca.COLLISIONstamp=this.stamp,ta=ta.next;var za=F.active;F.active=!0;F.cleanupContacts();this.precb.zpp_inner.pre_arbiter=F;this.precb.zpp_inner.set=ca;for(var ua=this.prelisteners.head;null!=ua;){var ya=ua.elt;this.precb.zpp_inner.listener=
ya;$.int_callback(ca,ya,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=la!=this.precb.zpp_inner.int1;var xa=ya.handlerp(this.precb);if(null!=xa){var Ga=F,Ba,Ia=xa;null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=new db,f.internal=!1);if(Ia==f.PreFlag_ACCEPT)Ba=f.id_ImmState_ACCEPT|f.id_ImmState_ALWAYS;else{var La=xa,Ka;null==f.PreFlag_ACCEPT_ONCE&&(f.internal=!0,f.PreFlag_ACCEPT_ONCE=new db,f.internal=!1);if(La==f.PreFlag_ACCEPT_ONCE)Ka=f.id_ImmState_ACCEPT;else{var Qa=xa;null==f.PreFlag_IGNORE&&
(f.internal=!0,f.PreFlag_IGNORE=new db,f.internal=!1);Ka=Qa==f.PreFlag_IGNORE?f.id_ImmState_IGNORE|f.id_ImmState_ALWAYS:f.id_ImmState_IGNORE}Ba=Ka}Ga.immState=Ba}ua=ua.next}F.active=za;if(null!=ca)for(var Ha=this.prelisteners.head;null!=Ha;)Ha.elt.itype==f.id_InteractionType_ANY?(ca.COLLISIONstate=F.immState,ca.SENSORstate=F.immState,ca.FLUIDstate=F.immState):ca.COLLISIONstate=F.immState,Ha=Ha.next}else null==ca?0==(F.immState&f.id_ImmState_ALWAYS)&&(F.immState=f.id_ImmState_ACCEPT):F.immState=ca.COLLISIONstate}pa=
pa.next}ka=ka.next}if(ma&&0==(F.immState&f.id_ImmState_ALWAYS)){if(F.b1.type==f.id_BodyType_DYNAMIC){var Ca=F.b1;Ca.world||(Ca.component.waket=this.stamp+(this.midstep?0:1),Ca.type==f.id_BodyType_KINEMATIC&&(Ca.kinematicDelaySleep=!0),Ca.component.sleeping&&this.really_wake(Ca,!1))}if(F.b1.type==f.id_BodyType_DYNAMIC){var Da=F.b2;Da.world||(Da.component.waket=this.stamp+(this.midstep?0:1),Da.type==f.id_BodyType_KINEMATIC&&(Da.kinematicDelaySleep=!0),Da.component.sleeping&&this.really_wake(Da,!1))}}}if(0!=
(F.immState&f.id_ImmState_ACCEPT)){if(F.b1.type==f.id_BodyType_DYNAMIC&&F.b1.component.sleeping){var Ea=F.b1;Ea.world||(Ea.component.waket=this.stamp+(this.midstep?0:1),Ea.type==f.id_BodyType_KINEMATIC&&(Ea.kinematicDelaySleep=!0),Ea.component.sleeping&&this.really_wake(Ea,!1))}if(F.b2.type==f.id_BodyType_DYNAMIC&&F.b2.component.sleeping){var Fa=F.b2;Fa.world||(Fa.component.waket=this.stamp+(this.midstep?0:1),Fa.type==f.id_BodyType_KINEMATIC&&(Fa.kinematicDelaySleep=!0),Fa.component.sleeping&&this.really_wake(Fa,
!1))}}F.sleeping&&(F.sleeping=!1,ea.inlined_add(F));i=F}else if(fa){var Aa=F;Aa.userdef_dyn_fric=!1;Aa.userdef_stat_fric=!1;Aa.userdef_restitution=!1;Aa.userdef_rfric=!1;Aa.__ref_edge1=Aa.__ref_edge2=null;Aa.next=Oa.zpp_pool;Oa.zpp_pool=Aa;i=null}else i=F;else i=F}else{var va;if(null==d){for(var Ua=null,Na=(j.arbiters.length<k.arbiters.length?j:k).arbiters.head;null!=Na;){var Pa=Na.elt;if(Pa.id==m.id&&Pa.di==o.id){Ua=Pa;break}Na=Na.next}va=Ua}else va=d;var Ma=null==va,Q,Xa=!1;Ma?(null==$b.zpp_pool?
Q=new $b:(Q=$b.zpp_pool,$b.zpp_pool=Q.next,Q.next=null),null):null==va.sensorarb?(va.cleared=!0,va.b1.arbiters.inlined_try_remove(va),va.b2.arbiters.inlined_try_remove(va),null!=va.pair&&(va.pair.arb=null,va.pair=null),va.active=!1,this.f_arbiters.modified=!0,null==$b.zpp_pool?Q=new $b:(Q=$b.zpp_pool,$b.zpp_pool=Q.next,Q.next=null),null,Xa=Ma=Q.intchange=!0):Q=va.sensorarb;var $a=f.id_InteractionType_SENSOR;if(Ma||Q.stamp!=this.stamp||e)if(Q.stamp=this.stamp,R.testCollide(m,o)){Ma?(Q.b1=a.body,Q.ws1=
a,Q.b2=b.body,Q.ws2=b,Q.id=m.id,Q.di=o.id,Q.b1.arbiters.inlined_add(Q),Q.b2.arbiters.inlined_add(Q),Q.active=!0,Q.present=0,Q.cleared=!1,Q.sleeping=!1,Q.fresh=!1,Q.presentable=!1,this.s_arbiters.inlined_add(Q),Q.fresh=!Xa):Q.fresh=Q.up_stamp<this.stamp-1||Q.endGenerated==this.stamp&&e;Q.up_stamp=Q.stamp;if(Q.fresh||0==(Q.immState&f.id_ImmState_ALWAYS)){Q.immState=f.id_ImmState_ACCEPT;var Va=!1;this.inlined_MRCA_chains(Q.ws1.id>Q.ws2.id?Q.ws2:Q.ws1,Q.ws1.id>Q.ws2.id?Q.ws1:Q.ws2);for(var Ra=this.mrca1.head;null!=
Ra;){for(var Sa=Ra.elt,Ta=this.mrca2.head;null!=Ta;){var Za=Ta.elt,Wa=Sa.cbSet,bb=Za.cbSet;if(!Wa.manager.pair(Wa,bb).empty_intersection()){var oa=null,Ya=null;this.prelisteners.inlined_clear();Wa.manager.pair(Wa,bb).forall(f.id_CbEvent_PRE,function(a){return function(b){0!=(b.itype&$a)&&(a[0]=g.prelisteners.inlined_insert(a[0],b),Va=Va||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(oa=$.get(Sa,Za),null==oa&&(Ya=eb.get(Sa,Za),this.add_callbackset(Ya)),null==oa||(oa.SENSORstamp!=this.stamp||
e)&&0==(oa.SENSORstate&f.id_ImmState_ALWAYS)){null!=Ya&&(oa=Ya);if(null!=oa)for(var ab=this.prelisteners.head;null!=ab;)ab.elt.itype==f.id_InteractionType_ANY?(oa.COLLISIONstamp=this.stamp,oa.SENSORstamp=this.stamp,oa.FLUIDstamp=this.stamp):oa.SENSORstamp=this.stamp,ab=ab.next;var ib=Q.active;Q.active=!0;this.precb.zpp_inner.pre_arbiter=Q;this.precb.zpp_inner.set=oa;for(var cb=this.prelisteners.head;null!=cb;){var gb=cb.elt;this.precb.zpp_inner.listener=gb;$.int_callback(oa,gb,this.precb.zpp_inner);
this.precb.zpp_inner.pre_swapped=Sa!=this.precb.zpp_inner.int1;var fb=gb.handlerp(this.precb);if(null!=fb){var lb=Q,hb,mb=fb;null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=new db,f.internal=!1);if(mb==f.PreFlag_ACCEPT)hb=f.id_ImmState_ACCEPT|f.id_ImmState_ALWAYS;else{var nb=fb,jb;null==f.PreFlag_ACCEPT_ONCE&&(f.internal=!0,f.PreFlag_ACCEPT_ONCE=new db,f.internal=!1);if(nb==f.PreFlag_ACCEPT_ONCE)jb=f.id_ImmState_ACCEPT;else{var ob=fb;null==f.PreFlag_IGNORE&&(f.internal=!0,f.PreFlag_IGNORE=
new db,f.internal=!1);jb=ob==f.PreFlag_IGNORE?f.id_ImmState_IGNORE|f.id_ImmState_ALWAYS:f.id_ImmState_IGNORE}hb=jb}lb.immState=hb}cb=cb.next}Q.active=ib;if(null!=oa)for(var pb=this.prelisteners.head;null!=pb;)pb.elt.itype==f.id_InteractionType_ANY?(oa.COLLISIONstate=Q.immState,oa.SENSORstate=Q.immState,oa.FLUIDstate=Q.immState):oa.SENSORstate=Q.immState,pb=pb.next}else null==oa?0==(Q.immState&f.id_ImmState_ALWAYS)&&(Q.immState=f.id_ImmState_ACCEPT):Q.immState=oa.SENSORstate}Ta=Ta.next}Ra=Ra.next}if(Va&&
0==(Q.immState&f.id_ImmState_ALWAYS)){if(Q.b1.type!=f.id_BodyType_STATIC){var qb=Q.b1;qb.world||(qb.component.waket=this.stamp+(this.midstep?0:1),qb.type==f.id_BodyType_KINEMATIC&&(qb.kinematicDelaySleep=!0),qb.component.sleeping&&this.really_wake(qb,!1))}if(Q.b2.type!=f.id_BodyType_STATIC){var kb=Q.b2;kb.world||(kb.component.waket=this.stamp+(this.midstep?0:1),kb.type==f.id_BodyType_KINEMATIC&&(kb.kinematicDelaySleep=!0),kb.component.sleeping&&this.really_wake(kb,!1))}}}Q.sleeping&&(Q.sleeping=!1,
this.s_arbiters.inlined_add(Q));i=Q}else if(Ma){var rb=Q;rb.next=$b.zpp_pool;$b.zpp_pool=rb;i=null}else i=Q;else i=Q}}return i},MRCA_chains:function(a,b){this.inlined_MRCA_chains(a,b)},inlined_MRCA_chains:function(a,b){this.mrca1.inlined_clear();this.mrca2.inlined_clear();null!=a.cbSet&&this.mrca1.inlined_add(a);null!=a.body.cbSet&&this.mrca1.inlined_add(a.body);null!=b.cbSet&&this.mrca2.inlined_add(b);null!=b.body.cbSet&&this.mrca2.inlined_add(b.body);for(var c=a.body.compound,d=b.body.compound;c!=
d;)(null==c?0:c.depth)<(null==d?0:d.depth)?(null!=d.cbSet&&this.mrca2.inlined_add(d),d=d.compound):(null!=c.cbSet&&this.mrca1.inlined_add(c),c=c.compound)},__class__:Gk};var ye=function(){this.next=this.prev=this.shape=this.aabb=null};g["zpp_nape.space.ZPP_SweepData"]=ye;ye.__name__=["zpp_nape","space","ZPP_SweepData"];ye.prototype={__class__:ye};var Fj=function(a){this.list=null;xe.call(this);this.space=a;this.is_sweep=!0;this.sweep=this};g["zpp_nape.space.ZPP_SweepPhase"]=Fj;Fj.__name__=["zpp_nape",
"space","ZPP_SweepPhase"];Fj.__super__=xe;Fj.prototype=k(xe.prototype,{__insert:function(a){var b;null==ye.zpp_pool?b=new ye:(b=ye.zpp_pool,ye.zpp_pool=b.next,b.next=null);null;a.sweep=b;b.shape=a;b.aabb=a.aabb;b.next=this.list;null!=this.list&&(this.list.prev=b);this.list=b},__remove:function(a){var b=a.sweep;null==b.prev?this.list=b.next:b.prev.next=b.next;null!=b.next&&(b.next.prev=b.prev);a.sweep=null;b.prev=null;b.shape=null;b.aabb=null;b.next=ye.zpp_pool;ye.zpp_pool=b},sync_broadphase:function(){this.space.validation();
null!=this.list&&this.sync_broadphase_fast()},sync_broadphase_fast:function(){for(var a=this.list.next;null!=a;){var b=a.next,c=a.prev;if(!(a.aabb.minx>c.aabb.minx)){for(;null!=c.prev&&c.prev.aabb.minx>a.aabb.minx;)c=c.prev;var d=a.prev;d.next=a.next;null!=a.next&&(a.next.prev=d);null==c.prev?(a.prev=null,this.list=a,a.next=c,c.prev=a):(a.prev=c.prev,c.prev=a,a.prev.next=a,a.next=c)}a=b}},broadphase:function(a,b){if(null!=this.list){this.sync_broadphase_fast();for(var c=this.list;null!=c;){for(var d=
c.next,e=c.shape,g=e.body,i=c.aabb.maxx;null!=d&&!(d.aabb.minx>i);){var j=d.shape,k=j.body;if(k!=g&&!(g.type==f.id_BodyType_STATIC&&k.type==f.id_BodyType_STATIC)&&(!g.component.sleeping||!k.component.sleeping))e.aabb.intersectY(j.aabb)&&(b?a.narrowPhase(e,j,g.type!=f.id_BodyType_DYNAMIC||k.type!=f.id_BodyType_DYNAMIC,null,!1):a.continuousEvent(e,j,g.type!=f.id_BodyType_DYNAMIC||k.type!=f.id_BodyType_DYNAMIC,null,!1));d=d.next}c=c.next}}},clear:function(){for(;null!=this.list;)this.list.shape.removedFromSpace(),
this.__remove(this.list.shape)},rayCast:function(a,b,c){this.sync_broadphase();a.validate_dir();var d=a.rayAABB(),e=a.maxdist,g=null;if(0==a.dirx)for(var i=this.list;null!=i&&i.aabb.minx<=d.minx;){if(i.aabb.intersect(d)&&(null==c||i.shape.filter.shouldCollide(c))){var j=a.aabbsect(i.aabb);0<=j&&j<e&&(j=i.shape.type==f.id_ShapeType_CIRCLE?a.circlesect(i.shape.circle,b,e):a.polysect(i.shape.polygon,b,e),null!=j&&(e=j.zpp_inner.toiDistance,null!=g&&g.zpp_inner.free(),g=j))}i=i.next}else if(0>a.dirx){i=
this.list;for(j=null;null!=i&&i.aabb.minx<=d.maxx;)j=i,i=i.next;for(i=j;null!=i;){if(i.aabb.intersect(d)&&(null==c||i.shape.filter.shouldCollide(c)))j=a.aabbsect(i.aabb),0<=j&&j<e&&(j=i.shape.type==f.id_ShapeType_CIRCLE?a.circlesect(i.shape.circle,b,e):a.polysect(i.shape.polygon,b,e),null!=j&&(e=j.zpp_inner.toiDistance,null!=g&&g.zpp_inner.free(),g=j));i=i.prev}}else for(i=this.list;null!=i&&i.aabb.minx<=d.maxx&&i.aabb.minx<a.originx+a.dirx*e;){if(i.aabb.intersect(d)&&(null==c||i.shape.filter.shouldCollide(c)))j=
a.aabbsect(i.aabb),0<=j&&j<e&&(j=i.shape.type==f.id_ShapeType_CIRCLE?a.circlesect(i.shape.circle,b,e):a.polysect(i.shape.polygon,b,e),null!=j&&(e=j.zpp_inner.toiDistance,null!=g&&g.zpp_inner.free(),g=j));i=i.next}null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null);d.wrap_min=d.wrap_max=null;d._invalidate=null;d._validate=null;d.next=oa.zpp_pool;oa.zpp_pool=d;return g},__class__:Fj});var Ok=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_CallbackSet"]=
Ok;Ok.__name__=["zpp_nape","util","ZNPList_ZPP_CallbackSet"];Ok.prototype={inlined_add:function(a){var b;null==ze.zpp_pool?b=new ze:(b=ze.zpp_pool,ze.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=
!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=ze.zpp_pool;ze.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Ok};var Te=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Body"]=Te;Te.__name__=["zpp_nape","util","ZNPList_ZPP_Body"];Te.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Kc.zpp_pool?b=new Kc:(b=Kc.zpp_pool,Kc.zpp_pool=b.next,b.next=
null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==Kc.zpp_pool?c=new Kc:(c=Kc.zpp_pool,Kc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Kc.zpp_pool;
Kc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=
!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Kc.zpp_pool;Kc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Te};var zf=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Compound"]=zf;zf.__name__=["zpp_nape","util","ZNPList_ZPP_Compound"];
zf.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Zd.zpp_pool?b=new Zd:(b=Zd.zpp_pool,Zd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Zd.zpp_pool;Zd.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},
inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Zd.zpp_pool;Zd.zpp_pool=a;this.modified=!0;this.length--;
this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:zf};var Qg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Arbiter"]=Qg;Qg.__name__=["zpp_nape","util","ZNPList_ZPP_Arbiter"];Qg.prototype={inlined_add:function(a){var b;null==Lc.zpp_pool?b=new Lc:(b=Lc.zpp_pool,Lc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},
inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Lc.zpp_pool;Lc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,
c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Lc.zpp_pool;Lc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},inlined_has:function(a){var b;b=!1;for(var c=this.head;null!=c;){if(c.elt==a){b=!0;break}c=c.next}return b},__class__:Qg};var Lk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=
null};g["zpp_nape.util.ZNPList_ZPP_CbSetPair"]=Lk;Lk.__name__=["zpp_nape","util","ZNPList_ZPP_CbSetPair"];Lk.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==$d.zpp_pool?b=new $d:(b=$d.zpp_pool,$d.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=$d.zpp_pool;$d.zpp_pool=a;null==this.head&&
(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=
c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=$d.zpp_pool;$d.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Lk};var Qk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_AABBPair"]=Qk;Qk.__name__=["zpp_nape","util","ZNPList_ZPP_AABBPair"];Qk.prototype={inlined_add:function(a){var b;null==Yc.zpp_pool?b=new Yc:(b=Yc.zpp_pool,Yc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;
this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Yc.zpp_pool;Yc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);
d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Yc.zpp_pool;Yc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Qk};var Rk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Edge"]=Rk;Rk.__name__=["zpp_nape","util","ZNPList_ZPP_Edge"];Rk.prototype={add:function(a){return this.inlined_add(a)},
inlined_add:function(a){var b;null==Mc.zpp_pool?b=new Mc:(b=Mc.zpp_pool,Mc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==Mc.zpp_pool?c=new Mc:(c=Mc.zpp_pool,Mc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},
inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Mc.zpp_pool;Mc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=
!0));a=b;a.elt=null;a.next=Mc.zpp_pool;Mc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},reverse:function(){for(var a=this.head,b=null;null!=a;){var c=a.next;a.next=b;b=this.head=a;a=c}this.pushmod=this.modified=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Rk};var Tk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Component"]=Tk;Tk.__name__=["zpp_nape","util","ZNPList_ZPP_Component"];
Tk.prototype={inlined_add:function(a){var b;null==Ae.zpp_pool?b=new Ae:(b=Ae.zpp_pool,Ae.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Ae.zpp_pool;Ae.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;
this.pop();return a},__class__:Tk};var Sk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_AABBNode"]=Sk;Sk.__name__=["zpp_nape","util","ZNPList_ZPP_AABBNode"];Sk.prototype={inlined_insert:function(a,b){var c;null==Be.zpp_pool?c=new Be:(c=Be.zpp_pool,Be.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=
this.head;this.head=a.next;a.elt=null;a.next=Be.zpp_pool;Be.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:Sk};var Dl=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_InteractionGroup"]=Dl;Dl.__name__=["zpp_nape",
"util","ZNPList_ZPP_InteractionGroup"];Dl.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Dl};var Wk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_FluidArbiter"]=Wk;Wk.__name__=["zpp_nape","util","ZNPList_ZPP_FluidArbiter"];Wk.prototype={inlined_add:function(a){var b;null==ae.zpp_pool?b=new ae:(b=ae.zpp_pool,ae.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=
!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=ae.zpp_pool;ae.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&
(this.pushmod=!0));a=b;a.elt=null;a.next=ae.zpp_pool;ae.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Wk};var Xk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_SensorArbiter"]=Xk;Xk.__name__=["zpp_nape","util","ZNPList_ZPP_SensorArbiter"];Xk.prototype={inlined_add:function(a){var b;null==be.zpp_pool?b=new be:(b=be.zpp_pool,be.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;
this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=be.zpp_pool;be.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=
!0));a=b;a.elt=null;a.next=be.zpp_pool;be.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Xk};var Gj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_ColArbiter"]=Gj;Gj.__name__=["zpp_nape","util","ZNPList_ZPP_ColArbiter"];Gj.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==ce.zpp_pool?b=new ce:(b=ce.zpp_pool,ce.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=
b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=ce.zpp_pool;ce.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==
a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=ce.zpp_pool;ce.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Gj};var Hj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Listener"]=Hj;Hj.__name__=["zpp_nape","util","ZNPList_ZPP_Listener"];
Hj.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==sc.zpp_pool?b=new sc:(b=sc.zpp_pool,sc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==sc.zpp_pool?c=new sc:(c=sc.zpp_pool,sc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=
!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=sc.zpp_pool;sc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);
d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=sc.zpp_pool;sc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Hj};var Vk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_ToiEvent"]=
Vk;Vk.__name__=["zpp_nape","util","ZNPList_ZPP_ToiEvent"];Vk.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==qd.zpp_pool?b=new qd:(b=qd.zpp_pool,qd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=qd.zpp_pool;qd.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},
pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=qd.zpp_pool;qd.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Vk};var El=function(){this.length=0;this.modified=
this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ConvexResult"]=El;El.__name__=["zpp_nape","util","ZNPList_ConvexResult"];El.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:El};var Fl=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_GeomPoly"]=Fl;Fl.__name__=["zpp_nape","util","ZNPList_ZPP_GeomPoly"];Fl.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},
__class__:Fl};var Gl=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_RayResult"]=Gl;Gl.__name__=["zpp_nape","util","ZNPList_RayResult"];Gl.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Gl};var Zb=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_CbType"]=Zb;Zb.__name__=["zpp_nape","util","ZNPNode_ZPP_CbType"];Zb.prototype={__class__:Zb};var ze=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_CallbackSet"]=
ze;ze.__name__=["zpp_nape","util","ZNPNode_ZPP_CallbackSet"];ze.prototype={__class__:ze};var hb=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Shape"]=hb;hb.__name__=["zpp_nape","util","ZNPNode_ZPP_Shape"];hb.prototype={__class__:hb};var Kc=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Body"]=Kc;Kc.__name__=["zpp_nape","util","ZNPNode_ZPP_Body"];Kc.prototype={__class__:Kc};var Cb=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Constraint"]=Cb;
Cb.__name__=["zpp_nape","util","ZNPNode_ZPP_Constraint"];Cb.prototype={__class__:Cb};var Zd=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Compound"]=Zd;Zd.__name__=["zpp_nape","util","ZNPNode_ZPP_Compound"];Zd.prototype={__class__:Zd};var Yb=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_InteractionListener"]=Yb;Yb.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionListener"];Yb.prototype={__class__:Yb};var Lc=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Arbiter"]=
Lc;Lc.__name__=["zpp_nape","util","ZNPNode_ZPP_Arbiter"];Lc.prototype={__class__:Lc};var Fc=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_CbSet"]=Fc;Fc.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSet"];Fc.prototype={__class__:Fc};var Wc=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Interactor"]=Wc;Wc.__name__=["zpp_nape","util","ZNPNode_ZPP_Interactor"];Wc.prototype={__class__:Wc};var pb=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_BodyListener"]=
pb;pb.__name__=["zpp_nape","util","ZNPNode_ZPP_BodyListener"];pb.prototype={__class__:pb};var Bb=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_ConstraintListener"]=Bb;Bb.__name__=["zpp_nape","util","ZNPNode_ZPP_ConstraintListener"];Bb.prototype={__class__:Bb};var $d=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_CbSetPair"]=$d;$d.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSetPair"];$d.prototype={__class__:$d};var Yc=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_AABBPair"]=
Yc;Yc.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBPair"];Yc.prototype={__class__:Yc};var Mc=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Edge"]=Mc;Mc.__name__=["zpp_nape","util","ZNPNode_ZPP_Edge"];Mc.prototype={__class__:Mc};var bc=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Vec2"]=bc;bc.__name__=["zpp_nape","util","ZNPNode_ZPP_Vec2"];bc.prototype={__class__:bc};var Ae=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Component"]=Ae;Ae.__name__=
["zpp_nape","util","ZNPNode_ZPP_Component"];Ae.prototype={__class__:Ae};var Be=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_AABBNode"]=Be;Be.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBNode"];Be.prototype={__class__:Be};var Hl=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_InteractionGroup"]=Hl;Hl.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionGroup"];Hl.prototype={__class__:Hl};var ae=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_FluidArbiter"]=
ae;ae.__name__=["zpp_nape","util","ZNPNode_ZPP_FluidArbiter"];ae.prototype={__class__:ae};var be=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_SensorArbiter"]=be;be.__name__=["zpp_nape","util","ZNPNode_ZPP_SensorArbiter"];be.prototype={__class__:be};var ce=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_ColArbiter"]=ce;ce.__name__=["zpp_nape","util","ZNPNode_ZPP_ColArbiter"];ce.prototype={__class__:ce};var sc=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Listener"]=
sc;sc.__name__=["zpp_nape","util","ZNPNode_ZPP_Listener"];sc.prototype={__class__:sc};var qd=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_ToiEvent"]=qd;qd.__name__=["zpp_nape","util","ZNPNode_ZPP_ToiEvent"];qd.prototype={__class__:qd};var Il=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ConvexResult"]=Il;Il.__name__=["zpp_nape","util","ZNPNode_ConvexResult"];Il.prototype={__class__:Il};var Jl=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_GeomPoly"]=
Jl;Jl.__name__=["zpp_nape","util","ZNPNode_ZPP_GeomPoly"];Jl.prototype={__class__:Jl};var Kl=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_RayResult"]=Kl;Kl.__name__=["zpp_nape","util","ZNPNode_RayResult"];Kl.prototype={__class__:Kl};var yf=function(){this.at_index=0;this.at_ite=null;this.zip_length=!1;this._length=0;this.inner=null;Oe.call(this);this.at_ite=null;this.at_index=0;this.zip_length=!0;this._length=0};g["zpp_nape.util.ZPP_MixVec2List"]=yf;yf.__name__=["zpp_nape","util",
"ZPP_MixVec2List"];yf.get=function(a,b){null==b&&(b=!1);var c=new yf;c.inner=a;c.zpp_inner.immutable=b;return c};yf.__super__=Oe;yf.prototype=k(Oe.prototype,{zpp_gl:function(){this.zpp_vm();if(this.zip_length){this._length=0;for(var a=this.inner.next;null!=a;)this._length++,a=a.next;this.zip_length=!1}return this._length},zpp_vm:function(){this.zpp_inner.validate();this.inner.modified&&(this.zip_length=!0,this._length=0,this.at_ite=null)},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&
(a=this.zpp_gl()-1-a);if(a<this.at_index||null==this.at_ite){this.at_index=0;for(this.at_ite=this.inner.next;;)break}for(;this.at_index!=a;){this.at_index++;for(this.at_ite=this.at_ite.next;;)break}return this.at_ite.wrapper()},push:function(a){this.zpp_inner.modify_test();this.zpp_vm();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.inner.add(a.zpp_inner):this.inner.insert(this.inner.iterator_at(this.zpp_gl()-1),a.zpp_inner),this.zpp_inner.invalidate(),
null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},__class__:yf});var se=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Fd;this._invalidated=!0};g["zpp_nape.util.ZPP_ConstraintList"]=se;se.__name__=["zpp_nape","util","ZPP_ConstraintList"];se.get=function(a,
b){null==b&&(b=!1);var c=new tk;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};se.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&
this._invalidate(this)},__class__:se};var Kb=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Te;this._invalidated=!0};g["zpp_nape.util.ZPP_BodyList"]=Kb;Kb.__name__=["zpp_nape","util","ZPP_BodyList"];Kb.get=function(a,b){null==b&&(b=!1);var c=new Bk;c.zpp_inner.inner=
a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Kb.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Kb};var vg=
function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};g["zpp_nape.util.ZPP_InteractorList"]=vg;vg.__name__=["zpp_nape","util","ZPP_InteractorList"];vg.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&
(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:vg};var ue=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new zf;this._invalidated=!0};g["zpp_nape.util.ZPP_CompoundList"]=ue;ue.__name__=["zpp_nape","util","ZPP_CompoundList"];ue.get=function(a,b){null==b&&(b=
!1);var c=new Dk;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};ue.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},
__class__:ue};var ie=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Hj;this._invalidated=!0};g["zpp_nape.util.ZPP_ListenerList"]=ie;ie.__name__=["zpp_nape","util","ZPP_ListenerList"];ie.get=function(a,b){null==b&&(b=!1);var c=new sk;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=
!0);c.zpp_inner.zip_length=!0;return c};ie.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:ie};var hd=function(){this.user_length=
0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Ec;this._invalidated=!0};g["zpp_nape.util.ZPP_CbTypeList"]=hd;hd.__name__=["zpp_nape","util","ZPP_CbTypeList"];hd.get=function(a,b){null==b&&(b=!1);var c=new vi;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};
hd.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:hd};var of=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=
null;this.at_index=0;this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Pg;this._invalidated=!0};g["zpp_nape.util.ZPP_Vec2List"]=of;of.__name__=["zpp_nape","util","ZPP_Vec2List"];of.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},
validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:of};var pg=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};g["zpp_nape.util.ZPP_GeomPolyList"]=pg;pg.__name__=["zpp_nape","util","ZPP_GeomPolyList"];pg.prototype={valmod:function(){this.validate();
this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:pg};var qg=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};g["zpp_nape.util.ZPP_RayResultList"]=qg;qg.__name__=["zpp_nape",
"util","ZPP_RayResultList"];qg.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:qg};var og=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;
this.inner=null};g["zpp_nape.util.ZPP_ConvexResultList"]=og;og.__name__=["zpp_nape","util","ZPP_ConvexResultList"];og.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:og};var wg=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=
null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};g["zpp_nape.util.ZPP_EdgeList"]=wg;wg.__name__=["zpp_nape","util","ZPP_EdgeList"];wg.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:wg};var Cd=function(){this.user_length=
0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Me;this._invalidated=!0};g["zpp_nape.util.ZPP_ShapeList"]=Cd;Cd.__name__=["zpp_nape","util","ZPP_ShapeList"];Cd.get=function(a,b){null==b&&(b=!1);var c=new Fk;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};
Cd.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Cd};var ng=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=
null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};g["zpp_nape.util.ZPP_InteractionGroupList"]=ng;ng.__name__=["zpp_nape","util","ZPP_InteractionGroupList"];ng.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},
__class__:ng};var je=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Qg;this._invalidated=!0};g["zpp_nape.util.ZPP_ArbiterList"]=je;je.__name__=["zpp_nape","util","ZPP_ArbiterList"];je.get=function(a,b){null==b&&(b=!1);var c=new uk;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};je.prototype={valmod:function(){this.validate();
this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:je};var mg=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};g["zpp_nape.util.ZPP_ContactList"]=mg;mg.__name__=["zpp_nape",
"util","ZPP_ContactList"];mg.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:mg};var Og=function(){};g["zpp_nape.util.ZPP_Math"]=Og;Og.__name__=["zpp_nape","util","ZPP_Math"];Og.sqr=function(a){return a*a};var rg=function(){};g["zpp_nape.util.ZPP_PubPool"]=
rg;rg.__name__=["zpp_nape","util","ZPP_PubPool"];var ib=function(){this.colour=0;this.lt=this.swapped=this.data=this.prev=this.next=this.parent=null};g["zpp_nape.util.ZPP_Set_ZPP_CbSetPair"]=ib;ib.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSetPair"];ib.prototype={clear_with:function(a){if(null!=this.parent){for(var b=this.parent;null!=b;)b=null!=b.prev?b.prev:null!=b.next?b.next:this.clear_node(b,a);this.parent=null}},clear_node:function(a,b){b(a.data);var c=a.parent;null!=c&&(a==c.prev?c.prev=null:
c.next=null,a.parent=null);a.data=null;a.lt=null;a.swapped=null;a.next=ib.zpp_pool;ib.zpp_pool=a;return c},__fix_dbl_red:function(a){for(;;){var b=a.parent,c=b.parent;if(null==c){b.colour=1;break}var d,e,f,g,i,j,k;b==c.prev?(f=c,k=c.next,a==b.prev?(d=a,e=b,g=a.prev,i=a.next,j=b.next):(d=b,e=a,g=b.prev,i=a.prev,j=a.next)):(d=c,g=c.prev,a==b.prev?(e=a,f=b,i=a.prev,j=a.next,k=b.next):(e=b,f=a,i=b.prev,j=a.prev,k=a.next));a=c.parent;null==a?this.parent=e:a.prev==c?a.prev=e:a.next=e;null!=e&&(e.parent=
a);d.prev=g;null!=g&&(g.parent=d);d.next=i;null!=i&&(i.parent=d);e.prev=d;null!=d&&(d.parent=e);e.next=f;null!=f&&(f.parent=e);f.prev=j;null!=j&&(j.parent=f);f.next=k;null!=k&&(k.parent=f);e.colour=c.colour-1;d.colour=1;f.colour=1;if(e==this.parent)this.parent.colour=1;else if(0==e.colour&&0==e.parent.colour){a=e;continue}break}},try_insert:function(a){var b=null,c=null;if(null==this.parent)null==ib.zpp_pool?b=new ib:(b=ib.zpp_pool,ib.zpp_pool=b.next,b.next=null),null,b.data=a,this.parent=b;else for(c=
this.parent;;)if(this.lt(a,c.data))if(null==c.prev){null==ib.zpp_pool?b=new ib:(b=ib.zpp_pool,ib.zpp_pool=b.next,b.next=null);null;b.data=a;c.prev=b;b.parent=c;break}else c=c.prev;else if(this.lt(c.data,a))if(null==c.next){null==ib.zpp_pool?b=new ib:(b=ib.zpp_pool,ib.zpp_pool=b.next,b.next=null);null;b.data=a;c.next=b;b.parent=c;break}else c=c.next;else break;if(null==b)return c;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:ib};var rc=function(){this.colour=
0;this.lt=this.swapped=this.data=this.prev=this.next=this.parent=null};g["zpp_nape.util.ZPP_Set_ZPP_CbSet"]=rc;rc.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSet"];rc.prototype={empty:function(){return null==this.parent},find:function(a){for(var b=this.parent;null!=b&&b.data!=a;)b=this.lt(a,b.data)?b.prev:b.next;return b},find_weak:function(a){for(var b=this.parent;null!=b;)if(this.lt(a,b.data))b=b.prev;else if(this.lt(b.data,a))b=b.next;else break;return b},remove:function(a){this.remove_node(this.find(a))},
remove_node:function(a){if(null!=a.next&&null!=a.prev){for(var b=a.next;null!=b.prev;)b=b.prev;var c=a.data;a.data=b.data;b.data=c;null!=this.swapped&&this.swapped(a.data,b.data);a=b}b=null==a.prev?a.next:a.prev;if(1==a.colour)if(null!=a.prev||null!=a.next)b.colour=1;else if(null!=a.parent)for(c=a.parent;;){c.colour++;c.prev.colour--;c.next.colour--;var d=c.prev;if(-1==d.colour){this.__fix_neg_red(d);break}else if(0==d.colour){if(null!=d.prev&&0==d.prev.colour){this.__fix_dbl_red(d.prev);break}if(null!=
d.next&&0==d.next.colour){this.__fix_dbl_red(d.next);break}}d=c.next;if(-1==d.colour){this.__fix_neg_red(d);break}else if(0==d.colour){if(null!=d.prev&&0==d.prev.colour){this.__fix_dbl_red(d.prev);break}if(null!=d.next&&0==d.next.colour){this.__fix_dbl_red(d.next);break}}if(2==c.colour)if(null==c.parent)c.colour=1;else{c=c.parent;continue}break}c=a.parent;null==c?this.parent=b:c.prev==a?c.prev=b:c.next=b;null!=b&&(b.parent=c);a.parent=a.prev=a.next=null;a.data=null;a.lt=null;a.swapped=null;a.next=
rc.zpp_pool;rc.zpp_pool=a},__fix_neg_red:function(a){var b=a.parent;if(b.prev==a){var c=a.prev,d=a.next,e=d.prev,f=d.next;c.colour=0;a.colour=b.colour=1;a.next=e;null!=e&&(e.parent=a);a=b.data;b.data=d.data;d.data=a;null!=this.swapped&&this.swapped(b.data,d.data);d.prev=f;null!=f&&(f.parent=d);d.next=b.next;null!=b.next&&(b.next.parent=d);b.next=d}else c=a.next,d=a.prev,e=d.next,f=d.prev,c.colour=0,a.colour=b.colour=1,a.prev=e,null!=e&&(e.parent=a),a=b.data,b.data=d.data,d.data=a,null!=this.swapped&&
this.swapped(b.data,d.data),d.next=f,null!=f&&(f.parent=d),d.prev=b.prev,null!=b.prev&&(b.prev.parent=d),b.prev=d;null!=d&&(d.parent=b);b=c;null!=b.prev&&0==b.prev.colour?this.__fix_dbl_red(b.prev):null!=b.next&&0==b.next.colour&&this.__fix_dbl_red(b.next)},__fix_dbl_red:function(a){for(;;){var b=a.parent,c=b.parent;if(null==c){b.colour=1;break}var d,e,f,g,i,j,k;b==c.prev?(f=c,k=c.next,a==b.prev?(d=a,e=b,g=a.prev,i=a.next,j=b.next):(d=b,e=a,g=b.prev,i=a.prev,j=a.next)):(d=c,g=c.prev,a==b.prev?(e=
a,f=b,i=a.prev,j=a.next,k=b.next):(e=b,f=a,i=b.prev,j=a.prev,k=a.next));a=c.parent;null==a?this.parent=e:a.prev==c?a.prev=e:a.next=e;null!=e&&(e.parent=a);d.prev=g;null!=g&&(g.parent=d);d.next=i;null!=i&&(i.parent=d);e.prev=d;null!=d&&(d.parent=e);e.next=f;null!=f&&(f.parent=e);f.prev=j;null!=j&&(j.parent=f);f.next=k;null!=k&&(k.parent=f);e.colour=c.colour-1;d.colour=1;f.colour=1;if(e==this.parent)this.parent.colour=1;else if(0==e.colour&&0==e.parent.colour){a=e;continue}break}},insert:function(a){var b;
null==rc.zpp_pool?b=new rc:(b=rc.zpp_pool,rc.zpp_pool=b.next,b.next=null);null;b.data=a;if(null==this.parent)this.parent=b;else for(a=this.parent;;)if(this.lt(b.data,a.data))if(null==a.prev){a.prev=b;b.parent=a;break}else a=a.prev;else if(null==a.next){a.next=b;b.parent=a;break}else a=a.next;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:rc};var hc,Ql=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=
Number.POSITIVE_INFINITY;g.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=g.String=String;String.__name__=["String"];g.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=g.Date=Date;Date.__name__=["Date"];var Rl=g.Int={__name__:["Int"]},Sl=g.Dynamic={__name__:["Dynamic"]},Ml=g.Float=Number;Ml.__name__=["Float"];var Nl=g.Bool=Boolean;Nl.__ename__=["Bool"];var Tl=g.Class={__name__:["Class"]},Ul={};T.Element="element";
T.PCData="pcdata";T.CData="cdata";T.Comment="comment";T.DocType="doctype";T.ProcessingInstruction="processingInstruction";T.Document="document";Zc.instance=new Zc;sb.DISPATCHING_SENTINEL=new Xe(null,null);p.root=new z;p.uncaughtError=new Y;p.hidden=new $a(!1);p.volume=new O(1);p._platform=Zc.instance;p._calledInit=!1;Aa.__meta__={obj:{assets:[{ui_title:[{bytes:19711,md5:"9dd5be60147cfadd1d11e71f4ac7b806",name:"ball.png"},{bytes:207555,md5:"3898ff9aa60e8c439e6b8efc41da7d39",name:"bg.jpg"},{bytes:106645,
md5:"04ce1e9673e4161b914dcc08e9c696e0",name:"character.png"},{bytes:18530,md5:"3b0f717dc24a90775f1ab78038cacd9b",name:"character2.png"},{bytes:10266,md5:"9448e1abbb36a412bee288f7f165c198",name:"nick-basketball-stars-logo.png"},{bytes:9225,md5:"e078310f98e99fc8ce7dca03da8282aa",name:"stars.png"}],ui_posters:[{bytes:1243,md5:"684824c73aad533878277c9e86a97058",name:"arrow_left.png"},{bytes:1256,md5:"8beb66efc92420f502a3745e9f8044d1",name:"arrow_right.png"},{bytes:15356,md5:"41c2461dc6bbc3c8f827042b14167dc7",
name:"asami.png"},{bytes:4431,md5:"e5760fee9b92d9712f1a68209f5b80ce",name:"asami_disabled.png"},{bytes:78642,md5:"65d104d8aa17cef310fa1112527a6483",name:"bg.jpg"},{bytes:14574,md5:"11e807ff5b843cba655a3cf950dee397",name:"craig.png"},{bytes:4135,md5:"cd10c93fb5bd084023489e6c20badad8",name:"craig_disabled.png"},{bytes:15362,md5:"5ed5b20d2afdd9c8d0e443721f0ffa83",name:"donnie.png"},{bytes:4319,md5:"cb7c3015437b7fa1d3a6089f938882d3",name:"donnie_disabled.png"},{bytes:14061,md5:"85b5df127b1b4492bb148d70fc7e0987",
name:"fee.png"},{bytes:4002,md5:"177b49cbbdca6f88130ccbdf3b7c4e0f",name:"fee_disabled.png"},{bytes:15396,md5:"73ac6b00f957a72d8eea48fa8cd652c0",name:"foo.png"},{bytes:4438,md5:"6a91f5544d29f597074e6fe81445f079",name:"foo_disabled.png"},{bytes:17786,md5:"bb091ea37d9330082d7bab6a9cc2c789",name:"goat.png"},{bytes:4836,md5:"68dd3299e3b07488abdfa57bdd93da60",name:"goat_disabled.png"},{bytes:15242,md5:"0c79592683be17c29081fe3d301345fb",name:"korra.png"},{bytes:4408,md5:"ab80608f5444830569e7fdfa2bdb906c",
name:"korra_disabled.png"},{bytes:14930,md5:"9d9a96db70b45d7cd5aa563ce9c64952",name:"leo.png"},{bytes:4151,md5:"9f73f76630c2e3b56e01f6133f67658d",name:"leo_disabled.png"},{bytes:15534,md5:"abef517d188e7311a1d88d672c4e6130",name:"lincoln.png"},{bytes:4166,md5:"a0cc7a6e4b4e68cd1e4cf789433bde4f",name:"lincoln_disabled.png"},{bytes:14008,md5:"82612e1d075c65cae7129a3e000040f2",name:"lynn.png"},{bytes:3919,md5:"4185ebe247337e29190412c7e02a7ade",name:"lynn_disabled.png"},{bytes:3635,md5:"cc0e30b2878d1b506f057f043121d37d",
name:"magnifier.png"},{bytes:14843,md5:"1fdff160e2660b1a62bafa9e21905139",name:"mike.png"},{bytes:4284,md5:"24aa93a4f58c3b59c630e535932f3ec9",name:"mike_disabled.png"},{bytes:15205,md5:"51ae705bed65e5cccc0842ffe428489f",name:"patrick.png"},{bytes:4336,md5:"ce1a95e3d3bb065deeee29c7bf8c7f27",name:"patrick_disabled.png"},{bytes:16572,md5:"1249b2c55e44679c8ab1d8ba12806e7b",name:"pig.png"},{bytes:4497,md5:"d6324851c3b17170f07cefce849cffca",name:"pig_disabled.png"},{bytes:1665,md5:"7a71ef8bd2a34e7218a08223a714f1da",
name:"poster_back.png"},{bytes:22014,md5:"cbd2d1b928b14954a36acdfa5cfa5856",name:"poster_locked.png"},{bytes:14867,md5:"e0a90cad9a213dcbaa4f5229f30d3261",name:"raph.png"},{bytes:4302,md5:"7e63a1e0e7b29a04579b2a3a169b6049",name:"raph_disabled.png"},{bytes:12569,md5:"3d72c5610d45846d6cd8a7dc2b08365b",name:"sanjay.png"},{bytes:3471,md5:"a44f430a0e211b061dd4be8293768fcc",name:"sanjay_disabled.png"},{bytes:16109,md5:"645ef5d100c2fe32cc84501696edccb0",name:"spongebob.png"},{bytes:4627,md5:"8848a5765b84cbba67ce96e3d0295704",
name:"spongebob_disabled.png"},{bytes:4911,md5:"16f1f615a6cfbcda9313f604b7f412d3",name:"team_hb.png"},{bytes:5208,md5:"df48ab72e21c8d341bbd9e5aa055fdec",name:"team_hb_disabled.png"},{bytes:9461,md5:"aa3573be41f51c786ad5116b43742f21",name:"team_korra.png"},{bytes:4237,md5:"79983798bf45bd0d68f8d7402ce7a554",name:"team_korra_disabled.png"},{bytes:4308,md5:"8b99dcad69e87e544aa72c41ecfc4697",name:"team_loud.png"},{bytes:4426,md5:"3806d696fd8df07a3ab98fd00a5e0671",name:"team_loud_disabled.png"},{bytes:12825,
md5:"c419676c6571897c41a5ddbbfd754de0",name:"team_pgbc.png"},{bytes:5627,md5:"23764dd18ab9f066f864afb361f64ab6",name:"team_pgbc_disabled.png"},{bytes:4711,md5:"06c45a97ebd6c11385157c8a65d928e4",name:"team_sb.png"},{bytes:4772,md5:"67dc570a595b559dc0dbeda816c18e15",name:"team_sb_disabled.png"},{bytes:4307,md5:"6e69e6fb882a2a7a09ef20d20424c00d",name:"team_sc.png"},{bytes:4785,md5:"e1ff9f76d382d27be07185745acea2d4",name:"team_sc_disabled.png"},{bytes:4692,md5:"d8d201ef8d2790f9b7a3021bb5898ab9",name:"team_tmnt.png"},
{bytes:4763,md5:"3f198a8b4a5e0fa3d3639a3f7edd16d8",name:"team_tmnt_disabled.png"}],ui_stats:[{bytes:56443,md5:"a4f4007a994825430cc45388d5ff4e89",name:"bg.jpg"},{bytes:9935,md5:"2f1a225954d738ccefd3d75bacc8bf83",name:"name.png"}],ui_loading:[{bytes:3603,md5:"36d6cd1ba0405449b2077710df10f59c",name:"bar_loading.png"},{bytes:45887,md5:"3235d13807c0e466f92239b9ed4a7701",name:"bg.jpg"},{bytes:1175,md5:"1fa2ab9036cc916c8c240cb9dd9a9f2c",name:"loading/loading.json"},{bytes:61155,md5:"b3f7b37897035465c75d0a036aab4703",
name:"loading/loading.png"}],levels:[{bytes:1799,md5:"fa103a4eeeb4706b8db004c40e9dcd1d",name:"level1.json"},{bytes:2023,md5:"f389eb4f2c1ed7d295b1f70f0d97dca5",name:"level2.json"},{bytes:2123,md5:"9fe77b85540f1881d2bd3a8cdbc496c2",name:"level3.json"},{bytes:2068,md5:"b0263fea911a1d18af9f3d0b0837a5aa",name:"level4.json"},{bytes:2181,md5:"1499baa30f517db1d7f0d1fa71129330",name:"level5.json"},{bytes:2219,md5:"91d38862958b9502b0a3e93f6a78a6dd",name:"level6.json"}],ui_level:[{bytes:60783,md5:"98ebce36832144be7793decf971e1931",
name:"bg.jpg"},{bytes:10983,md5:"70026a4b3584ac6232b4760413961e1f",name:"level1.png"},{bytes:11061,md5:"912376cb63aeaccf1b077a8c5fe62059",name:"level2.png"},{bytes:10352,md5:"81f2235ca1973b0254eceda42f3af25b",name:"level2_locked.png"},{bytes:11145,md5:"7c99ecb6f88c51224ce37ff58f92a92b",name:"level3.png"},{bytes:8695,md5:"bfe4c7e1cefc445eb9d86ffb88877685",name:"level_selected.png"}],team_korra:[{bytes:10925,md5:"9968d29c2e8f45996a67da5f98ac555e",name:"asami/asami0.json"},{bytes:492248,md5:"42e42f3c00d87960ad28fe6f7701627c",
name:"asami/asami0.png"},{bytes:20140,md5:"140823b984c5a3ba36b07b29773dc6d1",name:"asami/asami1.json"},{bytes:605160,md5:"a2882c245195d60e95fae2047f55e83a",name:"asami/asami1.png"},{bytes:2522,md5:"9800d692f3ede1d02550ee1026ee5956",name:"asami_flump/atlas0.png"},{bytes:41681,md5:"5100ef6d78007279e072888bb2045400",name:"asami_flump/library.json"},{bytes:5611,md5:"829f5c14fcc6feaa59339bdb5c2e965b",name:"field_logo.png"},{bytes:7792,md5:"d6b3bb96943f4c48c7890b5f96df1eaa",name:"korra/korra0.json"},{bytes:404930,
md5:"fdf36bd0b1324fdc255e4477f1587e37",name:"korra/korra0.png"},{bytes:9343,md5:"2ee04c4f1fe06a2bb5f00470ca57e8a8",name:"korra/korra1.json"},{bytes:432322,md5:"3df4da2931c7fc27e45bfad16b41389c",name:"korra/korra1.png"},{bytes:15315,md5:"1136baa0df9308d3ebef338e04b40fee",name:"korra/korra2.json"},{bytes:626623,md5:"8dafe3a289fa17c1906f7dfb18845e54",name:"korra/korra2.png"},{bytes:2477,md5:"dcbb0559bd6e8801f35adb6106bdf275",name:"korra/korra3.json"},{bytes:55949,md5:"c9d79591cb478fb095afef6fa35c3962",
name:"korra/korra3.png"},{bytes:2909,md5:"e175ace212451ca098cb3127f8ffa252",name:"korra_flump/atlas0.png"},{bytes:45523,md5:"560219844d29572ed48deacfccbcfed2",name:"korra_flump/library.json"}],posters:[{bytes:2232506,md5:"0cb424e7013d1b0995e4ea1288981df6",name:"asami_poster.jpg"},{bytes:2228071,md5:"9f861127712cd8f58e2fa90ae1b09ef0",name:"craig_poster.jpg"},{bytes:1985645,md5:"b6d0d6ca7e096333ead42bb17e49dc29",name:"donnie_poster.jpg"},{bytes:2327613,md5:"7be58d3bcfea39ef2e16c51d2b05ee94",name:"fee_poster.jpg"},
{bytes:2103725,md5:"db09d036b6e0a6d20943d083a50310af",name:"foo_poster.jpg"},{bytes:971962,md5:"7dceec2f45a772e4c48e19c4f22de280",name:"goat_poster.jpg"},{bytes:2187592,md5:"44c79709a3b9f076e8c4527c048a5ecd",name:"korra_poster.jpg"},{bytes:2234004,md5:"b4c2b694c5c157637091dda8e140f82c",name:"leo_poster.jpg"},{bytes:634632,md5:"dea81af703b4cf776bcc4cb48b464ae2",name:"lincoln_poster.jpg"},{bytes:2136143,md5:"0640eda4fc5a93625f704441bcc66d8e",name:"lynn_poster.jpg"},{bytes:2154219,md5:"955c1168b6f0be812d867d87426faa10",
name:"mike_poster.jpg"},{bytes:2301942,md5:"df4a67de1d9145eb720c792192c726b0",name:"patrick_poster.jpg"},{bytes:928601,md5:"6619f3237703d34f97bff6e12b39cf8f",name:"pig_poster.jpg"},{bytes:2025288,md5:"69b41fdf96551c1144505137f8301e20",name:"raph_poster.jpg"},{bytes:2202399,md5:"d37300bea636ba74d581a9536cb37bf3",name:"sanjay_poster.jpg"},{bytes:2187616,md5:"66d9a05ddfb2b6f4ecd38c23cb20e0c4",name:"spongebob_poster.jpg"}],actors:[{bytes:761,md5:"f95f3442974e5bac14540399aa14d936",name:"characters/asami.json"},
{bytes:807,md5:"0b51b4bfae791356fef6f02d9a4452c2",name:"characters/craig.json"},{bytes:901,md5:"6ed26407fafa3824de06afa12e9ee75d",name:"characters/donnie.json"},{bytes:757,md5:"eda10a0d452a792a811a0ee0e2a3cead",name:"characters/fee.json"},{bytes:742,md5:"9d144f2c522e88ec56683bb29b69ece4",name:"characters/foo.json"},{bytes:769,md5:"dbb7261be2fc896010727074051c61ea",name:"characters/goat.json"},{bytes:828,md5:"a4992f7444479c3814d10e2c1dc527a0",name:"characters/korra.json"},{bytes:992,md5:"de57b6d903c77b349b464faab84f818a",
name:"characters/leo.json"},{bytes:806,md5:"f2d2df70367987ae1375f66ce247a1f4",name:"characters/lincoln.json"},{bytes:782,md5:"9feb1388e3587e64a0b9872637c36408",name:"characters/lynn.json"},{bytes:874,md5:"b0a4bec064cc9f4a4ab04fc0beb0c78b",name:"characters/mike.json"},{bytes:958,md5:"d3bc4fd1bd6f5e27446cd3697fdfe1ed",name:"characters/patrick.json"},{bytes:842,md5:"43fc1e5fce3ecd3450bbade15007a9d2",name:"characters/pig.json"},{bytes:808,md5:"a99fc4ee3f327852cee3318adbe478b4",name:"characters/raph.json"},
{bytes:874,md5:"ba0db368cb477032beb6c8eb24d91e51",name:"characters/sanjay.json"},{bytes:950,md5:"d76d928ed325d923b3919e42be86954d",name:"characters/spongebob.json"},{bytes:2071,md5:"4df48ccae816fa3f721b2005c8e9796c",name:"characters.json"},{bytes:1237,md5:"ac0675f0d3b8221bc86fbb120229de85",name:"crowd.json"},{bytes:1502,md5:"df9f1fb2391de4d8b6eaea5a65f739da",name:"crowd_bg.json"},{bytes:2848,md5:"8ab5adc4a4999f924190eb95cbf3a885",name:"decors.json"},{bytes:1262,md5:"52ce68b0355f7c8c71109d04dc8ef811",
name:"decors_physic.json"},{bytes:1838,md5:"a71b0c3f00be963b3fb3cdc26c3e71e7",name:"interactives.json"},{bytes:1064,md5:"326331bb3c95830f4feed856549c530a",name:"pickup.json"}],sprites_platforms:[{bytes:5050,md5:"351f8b71220ee1ad10cf0b3c15ef3ef0",name:"env_2_platform.png"},{bytes:6443,md5:"a87561cc7dd215f1a05eb28c92e8fd8c",name:"env_3_platform.png"},{bytes:4058,md5:"e10beba15378e4d7968bbb7c9002dc36",name:"env_5_6_platform.png"},{bytes:6905,md5:"59b43ae8bdde2c6036766ba0b632f2b6",name:"env_6_platform.png"}],
ui_character:[{bytes:73086,md5:"88bc58ef86d25d3c9ed8522c55318953",name:"bg.jpg"}],fonts:[{bytes:32509,md5:"bd440ba8db49043340f3c80079189c3e",name:"large_blue.fnt"},{bytes:11634,md5:"5a64e49f4c05c04e70f7609f8b39f90e",name:"large_blue.png"},{bytes:32371,md5:"947f6dbfa3594cbc63ff1a33535ad006",name:"med_blue.fnt"},{bytes:7873,md5:"d1b818139be1bcc3d254f72b9d2a4b71",name:"med_blue.png"},{bytes:2564,md5:"7d06efeb4c9bae16eac1485568318047",name:"med_num_orange.fnt"},{bytes:915,md5:"3c1615910087d5b29cd694e3d83630dc",
name:"med_num_orange.png"},{bytes:35099,md5:"033027926eb1fe017b2badda111f42df",name:"med_white.fnt"},{bytes:26124,md5:"c0cc42f5adb1fa95d39b894c211258c6",name:"med_white.png"},{bytes:32417,md5:"f6819bb7548f35508a3bc61c4b217136",name:"small_black.fnt"},{bytes:9137,md5:"db431fbdfb5acfc2926a0e97b295d0bd",name:"small_black.png"},{bytes:32418,md5:"7d9cb93cffe52b609f2bbfc7fa4a359e",name:"small_white.fnt"},{bytes:15160,md5:"8b28decf24c64f8f1eefda9bf4c666f4",name:"small_white.png"},{bytes:2483,md5:"dd2098e76cd6b95e102e4fabc9d3ee83",
name:"xl_num_black.fnt"},{bytes:1659,md5:"35022fb33450c2e5ea5f5897adeff3d7",name:"xl_num_black.png"},{bytes:32798,md5:"9c4319ddaa82ac8307c0be217b0e78bf",name:"xl_white.fnt"},{bytes:51620,md5:"e736a868da1e8715561724be3894e835",name:"xl_white.png"},{bytes:32244,md5:"2f6b920142c43df18bd2349d79302cca",name:"xs_white.fnt"},{bytes:6132,md5:"c23f66d315da5b6deca93017afa59018",name:"xs_white.png"},{bytes:32752,md5:"5b9ebee73eea2070cbcbde848a61ddfb",name:"xxl_white.fnt"},{bytes:90588,md5:"033750cc49adf4a6b87cdf47d8283f1a",
name:"xxl_white.png"}],sound:[{bytes:7225,md5:"b4d32a3535ac69db075985060de3c06b",name:"asami_special_in.mp3"},{bytes:11303,md5:"471defcfc590b19b3b5bd99aa5465ea6",name:"asami_special_in.ogg"},{bytes:16457,md5:"8e38937348006bff2bff12c55bb184a8",name:"asami_special_loop.mp3"},{bytes:16751,md5:"cb6f6139d7da504aa495acd64eb0b99f",name:"asami_special_loop.ogg"},{bytes:7014,md5:"3e4d53b43a5d878e57c7eb58ff6d8f1a",name:"asami_special_out.mp3"},{bytes:10571,md5:"0de5c89d77c3f2c7f6ab3da16d0857e4",name:"asami_special_out.ogg"},
{bytes:3063,md5:"0156d20747c70a07e53955b1eedd0c9e",name:"ball_lost.mp3"},{bytes:5964,md5:"321402d5d4b6fd97de6d9d32ec6b9c2b",name:"ball_lost.ogg"},{bytes:11226,md5:"ad3cda039a376d26f77d96bc43ae3bec",name:"boo_1.mp3"},{bytes:15256,md5:"ea4dd8b70ceb3976e33c48198922f28c",name:"boo_1.ogg"},{bytes:3659,md5:"4160835b2ac9a469a9786a24b269965d",name:"bounce_1.mp3"},{bytes:6749,md5:"53232bc60ea9b3a430235f1159d61d18",name:"bounce_1.ogg"},{bytes:3193,md5:"21a6e1e9de04104a3c086a343c244b01",name:"bounce_2.mp3"},
{bytes:6192,md5:"d4e81ac3ec8c190ab34b12087e6ba289",name:"bounce_2.ogg"},{bytes:4035,md5:"1adca7509a4a88fc66b11d3d55ba2ec9",name:"bounce_slime.mp3"},{bytes:7399,md5:"ad8093eae547d417be7422c29eb7e8d4",name:"bounce_slime.ogg"},{bytes:12137,md5:"3b330a58bab43b71701b306c9b53dd2a",name:"cheer_1.mp3"},{bytes:16736,md5:"2a850d6aabdd819e719710b092b430f7",name:"cheer_1.ogg"},{bytes:10602,md5:"98b6b465af63b64e558d86bf78ea5938",name:"craig_special.mp3"},{bytes:14783,md5:"c6b1e1b7d506014353d1036e6deb8d1d",name:"craig_special.ogg"},
{bytes:6029,md5:"c24c3aaef97409d5cf5aad2fb3d145d4",name:"craig_special_in.mp3"},{bytes:8084,md5:"bc2e3fd55484abe3883aea96970bfc09",name:"craig_special_in.ogg"},{bytes:9100,md5:"3b5c163453c256f3ffd49a5590cae779",name:"craig_special_land.mp3"},{bytes:13541,md5:"6afea82b247cf429e9070203ed904ed9",name:"craig_special_land.ogg"},{bytes:6053,md5:"8990ea44dc0106fe6ed5ac8019468357",name:"donnie_special.mp3"},{bytes:9533,md5:"9faa3b2206d30c8cd083f91be1dbc12e",name:"donnie_special.ogg"},{bytes:8496,md5:"8b0333507b854f18488388556c078c10",
name:"donnie_special_in.mp3"},{bytes:12202,md5:"fb3462ca6f5cb12bc6ac5b3ac15e5c8c",name:"donnie_special_in.ogg"},{bytes:3584,md5:"45f9123461b58fb8446490123265b082",name:"dunk.mp3"},{bytes:6209,md5:"24b2814ec9d640ce1bde2e7e832b18d8",name:"dunk.ogg"},{bytes:3215,md5:"3f6f428474dcd05099aa997827e92e33",name:"dunk1_asami.mp3"},{bytes:6493,md5:"bc62614f5510b75242c3e5e5a4a476f9",name:"dunk1_asami.ogg"},{bytes:5144,md5:"262c4c92538205f0b2b8fa4d69d569dc",name:"dunk1_craig.mp3"},{bytes:8755,md5:"04486c053adbbbbab404a1b580eed137",
name:"dunk1_craig.ogg"},{bytes:5718,md5:"eb4eac1ffd52e4040cd3a0f3bca8c874",name:"dunk1_donnie.mp3"},{bytes:9044,md5:"3742689804991874ab7e896cb7223208",name:"dunk1_donnie.ogg"},{bytes:7848,md5:"4dc10dbd82800f728e7a5b71c27718df",name:"dunk1_fee.mp3"},{bytes:11297,md5:"75d37f5e8c659fe88d7fba6a15ed1224",name:"dunk1_fee.ogg"},{bytes:5324,md5:"50312251b52260e30a82df5ddbe1b70e",name:"dunk1_foo.mp3"},{bytes:8812,md5:"047043811668544d12a72b935b7e48c6",name:"dunk1_foo.ogg"},{bytes:3399,md5:"d57f942d80c506b92fdb5cb10fb83dd4",
name:"dunk1_goat.mp3"},{bytes:6668,md5:"743f701b91b71184ff922f7edd74dfb8",name:"dunk1_goat.ogg"},{bytes:3695,md5:"18141e813cfd2591bf245587b95b8756",name:"dunk1_korra.mp3"},{bytes:7015,md5:"037e0ffd4199682af9cfbadfce43c01d",name:"dunk1_korra.ogg"},{bytes:6093,md5:"6838565afbd72bdc89a9a7d6cffe0f4d",name:"dunk1_leo.mp3"},{bytes:9054,md5:"99c00a0a514b0221f8dfe56e37cb0bfe",name:"dunk1_leo.ogg"},{bytes:7494,md5:"e6b81a51a712b04a42300ed8c3ff28c7",name:"dunk1_lincoln.mp3"},{bytes:10648,md5:"7a5f0bd07e731fb046308e6aef49ba02",
name:"dunk1_lincoln.ogg"},{bytes:3422,md5:"317874176f4b0d46de77ed5e8db07cdb",name:"dunk1_lynn.mp3"},{bytes:6389,md5:"be5e386420e4a1099b8f63f559e1933e",name:"dunk1_lynn.ogg"},{bytes:10760,md5:"b39b7fc5ce14a5ab6ceaccb9f9d674b6",name:"dunk1_mike.mp3"},{bytes:13786,md5:"29658d83295ef2532d5bb4a9e49dce40",name:"dunk1_mike.ogg"},{bytes:4491,md5:"5a97301e1a1ad1bb1c6ff2e3d1de3898",name:"dunk1_patrick.mp3"},{bytes:7883,md5:"4542e34d6877137589922c5067aca2ed",name:"dunk1_patrick.ogg"},{bytes:4828,md5:"f26fb982573d380835083be954393aca",
name:"dunk1_pig.mp3"},{bytes:7578,md5:"00e81822d27258fa0d3d64c4bcddd79f",name:"dunk1_pig.ogg"},{bytes:6417,md5:"df23f36647e3f83c9c627ae19e6cf100",name:"dunk1_raph.mp3"},{bytes:9334,md5:"46c053ca2f244e6af2bc722e5e658faf",name:"dunk1_raph.ogg"},{bytes:5772,md5:"34f8d68575273ccfb61799b39b8104b8",name:"dunk1_sanjay.mp3"},{bytes:9517,md5:"0caf33e95eb2376330feab661b101b07",name:"dunk1_sanjay.ogg"},{bytes:5185,md5:"1761e6c402ce2380036f45ec3f8a2225",name:"dunk1_spongebob.mp3"},{bytes:8408,md5:"6cb1a78f43e29dce0ed8dff10ba6aa25",
name:"dunk1_spongebob.ogg"},{bytes:5260,md5:"627db47bd11b8fbeb33068a2cf1b72d7",name:"dunk2_asami.mp3"},{bytes:8185,md5:"ed0d2f6ca4860a1ea958e1130f5ac201",name:"dunk2_asami.ogg"},{bytes:3266,md5:"6117e99329ba14a2638e9c39abbea61e",name:"dunk2_craig.mp3"},{bytes:6398,md5:"149ffe620fa022e5e96f365798b35c28",name:"dunk2_craig.ogg"},{bytes:5897,md5:"9b130999731be10a94c8fac236a91cf9",name:"dunk2_donnie.mp3"},{bytes:8889,md5:"b8d2eb2c8d8d235acab7cdcd0c579925",name:"dunk2_donnie.ogg"},{bytes:9198,md5:"20eb135fb85af6092a2ed0a25eacc659",
name:"dunk2_fee.mp3"},{bytes:12157,md5:"039b5131e39b3b69e9e01452b95c627c",name:"dunk2_fee.ogg"},{bytes:6883,md5:"ae3c19426bbc3975064a589b121dfa28",name:"dunk2_foo.mp3"},{bytes:9937,md5:"9ae6f350ecbd3b982080a3e22e978a52",name:"dunk2_foo.ogg"},{bytes:6571,md5:"8dae07a8a33222d6e37b01b118ef84bc",name:"dunk2_goat.mp3"},{bytes:9789,md5:"66fe5d6616aadfb170f9b8d026b69aa0",name:"dunk2_goat.ogg"},{bytes:4009,md5:"8400f10617d7c95e1b7f5a4e6faa4c77",name:"dunk2_korra.mp3"},{bytes:6668,md5:"01af188cab1927852b91ab9ff471ddcd",
name:"dunk2_korra.ogg"},{bytes:5564,md5:"0cc1764b2c7262a94a0a529bd731fd55",name:"dunk2_leo.mp3"},{bytes:8405,md5:"976189d072d26ee96ac9c8003fe6c1ee",name:"dunk2_leo.ogg"},{bytes:2910,md5:"52849fdfb6612ce622cbe6bc31064be1",name:"dunk2_lincoln.mp3"},{bytes:6056,md5:"8f89c8098e14fe65330afc5b96c5e84c",name:"dunk2_lincoln.ogg"},{bytes:11230,md5:"61bf1d98c6eebfd8fc8b8dbabd61e654",name:"dunk2_lynn.mp3"},{bytes:14878,md5:"c6a83b16a9ff19030d4e9d48bc11de50",name:"dunk2_lynn.ogg"},{bytes:5974,md5:"69a1138a6f7af2f985b9b61ba8c3cf7f",
name:"dunk2_mike.mp3"},{bytes:9305,md5:"966f8cde06dadfc1f39e1e9d09b4b94a",name:"dunk2_mike.ogg"},{bytes:4439,md5:"987f096c5c804cbbd17718e2b658c6d6",name:"dunk2_patrick.mp3"},{bytes:7754,md5:"d7312e6070b8290546185a56f57e5a28",name:"dunk2_patrick.ogg"},{bytes:11067,md5:"f754aeb09888a5936f0b6dc50977669d",name:"dunk2_pig.mp3"},{bytes:14216,md5:"8345d2e9c50bf226b8a74845959ef030",name:"dunk2_pig.ogg"},{bytes:2750,md5:"18ca8f6e00f6fa3ee7713b5cfc74ae6b",name:"dunk2_raph.mp3"},{bytes:5945,md5:"a36c348ec7fb08d1895bfbef7b7126fc",
name:"dunk2_raph.ogg"},{bytes:3454,md5:"cab2146a0d98f45fee4d7527525fb242",name:"dunk2_sanjay.mp3"},{bytes:6661,md5:"fa3bffe3998f2743d586095f1aa06844",name:"dunk2_sanjay.ogg"},{bytes:3244,md5:"893b16cf6481b8e4ee7f12af27f43880",name:"dunk2_spongebob.mp3"},{bytes:6467,md5:"cf04819900f62315b6bfc53412dd3ad6",name:"dunk2_spongebob.ogg"},{bytes:4129,md5:"9844fc375fbc50aecdbd4b6701a68bc3",name:"dunk3_asami.mp3"},{bytes:7376,md5:"457f416a3e3b3675c06b72891b09ba2d",name:"dunk3_asami.ogg"},{bytes:7336,md5:"dccf42a9e5c35c132cfe60f1c782b025",
name:"dunk3_craig.mp3"},{bytes:10573,md5:"70384a6f9364b58e1d9caefa523d0d62",name:"dunk3_craig.ogg"},{bytes:4765,md5:"ab26341c1fe4a3b76e87fd6ccd37250f",name:"dunk3_donnie.mp3"},{bytes:7996,md5:"a495340aecdb934e9e8b35878e7096d5",name:"dunk3_donnie.ogg"},{bytes:6598,md5:"c1df5e4f1e3702c6c55bb545dc47b4e4",name:"dunk3_fee.mp3"},{bytes:8593,md5:"554bef856cc1a54c191e6c0df48541aa",name:"dunk3_fee.ogg"},{bytes:3894,md5:"7c641cb3e8a6b166fbdb9aeb32f2d327",name:"dunk3_foo.mp3"},{bytes:7324,md5:"d38b211437c75445633b246a6aad3539",
name:"dunk3_foo.ogg"},{bytes:7480,md5:"a455bd634d80948330ef87f2dc68d062",name:"dunk3_goat.mp3"},{bytes:9511,md5:"4ad83c43ce1c65f7d493f55188ba14ac",name:"dunk3_goat.ogg"},{bytes:6530,md5:"a174b0c4ba8808e31af0ad5f5992e404",name:"dunk3_korra.mp3"},{bytes:9933,md5:"5a2b39683a1199a4e8d7b79b7899ca56",name:"dunk3_korra.ogg"},{bytes:3374,md5:"dae33132e882b884a9f616d6f5031763",name:"dunk3_leo.mp3"},{bytes:6341,md5:"5416c9247f7c3f6c1e2bae39ec1875a8",name:"dunk3_leo.ogg"},{bytes:8653,md5:"f8e70bb77cfe735e51a2bdf26113124f",
name:"dunk3_lynn.mp3"},{bytes:12188,md5:"5a7205d9d53678cf6630668d94611800",name:"dunk3_lynn.ogg"},{bytes:4894,md5:"4b581208c13278200e02aff0be45df91",name:"dunk3_mike.mp3"},{bytes:8248,md5:"be9015b11cdba7468c47f49d0e8b9258",name:"dunk3_mike.ogg"},{bytes:3977,md5:"d04e5d53ed3e5ca9566eff1ece3763f7",name:"dunk3_patrick.mp3"},{bytes:7379,md5:"6df05c18712d260b0507f13c447c3ee0",name:"dunk3_patrick.ogg"},{bytes:5685,md5:"e6ac56abe43641c8765b22c977a81b39",name:"dunk3_pig.mp3"},{bytes:8990,md5:"facbb6cde8b0d9f06ed965490ef71d56",
name:"dunk3_pig.ogg"},{bytes:6787,md5:"c9a9dbc34aec4553015ec4f4a7a6acd6",name:"dunk3_raph.mp3"},{bytes:10417,md5:"d015ada353b9cca4e691358fb23532f9",name:"dunk3_raph.ogg"},{bytes:6265,md5:"532b7d8399ded1021cf56472591a1d68",name:"dunk3_sanjay.mp3"},{bytes:9627,md5:"13d28edea9e9d2fc5f67c5d793550261",name:"dunk3_sanjay.ogg"},{bytes:7149,md5:"a780ca672e18a403b4968d42230af117",name:"dunk3_spongebob.mp3"},{bytes:10035,md5:"933bbf3dfc4d9e08123bd7e6b60908fb",name:"dunk3_spongebob.ogg"},{bytes:5254,md5:"0c13f444ceab27f61064839398330cb2",
name:"dunk4_asami.mp3"},{bytes:8773,md5:"61716a29e5e16c40ccb8a96733138c03",name:"dunk4_asami.ogg"},{bytes:5009,md5:"969ec08f55c522006135bf6a6de83d73",name:"dunk4_craig.mp3"},{bytes:7823,md5:"4a2be0b079355fc96eadb79dc439995b",name:"dunk4_craig.ogg"},{bytes:3555,md5:"f7c24701c3b738f408a120d4b8b61c90",name:"dunk4_donnie.mp3"},{bytes:6789,md5:"9d87f253e9bf28668eafa2e60d394511",name:"dunk4_donnie.ogg"},{bytes:6622,md5:"4628eb2b016e44a780222acc1713168d",name:"dunk4_fee.mp3"},{bytes:9137,md5:"057f6e32c49f7cf1a99490fadb884cd4",
name:"dunk4_fee.ogg"},{bytes:7379,md5:"873b5b8e7b62314be995e7229a032378",name:"dunk4_foo.mp3"},{bytes:10011,md5:"d9d0d36ecc814f24d61aa6195f7030c3",name:"dunk4_foo.ogg"},{bytes:3484,md5:"54cef224c1a58951ddcaa7bf6ae6862c",name:"dunk4_korra.mp3"},{bytes:6594,md5:"563edfe9426918421565f8dc1b6bc675",name:"dunk4_korra.ogg"},{bytes:3960,md5:"6f43ec6b4673553e039377a0d2448c9a",name:"dunk4_leo.mp3"},{bytes:6913,md5:"1f310879ef17f3145bddad6939b679af",name:"dunk4_leo.ogg"},{bytes:6340,md5:"93b9c1f9c7c4e9684cd26983b12afb1b",
name:"dunk4_mike.mp3"},{bytes:9767,md5:"c769aedb82795874af9a1f4ca6ca62eb",name:"dunk4_mike.ogg"},{bytes:9426,md5:"229b786cb7411367e2e62d192ab250c0",name:"dunk4_patrick.mp3"},{bytes:12633,md5:"8bbbb1ffd23c55854d1fcc86dd9aaee6",name:"dunk4_patrick.ogg"},{bytes:6676,md5:"97b664a7540bdd857655df0baddbf933",name:"dunk4_raph.mp3"},{bytes:9977,md5:"df931b735fab90a2fc64f8a52fed2969",name:"dunk4_raph.ogg"},{bytes:9811,md5:"fcca1298cdcfa2405c7e000028fef08c",name:"dunk4_sanjay.mp3"},{bytes:13380,md5:"bfb6e69ec5f82ce8879a4703bd4cb855",
name:"dunk4_sanjay.ogg"},{bytes:6624,md5:"1304defaec437e8d2439dbe9d3e26e9e",name:"dunk4_spongebob.mp3"},{bytes:9791,md5:"26efc33ed2cef23bcf12fe2349bb41d0",name:"dunk4_spongebob.ogg"},{bytes:5413,md5:"de4c4e170bc30a9b2c7253e50e27aecd",name:"dunk5_asami.mp3"},{bytes:8541,md5:"4ca940476540b0172e287518147bde70",name:"dunk5_asami.ogg"},{bytes:7842,md5:"7cc58274c363c24f79ea7f53e77577e6",name:"dunk5_craig.mp3"},{bytes:10492,md5:"ae927dfbe3a65b2d4cd2a76bff54911e",name:"dunk5_craig.ogg"},{bytes:3504,md5:"9e05a281b94ea1e1ad1ccdd773a7f391",
name:"dunk5_donnie.mp3"},{bytes:6851,md5:"d0d0570adec98189a1d5f876e369eadf",name:"dunk5_donnie.ogg"},{bytes:9511,md5:"07292e5ebe5703a8e4403a5efdc934bf",name:"dunk5_fee.mp3"},{bytes:11982,md5:"eef6e4dea5a6694e28c8ddd943f02dea",name:"dunk5_fee.ogg"},{bytes:5570,md5:"1a41b618379c042cf6068af464164d9b",name:"dunk5_foo.mp3"},{bytes:8804,md5:"a415c4abf804a6dcd7227098e6e37625",name:"dunk5_foo.ogg"},{bytes:3165,md5:"ed68b835957995bc0c17198f6409b4d6",name:"dunk5_korra.mp3"},{bytes:6455,md5:"1e5adca02d83ab1735d0c80dc567af7b",
name:"dunk5_korra.ogg"},{bytes:7712,md5:"a7215e08dc33d462306cf2a2a57e3ea5",name:"dunk5_mike.mp3"},{bytes:10541,md5:"a240734025c5738f7f2a559b6751003d",name:"dunk5_mike.ogg"},{bytes:4708,md5:"c62aa11163859290ce7bd1479f2da859",name:"dunk5_patrick.mp3"},{bytes:7942,md5:"8c8a1858661f6a59d14dd0dc791fb631",name:"dunk5_patrick.ogg"},{bytes:5456,md5:"25043f5f335601889cb11c6a1fe374f3",name:"dunk5_raph.mp3"},{bytes:8418,md5:"20b14a668bd533e32c1987fb32d9ba27",name:"dunk5_raph.ogg"},{bytes:8854,md5:"77b9792910662cb4de6faabca8b28da1",
name:"dunk5_sanjay.mp3"},{bytes:11682,md5:"61bebcb80bd1da8118b18d416f9ab303",name:"dunk5_sanjay.ogg"},{bytes:5721,md5:"5725209fde3d1a0be67056e00c53f7c5",name:"dunk5_spongebob.mp3"},{bytes:9469,md5:"b256deafa0117c21ba4d2f4e7e122b46",name:"dunk5_spongebob.ogg"},{bytes:7890,md5:"ece50a49ef8ed35f5dea41e7575a918b",name:"dunk6_craig.mp3"},{bytes:10365,md5:"223dbb504715f37fe62505d29c0f10a8",name:"dunk6_craig.ogg"},{bytes:6677,md5:"f7bff6ff86fbbbb0c67b831822c447ea",name:"dunk6_donnie.mp3"},{bytes:9342,md5:"6c22815147c04d976f5cac0d0e2a0654",
name:"dunk6_donnie.ogg"},{bytes:7367,md5:"565bd1478fca1c9fd4e85fc111cb91dd",name:"dunk6_foo.mp3"},{bytes:10020,md5:"889f1db42aece7ce7624fda909612906",name:"dunk6_foo.ogg"},{bytes:6988,md5:"ddf3bb7e246182411591dfcfd9d97004",name:"dunk6_korra.mp3"},{bytes:10013,md5:"cfab5310c79807d59a19d5a222130a88",name:"dunk6_korra.ogg"},{bytes:6097,md5:"a2878f95c783dd3f21e5a66b38849ea3",name:"dunk6_patrick.mp3"},{bytes:8511,md5:"1b65731bcb8be5141c05d097ba62058b",name:"dunk6_patrick.ogg"},{bytes:3360,md5:"cf7cd65f5faa23f6047a9cf9eed17509",
name:"dunk6_raph.mp3"},{bytes:6164,md5:"7dcaeca84fa14442809e6f3178c4a8ff",name:"dunk6_raph.ogg"},{bytes:7581,md5:"606e74f337498d55078053a6cfdb7f26",name:"dunk6_sanjay.mp3"},{bytes:11350,md5:"1b9da95c04023357b40fe4d77e0a85fc",name:"dunk6_sanjay.ogg"},{bytes:7674,md5:"bff9329bed06c8e99485890705baaa66",name:"dunk6_spongebob.mp3"},{bytes:10525,md5:"45b7107f89b8653233db4a48fc732dd9",name:"dunk6_spongebob.ogg"},{bytes:12217,md5:"0c1f07a76b5bf4677cc8e160c7ed20ec",name:"dunk_breaker.mp3"},{bytes:15941,md5:"3021295e8200d62632bb65f53b6eee04",
name:"dunk_breaker.ogg"},{bytes:4025,md5:"4ab0ee3ee05e2bafebbd7c45ce0a7800",name:"dunk_miss.mp3"},{bytes:13088,md5:"c0acfecc3c7f21299c66f73dae569745",name:"dunk_miss.ogg"},{bytes:3426,md5:"3594c58d040c967b9180a9eceb90920f",name:"dunk_slime.mp3"},{bytes:7476,md5:"2c3a62d7271fc6c9c18a4f851c539037",name:"dunk_slime.ogg"},{bytes:6548,md5:"9d1539e1f5b1c682e3e123a03e1fe608",name:"dunkality.mp3"},{bytes:10197,md5:"975168625d33f905084c329822354233",name:"dunkality.ogg"},{bytes:16168,md5:"71341085fd6d5e352033e06270b111f5",
name:"fail.mp3"},{bytes:16952,md5:"cc4b5b87ee7f2f0a93d6456c9155b725",name:"fail.ogg"},{bytes:3661,md5:"adcb3f376ea584f19037e05c61b77ff2",name:"fee_special.mp3"},{bytes:7010,md5:"ae3c2cc4accb16e469d7bd5083016756",name:"fee_special.ogg"},{bytes:3661,md5:"1491e6564473b6878434fd45721541d8",name:"foo_special.mp3"},{bytes:6324,md5:"89f84d0a3f6f5cb92fcd04eb61318053",name:"foo_special.ogg"},{bytes:2438,md5:"a98057e14b43083e2fb79f88d77ff4e7",name:"foo_special_pre.mp3"},{bytes:6172,md5:"99c05da97a8e38f8db8e06e84cfeb7a5",
name:"foo_special_pre.ogg"},{bytes:224797,md5:"b29f551a371dffcfbab1b254613c9010",name:"gameplay.mp3"},{bytes:256561,md5:"da1481373e6c07ee2f9860a577befae4",name:"gameplay.ogg"},{bytes:11876,md5:"77ce7a0bd501756603ef93100e974d36",name:"glass_break.mp3"},{bytes:15701,md5:"bc32497ac756b8a3d1608da0f875b993",name:"glass_break.ogg"},{bytes:3901,md5:"a74ff9f0d005032e23380bc249fbb65b",name:"goat_special.mp3"},{bytes:5874,md5:"3de331d0991a10673fb07dc07965e16e",name:"goat_special.ogg"},{bytes:5283,md5:"a7ba7d5904ec78c1613b7888c5753f75",
name:"goat_special_out.mp3"},{bytes:8333,md5:"f45ada886ccb2071b9163f64628208b0",name:"goat_special_out.ogg"},{bytes:1242,md5:"c8aa970f5a6b15927b5158a79064d008",name:"hit_1.mp3"},{bytes:4493,md5:"e74fb249f5a9518c6dafdf021ff852c3",name:"hit_1.ogg"},{bytes:1528,md5:"492645b51dcacc60359d912769feedd7",name:"hit_2.mp3"},{bytes:4831,md5:"499f39328eca913465cc7a9451f827a8",name:"hit_2.ogg"},{bytes:2178,md5:"26d82e0801608246525e6641e3929b92",name:"hurt_female.mp3"},{bytes:4975,md5:"2b6a54b9d2db370c145f51cae6190aab",
name:"hurt_female.ogg"},{bytes:1970,md5:"dec1ba5485bd9d680ad3e9e691dc0202",name:"hurt_male.mp3"},{bytes:5046,md5:"28bdae50b47eec60aee0f6b23de466a3",name:"hurt_male.ogg"},{bytes:1893,md5:"1bc7ba4b3d45a8d904a579159c0f1a69",name:"jump.mp3"},{bytes:6933,md5:"7d14b86fa604d7ec76b973e15f13580f",name:"jump.ogg"},{bytes:6597,md5:"2ca1315eaabac0e0bb12ac2dce0a33a4",name:"korra_special_in.mp3"},{bytes:7822,md5:"76b2e374ef25347665bf705c097d75f6",name:"korra_special_in.ogg"},{bytes:72402,md5:"6e3e2e05d3afe0bc056940f5925dd489",
name:"korra_special_loop.mp3"},{bytes:90489,md5:"19c560e0749bfce16e0c340698aee91f",name:"korra_special_loop.ogg"},{bytes:5638,md5:"f871fe7bee0146d932d58346d180020c",name:"leo_special_pre.mp3"},{bytes:8843,md5:"184a57e7a110bd1765910a981e2b25d4",name:"leo_special_pre.ogg"},{bytes:4048,md5:"15c09865cbbf78133ff2c9864d73b82a",name:"lincoln_special.mp3"},{bytes:6744,md5:"6e8606ac55e52010bd94023e8d5575d0",name:"lincoln_special.ogg"},{bytes:5411,md5:"27249d46092cec9343a0971b6a678fff",name:"lose_asami.mp3"},
{bytes:8539,md5:"507dd73b0b0b32f5d3a889c05c7f5874",name:"lose_asami.ogg"},{bytes:7628,md5:"8544a6d475bf4a006d5be43654ad82b6",name:"lose_craig.mp3"},{bytes:11313,md5:"db401a22559ac812b6ed815cb3db4aaf",name:"lose_craig.ogg"},{bytes:6312,md5:"0f30b8fa9a266910b99bd87a395d329a",name:"lose_donnie.mp3"},{bytes:10113,md5:"98ca5492e09993718071cca5daf9781b",name:"lose_donnie.ogg"},{bytes:4077,md5:"bf65a97dcd8d780e0be468f7ed419013",name:"lose_fee.mp3"},{bytes:7238,md5:"e74ee69421e8f1a281f9fa37abcb69da",name:"lose_fee.ogg"},
{bytes:6468,md5:"686339f6de9b354c1aaf89c3a2ac4c90",name:"lose_foo.mp3"},{bytes:9546,md5:"4e4404fb49c4e76df7fcfa6436f9c864",name:"lose_foo.ogg"},{bytes:13510,md5:"0b995f176722041e1c40f10fd0bcc7b2",name:"lose_goat.mp3"},{bytes:15705,md5:"d18c940c930e87e3255c2c38ae34e685",name:"lose_goat.ogg"},{bytes:5981,md5:"b1a25df88b0c9c7c8480aeff3c6028b8",name:"lose_korra.mp3"},{bytes:9243,md5:"30b99d8809aebacd58bb43891f3901b8",name:"lose_korra.ogg"},{bytes:7272,md5:"90ec3f0e1d28c2f9607b2bacdea1541c",name:"lose_leo.mp3"},
{bytes:10326,md5:"b10e7c829493c0abef64f73bc0e80dc6",name:"lose_leo.ogg"},{bytes:5837,md5:"2c9455925415660796b7c883127b5d5c",name:"lose_lincoln.mp3"},{bytes:8684,md5:"de1dbb36a2c65aaa0eb36682fbeed14b",name:"lose_lincoln.ogg"},{bytes:16173,md5:"f6f73f005f4266731178eb85960055d4",name:"lose_lynn.mp3"},{bytes:18991,md5:"889c989f5fa220fbac28770064d4a362",name:"lose_lynn.ogg"},{bytes:5352,md5:"899c8ddc7759fd2c93ee8f6fb7b1be90",name:"lose_mike.mp3"},{bytes:8089,md5:"e850393bc13c0e729c375d4f05b19a6c",name:"lose_mike.ogg"},
{bytes:6350,md5:"fa907e557b77a13b30105e08ab6916d6",name:"lose_patrick.mp3"},{bytes:10107,md5:"878ecf72dfc81f6052b96e55d16905c7",name:"lose_patrick.ogg"},{bytes:7583,md5:"7ad2dd4a5822b4e96f4e0f67e6f5b57c",name:"lose_pig.mp3"},{bytes:11011,md5:"9092adf517f51fe263f7f05d3deee735",name:"lose_pig.ogg"},{bytes:4519,md5:"3aaf9a2703fdcaed770e79c822828233",name:"lose_raph.mp3"},{bytes:7506,md5:"01a3ee729bca3c79233a048280ee6773",name:"lose_raph.ogg"},{bytes:9360,md5:"5c1512729dffe7466361ae80853775ff",name:"lose_sanjay.mp3"},
{bytes:11951,md5:"8a9d68be24034bbb3ab51668259b728f",name:"lose_sanjay.ogg"},{bytes:5980,md5:"9d6ee4e5d956b1ee17b021f254db7178",name:"lose_spongebob.mp3"},{bytes:9209,md5:"99686b0d3e96a05413ae30a2ebadfc47",name:"lose_spongebob.ogg"},{bytes:4582,md5:"610ec659d610156d1f85b5fff7e9ea84",name:"mega_asami.mp3"},{bytes:7824,md5:"fcf89929916d617c89a51692f582c070",name:"mega_asami.ogg"},{bytes:6807,md5:"cad33f95c5775c3564fd420c660dcda4",name:"mega_craig.mp3"},{bytes:10191,md5:"acb01e40aaa13c27514024093ba296b3",
name:"mega_craig.ogg"},{bytes:6573,md5:"41a4961300f132fc0cbabf890f07ca8c",name:"mega_donnie.mp3"},{bytes:10083,md5:"cfd6c666f6ad9746f2fded5bb731df5a",name:"mega_donnie.ogg"},{bytes:12111,md5:"b401ad571db5d1954108aafa1c0c86cb",name:"mega_dunk.mp3"},{bytes:16619,md5:"7c138c91227ff3d21bf7be449375689f",name:"mega_dunk.ogg"},{bytes:7690,md5:"f13589e0c67c3e2d16ec08471ad72541",name:"mega_fee.mp3"},{bytes:11604,md5:"fa239cca53b7d030af290fcf6d7956aa",name:"mega_fee.ogg"},{bytes:5039,md5:"46585c718e5c3a95c3c16750defcbbee",
name:"mega_foo.mp3"},{bytes:8086,md5:"5296a1e8cbd787685a76e835f12b1edf",name:"mega_foo.ogg"},{bytes:5515,md5:"bd12d432f629ceecf2eafca9501368c5",name:"mega_korra.mp3"},{bytes:8759,md5:"b08fb351c3a185518593ff93f73544e9",name:"mega_korra.ogg"},{bytes:7978,md5:"e3371f7d6ea282ea862899543978105d",name:"mega_leo.mp3"},{bytes:11250,md5:"2a9440334fa819ffbd9a443e3574cdb0",name:"mega_leo.ogg"},{bytes:2231,md5:"fa00c128841f97a4fa097dbf333c927a",name:"mega_lincoln.mp3"},{bytes:5379,md5:"33b57b00f7b2dc77c777a971da7df388",
name:"mega_lincoln.ogg"},{bytes:11309,md5:"fae4570a9506a7214353756e9adc5b30",name:"mega_lynn.mp3"},{bytes:14004,md5:"acb3d8735b93bd4c3feb96ecbb002b67",name:"mega_lynn.ogg"},{bytes:8600,md5:"0969e591652783b21aedb0f337db177c",name:"mega_mike.mp3"},{bytes:11843,md5:"8dd56f8f19c26a332791c2f9ca98cf9b",name:"mega_mike.ogg"},{bytes:4315,md5:"4a99935fe5ed2358d7b73d825b7659a7",name:"mega_patrick.mp3"},{bytes:7482,md5:"5ea8e09962d07bd3861e6f1696253ec2",name:"mega_patrick.ogg"},{bytes:7123,md5:"9e338d36075c68ff67b1acc5310b1bbe",
name:"mega_raph.mp3"},{bytes:10635,md5:"03785441b339fe1f2c601f13ce8b2da5",name:"mega_raph.ogg"},{bytes:19222,md5:"47f7815ee2ba8316d2f2c4312b94e116",name:"mega_sanjay.mp3"},{bytes:21997,md5:"6d511c4373fd514f0ef72e7f93b81901",name:"mega_sanjay.ogg"},{bytes:4944,md5:"86ed62934e7aa44b062d7563c187c437",name:"mega_spongebob.mp3"},{bytes:7656,md5:"d65034dd4efee6af5b7a957b8f3bc6b1",name:"mega_spongebob.ogg"},{bytes:10913,md5:"1c923b6f9baccbb81da9203c75d54ebc",name:"mega_start.mp3"},{bytes:14657,md5:"04fb780bd3bc0bcc8ff48a32594d47d1",
name:"mega_start.ogg"},{bytes:178208,md5:"5e6e160f8f2579dfc3d0b7ccaaaf92a7",name:"menu.mp3"},{bytes:192711,md5:"0efb97d42dccb37b3e8b7f2a9da1d9d6",name:"menu.ogg"},{bytes:1659,md5:"72071830ea398942a27654cb70b378a5",name:"mike_spinning_arms.mp3"},{bytes:4787,md5:"2d7df98146521fa6b872a1b3153e72ff",name:"mike_spinning_arms.ogg"},{bytes:3063,md5:"829a5da9bcdbd9982004fffd0603ac08",name:"miss_asami.mp3"},{bytes:6013,md5:"71b6eccd69771ff30dfefbbef20d2ac7",name:"miss_asami.ogg"},{bytes:3424,md5:"68a5f2298415467bae6491270d16fbdb",
name:"miss_craig.mp3"},{bytes:6106,md5:"3b3e68d6fd565a15284b7ec20b44c2a3",name:"miss_craig.ogg"},{bytes:6416,md5:"5ec5491e20a70a4b73413cce6a484d0b",name:"miss_donnie.mp3"},{bytes:10212,md5:"fb9f8b3a92d8ece5d747789ad3b14833",name:"miss_donnie.ogg"},{bytes:6548,md5:"fd6fb7c31984f5ce27d241d3e7ab0c5d",name:"miss_fee.mp3"},{bytes:9550,md5:"02d4348c6d146be8de7e68f12f1e7b23",name:"miss_fee.ogg"},{bytes:2807,md5:"fee7a36299434935baf207ffee9fc17c",name:"miss_foo.mp3"},{bytes:5869,md5:"3f3022c255aa4aa962b30fbefecf0d46",
name:"miss_foo.ogg"},{bytes:3554,md5:"2fbc7d4f8fbb19de79eac77ee583e5e5",name:"miss_goat.mp3"},{bytes:6762,md5:"d05915d70211bef850b19255b8f54e16",name:"miss_goat.ogg"},{bytes:5295,md5:"e0d7e701174258d53955544a50ef2721",name:"miss_korra.mp3"},{bytes:8648,md5:"fb18af234067eb258cb4ff9c767da8c8",name:"miss_korra.ogg"},{bytes:2984,md5:"5d7c9dfec1302408ee2a3737fd822031",name:"miss_leo.mp3"},{bytes:6198,md5:"5c1ccc219e759f22a782e79e3839c46b",name:"miss_leo.ogg"},{bytes:3349,md5:"119225f32f3afceb47b872791d78e4ae",
name:"miss_lincoln.mp3"},{bytes:6279,md5:"b56d8bc7bbb8668556944370a44f7e50",name:"miss_lincoln.ogg"},{bytes:10865,md5:"571262f24961206b267c945ec7a5a95a",name:"miss_lynn.mp3"},{bytes:13842,md5:"c6cce2488cb6abe042e04f08e74dfd14",name:"miss_lynn.ogg"},{bytes:5352,md5:"899c8ddc7759fd2c93ee8f6fb7b1be90",name:"miss_mike.mp3"},{bytes:8089,md5:"323ec1e02e0164a2ac3d13cbb94e1c42",name:"miss_mike.ogg"},{bytes:5178,md5:"c6abb6ffd72b9858a141caa4bf7451e7",name:"miss_patrick.mp3"},{bytes:8817,md5:"977b2b653a784e0d8a78da92cc931598",
name:"miss_patrick.ogg"},{bytes:6102,md5:"ca3e4d6034b44e7dfd6a4b2cb069f391",name:"miss_pig.mp3"},{bytes:8766,md5:"1fa4559362db8eed73523b77dd092030",name:"miss_pig.ogg"},{bytes:5740,md5:"78e713b52d1c465d29187f0d9dd021a1",name:"miss_raph.mp3"},{bytes:8730,md5:"c5280d144ce412a6625361d3739bb3f9",name:"miss_raph.ogg"},{bytes:3996,md5:"816c6cbc15362369bf464b38dcd8b11d",name:"miss_sanjay.mp3"},{bytes:6946,md5:"ab557bf2b770024935f50cbf410c7725",name:"miss_sanjay.ogg"},{bytes:3862,md5:"c396870ead452b4b984de879f5bc602c",
name:"miss_spongebob.mp3"},{bytes:6927,md5:"a47988d2d4331616b9daa26db26b4c64",name:"miss_spongebob.ogg"},{bytes:2543,md5:"6cd3d2a790bbd12e20c3df80793795ee",name:"ninja_jump.mp3"},{bytes:5855,md5:"e6074b20efeec23c41949f4ebe78c3c2",name:"ninja_jump.ogg"},{bytes:7690,md5:"2544d63a8e7a85264410277fe315fa8e",name:"ooh_1.mp3"},{bytes:11262,md5:"22fe1e6de17321addfec351516221f2d",name:"ooh_1.ogg"},{bytes:2151,md5:"cb554873c1e15e6a8d56f55be616acfb",name:"patrick_bite.mp3"},{bytes:5638,md5:"f1add83f9a01d43a2a60663852e5dd3d",
name:"patrick_bite.ogg"},{bytes:1138,md5:"609206dc547ae129557efe1f60e74028",name:"patrick_pop.mp3"},{bytes:4133,md5:"b44f4fbb756271a9c8b62eaf20a9b68c",name:"patrick_pop.ogg"},{bytes:3317,md5:"e010d0a2dc2f7ef8e76e33ae5b65dae8",name:"pickup.mp3"},{bytes:5783,md5:"1fe515f8c7f75693099f22fe082bacb0",name:"pickup.ogg"},{bytes:3580,md5:"14e6af5feaeadc0ddef7a27c7bad973f",name:"pig_special_in.mp3"},{bytes:5805,md5:"4982115383b762a1b5d3e9399c366d3e",name:"pig_special_in.ogg"},{bytes:1396,md5:"7eaf575c3f4b4c2d31ec6884df001b98",
name:"pig_special_pre.mp3"},{bytes:4170,md5:"0e33be06b1f4a650bebc5b3496ccc0af",name:"pig_special_pre.ogg"},{bytes:2747,md5:"61af6988b7157746c5f86b9e9c968c38",name:"posterized.mp3"},{bytes:5593,md5:"9a378aa61b821c7edff34b25169cb4f8",name:"posterized.ogg"},{bytes:9041,md5:"b65e214efa0e67bd6cd30f032e8e20d9",name:"raph_special_pre.mp3"},{bytes:13762,md5:"6c52082281d7c6185cff1c972d5df56b",name:"raph_special_pre.ogg"},{bytes:4258,md5:"68c5b0cb68c684eeb4186ddb4b9ba04b",name:"ref_whistle_1.mp3"},{bytes:6372,
md5:"1f2c408e0bbcd7dad1cd2bb0e5af7ec2",name:"ref_whistle_1.ogg"},{bytes:8496,md5:"8b0333507b854f18488388556c078c10",name:"rocket.mp3"},{bytes:12202,md5:"c24426119cddf84dcc098161ed9843ed",name:"rocket.ogg"},{bytes:6004,md5:"42059f0635fa2fadf89ece4449adc0f1",name:"sanjay_special_in.mp3"},{bytes:10668,md5:"7eeddf51739465513410002318fd6251",name:"sanjay_special_in.ogg"},{bytes:10814,md5:"01c08fb6969c1f85cd068b6355295701",name:"sanjay_spin.mp3"},{bytes:13568,md5:"aeb7df0110051c6a46a53105045d76ba",name:"sanjay_spin.ogg"},
{bytes:3118,md5:"8bae9e40a17a0180f93c92f49f6e2baa",name:"select_asami.mp3"},{bytes:6241,md5:"14a4d01204c52bcb5e7a6051aa7d2895",name:"select_asami.ogg"},{bytes:4821,md5:"ffeaf13928ed1a9b840b5859ae6bd82f",name:"select_craig.mp3"},{bytes:7977,md5:"81cd232b14e72d545c8bcd46c29982db",name:"select_craig.ogg"},{bytes:7386,md5:"14ca9a901842b09003cffcbf03aa035e",name:"select_donnie.mp3"},{bytes:10620,md5:"b0bf12cf8c9c89b9f80be4a7e55aedaf",name:"select_donnie.ogg"},{bytes:7613,md5:"7433360b4481139823d961ab3903ee18",
name:"select_fee.mp3"},{bytes:11153,md5:"134bf02f0f1b5a3c90e3bd0b4b8d6196",name:"select_fee.ogg"},{bytes:6354,md5:"6fa3384383cd7f08718352f8f3d5d5e9",name:"select_foo.mp3"},{bytes:9652,md5:"05f12d98e820b56cc57e63604bcb43e7",name:"select_foo.ogg"},{bytes:6546,md5:"f65c033c59b0d5a550bb24fb0c789a4f",name:"select_goat.mp3"},{bytes:9791,md5:"eb52e132b9acce5ca208c48e99f857f5",name:"select_goat.ogg"},{bytes:4212,md5:"3a90cbc279ccbd11afb420224468a3c9",name:"select_korra.mp3"},{bytes:7603,md5:"ca59301f6c399915020f0a8bd4a41a7f",
name:"select_korra.ogg"},{bytes:10361,md5:"8a1b9898ccc750dffc949b635a37fb58",name:"select_leo.mp3"},{bytes:13012,md5:"5cdd9e8cfb3bbcd010f9ba87810dcedd",name:"select_leo.ogg"},{bytes:7421,md5:"7f7aefee9c35ae3071fe5a997376b947",name:"select_lincoln.mp3"},{bytes:10786,md5:"9acc7dd4a551517395407db832634c65",name:"select_lincoln.ogg"},{bytes:10053,md5:"4ecda66319c33fb08224f0e2a5881165",name:"select_lynn.mp3"},{bytes:12901,md5:"6139cd9c5f25edf2655c1e7f37cc9247",name:"select_lynn.ogg"},{bytes:4842,md5:"c76bbecd654647903cffe60078b0054a",
name:"select_mike.mp3"},{bytes:8134,md5:"45819cf8f1893d160e83289f3e265abe",name:"select_mike.ogg"},{bytes:6747,md5:"6eb9bd3ffa89c5a8b246afc252837fc7",name:"select_patrick.mp3"},{bytes:10325,md5:"c7a32cbe66e0d82997e70c28875c792b",name:"select_patrick.ogg"},{bytes:6026,md5:"51143cb045110e4ab19fbd417c3a8ebb",name:"select_pig.mp3"},{bytes:9044,md5:"d0643bfac1790552fa893f3651929781",name:"select_pig.ogg"},{bytes:5871,md5:"d6590b1357fc492a4a77b36aeae7f52b",name:"select_raph.mp3"},{bytes:9118,md5:"0143e0c11f9dc9230b5774f37263e225",
name:"select_raph.ogg"},{bytes:8302,md5:"c99ed480f659e703267be47558ecb22e",name:"select_sanjay.mp3"},{bytes:11473,md5:"ee4ddd3b8e14a99d0ce9bbcb6e090ae1",name:"select_sanjay.ogg"},{bytes:6935,md5:"3717ac9313e2c05d20468cde29ee2e30",name:"select_spongebob.mp3"},{bytes:10344,md5:"17c2943dc74eb862d27e105eb331239e",name:"select_spongebob.ogg"},{bytes:4597,md5:"f9824aff4e8edb0a8f2c46f82aaa0e6c",name:"smoke_puff.mp3"},{bytes:7853,md5:"429229a78fdecd1bfd2a5454b5c3bc10",name:"smoke_puff.ogg"},{bytes:4597,md5:"c137b468bbba26ba8098b81db4fd27c1",
name:"smoke_puff2.mp3"},{bytes:7848,md5:"3fbd32ac526c356a29bb155278b80f81",name:"smoke_puff2.ogg"},{bytes:2360,md5:"02c4afa75f1b3e80eda9dbb9dd95e35f",name:"sneaker_1.mp3"},{bytes:8622,md5:"2c01c31eb4f04d860edd286e16665dd8",name:"sneaker_1.ogg"},{bytes:2412,md5:"5b57e49c2ffa992e01c305a6e70c4bcf",name:"sneaker_2.mp3"},{bytes:8537,md5:"2b19a4ca26b80aaddd7fb2d7f0624e40",name:"sneaker_2.ogg"},{bytes:3687,md5:"8b7f14c9424d943cf7220f0f667704d9",name:"sneaker_3.mp3"},{bytes:11672,md5:"3edf26fb6405a7a17c46370db34895d4",
name:"sneaker_3.ogg"},{bytes:3557,md5:"8daa84d2111aa418d956593ea522b0d6",name:"spongebob_special.mp3"},{bytes:5860,md5:"aa9027817ca65e27e79ca612331d0ad5",name:"spongebob_special.ogg"},{bytes:5194,md5:"4ebc1e76624828082eaf686d807fca7d",name:"super_ready.mp3"},{bytes:8058,md5:"3696fd3ecd2a90a1120e838b15938929",name:"super_ready.ogg"},{bytes:1659,md5:"72071830ea398942a27654cb70b378a5",name:"swoosh.mp3"},{bytes:4787,md5:"65303934f80b1bed2a4500883e986378",name:"swoosh.ogg"},{bytes:1866,md5:"1d6d9b4f5e42e17a4509719b1d7182a1",
name:"throw_stars.mp3"},{bytes:7303,md5:"7abc97ad698a377ae57ce14a940bc1b1",name:"throw_stars.ogg"},{bytes:19416,md5:"d7cd594febf91ce5d96671bb276de6d2",name:"win.mp3"},{bytes:19929,md5:"be76f8333275110a8f8226cc64aff526",name:"win.ogg"},{bytes:5413,md5:"de4c4e170bc30a9b2c7253e50e27aecd",name:"win_asami.mp3"},{bytes:8541,md5:"59d2a40cad9f2feb4d6d224ebb8057ab",name:"win_asami.ogg"},{bytes:3266,md5:"82b78e2b003f3fb13c4bdf6d401934c5",name:"win_craig.mp3"},{bytes:6397,md5:"de82a939070ae1f1dc3cdfad15abd363",
name:"win_craig.ogg"},{bytes:12656,md5:"21fbc2bcbc084aa8dd20fc0af93b7d18",name:"win_donnie.mp3"},{bytes:16184,md5:"48f8fc416b9062943d796953be8e8be8",name:"win_donnie.ogg"},{bytes:4833,md5:"ddd470fee94f49f52592548cfa09e35a",name:"win_fee.mp3"},{bytes:7827,md5:"5d0a91f154195ad7b2f5118f63fc3c2e",name:"win_fee.ogg"},{bytes:5039,md5:"46585c718e5c3a95c3c16750defcbbee",name:"win_foo.mp3"},{bytes:8086,md5:"b7dbec002788f6711463f614e00605a0",name:"win_foo.ogg"},{bytes:9119,md5:"4b22662cc1c002f69d823d6b15c08b3d",
name:"win_goat.mp3"},{bytes:12566,md5:"b18bb34cb98e29c8f817c1069d7a85ff",name:"win_goat.ogg"},{bytes:4690,md5:"1305f6cf2f18b97a6ad88cf7d05324e3",name:"win_korra.mp3"},{bytes:7783,md5:"d70859bf57f602410f11c92426077c74",name:"win_korra.ogg"},{bytes:9539,md5:"579095f55503a8773dcd9ac464f6c77a",name:"win_leo.mp3"},{bytes:13478,md5:"16081859492fe6b6038589c18b07481a",name:"win_leo.ogg"},{bytes:5889,md5:"7ef6d59d00be3916292b90ba532045c3",name:"win_lincoln.mp3"},{bytes:9088,md5:"de73796e37c4982a9101b2ba0e65a556",
name:"win_lincoln.ogg"},{bytes:8368,md5:"a945b0e8607c5ca333d170d675d28aa9",name:"win_lynn.mp3"},{bytes:12113,md5:"18fda93f4f19381cf3aa7856d40de4de",name:"win_lynn.ogg"},{bytes:5664,md5:"1df8d7d0834f77990754b65af9d04d39",name:"win_mike.mp3"},{bytes:8601,md5:"a09b8cd348378911d18f6bb1f4dd2b64",name:"win_mike.ogg"},{bytes:4491,md5:"42dadb0cb1d32d9e33f5f7f6d331a804",name:"win_patrick.mp3"},{bytes:7883,md5:"59d7f1abdfe36584fa5b89c0afef67ac",name:"win_patrick.ogg"},{bytes:6516,md5:"6421795bac4eb15ff6185afaa98c4f8e",
name:"win_pig.mp3"},{bytes:9398,md5:"9ed78fef7790d7b8f080ff2147dc3f58",name:"win_pig.ogg"},{bytes:6735,md5:"c906eb82dac79435113c3523beb7bb75",name:"win_raph.mp3"},{bytes:10369,md5:"f19bc998a3b7ddf7d4aa247e9776ccaa",name:"win_raph.ogg"},{bytes:5644,md5:"aabecdf5ad69a60bcf470401c4e9ea85",name:"win_sanjay.mp3"},{bytes:8849,md5:"2efb48ed31aa80c7952c266f7a457a20",name:"win_sanjay.ogg"},{bytes:10457,md5:"2c8960626d6e7ba103551a9c961d2bb9",name:"win_spongebob.mp3"},{bytes:13504,md5:"4f418102e66574d49361ffa0f18bbedf",
name:"win_spongebob.ogg"}],ui_nickpopup:[{bytes:274643,md5:"31756936cb3276a3cde859d048cccab6",name:"bg.png"},{bytes:1999,md5:"fc304d2e056989b3372bcb21beb53007",name:"btn_apple.png"},{bytes:2236,md5:"873cc5a0dd4d605251ed5cc371b8cfc6",name:"btn_close.png"},{bytes:2292,md5:"2e09d2c37d76603af961318df084dcba",name:"btn_close_pressed.png"},{bytes:2383,md5:"62a9083747ad78d42c5a0efc48ce71c3",name:"btn_google.png"},{bytes:2038,md5:"9b227c08581537f761c8d64e18a1c0ae",name:"btn_kindle.png"}],htp:[{bytes:45914,
md5:"9589fce615831387f9582c9d6a211587",name:"htp_1.png"},{bytes:43571,md5:"9ee1e0635dfe0f4bef21b2bdc85ce87c",name:"htp_2.png"},{bytes:45631,md5:"790497c38060fc403912e3d2444936c0",name:"htp_3.png"},{bytes:53907,md5:"e5d94474ae0520e5fbab6e82869c880c",name:"htp_4.png"},{bytes:90636,md5:"9a3a9f5401ad026df427501268316a1b",name:"htp_5.png"},{bytes:63309,md5:"b6f56f3219b0c1ace9e6776fb55e9c4e",name:"htp_6.png"},{bytes:58404,md5:"fc40ce53e5555324738cf8aa2fe6d74a",name:"htp_7.png"}],ui:[{bytes:15441,md5:"d2c0663bb9eec30fc2c74866a3ce5892",
name:"asami.png"},{bytes:5596,md5:"b37d07956cb49d8e2fcab360f485befc",name:"asami_locked.png"},{bytes:7457,md5:"62b7c41b7b2f9d4246ca8f2775f84443",name:"asami_locked_selected.png"},{bytes:18305,md5:"2660f224eebfd75feb0828fa522441fd",name:"asami_selected.png"},{bytes:55913,md5:"1d9f19956ef4591f4e8c4efd6f492e21",name:"avatar_asami.png"},{bytes:10493,md5:"b293ca1bab46a334c30c7eed95f1aada",name:"avatar_craig.png"},{bytes:16170,md5:"315590d630e707bfdd06abc58ecba89c",name:"avatar_donnie.png"},{bytes:47597,
md5:"3a1253114da4aae4c52bd31ac04285c8",name:"avatar_fee.png"},{bytes:46395,md5:"f92d7e41968cfe38d57414141d232b95",name:"avatar_foo.png"},{bytes:14738,md5:"38e46d7d97bf9b0bf3981468b430403a",name:"avatar_goat.png"},{bytes:12925,md5:"5ee73684f130b4f2a6d77f4ad5a8a109",name:"avatar_korra.png"},{bytes:68689,md5:"0385b8b0b233d8d00819efda5caa6552",name:"avatar_leo.png"},{bytes:11517,md5:"7b94566d7bf6f26ad8b4ca4502485b26",name:"avatar_lincoln.png"},{bytes:12557,md5:"17f9ddde6300c678684825e385857b79",name:"avatar_lynn.png"},
{bytes:13268,md5:"5ae810b531720c00b72285c149de1f68",name:"avatar_mike.png"},{bytes:10127,md5:"9572412a1473f4b0bf14cdcb8237c4ff",name:"avatar_patrick.png"},{bytes:12145,md5:"17ae75184f004662b2aca06721792413",name:"avatar_pig.png"},{bytes:14010,md5:"320b22ca83abdad0a836157b34f4515e",name:"avatar_raph.png"},{bytes:11250,md5:"6d7be896567b46ee0757174914c3bebb",name:"avatar_sanjay.png"},{bytes:52038,md5:"91eb212442fc9cd4f08753746ffb1bce",name:"avatar_spongebob.png"},{bytes:1630,md5:"0786a5716bbee5be13ff79d40b334ae3",
name:"btn_big.png"},{bytes:1544,md5:"ed927e958513becd5a8a09f4635c4db8",name:"btn_big_pressed.png"},{bytes:2649,md5:"e5f4e27a53d77f0dcdbe728678ddd07c",name:"btn_code.png"},{bytes:2652,md5:"3840314505fad3a441335e218954eccf",name:"btn_code_pressed.png"},{bytes:2320,md5:"d58f13e14e829d167d579dadc574786e",name:"btn_help.png"},{bytes:2471,md5:"4b5cca2b5fe5f0780db3c25d3b70447e",name:"btn_help_pressed.png"},{bytes:1666,md5:"24a57aeb6f4a8d74de05e02b5b9a6b32",name:"btn_light.png"},{bytes:1622,md5:"f1d1b58ed5e0a3517ad2497015db2918",
name:"btn_light_pressed.png"},{bytes:1756,md5:"03b4d93b34778aa619a0c1bc92a16c54",name:"btn_loading.png"},{bytes:1836,md5:"cdc60d8dbea9e83f0f8eec69408632b4",name:"btn_loading_pressed.png"},{bytes:2337,md5:"d4451c85a6794e5bc46c8f2795f08bc3",name:"btn_new.png"},{bytes:2438,md5:"3a7523bc1a1105a9f4d42356da3530c0",name:"btn_next.png"},{bytes:2425,md5:"c74b17b80d2dab27bc5dd53c7636574f",name:"btn_next_pressed.png"},{bytes:1647,md5:"42b6910dc31d517ea742d867ccf8a472",name:"btn_normal.png"},{bytes:1569,md5:"82a57b93addb61b3ac5e71f2ef6c7afe",
name:"btn_normal_pressed.png"},{bytes:1489,md5:"cf20d747941d0a69f7ad0b666f06af52",name:"btn_pause.png"},{bytes:2787,md5:"45bf83541ad0943c0546a33302682cfb",name:"btn_play.png"},{bytes:3004,md5:"c735c31821a808bd3913339bb09d1163",name:"btn_play_pressed.png"},{bytes:2054,md5:"9143b20c3b52f6802285ff8bfc8f73bb",name:"btn_prev.png"},{bytes:2061,md5:"5a7a26ac4cd265b1cbfb1e7986549958",name:"btn_prev_pressed.png"},{bytes:2258,md5:"c4075d9c6da84ba2508f837ae5aefe80",name:"btn_quit.png"},{bytes:2359,md5:"4aeef0c4b48257c7a32aabf274f8c671",
name:"btn_quit_pressed.png"},{bytes:4013,md5:"f0d80f93e040752e4550718824535bdf",name:"btn_restart.png"},{bytes:2546,md5:"2292aeaee2f8ef8abeccf339e3b8a87a",name:"btn_resume.png"},{bytes:2419,md5:"fa6375e03765557693ce58ef0adba849",name:"btn_resume_pressed.png"},{bytes:2608,md5:"021a0e81ffe8442d2945dbf7f6ab5dac",name:"btn_sound_off.png"},{bytes:2797,md5:"549227166e234fef1f31c7b95d6a6d3e",name:"btn_sound_off_pressed.png"},{bytes:2393,md5:"a8a9e7427fa1ae2bad84fd9bf5dbd3e7",name:"btn_sound_on.png"},{bytes:2532,
md5:"ff2ec6bfb58ba3671801066cf9e2518c",name:"btn_sound_on_pressed.png"},{bytes:13806,md5:"53cb16c2fc66e7088172e22a25eab7bd",name:"craig.png"},{bytes:5289,md5:"32ebf4f14fc119433f4240b5a20655f1",name:"craig_locked.png"},{bytes:34803,md5:"45d69be8704b94c4f575c57ceed67b35",name:"craig_locked_selected.png"},{bytes:17020,md5:"2ae51da89e1d28cfa65900c96980cf4a",name:"craig_selected.png"},{bytes:15172,md5:"46c4cda06ba189f12e4d068f57b0aaf9",name:"donnie.png"},{bytes:5432,md5:"2450f455c1d7ea145b30a1d43be849d7",
name:"donnie_locked.png"},{bytes:7387,md5:"52c07b76d66e15e2d06c2f0862e58208",name:"donnie_locked_selected.png"},{bytes:18007,md5:"4a73da2f7c0d0395bd72429f360ba0a7",name:"donnie_selected.png"},{bytes:3556,md5:"cdb69e2f9f1107487a849af10f067c88",name:"enter_code.png"},{bytes:13927,md5:"ce61667b99110df47d7233404e332409",name:"fee.png"},{bytes:5036,md5:"eddd5c116ead66631db5b171b8b838b2",name:"fee_locked.png"},{bytes:6577,md5:"89c817c7e8f675fe89a6eb8dbb23b74e",name:"fee_locked_selected.png"},{bytes:16591,
md5:"0680d2ee5003e68908d1750475954010",name:"fee_selected.png"},{bytes:15132,md5:"5f2c1da9df07e39515e2d561f206f08d",name:"foo.png"},{bytes:5752,md5:"c20e29e94825ccd1edddad57f846e337",name:"foo_locked.png"},{bytes:7546,md5:"e268ed5e50d7fac37bf14054afbd3f63",name:"foo_locked_selected.png"},{bytes:18295,md5:"eda9e1f773b3770e21468b80e12edd0a",name:"foo_selected.png"},{bytes:18531,md5:"fee79e0aa2b32d1cb85b803066bdb440",name:"goat.png"},{bytes:5916,md5:"89e2824535d1f83b97fb61194ce8396a",name:"goat_locked.png"},
{bytes:7176,md5:"3b801ec19330c622adabe10e8926a7f3",name:"goat_locked_selected.png"},{bytes:21423,md5:"66cfc82f899540b62fe34f120bc0df58",name:"goat_selected.png"},{bytes:5937,md5:"39075906149bb8247921f4a7a6b5cf13",name:"korra.png"},{bytes:5672,md5:"994adff478a512ce16fded9944fd72ab",name:"korra_locked.png"},{bytes:7622,md5:"1545a722afdde58fe80365aa0a5aeff6",name:"korra_locked_selected.png"},{bytes:18243,md5:"db45a94d133643e883f5fbd62aa8a519",name:"korra_selected.png"},{bytes:14351,md5:"5cdaed6b9a63fc1959270d7414b51abc",
name:"leo.png"},{bytes:5174,md5:"a6250a4a462194597467f8e533f18029",name:"leo_locked.png"},{bytes:7043,md5:"c8c3ca2d2c56ced2167e3dbf1da0cb49",name:"leo_locked_selected.png"},{bytes:17160,md5:"6de8c1855ed207531a713a435060f50e",name:"leo_selected.png"},{bytes:15125,md5:"b368aaae1887f68372fcba722f85fdcd",name:"lincoln.png"},{bytes:5311,md5:"d34dd5c5ffc06e6ae57ece8a1d810a3b",name:"lincoln_locked.png"},{bytes:6662,md5:"b3652cdc4264af9fb4e56f3f62a44c58",name:"lincoln_locked_selected.png"},{bytes:17597,md5:"c1124b29b35f4813a88d0c48c6dc0549",
name:"lincoln_selected.png"},{bytes:1670,md5:"030dece491afcd5ae5d97282065bce4d",name:"lock.png"},{bytes:5118,md5:"fc737cab879604406cca30d50f9fe85d",name:"lynn.png"},{bytes:5186,md5:"9d288be74fbba73de56e7737aa9559b6",name:"lynn_locked.png"},{bytes:5775,md5:"7a701459ac139d7af7a5feeda406ec87",name:"lynn_locked_selected.png"},{bytes:5782,md5:"ee3eda876e0b5a69cb97544da796180e",name:"lynn_selected.png"},{bytes:14267,md5:"3608798022957d72c6c6ede2c13bb10f",name:"mike.png"},{bytes:5262,md5:"5cdc668e35eab16f5992164445dca8a9",
name:"mike_locked.png"},{bytes:7131,md5:"8fe456b3aa9a6f6890fbd349a718278c",name:"mike_locked_selected.png"},{bytes:17058,md5:"cb61c9dbf9dcc6fd3056ae91fb40c1bd",name:"mike_selected.png"},{bytes:15312,md5:"0c6520b64ac193822d4d96ffd41ec370",name:"patrick.png"},{bytes:5525,md5:"acacb86995d5d75532dd5a27d9cc8d10",name:"patrick_locked.png"},{bytes:7363,md5:"08ba95a8a5d939e3470c160e31259314",name:"patrick_locked_selected.png"},{bytes:18218,md5:"94b3538eac0b243cc9cfeaed4061d899",name:"patrick_selected.png"},
{bytes:16028,md5:"e75f5c94e391342fa39bcb5ab39da4ca",name:"pig.png"},{bytes:5358,md5:"e6de68d57790ebbece3d9fd42f98621b",name:"pig_locked.png"},{bytes:6610,md5:"15819c60800e6cff773db260442abfaa",name:"pig_locked_selected.png"},{bytes:19E3,md5:"511e7b293d2ca3943706e486a9800bed",name:"pig_selected.png"},{bytes:16536,md5:"6dd3035e5071e35cfb31322ce7a12a47",name:"popup_bg.png"},{bytes:22708,md5:"bb11f9b5d5cf8fec6bfe0b0f25ac9c45",name:"popup_keyboard.png"},{bytes:14919,md5:"9112dc445ca9239ab82597edbed775c2",
name:"raph.png"},{bytes:5259,md5:"998c2a42d995299e33194dacf1b808e7",name:"raph_locked.png"},{bytes:7135,md5:"ba0a68bee3fedcca855509df302be6f9",name:"raph_locked_selected.png"},{bytes:17384,md5:"5900cec43284bd032fd54ec6ca8d64f2",name:"raph_selected.png"},{bytes:4546,md5:"4927a3c22f9c92bed1a2881add2c9457",name:"sanjay.png"},{bytes:4569,md5:"00044a2bdc972ab41482950da3db26a1",name:"sanjay_locked.png"},{bytes:6694,md5:"ac8763bd1b859e2a10479d65d7d4c7f5",name:"sanjay_locked_selected.png"},{bytes:5888,md5:"3372d75b8d5264abb1d3a3b8009e8e80",
name:"sanjay_selected.png"},{bytes:16932,md5:"a0de63cdc3b359a26063f37a68e7aeea",name:"spongebob.png"},{bytes:5881,md5:"d752ae26fc05141c5771af70f1fc35ca",name:"spongebob_locked.png"},{bytes:35777,md5:"dd818977fd4e01debc320be560252a9b",name:"spongebob_locked_selected.png"},{bytes:19891,md5:"6cf20d507959310a8c139e711c46800a",name:"spongebob_selected.png"},{bytes:9720,md5:"efdadc2bc91c5a27c18bc3771346ab81",name:"team_hb.png"},{bytes:9842,md5:"ad86975b8c5de2100436f5a2046171b3",name:"team_korra.png"},{bytes:10046,
md5:"d802b7a08136ad2e40bff4182a521de5",name:"team_loud.png"},{bytes:36344,md5:"e5f851ac748759f85bed771a3e182090",name:"team_pgbc.png"},{bytes:10829,md5:"82680d871dc71f6406269da63e0987da",name:"team_sb.png"},{bytes:10879,md5:"658000b57fc2406a84081386a3c4ca65",name:"team_sc.png"},{bytes:30558,md5:"2d5d32d89fce9c00947128d8fe0de3c6",name:"team_tmnt.png"},{bytes:1412,md5:"619503d8629dd55aaf5a3b2732a24dae",name:"true_code.png"},{bytes:1463,md5:"fab989363307fac941cd0e4400ddf702",name:"wrong_code.png"}],
ai:[{bytes:211,md5:"3e9efe2be9e374c3e5f83c23c59d381b",name:"basket_ai.json"},{bytes:554,md5:"e807ab0c9dab571d3bb9af29bcd07dce",name:"behaviors_structure.json"},{bytes:933,md5:"6dd678349e404960ce2401d484e1c777",name:"defense_ai.json"},{bytes:554,md5:"f5d3273ebf3d4f37eb42e8a31e5c1eec",name:"offense_ai.json"}],ui_win:[{bytes:80934,md5:"d6056c64d06293ecc5dbdf9dff356505",name:"bg.jpg"},{bytes:15113,md5:"b132358eb8c0d307865dbcba517cbcf7",name:"loser_bar.png"},{bytes:44979,md5:"44bf58354ec09d2660aca16c9cf37353",
name:"star.png"},{bytes:70384,md5:"92904ccb6b5dfd0ac957b8e4d248d253",name:"team_hb_loser.png"},{bytes:79997,md5:"853c81385fc9e4c4fa192bfd0572df55",name:"team_hb_winner.png"},{bytes:90015,md5:"6112b38b9c9cebc0567aadb419d4bcbb",name:"team_korra_loser.png"},{bytes:86519,md5:"8e4a60a07b49b97b2282e4e238309f42",name:"team_korra_winner.png"},{bytes:73532,md5:"10e9982e1015ac6097b9758f1ce94a7d",name:"team_loud_loser.png"},{bytes:77995,md5:"ed8770ff4bd813ce9954612c6f5c0cd0",name:"team_loud_winner.png"},{bytes:94563,
md5:"675e1bd2cd44f6b6afa79bac5f0aaa4e",name:"team_pgbc_loser.png"},{bytes:96957,md5:"8737a6d1b39812ec22673d1b42ab726a",name:"team_pgbc_winner.png"},{bytes:100668,md5:"03df2ce227c20fa58c06c4732474979c",name:"team_sb_loser.png"},{bytes:88390,md5:"8d9a77af099ab5d7e384aee1a39b7ae1",name:"team_sb_winner.png"},{bytes:63090,md5:"b5259de467dfb12f7b3d3d60888d7492",name:"team_sc_loser.png"},{bytes:63897,md5:"b26f2423bdb3a7b5e5768d038d887c2d",name:"team_sc_winner.png"},{bytes:110473,md5:"c5ac60f90eefbf27897ef58f9fdf6a62",
name:"team_tmnt_1_loser.png"},{bytes:112208,md5:"346cbea71c4caec3b0456fcf1f2b189c",name:"team_tmnt_1_winner.png"},{bytes:110257,md5:"160099a6eaaf99859fee4edea8be6af1",name:"team_tmnt_2_loser.png"},{bytes:114260,md5:"3c8cbdd268c29e35b59ed85c4bb1bb6d",name:"team_tmnt_2_winner.png"},{bytes:19497,md5:"bccd818da3c5063bb4f2c9472a4ae2ad",name:"winner_bar.png"}],ui_hud:[{bytes:21434,md5:"28f6bde718fadac30460ef651367992d",name:"ball.png"},{bytes:21197,md5:"7b664355317f3049427844364d18f18d",name:"ball_left.png"},
{bytes:1477,md5:"aadab62a89b903bc1c9631b6c905cd3d",name:"ball_lines.png"},{bytes:5632,md5:"51ea2261da79659c3e551dda51d34f0e",name:"ball_lines_back.png"},{bytes:16793,md5:"1e23119ade916e34ff40b6309c81b19f",name:"ball_right.png"},{bytes:5649,md5:"96a46fdd0e6756e9927c70b978d3bb0f",name:"bar.png"},{bytes:2329,md5:"4026a7616aaf962a3505ea1904295a40",name:"bar_gray.png"},{bytes:6744,md5:"581440434b6016c6a59e008acd803944",name:"bg1.png"},{bytes:30331,md5:"0fb10c1529c6cc82c8fc744e5fcc1f83",name:"bg2.png"},
{bytes:16436,md5:"57655bb6dec94ddcf375c07288faca5e",name:"camera.png"},{bytes:9382,md5:"a54d429542e2f6e3e76c944b1767b895",name:"corner_button.png"},{bytes:9024,md5:"b5dd798f5ed4a288cdbddf899b4a4c36",name:"corner_button_attack.png"},{bytes:9418,md5:"cb5b38aa4e0a8de9a0276eaca255cff6",name:"corner_button_jump.png"},{bytes:41079,md5:"699d2e2a9c4392bfa56c56100b6f040d",name:"corner_button_megadunk.png"},{bytes:42193,md5:"af8c16178ea9a81d6f5a1e98d5b5666e",name:"corner_button_megadunk_pressed.png"},{bytes:4544,
md5:"5751c46957ef3ece303cb0c612328b34",name:"gauge.png"},{bytes:7646,md5:"9f3a2fa8bc52c45547140b935d1b3ae1",name:"gauge_ball.png"},{bytes:16215,md5:"796006efd786a3d07bee2fd3c15e6b39",name:"gauge_bar.png"},{bytes:2964,md5:"f1e6952d737359b4f5be81bf9b0e6fbc",name:"hud_fx/hud_fx.json"},{bytes:124168,md5:"16c5689881b6a3b8b5088da16e4d8924",name:"hud_fx/hud_fx.png"},{bytes:11579,md5:"5cae77f3093b771f346edc4ab7779088",name:"impact.png"},{bytes:3602,md5:"fda03b38b0d1c72135e2f0e21cf456e3",name:"mega.png"},
{bytes:1392,md5:"dabc81a4b53501f13cb5abfd774a9c41",name:"particle.pex"},{bytes:2922,md5:"e42548c0870aa082200a59250bc9af05",name:"slider.png"},{bytes:4636,md5:"819fd4bf24789a109dfc30a2a7a8ffd7",name:"slider_handle.png"},{bytes:1206,md5:"198e62a28d3ba801a537575a1d702cdd",name:"star_black.png"},{bytes:1725,md5:"df52e9471d17fd484a8c60bc557cdd35",name:"star_white.png"}],ui_htp:[{bytes:50157,md5:"7ea4a77596b53ed51665313a38084681",name:"bg.jpg"},{bytes:2414,md5:"06af32a4299d45b06eeba746dce6039e",name:"btn_next.png"},
{bytes:2407,md5:"675a26f2f45befa06f328c6d8a8dbf17",name:"btn_next_pressed.png"},{bytes:2396,md5:"fc9e1d77b272fc57bd14235e3ed439b4",name:"btn_prev.png"},{bytes:2412,md5:"7f41de393895497c3534ac805bdb64de",name:"btn_prev_pressed.png"},{bytes:24702,md5:"afb232895bcbc9570d40370e7e0a280b",name:"htp_panel.png"}],ui_end:[{bytes:18912,md5:"f3e114525fd43bce0fe41d3ffd2f8e54",name:"award.png"},{bytes:9642,md5:"0b7e8e0af66c38b7df43876b7f2c867d",name:"ball.png"},{bytes:54797,md5:"14252ca27c4f3eab4c588c595d0fb6c7",
name:"beams.png"},{bytes:52149,md5:"cd2beee529b56d94d868317d4c4c8a17",name:"bg.jpg"},{bytes:3559,md5:"3d46b00f06ac6e8a5ab3eec573b8ccd4",name:"black_bar.png"},{bytes:2447,md5:"e675b7714e6b21f41b54cc8f82df9609",name:"bling.png"},{bytes:65763,md5:"7ff73235023dd1b0d0fb3984b6ec662d",name:"end_team_hb_l.png"},{bytes:62414,md5:"7255de8dda57f4ee5c4bdf6aa905af86",name:"end_team_hb_r.png"},{bytes:15152,md5:"5bd0b97fa64bc011520e38fb3522aa84",name:"end_team_korra_l.png"},{bytes:81330,md5:"ea06ec5135f957c1235bf98c8e2b93b2",
name:"end_team_korra_r.png"},{bytes:13537,md5:"b41828583c7c4d30ffbbf59abc0da9cc",name:"end_team_loud_l.png"},{bytes:12131,md5:"df596454988ecc7313fb1301bffb4157",name:"end_team_loud_r.png"},{bytes:65350,md5:"91a8c4514d4d0f262e3caebba0b559e0",name:"end_team_pgbc_l.png"},{bytes:83460,md5:"fea530cf4d0f6415c6a1b8cb3de38fa1",name:"end_team_pgbc_r.png"},{bytes:14193,md5:"37d76832fd45965ebdaaa82369bd15a7",name:"end_team_sb_l.png"},{bytes:86678,md5:"7bc06bcf1080f3727a1d8facfb6b32e5",name:"end_team_sb_r.png"},
{bytes:10830,md5:"cc3e9bbf1fe57df111a7ff4dba2b7e7b",name:"end_team_sc_l.png"},{bytes:10996,md5:"153c45e4e4c47fbb028d322e8383058d",name:"end_team_sc_r.png"},{bytes:112574,md5:"493bfce04ea1a6b8e8f43a2b60559cbd",name:"end_team_tmnt_l.png"},{bytes:120349,md5:"0df1d4911b809bb484a987fd9b79679e",name:"end_team_tmnt_r.png"},{bytes:1859,md5:"0fcca499d4da9ccc49d6c6da2db3d536",name:"only_nick.png"}],particles_fx:[{bytes:1294,md5:"09f585cb04102d9abefb35a18b8579e2",name:"cloud01.png"},{bytes:786,md5:"a7cdc5c1e242f4173070f433c94e1419",
name:"cloud02.png"},{bytes:1436,md5:"da7ad2dd3c93a284e3f27b7a621ea2de",name:"fire.pex"},{bytes:1516,md5:"12feb6926567f4888fc15866bb2d15da",name:"lightning.pex"},{bytes:1369,md5:"8088b7b72ef37ca8855b25d114f526ba",name:"poison.pex"},{bytes:704,md5:"49cdef0daffba9aba4097792e6f86682",name:"poison.png"},{bytes:2337,md5:"a962aada3bb155cf193621bd9f51aa72",name:"speed01.png"},{bytes:2052,md5:"00fc1e5b50e4950a32cf0ac8c72daa45",name:"speed02.png"},{bytes:2098,md5:"f911b071f1777d78c6dffd22f404ab9d",name:"speed03.png"}],
sprites_env3_low:[{bytes:57095,md5:"c253099f840cce095ac835726c7910ad",name:"env_3_5_bg_l.jpg"},{bytes:58128,md5:"d968717954d3a11c66ca9deaadb40acd",name:"env_3_5_bg_r.jpg"}],team_pgbc:[{bytes:33212,md5:"393ee38dc74f5e4b5eb791e830bbc72f",name:"field_logo.png"},{bytes:11543,md5:"2ab4b4c427a7638e583b99246d99f651",name:"goat/goat0.json"},{bytes:497768,md5:"6597afd32924b92a0942babca55f08fc",name:"goat/goat0.png"},{bytes:11116,md5:"6bbcba5f42b4a0a1906c80e17b82cc58",name:"goat/goat1.json"},{bytes:409646,
md5:"0a16458022096377dd9e4e5963f8f2bc",name:"goat/goat1.png"},{bytes:10248,md5:"0eebd9897fa1c53e6f86a6aa1aeddacc",name:"goat/goat2.json"},{bytes:329604,md5:"5aedf61370805a6eefeb6a1f19edf233",name:"goat/goat2.png"},{bytes:2646,md5:"fbd3bd2f731bdc2304e559c4a9d91428",name:"goat_flump/atlas0.png"},{bytes:72877,md5:"c4878ffc2491bc7263378303895c7d8c",name:"goat_flump/library.json"},{bytes:15602,md5:"3d60980a461addda4e1ab15785031cb9",name:"pig/pig0.json"},{bytes:452965,md5:"763f0bd863bdba74abfa9401e5cc7815",
name:"pig/pig0.png"},{bytes:13275,md5:"7a8f5cd4abf184f11daa1b7ef6eb7b4a",name:"pig/pig1.json"},{bytes:319456,md5:"78d67ead14b5afc7060fcd8e82db5480",name:"pig/pig1.png"},{bytes:2401,md5:"40923a96c2768b682b808ae4a047746a",name:"pig_flump/atlas0.png"},{bytes:44694,md5:"cc654879bcf4e3576898074b8eb04fc9",name:"pig_flump/library.json"}],ui_mode:[{bytes:96148,md5:"2762b3372897dd0c651ed959445ef9f9",name:"bg.jpg"},{bytes:99235,md5:"6066845b09eee8d55a98208c5e4de40f",name:"btn_hall.png"},{bytes:93891,md5:"6f13417986c2b7e3144556cd653ca832",
name:"btn_random.png"},{bytes:95118,md5:"11d13a420cf67c2b1fa94f4876c5bc91",name:"btn_tournament.png"}],team_loud:[{bytes:4929,md5:"bae70ee4ca1253efe16fbece8b68da1f",name:"field_logo.png"},{bytes:21171,md5:"257668bdd520a6d3269903816ebf3b2d",name:"lincoln/lincoln0.json"},{bytes:560924,md5:"9b040ab3a2bf001e2c3ffe48ac96e34b",name:"lincoln/lincoln0.png"},{bytes:15932,md5:"483346e9122b0a007da40173b4059694",name:"lincoln/lincoln1.json"},{bytes:464282,md5:"c15389892d5cb78f62c0dcd75db94b00",name:"lincoln/lincoln1.png"},
{bytes:2507,md5:"056440ae4509f1a14452f67c17195fbd",name:"lincoln_flump/atlas0.png"},{bytes:73789,md5:"791c2b33ffceefdfd3bd0af8d8066b4f",name:"lincoln_flump/library.json"},{bytes:18458,md5:"75525a109b2df7403c8ee0255054a873",name:"lynn/lynn0.json"},{bytes:611307,md5:"820bad9023366a54c3eb95216135bc0f",name:"lynn/lynn0.png"},{bytes:19602,md5:"e2e9b5af64a0243c2fd2819eddf5be72",name:"lynn/lynn1.json"},{bytes:429457,md5:"2cd52e31d4d42531c0b1773639b68dac",name:"lynn/lynn1.png"},{bytes:2650,md5:"e6148e3e73d6dca77c674ee33ecb617f",
name:"lynn_flump/atlas0.png"},{bytes:134245,md5:"643d3534a07cb53f4cc534236140074e",name:"lynn_flump/library.json"}],sound_mobile_slow:[{bytes:224091,md5:"22571a62b07a3722fd68685aa92609fd",name:"gameplay.mp3"},{bytes:256333,md5:"04a3996b20b3c6c5991de51bb0ea79b8",name:"gameplay.ogg"},{bytes:178256,md5:"749229416d549f47c2a35bbbb6e80ea1",name:"menu.mp3"},{bytes:194717,md5:"003684da2ee8979f0aa81261c1757592",name:"menu.ogg"}],ui_hall:[{bytes:94110,md5:"c16e1990ccf78ef3cca554b1733fce0e",name:"bg.jpg"},{bytes:114499,
md5:"ad9b1891eff47e4ff51d869e156b7dcd",name:"btn_posters.png"},{bytes:106447,md5:"b5aea4ed32ad369980eb49f14693754b",name:"btn_stats.png"}],sound_mobile:[{bytes:7562,md5:"f8caa9eba814685a0948c93a74995f67",name:"asami_special_in.mp3"},{bytes:11340,md5:"ea1f901fe98c5182e8fde444e8c38809",name:"asami_special_in.ogg"},{bytes:16562,md5:"3d18e817b1e7f002a8857c15cb05ef4e",name:"asami_special_loop.mp3"},{bytes:16818,md5:"b92632578d9f6c2e64de6b27e31c6970",name:"asami_special_loop.ogg"},{bytes:7066,md5:"2af27a9299db43357ee498e514e17fda",
name:"asami_special_out.mp3"},{bytes:10642,md5:"81f8633a566c7747fc9c9bc856cc4c0c",name:"asami_special_out.ogg"},{bytes:2828,md5:"7acd6e7a66e364d2b5db4be4567614a3",name:"ball_lost.mp3"},{bytes:5979,md5:"d71efc657ca315a10f71c29e03c682a4",name:"ball_lost.ogg"},{bytes:11304,md5:"baa5e5ea6a1f9c8b14f8090611c283cb",name:"boo_1.mp3"},{bytes:15381,md5:"49d38340c1d8b73018bff5ff8764fb25",name:"boo_1.ogg"},{bytes:3712,md5:"a254ad87e3e790487d3f68b213c64773",name:"bounce_1.mp3"},{bytes:6736,md5:"eaae8a0c54326bd089aaa40536592bce",
name:"bounce_1.ogg"},{bytes:3193,md5:"e8f8d60bd4a283fc4754b5f35b93c506",name:"bounce_2.mp3"},{bytes:6139,md5:"f7310c2b58a885ed68a08d6b3d29dc6c",name:"bounce_2.ogg"},{bytes:4026,md5:"d326e72e4d529a0efa96aec39706a5b7",name:"bounce_slime.mp3"},{bytes:6845,md5:"3fa39968ad650a6b6b9ff9cae7825e80",name:"bounce_slime.ogg"},{bytes:12319,md5:"53e93b3c952c7359d8959ef114c56b08",name:"cheer_1.mp3"},{bytes:16716,md5:"236d61c1480df0982b5168450bb72bf5",name:"cheer_1.ogg"},{bytes:10603,md5:"45c45434cdc5be5eebc2eb240433bd0c",
name:"craig_special.mp3"},{bytes:14945,md5:"08979d8b707841dd1da551bae423fd8e",name:"craig_special.ogg"},{bytes:5142,md5:"29e49f244eca46c4b40570b3e6399aeb",name:"craig_special_in.mp3"},{bytes:8167,md5:"e9e214a6eccd38a5db50b4f266bb29f6",name:"craig_special_in.ogg"},{bytes:9283,md5:"0a1bf2fbc019adfe91e4f59bd502e124",name:"craig_special_land.mp3"},{bytes:13461,md5:"8e0196182f50f844f1a98723561dee3a",name:"craig_special_land.ogg"},{bytes:5923,md5:"bbd411c3ab782a393bc528ebb8ee4f9e",name:"donnie_special.mp3"},
{bytes:9615,md5:"0aefbced005e2b5aafdd65645a64fcda",name:"donnie_special.ogg"},{bytes:8444,md5:"6cd88d178532fbc1dbc4fff16fcc3160",name:"donnie_special_in.mp3"},{bytes:12251,md5:"920df5414d61d1767ef117913d1dfabf",name:"donnie_special_in.ogg"},{bytes:3610,md5:"0a416a7e908536adeadcb028bb192d38",name:"dunk.mp3"},{bytes:6215,md5:"80ee91103329e87312956f29fc3ee30f",name:"dunk.ogg"},{bytes:12217,md5:"90459a84bccbf6eb9277877556318dca",name:"dunk_breaker.mp3"},{bytes:15858,md5:"e9e0a8ec38ee601d7065c6926ac7d41f",
name:"dunk_breaker.ogg"},{bytes:3946,md5:"57f4d0453db451f27feb813418f06745",name:"dunk_miss.mp3"},{bytes:10614,md5:"6b260c45a0920256ab729102ec9fc117",name:"dunk_miss.ogg"},{bytes:3452,md5:"4e7a928c7a90c3928c43c4426e4b27fe",name:"dunk_slime.mp3"},{bytes:7481,md5:"a708f5abfc63c224ffc13e50aed2fc9b",name:"dunk_slime.ogg"},{bytes:6574,md5:"a8507391c2b299c5d85bb2b6b1f9e6f4",name:"dunkality.mp3"},{bytes:10224,md5:"3d330c16cd0261794d1d13fe9d0c08ee",name:"dunkality.ogg"},{bytes:16429,md5:"4e485f7d32e0170ddd00081b177a27f9",
name:"fail.mp3"},{bytes:17042,md5:"9fd966f59cfe7ec34f88a3e9e06679e3",name:"fail.ogg"},{bytes:3818,md5:"7ee8c0cc75e2d2acc47adcd5a48a5128",name:"fee_special.mp3"},{bytes:6991,md5:"77d70a89053a4a7bae6eb29d49de15b8",name:"fee_special.ogg"},{bytes:3504,md5:"c7607c2be5410d764860904c12d2a89c",name:"foo_special.mp3"},{bytes:6439,md5:"00304e5d9dee2e133eb77523ee3fadd7",name:"foo_special.ogg"},{bytes:2437,md5:"ca0d2df5e903f5f5c60d998851570fb9",name:"foo_special_pre.mp3"},{bytes:6059,md5:"fe3b2441339ac1f14554068a56146391",
name:"foo_special_pre.ogg"},{bytes:224091,md5:"22571a62b07a3722fd68685aa92609fd",name:"gameplay.mp3"},{bytes:256333,md5:"00799e2bd397e0deb139e9ad25ce2a32",name:"gameplay.ogg"},{bytes:11850,md5:"f1de50003da6035e96879d6be7694e4c",name:"glass_break.mp3"},{bytes:15965,md5:"759885b792e70c5fe72fd9a7119dbd4d",name:"glass_break.ogg"},{bytes:1242,md5:"19467a54a79d81cdb5e9cccad51f3527",name:"hit_1.mp3"},{bytes:4501,md5:"26d864e1080c4ba5837209df535621f6",name:"hit_1.ogg"},{bytes:1502,md5:"5f3a71982c5c73bf4664016d7fc25375",
name:"hit_2.mp3"},{bytes:4821,md5:"2ff6abd72ae318e316639d9bd1e34a1a",name:"hit_2.ogg"},{bytes:2177,md5:"c77c6786ab578b9b3f6efbbd22ef4574",name:"hurt_female.mp3"},{bytes:4975,md5:"71ae6611e600929b5841eabf265f05bd",name:"hurt_female.ogg"},{bytes:1996,md5:"0b3bc4b84656f97342fc1f8b7ce0a38b",name:"hurt_male.mp3"},{bytes:5037,md5:"6b64d8a85f2027e59f7f510251f19bcf",name:"hurt_male.ogg"},{bytes:1918,md5:"609030f3c1ebfe2d0bc00dba6376f886",name:"jump.mp3"},{bytes:5390,md5:"be2673dea7df7711f1232cddcce78fc8",
name:"jump.ogg"},{bytes:6494,md5:"68bafdd5109f97367127cf49840b4ccb",name:"korra_special_in.mp3"},{bytes:7847,md5:"fe3900cff08656834374cc887257e6b0",name:"korra_special_in.ogg"},{bytes:71827,md5:"b55d2026ff8d88421c3ed82072acd487",name:"korra_special_loop.mp3"},{bytes:87838,md5:"1942dce7e495cb6c5829d9118d3e12b6",name:"korra_special_loop.ogg"},{bytes:5376,md5:"5aa5d55826b9321f37f73b56f0a12398",name:"leo_special_pre.mp3"},{bytes:8910,md5:"2992d2e0bd44a9a8947749b66234c6ec",name:"leo_special_pre.ogg"},
{bytes:12294,md5:"9723fb40e4232d7fc60fac998730d931",name:"mega_dunk.mp3"},{bytes:16773,md5:"2100e067849ece72ad12210e431b8354",name:"mega_dunk.ogg"},{bytes:10861,md5:"e6e4d93187a82203cf06c6e04b2e1323",name:"mega_start.mp3"},{bytes:14561,md5:"e629869191281cc00cd45ed60b774fb4",name:"mega_start.ogg"},{bytes:178344,md5:"febd6e64d0e768ba54eb3f534911f05a",name:"menu.mp3"},{bytes:194363,md5:"04202e48e4e7236827cb1b287fbb9e84",name:"menu.ogg"},{bytes:1658,md5:"fcf4752fec396539661d62c12fc053f4",name:"mike_spinning_arms.mp3"},
{bytes:4767,md5:"235271fef51d933240d09ac842020980",name:"mike_spinning_arms.ogg"},{bytes:2543,md5:"e06878bb019a8ec55507c036902a79dc",name:"ninja_jump.mp3"},{bytes:5897,md5:"264d4a62db7f030f96d5c549db3a7c6c",name:"ninja_jump.ogg"},{bytes:7638,md5:"42fa2223e670dba62e96a2525df18cde",name:"ooh_1.mp3"},{bytes:11360,md5:"3849dbfa527726c2a79d35655f50678e",name:"ooh_1.ogg"},{bytes:2048,md5:"db26624f3ef70ba3948bfc77c6685e38",name:"patrick_bite.mp3"},{bytes:5952,md5:"41401b2d8e7b5d15011ff6627e4c4349",name:"patrick_bite.ogg"},
{bytes:1138,md5:"004d1bd7ceafbed6b3b03b65e20614c0",name:"patrick_pop.mp3"},{bytes:4098,md5:"a3609cf141611cb43bee925fd92a9d12",name:"patrick_pop.ogg"},{bytes:3264,md5:"6241db70d26349126669545222c78466",name:"pickup.mp3"},{bytes:5766,md5:"db963af956cfd43e316cae7bca4c86dc",name:"pickup.ogg"},{bytes:2747,md5:"56b2a77ea14ce502d1d112f5aee479ef",name:"posterized.mp3"},{bytes:5444,md5:"dc71ea340b50566f5795be9feb2e4327",name:"posterized.ogg"},{bytes:9067,md5:"5ca16d12a453eb75d7f180cb0dc01c30",name:"raph_special_pre.mp3"},
{bytes:13921,md5:"a205dd0a684fa08e25a40aae02430d31",name:"raph_special_pre.ogg"},{bytes:4415,md5:"d865a56f59ac9ac71d9f1e960747a2da",name:"ref_whistle_1.mp3"},{bytes:6408,md5:"63507a24d1f84205e453b1dfbd7f074a",name:"ref_whistle_1.ogg"},{bytes:8444,md5:"6cd88d178532fbc1dbc4fff16fcc3160",name:"rocket.mp3"},{bytes:12251,md5:"61044ac1a2755d4f9ad01f4f6e7a0382",name:"rocket.ogg"},{bytes:6029,md5:"003bf929b18d8cbbc4be5e8398f81c98",name:"sanjay_special_in.mp3"},{bytes:10622,md5:"a6b035946fe50b6394dbfb7016dedeea",
name:"sanjay_special_in.ogg"},{bytes:10866,md5:"4cf5cdbaba40bfb0006df3f49be305a0",name:"sanjay_spin.mp3"},{bytes:13830,md5:"e6ce76a7d4a9b8c26d748998922607f2",name:"sanjay_spin.ogg"},{bytes:4675,md5:"2ab808898d39aeea38b26f3e39ae620f",name:"smoke_puff.mp3"},{bytes:7844,md5:"eed4ef3e8053c3c1f45fabd1759bc48b",name:"smoke_puff.ogg"},{bytes:4702,md5:"6151eb13e1cab519119520fed8cbb5ba",name:"smoke_puff2.mp3"},{bytes:7839,md5:"6fa8557ea640b377747ceb05e9c24333",name:"smoke_puff2.ogg"},{bytes:2386,md5:"ee4c7d8cd105e4b2f60e289e749b23dd",
name:"sneaker_1.mp3"},{bytes:7056,md5:"71f6fb191d4d9132d168ebe09e9fd713",name:"sneaker_1.ogg"},{bytes:2543,md5:"6d5abd3593459aa6a0e7c4d5ac5a1213",name:"sneaker_2.mp3"},{bytes:6985,md5:"d8eec2ae5c59f6b185473afd70fdbcda",name:"sneaker_2.ogg"},{bytes:3712,md5:"1f62dd21d8bae631533990828695e4e1",name:"sneaker_3.mp3"},{bytes:9827,md5:"e00fd43ee78f9c112c89147e5d47290e",name:"sneaker_3.ogg"},{bytes:3557,md5:"25772eac0ce8ce1f759dd1e6d6d30e5c",name:"spongebob_special.mp3"},{bytes:5746,md5:"9797f017feed05941ebc02a96f5f3e85",
name:"spongebob_special.ogg"},{bytes:6002,md5:"a43ef7c11be765460615868a953dacba",name:"spongebob_special_in.mp3"},{bytes:9025,md5:"82583ccf27128d7a9492246e1c610f72",name:"spongebob_special_in.ogg"},{bytes:5273,md5:"1264d21910dc9e9dd38fa62a813ffb8c",name:"super_ready.mp3"},{bytes:7932,md5:"06e47cbeed602998679710039f43bf42",name:"super_ready.ogg"},{bytes:1658,md5:"fcf4752fec396539661d62c12fc053f4",name:"swoosh.mp3"},{bytes:4767,md5:"512d8a1cdb68a06eb80e98a929e5c979",name:"swoosh.ogg"},{bytes:1867,md5:"7004a15ab2e1531e9be233ce344a80bd",
name:"throw_stars.mp3"},{bytes:6037,md5:"ad099c1f0a3342d79c04a989f01c9a98",name:"throw_stars.ogg"},{bytes:19363,md5:"a07820a986eac400c697677a546ce53c",name:"win.mp3"},{bytes:19934,md5:"94a04c57c3dfb6f90281af6d9dd38cdf",name:"win.ogg"}],ui_pause:[{bytes:69980,md5:"033b1c2d01298a1810d6a38a544bd899",name:"bg.jpg"}],posters_preview:[{bytes:34779,md5:"80ec3bc758ec7d40bf64df92d717e26e",name:"asami_poster.jpg"},{bytes:34943,md5:"e7b432ab70d126f686d2ed1bf00201a1",name:"craig_poster.jpg"},{bytes:32359,md5:"fd037d163372ed053d40e7554bbf1809",
name:"donnie_poster.jpg"},{bytes:36840,md5:"3ebdb4981ea2a841ec6a8d8f2073b56f",name:"fee_poster.jpg"},{bytes:31073,md5:"febaa6eebdedf4baa3689001c50c8a0b",name:"foo_poster.jpg"},{bytes:33702,md5:"66545fc308ce5b20b251d17f9b3c86e8",name:"goat_poster.jpg"},{bytes:33178,md5:"a032dce307968f22305a74e789be0d07",name:"korra_poster.jpg"},{bytes:36494,md5:"f43f92f5de584ccde0b2530f66b833be",name:"leo_poster.jpg"},{bytes:31908,md5:"5dc02835098ed4bbd921f199d5780b20",name:"lincoln_poster.jpg"},{bytes:88559,md5:"774a14fd5eb40e9ce127d57a4df9afba",
name:"lynn_poster.jpg"},{bytes:36648,md5:"7569f52e879542c2d9121fd117e92ca6",name:"mike_poster.jpg"},{bytes:36967,md5:"38acec0304c722576d5444495ecdeba7",name:"patrick_poster.jpg"},{bytes:31071,md5:"9267f6f3cbc7fa99a8a3298e64f8dbd2",name:"pig_poster.jpg"},{bytes:32049,md5:"239516672e1019ab350430f4a2ba79f9",name:"raph_poster.jpg"},{bytes:34460,md5:"70ee88daae9296eda10cc21c4b2fccd4",name:"sanjay_poster.jpg"},{bytes:36222,md5:"9669c122befcc2250ce7c272bdb52733",name:"spongebob_poster.jpg"}],sprites_env2_low:[{bytes:78428,
md5:"5e9eda1060a68e9789a1645a2fecbf59",name:"env_2_6_bg_l.jpg"},{bytes:77683,md5:"ec04db005452f443faf2529bcc90dc53",name:"env_2_6_bg_r.jpg"}],htp_mobile:[{bytes:41293,md5:"4bafeab9966993162a38072fe1dfe4e4",name:"htp_1.png"},{bytes:57737,md5:"e96fe80bb0cd866330db1502e704009c",name:"htp_2.png"},{bytes:54910,md5:"0b3fc2f483082b899addf97c22e62698",name:"htp_3.png"},{bytes:66273,md5:"af1638b057e4341a779ef10a8dcb6d83",name:"htp_4.png"},{bytes:90636,md5:"9a3a9f5401ad026df427501268316a1b",name:"htp_5.png"},
{bytes:93117,md5:"314ca985ba5bc419bfb4ed4c391715bd",name:"htp_6.png"},{bytes:58404,md5:"fc40ce53e5555324738cf8aa2fe6d74a",name:"htp_7.png"}],team_tmnt_2:[{bytes:4964,md5:"786714d1e5cc7e4d8f46a5f9c47aeb9a",name:"donnie/donnie0.json"},{bytes:346157,md5:"f37e7268cc74f09c22c448683fa74449",name:"donnie/donnie0.png"},{bytes:7403,md5:"475e2fd7044a1303d392bca50d33cae2",name:"donnie/donnie1.json"},{bytes:394884,md5:"825d340381b896bcba4a8f250efa8445",name:"donnie/donnie1.png"},{bytes:8809,md5:"57d1e5d33071c0fa7fd59ec5c2f7f0ba",
name:"donnie/donnie2.json"},{bytes:507555,md5:"05905f36d0aee5be60c3ab7cd673999c",name:"donnie/donnie2.png"},{bytes:15652,md5:"618f0c8e7877ae689113d09fbbd96a32",name:"donnie/donnie3.json"},{bytes:601050,md5:"439f4fa9bfd70a8980f77d4725038697",name:"donnie/donnie3.png"},{bytes:5391,md5:"5f256d0cd6368fbf22aa2a4fdce4f410",name:"donnie/donnie4.json"},{bytes:208495,md5:"c4286c77992d2801d7265c161d03a253",name:"donnie/donnie4.png"},{bytes:3287,md5:"128759d145bdf217badd00b6e5278cfc",name:"donnie_flump/atlas0.png"},
{bytes:54017,md5:"e5b570da9ba4909efaeb1f2a4e7453f3",name:"donnie_flump/library.json"},{bytes:6040,md5:"8a364b12b2eaba31c56d55df5b873d61",name:"field_logo.png"},{bytes:8489,md5:"875effb68dfe81c8d78dd6bbb8f9ca3e",name:"raph/raph0.json"},{bytes:484028,md5:"bfd3157b6e691e82ae7bfcf6cf8acc13",name:"raph/raph0.png"},{bytes:13533,md5:"27e3f7dd73a26e6f2631b60336b2440b",name:"raph/raph1.json"},{bytes:590084,md5:"c09325e149106753eac46d725ea0342c",name:"raph/raph1.png"},{bytes:10581,md5:"3e6153e449a2669e0f72f85943031f03",
name:"raph/raph2.json"},{bytes:295260,md5:"7b8b83dcafbd7755a92d02b66a22b031",name:"raph/raph2.png"},{bytes:2914,md5:"52aaad9ec41baed79abd9538044b2a2c",name:"raph_flump/atlas0.png"},{bytes:520,md5:"e1b35f4ef5538f34fd6cc83902c91fd2",name:"raph_flump/atlas1.png"},{bytes:48952,md5:"9e8ea600230ab0e1a224f60080badd42",name:"raph_flump/library.json"}],team_tmnt_1:[{bytes:6040,md5:"8a364b12b2eaba31c56d55df5b873d61",name:"field_logo.png"},{bytes:4063,md5:"33fcd17e89bc970ccc45d0254aa93b7e",name:"leo/leo0.json"},
{bytes:244851,md5:"e20f8f78dbcb4db44b3cf6c1c69f032e",name:"leo/leo0.png"},{bytes:11029,md5:"9b11d191fdd4b24ecdec23791fba5e03",name:"leo/leo1.json"},{bytes:506621,md5:"74be810e02ee6f99c11c25b76cf8c93d",name:"leo/leo1.png"},{bytes:12385,md5:"bce2c10bc8a7acd41b631d98cd7a69e5",name:"leo/leo2.json"},{bytes:552780,md5:"59ca7584c8b4593a858980a5effc54e6",name:"leo/leo2.png"},{bytes:7729,md5:"756a670da4b266a81c9eb9d00fd96019",name:"leo/leo3.json"},{bytes:268272,md5:"72b7df9f7ff46952f72a64999ef269c5",name:"leo/leo3.png"},
{bytes:2988,md5:"95292dd84b470f8c2ff37323fb1ac787",name:"leo_flump/atlas0.png"},{bytes:521,md5:"dfec3b554335ecb3687ab8e7262cea03",name:"leo_flump/atlas1.png"},{bytes:44032,md5:"e7104d30572a5afca7c1fae1cd8afbad",name:"leo_flump/library.json"},{bytes:13293,md5:"bf228ba3d03014a5585ae963998dabaa",name:"mike/mike0.json"},{bytes:553822,md5:"6b573307a7d6bba6c2f0a450617c82ad",name:"mike/mike0.png"},{bytes:12410,md5:"4f3084b54434f81595f1fb22ccf71851",name:"mike/mike1.json"},{bytes:491378,md5:"159eb41427b4e7ace3be89a830b31581",
name:"mike/mike1.png"},{bytes:11803,md5:"5aef8f2e2ab24e67f85f6486ddfc4dc5",name:"mike/mike2.json"},{bytes:479910,md5:"4ded16e9108227d9a48ec44695af280d",name:"mike/mike2.png"},{bytes:3365,md5:"596e48a1b17cdf38a4f2484e8eb316f3",name:"mike_flump/atlas0.png"},{bytes:53588,md5:"3c601149cf7781b08a59c672406a2f98",name:"mike_flump/library.json"},{bytes:1805,md5:"d305697c90f0aedb4b472a93014dabbd",name:"mike_fx/mike_fx.json"},{bytes:20686,md5:"4e037d0677b775d028b24af239c11727",name:"mike_fx/mike_fx.png"}],
team_sc:[{bytes:30276,md5:"847199d5debf27e9ec18ea3532e66cfb",name:"craig/craig.json"},{bytes:613365,md5:"089f6e98b4c30379793a13206b6d4d28",name:"craig/craig.png"},{bytes:2225,md5:"951e944a9046ee257cfdec766b9b2b3f",name:"craig_flump/atlas0.png"},{bytes:19053,md5:"05694416405826ec10278c3b6bde61fa",name:"craig_flump/library.json"},{bytes:5670,md5:"a01c0fff44a76eb5837dd64bd52f842b",name:"field_logo.png"},{bytes:19218,md5:"c0c309a1d6e17a701df4f263fc4feb13",name:"sanjay/sanjay0.json"},{bytes:326200,md5:"b2c1755173a4182c6aba3da4599cea29",
name:"sanjay/sanjay0.png"},{bytes:15332,md5:"e828cfdbfab2e3bfeb682bfbc321f346",name:"sanjay/sanjay1.json"},{bytes:315014,md5:"63fd43f4ad44017d900d0deb5966a7a0",name:"sanjay/sanjay1.png"},{bytes:2537,md5:"90e9a6a296c9dd51387d9b4cdb3f1bd7",name:"sanjay_flump/atlas0.png"},{bytes:63572,md5:"63c172d730af45f163917aaa995fa150",name:"sanjay_flump/library.json"}],team_sb:[{bytes:6058,md5:"99ae2617b92b8301af1efc912dc92e18",name:"field_logo.png"},{bytes:2511,md5:"93dcadbf8622c676745bc735dd61990b",name:"hook1.png"},
{bytes:1558,md5:"dac36ac3fc04ff6aa81c0e2959c6263a",name:"hook2.png"},{bytes:3641,md5:"bf960d7a6fd24b6afb6535c1094e0d89",name:"hook3.png"},{bytes:9940,md5:"66c33f6bd4f561db05445122bfc0d2ec",name:"patrick/patrick0.json"},{bytes:303460,md5:"6810bff6aee81e54aed049f09c6537c6",name:"patrick/patrick0.png"},{bytes:19667,md5:"faaacb5491b3709ac2ec300ee1f62b99",name:"patrick/patrick1.json"},{bytes:466834,md5:"d2d4957ddeb3ceb264efe76f60b568f4",name:"patrick/patrick1.png"},{bytes:4078,md5:"4862447f8531526d9dc03cc9a0f94132",
name:"patrick/patrick2.json"},{bytes:88014,md5:"79bc3e5973e9dee8e60fb0501e82a5e0",name:"patrick/patrick2.png"},{bytes:3421,md5:"9ed83eaa40ac8e5477f1fa61104381ce",name:"patrick_flump/atlas0.png"},{bytes:51385,md5:"8f7f04d38f5d4a65ca976601ba2eb08d",name:"patrick_flump/library.json"},{bytes:23790,md5:"3b7599c0f1d322b34c412e29ace7f75c",name:"spongebob/spongebob0.json"},{bytes:665061,md5:"3aff38b2bdf9d29711cdcde16693def2",name:"spongebob/spongebob0.png"},{bytes:7164,md5:"28c27444b7ee755d0b53d2cabfcbe910",
name:"spongebob/spongebob1.json"},{bytes:158140,md5:"aa6b72baadc28e255614c5ba45c51e24",name:"spongebob/spongebob1.png"},{bytes:2621,md5:"16086d3dccc2a97e77cece65da075ea4",name:"spongebob_flump/atlas0.png"},{bytes:42895,md5:"98d6b6ba4ac5118f99f819df60a03560",name:"spongebob_flump/library.json"}],team_hb:[{bytes:13199,md5:"8c9c63079799ba7a873dc193c598351c",name:"fee/fee0.json"},{bytes:392004,md5:"bbad08b44bb60c92f1e50d43b90504ce",name:"fee/fee0.png"},{bytes:9666,md5:"950a8119d48bdc1ec8f026fbed93cfec",
name:"fee/fee1.json"},{bytes:280474,md5:"af8c46cfe10a16fce3bf62e481981a95",name:"fee/fee1.png"},{bytes:12038,md5:"52566c02ce4c6a1d8a23e327554f9172",name:"fee/fee2.json"},{bytes:282944,md5:"2f977d557a14c0749a7266cee8bf050a",name:"fee/fee2.png"},{bytes:5133,md5:"37153aba3a126cd57e04fce859708c04",name:"fee_flump/atlas0.png"},{bytes:51646,md5:"5aa1ec258945ff36ee3e5bd63d533380",name:"fee_flump/library.json"},{bytes:7793,md5:"d4c825aeb2c145f6cbc33280ade74a4a",name:"field_logo.png"},{bytes:20647,md5:"76998251cc0c16cefee2681a66e44e3d",
name:"foo/foo0.json"},{bytes:373690,md5:"f6bad4ac3d3045abe315cfe1995e900d",name:"foo/foo0.png"},{bytes:16154,md5:"6d5e62eb5e7c4ede814312e0a9a7210a",name:"foo/foo1.json"},{bytes:348467,md5:"b915305f12969dfa030f78b923ab7e10",name:"foo/foo1.png"},{bytes:2726,md5:"d6bdfe4e0918cd64c373c1bfbba3ce18",name:"foo_flump/atlas0.png"},{bytes:50982,md5:"225fd9bec43181a79725cb62c075d5b6",name:"foo_flump/library.json"}],sprites_pack:[{bytes:1996,md5:"2275c57675f753da3f885d03638dc673",name:"ball.png"},{bytes:477,
md5:"b9972b4fdbe9aa9eb6e398ad0ce18bc2",name:"ball_white.png"},{bytes:1865,md5:"b82c5bbe5a8af9f86006c2265789c3d5",name:"baseball.png"},{bytes:477,md5:"b9972b4fdbe9aa9eb6e398ad0ce18bc2",name:"baseball_white.png"},{bytes:3873,md5:"a1a5a468a7ab79d999ffdb4ea6d9542d",name:"basket/basket.json"},{bytes:257089,md5:"1fa97a8e50187eb4efa1d9bf37bd1179",name:"basket/basket.png"},{bytes:2897,md5:"95e2804e272f345f610555a79be4b52e",name:"ellipse.png"},{bytes:1452,md5:"b5b5af8c0c916929e544d805ac305e48",name:"football.png"},
{bytes:846,md5:"fbafc5395b4e912bf4abdf1a3d553841",name:"football_white.png"},{bytes:11777,md5:"a1d940f9ddf7ed95f0670e406385bb85",name:"fx/fx.json"},{bytes:433411,md5:"b9819e209e34b2d7d4e45003b34efc1b",name:"fx/fx.png"},{bytes:5907,md5:"1358a555346c1ea88335d4f10bd4822f",name:"scoreboard/scoreboard.json"},{bytes:95291,md5:"c9b59c5ee50260f33b37117890173c54",name:"scoreboard/scoreboard.png"},{bytes:1932,md5:"847732daff557c67d4e44ea5dcd5490c",name:"slime_ball.png"},{bytes:767,md5:"8b18034c24cc3d8fd92fcc731ce168a6",
name:"slime_ball_white.png"},{bytes:1785,md5:"a3b2b85f529bd335046cddaed3a1fa2d",name:"soccer_ball.png"},{bytes:477,md5:"b9972b4fdbe9aa9eb6e398ad0ce18bc2",name:"soccer_ball_white.png"}],debug:[{bytes:455,md5:"3935d1f7b3defa042352e0e359209b60",name:"debug.json"},{bytes:469,md5:"04498b8ce7ef791030ebd51e6afb4525",name:"debug_example.json"},{bytes:7992,md5:"a2d0330d20f20de8490e83806e1c7871",name:"debug_font.fnt"},{bytes:1780,md5:"3c6dc308b980589bc4580aa9446c5f48",name:"debug_font.png"},{bytes:2197,md5:"37d9558189dd4cbffe736595c840600d",
name:"particles.pex"},{bytes:221,md5:"f1414380ccbb1cf9e58069cba28e904b",name:"sprite.png"}],sprites_env3:[{bytes:174727,md5:"75e76541c2c8a6fcb99e627a2443dec1",name:"env_3_5_bg_l.jpg"},{bytes:173679,md5:"66bdbd0add718f8bcf6e801fb3451dd0",name:"env_3_5_bg_r.jpg"}],sprites_env2:[{bytes:205852,md5:"875c1310d63a3cac79b64dd3335f4f1b",name:"env_2_6_bg_l.jpg"},{bytes:201567,md5:"7503100fba8f13b53674e01135d50a53",name:"env_2_6_bg_r.jpg"}],sprites_env1:[{bytes:191947,md5:"07d9c3f65d1c314218280d21ff186a6c",
name:"env_1_4_bg_l.jpg"},{bytes:189249,md5:"2c749fee1fd0bc0d7ef2d845b28d3fe6",name:"env_1_4_bg_r.jpg"}],sprites_env1_low:[{bytes:62595,md5:"4072bd31180cb0cc4460c8adbe1c5802",name:"env_1_4_bg_l.jpg"},{bytes:63160,md5:"64f547ad6345240873a6a6cb070f5093",name:"env_1_4_bg_r.jpg"}],text:[{bytes:15732,md5:"8a11399431511512db8a1ddcb150e4ad",name:"localization.xml"},{bytes:143,md5:"f79720275ce71f51b2920ad544a02548",name:"README.md"}],temp:[],crowd:[{bytes:5019,md5:"c98e89c1da69fb28a04cf5b0c51fc210",name:"april/april.json"},
{bytes:14233,md5:"3c8dddaedcf69c2f5e87f1aa7717083e",name:"april/april.png"},{bytes:4022,md5:"de4914f91e98a85df5ef8c3a921808d9",name:"crab/crab.json"},{bytes:25571,md5:"dfd14d64be14cae5ca3c3b0959bcbc6f",name:"crab/crab.png"},{bytes:5523,md5:"8dfc050fd891e503672c4aa5971001a4",name:"hector/hector.json"},{bytes:15736,md5:"2a13eb8a2932e240021d15617c0c3e2a",name:"hector/hector.png"},{bytes:6654,md5:"50e1cebb151c42c757fcbcaa14e9acee",name:"megan/megan.json"},{bytes:39320,md5:"08a6fe32549cb84846252a025f3039cf",
name:"megan/megan.png"},{bytes:4501,md5:"091cfe0bd6b341be57a8799e2cd9685f",name:"splinter/splinter.json"},{bytes:54378,md5:"d70a2dbbf91e54a47ce9c703c7e2e6f0",name:"splinter/splinter.png"}],crowd_bg:[{bytes:3722,md5:"ecfdab72e81700a0a9630b5b5d70a43d",name:"bell/bell.json"},{bytes:20499,md5:"3927a97fbff9a411bbf855952393e571",name:"bell/bell.png"},{bytes:3954,md5:"71f7d924bb7d58ee44ab81ac9b2abf7d",name:"chef/chef.json"},{bytes:34266,md5:"806a48f10488e8139a5a4cb9ca201c74",name:"chef/chef.png"},{bytes:4767,
md5:"81ee030bb26f72a9c887bf488d28a8a0",name:"jelly/jelly.json"},{bytes:8109,md5:"7945900028e7fe8cb4cbea9293df2e76",name:"jelly/jelly.png"},{bytes:3052,md5:"26caf2162437e60a7f8fac321639f699",name:"krang/krang.json"},{bytes:16006,md5:"1d0a8dd4f10e83672248664234c3b8b0",name:"krang/krang.png"},{bytes:5417,md5:"b7e845fb7b284577c610b8cd226d81a9",name:"lightgreenfish/lightgreenfish.json"},{bytes:12474,md5:"ffea9667bf14ba15a189d8522c1d8273",name:"lightgreenfish/lightgreenfish.png"},{bytes:3538,md5:"b436f0fbedeb51b08874fa1473febf04",
name:"mrkrabs/mrkrabs.json"},{bytes:24450,md5:"d816855b84d09986e5ba674576c1f571",name:"mrkrabs/mrkrabs.png"},{bytes:7548,md5:"03d39e074aff346ee1361dc2c3b8ddb9",name:"mrleslie/mrleslie.json"},{bytes:12881,md5:"3fa67166c2fd84eb71f6eb585f9af5ff",name:"mrleslie/mrleslie.png"},{bytes:3720,md5:"29db1c271ba4f6a13709b26ac5195bea",name:"shredder/shredder.json"},{bytes:21141,md5:"6498d24e6fc1012b6679ee013f21bd5a",name:"shredder/shredder.png"}],config:[{bytes:1100,md5:"70de4f1668c6d10de1679af3cd83bf06",name:"config.json"}]}]}};
Aa._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?!1:null!=(new XMLHttpRequest).withCredentials;a||null;return a}();D._scratchPoint=new cb;Ze.NEWLINE=new dh(10);$c._sharedEvent=new Qj;Db._sharedEvent=new Rj;rb._sharedEvent=new Sj;We.CANVAS_TEXTURES=(new Nb("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);ca._mediaRefCount=0;ca._detectBlobSupport=!0;ka.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];ka.SHOULD_HIDE_MOBILE_BROWSER=window.top==
window&&(new Nb("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);qa._detectSupport=!0;ed._scratchMatrix=new bd;M.canadaTrackingEnabled=!1;M.isReady=!1;bl.skipTutorial=!1;fe.defaultPack="ui_loading";Ie.COLOR_FILL=0;xc.Grid={x:50,y:146,perRow:6,spacing:{x:108,y:100}};Id.Grid={x:40,y:150,perRow:6,spacing:{x:150,y:40}};sd.Grid={x:290,y:30,perRow:4,positions:[{x:115,y:100},{x:230,y:100},{x:345,y:100},{x:460,y:100},{x:58,y:200},{x:172,y:200},{x:287,y:200},{x:402,y:200},{x:0,y:300},{x:115,y:300},
{x:230,y:300},{x:335,y:300},{x:172,y:400},{x:287,y:400},{x:517,y:200},{x:450,y:300}]};la.codesUnlocked=[];Bh.DefaultScene="title";Bh.scenes=function(){var a=new K;a.set("Loading",Ua);a.set("Gameplay",Ch);a.set("GameplayLoading",Dh);a.set("Editor",Eh);a.set("EditorLoading",Fh);a.set("Win",df);a.set("End",ef);a.set("Title",Ie);a.set("Mode",Gh);a.set("HallOfFame",Hh);a.set("Stats",xc);a.set("Posters",Ih);a.set("SelectLevel",Id);a.set("Test",Jh);a.set("SelectCharacter",sd);a.set("Pause",Kh);a.set("PromoScreen",
la);a.set("NewCharacter",Lh);a.set("NewPoster",Mh);a.set("Help",Nh);a.set("NickSportPopup",Oh);return a}(this);Rc.BALL_CONTACT_TYPE="BALL";Rc.floorY=180;Pf.DEFAULTS=[];Sc.CHARACTER_CONTACT_TYPE="CHARACTER";vb.minHangTime=0;vb.defaultSuccessEndDelay=0.5;vb.defaultDunkData={direction:1,loop:!1,loopPre:!1,loopIn:!1,loopOut:!1,loopHang:!1};ge.DEFAULTS={data:{x:100,y:0,cooldown:0.1,time:0.2,delay:0.2,anim:"attack"},offset:{x:0,y:0}};Sf.DEFAULTS={data:{x:0,y:0,cooldown:0.1,time:0.2,delay:0.2},offset:{x:0,
y:0}};X.ENABLE_POINTER=!1;X.mobilePackSuffix="_mobile";X.lowEndPackSuffix="_low";yb.EDITOR_DEFAULTS={};vd.DEFAULTS={pack:"",asset:"",layer:"default",offset:{x:0,y:0},overrides:{},start:null,autoRemove:!1,delay:0,loop:!0,fps:-1};gf.DEFAULTS={flumpAsset:null,animOffset:{x:0,y:0},flumpOffset:{x:0,y:0}};wd.DEFAULTS={active:!1,offsetX:0,offsetY:0};Vf.DEFAULTS=[];Wf.DEFAULTS=[];Xf.DEFAULTS={pickup:"speed_pickup",time:20,rangeX:200};Yf.DEFAULTS={effect:{jumpForce:1,runForce:1,airForce:1,maxVelocityX:1,maxVelocityXWithBall:1,
maxVelocityY:1,gravFactor:1,duration:1}};yc.PlayerID="player";yc.DEFAULTS={behaviorPack:"ai",enabled:!0,detectionDistance:150,playerDistance:300,behaviorTickRate:0.5};$f.DEFAULTS=yc.DEFAULTS;cl.components=function(){var a=new K;a.set("template",Tf);a.set("display",X);a.set("mixed_anim",gf);a.set("levelTarget",xd);a.set("character",Sc);a.set("weapon",Sf);a.set("ball",Rc);a.set("basket",Of);a.set("scoreboard",Vf);a.set("htpboard",Wf);a.set("pickup_spawner",Xf);a.set("pickup",Yf);a.set("effect",Qh);
a.set("crowd",Zf);a.set("flash",hf);a.set("superdunk",v);a.set("craig_special",Rh);a.set("leo_special",lb);a.set("donnie_special",Sh);a.set("mike_special",Th);a.set("spongebob_special",Uh);a.set("patrick_special",Vh);a.set("sanjay_special",Wh);a.set("raph_special",Xh);a.set("fee_special",Yh);a.set("foo_special",Zh);a.set("korra_special",$h);a.set("asami_special",ai);a.set("pig_special",bi);a.set("goat_special",ci);a.set("lincoln_special",di);a.set("lynn_special",ei);a.set("basket_ai",$f);a.set("moving",
Pf);return a}(this);C.$name="nick_basketball";C.width=960;C.height=560;C.slimeBall=!1;C.superMoveTotal=100;C.superMovePerSecond=1;C.superMovePerDunk=10;C.superMovePerAttack=10;C.pointPerDunk=2;C.pointPerMegaDunk=3;sa.WAKE=1;sa.PROPS=2;sa.ANGDRAG=4;sa.ARBITERS=8;Va.gravity=1200;Va.fixedDt=0.025;Va.BallMaterial=new Le(10,0,2,1,0.001);Va.SlimeBallMaterial=new Le(10,0,2,0.75,0.001);Va.SuperBallMaterial=new Le(10,0,2,0.5,0.001);Va.RockMaterial=new Le(1,0,2,1,0.001);H.LOCK_KORRA=!1;H.TEAM_TMNT="team_tmnt";
H.TEAM_HARVEY_BEAKS="team_hb";H.TEAM_SPONGE_BOB="team_sb";H.TEAM_SANJAY_CRAIG="team_sc";H.TEAM_KORRA="team_korra";H.TEAM_PGBC="team_pgbc";H.TEAM_LOUD="team_loud";H.NUM_WIN_TO_UNLOCK=5;H.speedyFactor=1.2;H.poisonFactor=1.25;H.floatyFactor=0.75;H.levelModifiers=function(){var a=new K;a.set("level1",{playerSuperMoveFactor:1,aiSuperMoveFactor:0.5,aiSpeedFactor:0.75,aiWeapon:"punch_ai_easy",behaviorTickRate:0.4});a.set("level2",{playerSuperMoveFactor:1,aiSuperMoveFactor:0.5,aiSpeedFactor:0.8,aiWeapon:"punch_ai_easy",
behaviorTickRate:0.4});a.set("level3",{playerSuperMoveFactor:0.9,aiSuperMoveFactor:0.5,aiSpeedFactor:0.85,aiWeapon:"punch_ai_normal",behaviorTickRate:0.4});a.set("level4",{playerSuperMoveFactor:0.8,aiSuperMoveFactor:0.5,aiSpeedFactor:0.9,aiWeapon:"punch_ai_normal",behaviorTickRate:0.4});a.set("level5",{playerSuperMoveFactor:0.7,aiSuperMoveFactor:0.5,aiSpeedFactor:0.95,aiWeapon:"punch_ai_hard",behaviorTickRate:0.4});a.set("level6",{playerSuperMoveFactor:0.6,aiSuperMoveFactor:0.5,aiSpeedFactor:1,aiWeapon:"punch_ai_hard",
behaviorTickRate:0.35});a.set("level7",{playerSuperMoveFactor:0.5,aiSuperMoveFactor:0.5,aiSpeedFactor:1,aiWeapon:"punch_ai_xtrem",behaviorTickRate:0.16});return a}(this);H.leo={name:"leo",template:"leo",team:H.TEAM_TMNT,asset:H.TEAM_TMNT+"_1",locked:!1,unlocks:"mike",partner:"mike",jumpForce:5E3,runForce:180,airForce:120,maxVelocityX:325,maxVelocityXWithBall:250,maxVelocityY:800,gravFactor:1,gender:"male",numDunkAudio:4};H.raph={name:"raph",template:"raph",team:H.TEAM_TMNT,asset:H.TEAM_TMNT+"_2",
locked:!0,unlocks:null,partner:"donnie",jumpForce:5E3,runForce:180,airForce:120,maxVelocityX:325,maxVelocityXWithBall:250,maxVelocityY:800,gravFactor:1,gender:"male",numDunkAudio:6};H.mike={name:"mike",template:"mike",team:H.TEAM_TMNT,asset:H.TEAM_TMNT+"_1",locked:!0,unlocks:null,partner:"leo",jumpForce:5E3,runForce:180,airForce:120,maxVelocityX:325,maxVelocityXWithBall:250,maxVelocityY:800,gravFactor:1,gender:"male",numDunkAudio:5};H.donnie={name:"donnie",template:"donnie",team:H.TEAM_TMNT,asset:H.TEAM_TMNT+
"_2",locked:!1,unlocks:"raph",partner:"raph",jumpForce:5E3,runForce:180,airForce:120,maxVelocityX:325,maxVelocityXWithBall:250,maxVelocityY:800,gravFactor:1,gender:"male",numDunkAudio:6};H.foo={name:"foo",template:"foo",team:H.TEAM_HARVEY_BEAKS,asset:H.TEAM_HARVEY_BEAKS,locked:!0,unlocks:null,partner:"fee",jumpForce:5E3,runForce:180,airForce:120,maxVelocityX:325,maxVelocityXWithBall:250,maxVelocityY:800,gravFactor:1,gender:"male",numDunkAudio:5};H.fee={name:"fee",template:"fee",team:H.TEAM_HARVEY_BEAKS,
asset:H.TEAM_HARVEY_BEAKS,locked:!1,unlocks:"foo",partner:"foo",jumpForce:5E3,runForce:180,airForce:120,maxVelocityX:325,maxVelocityXWithBall:250,maxVelocityY:800,gravFactor:1,gender:"female",numDunkAudio:6};H.spongebob={name:"spongebob",template:"spongebob",team:H.TEAM_SPONGE_BOB,asset:H.TEAM_SPONGE_BOB,locked:!1,unlocks:"patrick",partner:"patrick",jumpForce:5E3,runForce:180,airForce:120,maxVelocityX:325,maxVelocityXWithBall:250,maxVelocityY:800,gravFactor:1,gender:"male",numDunkAudio:6};H.patrick=
{name:"patrick",template:"patrick",team:H.TEAM_SPONGE_BOB,asset:H.TEAM_SPONGE_BOB,locked:!0,unlocks:null,partner:"spongebob",jumpForce:5E3,runForce:180,airForce:120,maxVelocityX:325,maxVelocityXWithBall:250,maxVelocityY:800,gravFactor:1,gender:"male",numDunkAudio:6};H.sanjay={name:"sanjay",template:"sanjay",team:H.TEAM_SANJAY_CRAIG,asset:H.TEAM_SANJAY_CRAIG,locked:!1,unlocks:"craig",partner:"craig",jumpForce:5E3,runForce:180,airForce:120,maxVelocityX:325,maxVelocityXWithBall:250,maxVelocityY:800,
gravFactor:1,gender:"male",numDunkAudio:6};H.craig={name:"craig",template:"craig",team:H.TEAM_SANJAY_CRAIG,asset:H.TEAM_SANJAY_CRAIG,locked:!0,unlocks:null,partner:"sanjay",jumpForce:5E3,runForce:180,airForce:120,maxVelocityX:325,maxVelocityXWithBall:250,maxVelocityY:800,gravFactor:1,gender:"male",numDunkAudio:6};H.korra={name:"korra",template:"korra",team:H.TEAM_KORRA,asset:H.TEAM_KORRA,locked:H.LOCK_KORRA,unlocks:"asami",partner:"asami",jumpForce:5E3,runForce:180,airForce:120,maxVelocityX:325,maxVelocityXWithBall:250,
maxVelocityY:800,gravFactor:1,gender:"female",numDunkAudio:6};H.asami={name:"asami",template:"asami",team:H.TEAM_KORRA,asset:H.TEAM_KORRA,locked:!0,unlocks:null,partner:"korra",jumpForce:5E3,runForce:180,airForce:120,maxVelocityX:325,maxVelocityXWithBall:250,maxVelocityY:800,gravFactor:1,gender:"female",numDunkAudio:5};H.pig={name:"pig",template:"pig",team:H.TEAM_PGBC,asset:H.TEAM_PGBC,locked:!1,unlocks:"goat",partner:"goat",jumpForce:5E3,runForce:180,airForce:120,maxVelocityX:325,maxVelocityXWithBall:250,
maxVelocityY:800,gravFactor:1,gender:"male",numDunkAudio:3};H.goat={name:"goat",template:"goat",team:H.TEAM_PGBC,asset:H.TEAM_PGBC,locked:!0,unlocks:null,partner:"pig",jumpForce:5E3,runForce:180,airForce:120,maxVelocityX:325,maxVelocityXWithBall:250,maxVelocityY:800,gravFactor:1,gender:"female",numDunkAudio:3};H.lincoln={name:"lincoln",template:"lincoln",team:H.TEAM_LOUD,asset:H.TEAM_LOUD,locked:!1,unlocks:"lynn",partner:"lynn",jumpForce:5E3,runForce:180,airForce:120,maxVelocityX:325,maxVelocityXWithBall:250,
maxVelocityY:800,gravFactor:1,gender:"male",numDunkAudio:3};H.lynn={name:"lynn",template:"lynn",team:H.TEAM_LOUD,asset:H.TEAM_LOUD,locked:!0,unlocks:null,partner:"lincoln",jumpForce:5E3,runForce:180,airForce:120,maxVelocityX:325,maxVelocityXWithBall:250,maxVelocityY:800,gravFactor:1,gender:"female",numDunkAudio:3};H.list=[H.leo,H.raph,H.mike,H.donnie,H.foo,H.fee,H.spongebob,H.patrick,H.sanjay,H.craig,H.korra,H.asami,H.pig,H.goat,H.lincoln,H.lynn];l.StorageDefaults={};l.gameType=jb.TWO_VERSUS_TWO;
l.slimeBall=!1;l.round=1;jf.DefaultLayers=[{name:"bg",parallax:{x:1,y:1}},{name:"back",parallax:{x:1,y:1}},{name:"platform",parallax:{x:1,y:1}},{name:"default",parallax:{x:1,y:1}},{name:"front",parallax:{x:1,y:1}},{name:"player",parallax:{x:1,y:1}},{name:"fg",parallax:{x:1,y:1}}];Da.list="level1,level2,level3,level4,level5,level6".split(",");Da.PackName="levels";Da._levelCache=new K;Tb.DEFAULT_OFFET_TIME=1;Tb.DEFAULT_OFFET_EASING=q.quadInOut;jk.tutorials=[{titleID:"HTP_1",mobileBG:!0,imagePosition:{x:154,
y:100},texts:[{textID:"HTP_1_1",mobileVariant:!0,x:120,y:230,width:360,font:"htp_desc"}]},{titleID:"HTP_2",mobileBG:!0,imagePosition:{x:148,y:63},texts:[{textID:"HTP_2_1",mobileVariant:!0,x:120,y:230,width:360,font:"htp_desc"}]},{titleID:"HTP_3",mobileBG:!0,imagePosition:{x:134,y:56},texts:[{textID:"HTP_3_1",mobileVariant:!0,x:120,y:240,width:360,font:"htp_desc"}]},{titleID:"HTP_4",mobileBG:!0,imagePosition:{x:81,y:57},texts:[{textID:"HTP_4_1",mobileVariant:!1,x:120,y:230,width:360,font:"htp_desc"},
{textID:"HTP_4_2",mobileVariant:!1,x:265,y:100,width:0,font:"htp_desc"},{textID:"HTP_4_3",mobileVariant:!1,x:200,y:175,width:0,font:"htp_desc"}]},{titleID:"HTP_5",mobileBG:!1,imagePosition:{x:104,y:46},texts:[{textID:"HTP_5_1",mobileVariant:!1,x:120,y:230,width:360,font:"htp_desc"}]},{titleID:"HTP_6",mobileBG:!0,imagePosition:{x:96,y:45},texts:[{textID:"HTP_6_1",mobileVariant:!1,x:120,y:240,width:360,font:"htp_desc"},{textID:"HTP_6_2",mobileVariant:!1,x:115,y:200,width:360,font:"htp_desc"}]},{titleID:"HTP_7",
mobileBG:!1,imagePosition:{x:106,y:80},texts:[{textID:"HTP_7_1",mobileVariant:!1,x:165,y:190,font:"htp_title"},{textID:"HTP_7_2",mobileVariant:!1,x:165,y:220,font:"htp_desc"},{textID:"HTP_7_3",mobileVariant:!1,x:295,y:190,font:"htp_title"},{textID:"HTP_7_4",mobileVariant:!1,x:295,y:220,font:"htp_desc"},{textID:"HTP_7_5",mobileVariant:!1,x:425,y:190,font:"htp_title"},{textID:"HTP_7_6",mobileVariant:!1,x:425,y:220,font:"htp_desc"}]}];rd.USE_CACHE=!1;rd.USE_ENUM_INDEX=!1;rd.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
fc.DEFAULT_RESOLVER=ra;fc.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";Sb.count=0;ne.escapes=function(){var a=new K;a.set("lt","<");a.set("gt",">");a.set("amp","&");a.set("quot",'"');a.set("apos","'");a.set("nbsp",String.fromCharCode(160));return a}(this);Ma.SCALE=1;ub.BASE_URL="";va.SCALE=1;va.hasInit=!1;va._tmp=1;wa.enabled=!1;t.epsilon=1.0E-8;t.fluidAngularDragFriction=2.5;t.fluidAngularDrag=100;t.fluidVacuumDrag=0.5;t.fluidLinearDrag=0.5;t.collisionSlop=0.2;t.collisionSlopCCD=
0.5;t.distanceThresholdCCD=0.05;t.staticCCDLinearThreshold=0.05;t.staticCCDAngularThreshold=0.005;t.bulletCCDLinearThreshold=0.125;t.bulletCCDAngularThreshold=0.0125;t.dynamicSweepLinearThreshold=17;t.dynamicSweepAngularThreshold=0.6;t.angularCCDSlipScale=0.75;t.arbiterExpirationDelay=6;t.staticFrictionThreshold=2;t.elasticThreshold=20;t.sleepDelay=60;t.linearSleepThreshold=0.2;t.angularSleepThreshold=0.4;t.contactBiasCoef=0.3;t.contactStaticBiasCoef=0.6;t.contactContinuousBiasCoef=0.4;t.contactContinuousStaticBiasCoef=
0.5;t.illConditionedThreshold=2E8;tb.staging="localhost,stolo.com,192.168,hudson.mtvi.com,stash.mtvi.com,nick-q".split(",");Qa.REDIRECT_URL="";Qa.DOMAIN_LIST=[];Qa.REDIRECT_DELAY=3E4;Qa.GET_DOMAINS_DELAY=3E3;Ba.defaultPack="ai";Ba._cache=new K;x.tweens=new Sb;x.DefaultTime=0.4;x.DefaultEase=q.quintOut;sl.bounceDownTemplate=[{to:{y:"+=10"},time:0.05,ease:q.quintOut},{then:{y:"+=0"},time:0.3,ease:q.backOut}];Fb.defaultStiffness=0.8;Fb.defaultDamping=10;Fb.defaultMass=40;Fb.defaultMaxVelocity=0;J.onTemplateAdded=
new Y;J.onActorData=new Y;J._registeredComponents=new K;J._componentMap=new K;J._templateMap=new K;zg.DEFAULTS={};Ag.DEFAULTS={position:{x:0,y:0}};rf.SOUND_CHANNEL="COLLECTABLE";N.ANY_BODY="ANY_BODY";N.DEFAULT="DEFAULT";N.PLAYER="PLAYER";N.FRICTIONER="FRICTIONER";N.FLUID="FLUID";N.LAUNCHER="LAUNCHER";N.PROJECTILE="PROJECTILE";N.COLLECTABLE="COLLECTABLE";N.COLLECTOR="COLLECTOR";N.ACTIVABLE="ACTIVABLE";N.ACTIVATOR="ACTIVATOR";N.PASSTHROUGH="PASSTHROUGH";N.PASSTHROUGHABLE="PASSTHROUGHABLE";N.CHECKPOINT=
"CHECKPOINT";N.CHECKPOINTER="CHECKPOINTER";N.TELEPORTER="TELEPORTER";N.TELEPORTABLE="TELEPORTABLE";N.DAMAGEABLE="DAMAGEABLE";N.DAMAGER="DAMAGER";N.DAMAGEABLE_MOB="DAMAGEABLE_MOB";N.MOB="MOB";N.OBSTACLE="OBSTACLE";N.GROUND="GROUND";N.WALL="WALL";N.BOUNCER="BOUNCER";Bg.DEFAULTS={value:0.1,knockBackX:0,knockBackY:0,cooldown:0.3,charge:-1,enabled:!0,target:N.DAMAGEABLE};le.DefaultFont="debug_font";le.DEFAULTS={center:!0,shape:{},text:""};Dg.DEFAULTS={layer:"default",offset:{x:0,y:0},color:16711680,width:100,
height:100,transparency:0};Eg.DEFAULTS={pack:"",asset:"",layer:"default",offset:{x:0,y:0},width:100,height:100};nb.DEFAULTS={cullTexture:!0,drawTexture:!1};nb.EDITOR_DEFAULTS={pack:"",asset:"",layer:"default",grid:"default",offset:{x:0,y:0},xsize:2,ysize:2,tileWidth:100,tileHeight:100,mapping:[[4],[7],[1],[6],[1],[4],[0],[3],[1],[8],[4],[7],[2],[5],[1],[4]],cornerMode:!1,cullTexture:!0,cache:!0};nb.tileCache=new K;nb.cache=new K;lc.DEFAULTS=nb.DEFAULTS;lc.EDITOR_DEFAULTS={pack:"",asset:"",layer:"default",
offset:{x:0,y:0},width:200,height:200,slices:[],template:[]};lc.cache=new K;Dd.defaultDamping=0;Dd.DEFAULTS={shape:{x:0,y:0,width:0,height:0,padding:{left:0,top:0,right:0,bottom:0},docking:{left:0,top:0,right:0,bottom:0},sensor:!1,material:null,fluid:null,points:[]},offset:{x:0,y:0},contacts:!0,mass:0,massScale:-1,bullet:!1,velocity:{x:0,y:0},impulse:{x:0,y:0},kinematic:!1,enabled:!0};nd.maxSize=5184;Fg.DEFAULTS={};Gg.DEFAULTS={left:!0,right:!0,top:!1,bottom:!0};Hg.DEFAULTS={};sf.defaultResistance=
2;Ig.DEFAULTS={};Ed.SOUND_CHANNEL="DAMAGE";Ed.SOUND_CHANNEL_DEATH="DEATH";Ed.DEFAULTS={maximum:1,knock:1,cooldown:0,invincible:!1,disposeOwner:!1,removePhysics:!0,damageSound:"",invincibleSound:"",deathSound:""};Wd.DEFAULTS={projectile:"",offset:{x:0,y:0},force:100,angle:0,launchSound:"",shotDelay:1};ff.DEFAULTS={projectile:"",projectiles:5,offset:{x:0,y:0},force:400,angle:-90,angleSpread:50,launchSound:"",shotDelay:0};Jg.DEFAULTS={removeAfter:0,stopPhysicOnExplode:!1,velocityRotation:!1,explodeSound:"",
hitSound:"",expire:0,ignoreProjectiles:!0,target:"ANY_BODY"};Kg.DEFAULTS={sequence:null,repeat:!1,speed:1};ul.ComponentMap=function(){var a=new K;a.set("debug",le);a.set("template",Tf);a.set("transform",Ui);a.set("moveTransform",Vi);a.set("cameraTarget",wd);a.set("editorSelection",Cg);a.set("display",X);a.set("image",Wi);a.set("fill",Dg);a.set("animation",yb);a.set("flump",vd);a.set("pattern",Eg);a.set("tiler",nb);a.set("slicer",lc);a.set("text",Xi);a.set("scroller",Uc);a.set("layerScroller",Yi);
a.set("positionLock",Zi);a.set("physics",Dd);a.set("physicsDebug",nd);a.set("passthrough",Fg);a.set("passthroughable",Gg);a.set("frictioner",Hg);a.set("forceField",$i);a.set("airFriction",sf);a.set("spawnPoint",Ig);a.set("damage",Bg);a.set("health",Ed);a.set("collector",Ti);a.set("collectable",rf);a.set("launcher",Wd);a.set("exploder",ff);a.set("projectile",Jg);a.set("checkpoint",zg);a.set("checkpointer",Ag);a.set("platform",Kg);a.set("bouncer",Si);return a}(this);Lg.DEFAULTS={actorTypes:["actors"],
size:2E3};ee.defaultComponentsRegistered=!1;f.internal=!1;f.id_ImmState_ACCEPT=1;f.id_ImmState_IGNORE=2;f.id_ImmState_ALWAYS=4;f.id_GravMassMode_DEFAULT=0;f.id_GravMassMode_FIXED=1;f.id_GravMassMode_SCALED=2;f.id_InertiaMode_DEFAULT=0;f.id_MassMode_DEFAULT=0;f.id_MassMode_FIXED=1;f.id_BodyType_STATIC=1;f.id_BodyType_DYNAMIC=2;f.id_BodyType_KINEMATIC=3;f.id_ListenerType_BODY=0;f.id_ListenerType_CONSTRAINT=1;f.id_ListenerType_INTERACTION=2;f.id_PreFlag_ACCEPT=1;f.id_ListenerType_PRE=3;f.id_CbEvent_BEGIN=
0;f.id_CbEvent_ONGOING=6;f.id_CbEvent_END=1;f.id_InteractionType_COLLISION=1;f.id_CbEvent_WAKE=2;f.id_InteractionType_SENSOR=2;f.id_CbEvent_SLEEP=3;f.id_InteractionType_FLUID=4;f.id_CbEvent_BREAK=4;f.id_InteractionType_ANY=7;f.id_CbEvent_PRE=5;f.id_ShapeType_CIRCLE=0;f.id_ShapeType_POLYGON=1;null==f.CbEvent_PRE&&(f.internal=!0,f.CbEvent_PRE=new Hb,f.internal=!1);da.PRELISTENER=f.CbEvent_PRE;null==f.CbEvent_BEGIN&&(f.internal=!0,f.CbEvent_BEGIN=new Hb,f.internal=!1);da.BEGIN=f.CbEvent_BEGIN;null==
f.CbEvent_END&&(f.internal=!0,f.CbEvent_END=new Hb,f.internal=!1);da.END=f.CbEvent_END;null==f.CbEvent_ONGOING&&(f.internal=!0,f.CbEvent_ONGOING=new Hb,f.internal=!1);da.ONGOING=f.CbEvent_ONGOING;null==f.InteractionType_COLLISION&&(f.internal=!0,f.InteractionType_COLLISION=new Wa,f.internal=!1);ja.COLLISION=f.InteractionType_COLLISION;null==f.InteractionType_SENSOR&&(f.internal=!0,f.InteractionType_SENSOR=new Wa,f.internal=!1);ja.SENSOR=f.InteractionType_SENSOR;null==f.InteractionType_FLUID&&(f.internal=
!0,f.InteractionType_FLUID=new Wa,f.internal=!1);ja.FLUID=f.InteractionType_FLUID;null==f.InteractionType_ANY&&(f.internal=!0,f.InteractionType_ANY=new Wa,f.internal=!1);ja.ANY=f.InteractionType_ANY;zc._materialMap=new K;Mg.enabled=!1;w.onManifestInit=new ad;w._cachedPacks=new K;w._replacedPacks=new K;w._protectedPacks=new K;w._loadingPacks=new K;w._loadingPacksDict=new Sb;w._jsonCache=new K;w._xmlCache=new K;Ka.localesMap=new K;Ka.NOT_FOUND_PREFIX="[(";Ka.NOT_FOUND_SUFFIX=")]";I.CaseSensitive=!1;
I.onChange=new ua;I.onPop=new ua;I.onPush=new ua;I._sceneMap=new K;u.channels=new K;u.soundPollingMap=new K;u.soundPollingSeconds=0.1;u.defaultVolume=1;u.defaultMusicVolume=1;u._volume=u.defaultVolume;u._unmuteVolume=u.defaultVolume;La.DefaultFileName="{{name}}/{{name}}.json";La.DefaultManifest="sprites";La._cachedSpritesheets=new K;La._loadingSpritesheets=new K;U.defaultFontName="default";U.ChangePixelSnapping=!0;U._fontMap=new K;U._fontStylesMap=new K;ya.verbose=!1;Xb.DefaultFPS=12;Xb.BaseIndex=
1;uf.BaseIndex=Xb.BaseIndex;o.galaxyS2=["GT-I9100","SCH-i929","GT-I9105"];o.galaxyS3="GT-I9300,GT-I9300I,GT-I9305,GT-I8190,GT-I8200,SGH-I747".split(",");o.galaxyS4="GT-I9500,GT-I9502,GT-I9505,GT-I9190,GT-I9195,SCH-I545,SPH-L720,SGH-M919,SGH-I337,SM-C101".split(",");o.galaxyTab2=["GT-P5110","GT-P3110","GT-P5100"];o.ie9=["MSIE 9"];o.ie10=["MSIE 10"];o.lowPerformanceDevices=[o.galaxyS2,o.galaxyS3,o.galaxyS4,o.galaxyTab2,o.ie9,o.ie10];o.lowMemoryDevices=[o.galaxyS2,o.galaxyS3,o.galaxyS4,o.galaxyTab2];
o.lowPerformance=!1;o.lowMemory=!1;o.power=80;o.ipadVersion=4;o.scale=1;o.onScaleChange=new ua;W._spritesheets=new Sb;Xa.DefaultMovePPS=100;Xa.DefaultMoveSpeed=1;Xa.DefaultMoveTime=1;Xa.DefaultMoveEase=q.quadInOut;y.sdkVersion="Stolo Haxe v1.1.1";y.platforms={web:{desktop:"NICKWEB_DESKTOP",desktop_flash:"NICKWEB_DESKTOP",mobile:"NICKWEB_MOBILE",tablet:"NICKWEB_TABLET"},app:{android:"ANDROID_MOBILEAPP",ios:"IOS_MOBILEAPP"}};y.debug=!1;y.allowLiveKey=!0;y.useTimezoneOffset=!1;y.isLive=!1;y.isReady=
!1;y.isNewPlayer=!1;y.userIDStorageField="UserId";y.onReady=new ua;dg.DEFAULT_EASING=q.quadInOut;Ab._Interactor=0;Ab._CbType=0;Ab._CbSet=0;Ab._Listener=0;ic.ANY_SHAPE=new Nd;ic.ANY_BODY=new Nd;ic.ANY_COMPOUND=new Nd;ic.ANY_CONSTRAINT=new Nd;mb.UCbSet=new xf;mb.VCbSet=new xf;mb.WCbSet=new xf;mb.UCbType=new Ec;mb.VCbType=new Ec;mb.WCbType=new Ec;xa.internal=!1;xa.COL=1;xa.FLUID=4;xa.SENSOR=2;ac.internal=!1;R.flowpoly=new Pg;R.flowsegs=new Pg;wb.internal=!1;var Ol;null==f.BodyType_STATIC&&(f.internal=
!0,f.BodyType_STATIC=new Jb,f.internal=!1);Ol=f.BodyType_STATIC;var Pl;null==f.BodyType_DYNAMIC&&(f.internal=!0,f.BodyType_DYNAMIC=new Jb,f.internal=!1);Pl=f.BodyType_DYNAMIC;null==f.BodyType_KINEMATIC&&(f.internal=!0,f.BodyType_KINEMATIC=new Jb,f.internal=!1);Ib.types=[null,Ol,Pl,f.BodyType_KINEMATIC];Ea.internal=!1;dc.tmpaabb=new oa;se.internal=!1;Kb.internal=!1;vg.internal=!1;ue.internal=!1;ie.internal=!1;hd.internal=!1;of.internal=!1;pg.internal=!1;qg.internal=!1;og.internal=!1;wg.internal=!1;
Cd.internal=!1;ng.internal=!1;je.internal=!1;mg.internal=!1;wc.main()})();
