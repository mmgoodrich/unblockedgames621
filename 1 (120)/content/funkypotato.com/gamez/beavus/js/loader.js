var LoaderState = {preload: function(){addFocusAndDesktopDetection(); world = this; this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL; this.scale.pageAlignHorizontally = true; this.scale.pageAlignVertically = true; game.stage.backgroundColor = "#FFFFFF"; this.lode = this.add.sprite(this.game.world.centerX,this.game.world.centerY, 'loading1'); this.lode.anchor.setTo(0.5); this.preloadBar = this.add.sprite(20,screenHeight -20, 'preloadBar'); this.preloadBar.width = 760; this.preloadBar.anchor.setTo(0,1); this.load.setPreloadSprite(this.preloadBar); game.load.audio('muTitle', 'assets/msc/muTitle.mp3'); game.load.audio('muIngame', 'assets/msc/muIngame.mp3'); game.load.audio('fxJump', 'assets/sfx/fxJump.wav'); game.load.audio('fxCrunch', 'assets/sfx/fxCrunch.wav'); game.load.audio('fxDD', 'assets/sfx/fxDD.wav'); game.load.audio('fxDing', 'assets/sfx/fxDing.wav'); game.load.audio('fxBump', 'assets/sfx/fxBump.wav'); game.load.audio('fxHit', 'assets/sfx/fxHit.wav'); game.load.image('plat', 'assets/img/plat.gif'); game.load.image('spikes', 'assets/img/spikes.png'); game.load.image('b1', 'assets/img/b1.png'); game.load.image('b1s', 'assets/img/shadow1.png'); game.load.image('bg1', 'assets/img/bg1.png'); game.load.image('g1', 'assets/img/g1.png'); game.load.image('g2', 'assets/img/g2.png'); game.load.image('g3', 'assets/img/g3.png'); game.load.image('g4', 'assets/img/g4.png'); game.load.image('g5', 'assets/img/g5.png'); game.load.image('g6', 'assets/img/g6.png'); game.load.image('g7', 'assets/img/g7.png'); game.load.image('g8', 'assets/img/g8.png'); game.load.image('g10', 'assets/img/g10.png'); game.load.image('g11', 'assets/img/g11.png'); game.load.image('g12', 'assets/img/g12.png'); game.load.image('g13', 'assets/img/g13.png'); game.load.image('btnSettings', 'assets/img/btnSettings.png'); game.load.image('btnHome', 'assets/img/btnHome.png'); game.load.image('pauseBG', 'assets/img/pauseBG.png'); game.load.image('goScreen', 'assets/img/goScreen.png'); game.load.image('btnNextLevel', 'assets/img/btnNextLevel.png'); game.load.spritesheet('btnLS', 'assets/img/btnLS.png', 100, 100); game.load.spritesheet('btnMu', 'assets/img/btnMu.png', 100, 100); game.load.spritesheet('btnFX', 'assets/img/btnFX.png', 100, 100); game.load.spritesheet('bLogo', 'assets/img/bLogo.png', 720, 200); game.load.spritesheet('btnPlay', 'assets/img/btnPlay.png', 220, 110); game.load.spritesheet('tut1M', 'assets/img/tut1M.png', 520, 140); game.load.spritesheet('tut1D', 'assets/img/tut1D.png', 520, 140); game.load.spritesheet('tut2', 'assets/img/tut2.png', 140, 150); game.load.spritesheet('sprt', 'assets/img/sprt.png', 160, 160); game.load.spritesheet('log', 'assets/img/log.png', 100, 100); game.load.spritesheet('xit', 'assets/img/xit.png', 150, 150); game.load.spritesheet('bumper', 'assets/img/bumper.png', 120, 110); }, create: function() {world.lode.destroy(); clickFX = game.add.audio('fxJump'); var btnPlay = world.game.add.sprite(this.game.world.centerX,this.game.world.centerY, 'btnPlay'); btnPlay.anchor.setTo(0.5, 0.5); btnPlay.animations.add('idle', null, 8); btnPlay.play('idle',null,true); btnPlay.inputEnabled = true; btnPlay.events.onInputUp.add(startGame, this); var style = { font: 'gameFont', fill: '#625E44', wordWrap: false, wordWrapWidth: null, align: 'center', backgroundColor: null }; var t = game.add.text(0, 0, '1234567890',style); t.fontSize = 50; t.addColor('#625E44'); t.anchor.setTo(0.5); t.visible = false; loadedAssets = true; }, update: function(){} }; function startGame(pointer){newState(); }