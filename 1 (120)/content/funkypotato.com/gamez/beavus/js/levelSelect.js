var lsButs; var LevelSelectState = {preload: function(){world = this; settings(this); game.stage.backgroundColor = "#FFFFFF"; }, create: function() {lsButs = []; setMuFXBtns(); addLSButtons(); game.input.onDown.add(lsClick); }, update: function(){} }; function addLSButtons(){var xx = 0; var yy = 0; var lnr = 1; for (var i = 0; i < 16; i++) {var lsBut = world.game.add.sprite(220 + xx * 120, 75 + yy * 100, 'btnLS'); lsBut.anchor.setTo(0.5); if(lnr <= game.ldat){lsBut.lnr = lnr; var style = { font: '90px gameFont', fill: '#625E44', wordWrap: false, wordWrapWidth: null, align: 'center', backgroundColor: null }; var t = game.add.text(lsBut.x, lsBut.y, lnr,style); t.fontSize = 50; t.addColor('#625E44'); t.anchor.setTo(0.5); lsButs.push(lsBut); } else{lsBut.frame = 1; } lnr += 1; xx++; if(xx > 3){xx = 0; yy += 1; } } } function lsClick(pointer){if(rotDevice){return;} for (var i = 0; i < lsButs.length; i++) {var b = lsButs[i]; if(b.getBounds().contains(pointer.x, pointer.y)){clickSound(); levl = b.lnr; newState(); } } }